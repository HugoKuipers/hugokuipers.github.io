(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const b of document.querySelectorAll('link[rel="modulepreload"]'))e(b);new MutationObserver(b=>{for(const y of b)if(y.type==="childList")for(const p of y.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&e(p)}).observe(document,{childList:!0,subtree:!0});function T(b){const y={};return b.integrity&&(y.integrity=b.integrity),b.referrerpolicy&&(y.referrerPolicy=b.referrerpolicy),b.crossorigin==="use-credentials"?y.credentials="include":b.crossorigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function e(b){if(b.ep)return;b.ep=!0;const y=T(b);fetch(b.href,y)}})();const rr=[255,0,0],As=[200,0,0],pn=[247,52,43],Wi=[153,117,112],Hi=[217,33,33],Rs=[0,255,0],ks=[200,200,0],zi=[144,238,144],qi=[3,192,74],Xi=[74,176,150],Yi=[255,145,164],Qi=[41,110,1],Eo=[152,208,35],Zi=[65,245,25],$i=[70,125,93],Ki=[150,221,126],Ps=[0,0,255],xs=[50,148,235],zn=[163,214,251],Co=[14,135,204],Os=[11,11,69],Ji=[0,90,156],ea=[192,192,195],Qn=[152,118,82],yn=[64,224,208],hr=[255,255,255],Gt=[0,0,0],ta=[15],Zn=[10],Ls=[20],Ds=[55],ra=[100],Is=[120],Bs=[90,90,90],na=[255,255,0],oa=[255,191,0],gn=[255,223,0],Us=[255,217,61],go=[255,179,0],nn=[255,150,45],qn=[255,69,0],Rn=[251,139,35],Ns=[197,177,160],sa=[101,67,33],$n=[200,0,200],ia=[100,0,100],aa=[60,0,60],Fs=[177,156,217],la=[177,156,217,155];var Bn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ua(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}function Un(A){throw new Error('Could not dynamically require "'+A+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Gs={exports:{}};/*! p5.js v1.4.2 July 21, 2022 */(function(A,c){(function(T){A.exports=T()})(function(){var T;return function e(b,y,p){function n(f,l){if(!y[f]){if(!b[f]){var o=typeof Un=="function"&&Un;if(!l&&o)return o(f,!0);if(h)return h(f,!0);var t=new Error("Cannot find module '"+f+"'");throw t.code="MODULE_NOT_FOUND",t}var r=y[f]={exports:{}};b[f][0].call(r.exports,function(s){return n(b[f][1][s]||s)},r,r.exports,e,b,y,p)}return y[f].exports}for(var h=typeof Un=="function"&&Un,a=0;a<p.length;a++)n(p[a]);return n}({1:[function(e,b,y){y.byteLength=function(r){var s=o(r),i=s[0],d=s[1];return 3*(i+d)/4-d},y.toByteArray=function(r){var s,i,d=o(r),g=d[0],v=d[1],x=new h(function(M,D){return 3*(M+D)/4-D}(g,v)),S=0,E=0<v?g-4:g;for(i=0;i<E;i+=4)s=n[r.charCodeAt(i)]<<18|n[r.charCodeAt(i+1)]<<12|n[r.charCodeAt(i+2)]<<6|n[r.charCodeAt(i+3)],x[S++]=s>>16&255,x[S++]=s>>8&255,x[S++]=255&s;return v===2&&(s=n[r.charCodeAt(i)]<<2|n[r.charCodeAt(i+1)]>>4,x[S++]=255&s),v===1&&(s=n[r.charCodeAt(i)]<<10|n[r.charCodeAt(i+1)]<<4|n[r.charCodeAt(i+2)]>>2,x[S++]=s>>8&255,x[S++]=255&s),x},y.fromByteArray=function(r){for(var s,i=r.length,d=i%3,g=[],v=0,x=i-d;v<x;v+=16383)g.push(t(r,v,x<v+16383?x:v+16383));return d==1?(s=r[i-1],g.push(p[s>>2]+p[s<<4&63]+"==")):d==2&&(s=(r[i-2]<<8)+r[i-1],g.push(p[s>>10]+p[s>>4&63]+p[s<<2&63]+"=")),g.join("")};for(var p=[],n=[],h=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,l=a.length;f<l;++f)p[f]=a[f],n[a.charCodeAt(f)]=f;function o(r){var s=r.length;if(0<s%4)throw new Error("Invalid string. Length must be a multiple of 4");var i=r.indexOf("=");return i===-1&&(i=s),[i,i===s?0:4-i%4]}function t(r,s,i){for(var d,g,v=[],x=s;x<i;x+=3)d=(r[x]<<16&16711680)+(r[x+1]<<8&65280)+(255&r[x+2]),v.push(p[(g=d)>>18&63]+p[g>>12&63]+p[g>>6&63]+p[63&g]);return v.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},{}],2:[function(e,b,y){},{}],3:[function(e,b,y){arguments[4][2][0].apply(y,arguments)},{dup:2}],4:[function(e,b,y){(function(o){var n=e("base64-js"),h=e("ieee754"),a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;y.Buffer=o,y.SlowBuffer=function(P){return+P!=P&&(P=0),o.alloc(+P)},y.INSPECT_MAX_BYTES=50;var f=2147483647;function l(P){if(f<P)throw new RangeError('The value "'+P+'" is invalid for option "size"');var N=new Uint8Array(P);return Object.setPrototypeOf(N,o.prototype),N}function o(P,N,z){if(typeof P!="number")return t(P,N,z);if(typeof N=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return s(P)}function t(P,N,z){if(typeof P=="string")return function(K,xe){if(typeof xe=="string"&&xe!==""||(xe="utf8"),!o.isEncoding(xe))throw new TypeError("Unknown encoding: "+xe);var ee=0|g(K,xe),ge=l(ee),fe=ge.write(K,xe);return fe!==ee&&(ge=ge.slice(0,fe)),ge}(P,N);if(ArrayBuffer.isView(P))return i(P);if(P==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P);if(Re(P,ArrayBuffer)||P&&Re(P.buffer,ArrayBuffer))return function(K,xe,ee){if(xe<0||K.byteLength<xe)throw new RangeError('"offset" is outside of buffer bounds');if(K.byteLength<xe+(ee||0))throw new RangeError('"length" is outside of buffer bounds');var ge;return ge=xe===void 0&&ee===void 0?new Uint8Array(K):ee===void 0?new Uint8Array(K,xe):new Uint8Array(K,xe,ee),Object.setPrototypeOf(ge,o.prototype),ge}(P,N,z);if(typeof P=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Q=P.valueOf&&P.valueOf();if(Q!=null&&Q!==P)return o.from(Q,N,z);var oe=function(K){if(o.isBuffer(K)){var xe=0|d(K.length),ee=l(xe);return ee.length===0||K.copy(ee,0,0,xe),ee}if(K.length!==void 0)return typeof K.length!="number"||ve(K.length)?l(0):i(K);if(K.type==="Buffer"&&Array.isArray(K.data))return i(K.data)}(P);if(oe)return oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof P[Symbol.toPrimitive]=="function")return o.from(P[Symbol.toPrimitive]("string"),N,z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P)}function r(P){if(typeof P!="number")throw new TypeError('"size" argument must be of type number');if(P<0)throw new RangeError('The value "'+P+'" is invalid for option "size"')}function s(P){return r(P),l(P<0?0:0|d(P))}function i(P){for(var N=P.length<0?0:0|d(P.length),z=l(N),Q=0;Q<N;Q+=1)z[Q]=255&P[Q];return z}function d(P){if(f<=P)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return 0|P}function g(P,N){if(o.isBuffer(P))return P.length;if(ArrayBuffer.isView(P)||Re(P,ArrayBuffer))return P.byteLength;if(typeof P!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof P);var z=P.length,Q=2<arguments.length&&arguments[2]===!0;if(!Q&&z===0)return 0;for(var oe=!1;;)switch(N){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return me(P).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*z;case"hex":return z>>>1;case"base64":return _e(P).length;default:if(oe)return Q?-1:me(P).length;N=(""+N).toLowerCase(),oe=!0}}function v(P,N,z){var Q=P[N];P[N]=P[z],P[z]=Q}function x(P,N,z,Q,oe){if(P.length===0)return-1;if(typeof z=="string"?(Q=z,z=0):2147483647<z?z=2147483647:z<-2147483648&&(z=-2147483648),ve(z=+z)&&(z=oe?0:P.length-1),z<0&&(z=P.length+z),z>=P.length){if(oe)return-1;z=P.length-1}else if(z<0){if(!oe)return-1;z=0}if(typeof N=="string"&&(N=o.from(N,Q)),o.isBuffer(N))return N.length===0?-1:S(P,N,z,Q,oe);if(typeof N=="number")return N&=255,typeof Uint8Array.prototype.indexOf=="function"?oe?Uint8Array.prototype.indexOf.call(P,N,z):Uint8Array.prototype.lastIndexOf.call(P,N,z):S(P,[N],z,Q,oe);throw new TypeError("val must be string, number or Buffer")}function S(P,N,z,Q,oe){var K,xe=1,ee=P.length,ge=N.length;if(Q!==void 0&&((Q=String(Q).toLowerCase())==="ucs2"||Q==="ucs-2"||Q==="utf16le"||Q==="utf-16le")){if(P.length<2||N.length<2)return-1;ee/=xe=2,ge/=2,z/=2}function fe(Te,Ge){return xe===1?Te[Ge]:Te.readUInt16BE(Ge*xe)}if(oe){var le=-1;for(K=z;K<ee;K++)if(fe(P,K)===fe(N,le===-1?0:K-le)){if(le===-1&&(le=K),K-le+1===ge)return le*xe}else le!==-1&&(K-=K-le),le=-1}else for(ee<z+ge&&(z=ee-ge),K=z;0<=K;K--){for(var Ee=!0,Ae=0;Ae<ge;Ae++)if(fe(P,K+Ae)!==fe(N,Ae)){Ee=!1;break}if(Ee)return K}return-1}function E(P,N,z,Q){z=Number(z)||0;var oe=P.length-z;Q?oe<(Q=Number(Q))&&(Q=oe):Q=oe;var K=N.length;K/2<Q&&(Q=K/2);for(var xe=0;xe<Q;++xe){var ee=parseInt(N.substr(2*xe,2),16);if(ve(ee))return xe;P[z+xe]=ee}return xe}function M(P,N,z,Q){return he(function(oe){for(var K=[],xe=0;xe<oe.length;++xe)K.push(255&oe.charCodeAt(xe));return K}(N),P,z,Q)}function D(P,N,z,Q){return he(function(oe,K){for(var xe,ee,ge,fe=[],le=0;le<oe.length&&!((K-=2)<0);++le)xe=oe.charCodeAt(le),ee=xe>>8,ge=xe%256,fe.push(ge),fe.push(ee);return fe}(N,P.length-z),P,z,Q)}function I(P,N,z){return N===0&&z===P.length?n.fromByteArray(P):n.fromByteArray(P.slice(N,z))}function R(P,N,z){z=Math.min(P.length,z);for(var Q=[],oe=N;oe<z;){var K,xe,ee,ge,fe=P[oe],le=null,Ee=239<fe?4:223<fe?3:191<fe?2:1;if(oe+Ee<=z)switch(Ee){case 1:fe<128&&(le=fe);break;case 2:(192&(K=P[oe+1]))==128&&127<(ge=(31&fe)<<6|63&K)&&(le=ge);break;case 3:K=P[oe+1],xe=P[oe+2],(192&K)==128&&(192&xe)==128&&2047<(ge=(15&fe)<<12|(63&K)<<6|63&xe)&&(ge<55296||57343<ge)&&(le=ge);break;case 4:K=P[oe+1],xe=P[oe+2],ee=P[oe+3],(192&K)==128&&(192&xe)==128&&(192&ee)==128&&65535<(ge=(15&fe)<<18|(63&K)<<12|(63&xe)<<6|63&ee)&&ge<1114112&&(le=ge)}le===null?(le=65533,Ee=1):65535<le&&(le-=65536,Q.push(le>>>10&1023|55296),le=56320|1023&le),Q.push(le),oe+=Ee}return function(Ae){var Te=Ae.length;if(Te<=L)return String.fromCharCode.apply(String,Ae);for(var Ge="",Ze=0;Ze<Te;)Ge+=String.fromCharCode.apply(String,Ae.slice(Ze,Ze+=L));return Ge}(Q)}y.kMaxLength=f,(o.TYPED_ARRAY_SUPPORT=function(){try{var P=new Uint8Array(1),N={foo:function(){return 42}};return Object.setPrototypeOf(N,Uint8Array.prototype),Object.setPrototypeOf(P,N),P.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(P,N,z){return t(P,N,z)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(P,N,z){return oe=N,K=z,r(Q=P),Q<=0?l(Q):oe!==void 0?typeof K=="string"?l(Q).fill(oe,K):l(Q).fill(oe):l(Q);var Q,oe,K},o.allocUnsafe=function(P){return s(P)},o.allocUnsafeSlow=function(P){return s(P)},o.isBuffer=function(P){return P!=null&&P._isBuffer===!0&&P!==o.prototype},o.compare=function(P,N){if(Re(P,Uint8Array)&&(P=o.from(P,P.offset,P.byteLength)),Re(N,Uint8Array)&&(N=o.from(N,N.offset,N.byteLength)),!o.isBuffer(P)||!o.isBuffer(N))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(P===N)return 0;for(var z=P.length,Q=N.length,oe=0,K=Math.min(z,Q);oe<K;++oe)if(P[oe]!==N[oe]){z=P[oe],Q=N[oe];break}return z<Q?-1:Q<z?1:0},o.isEncoding=function(P){switch(String(P).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(P,N){if(!Array.isArray(P))throw new TypeError('"list" argument must be an Array of Buffers');if(P.length===0)return o.alloc(0);var z;if(N===void 0)for(z=N=0;z<P.length;++z)N+=P[z].length;var Q=o.allocUnsafe(N),oe=0;for(z=0;z<P.length;++z){var K=P[z];if(Re(K,Uint8Array)&&(K=o.from(K)),!o.isBuffer(K))throw new TypeError('"list" argument must be an Array of Buffers');K.copy(Q,oe),oe+=K.length}return Q},o.byteLength=g,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var P=this.length;if(P%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var N=0;N<P;N+=2)v(this,N,N+1);return this},o.prototype.swap32=function(){var P=this.length;if(P%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var N=0;N<P;N+=4)v(this,N,N+3),v(this,N+1,N+2);return this},o.prototype.swap64=function(){var P=this.length;if(P%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var N=0;N<P;N+=8)v(this,N,N+7),v(this,N+1,N+6),v(this,N+2,N+5),v(this,N+3,N+4);return this},o.prototype.toLocaleString=o.prototype.toString=function(){var P=this.length;return P===0?"":arguments.length===0?R(this,0,P):function(N,z,Q){var oe=!1;if((z===void 0||z<0)&&(z=0),z>this.length||((Q===void 0||Q>this.length)&&(Q=this.length),Q<=0)||(Q>>>=0)<=(z>>>=0))return"";for(N=N||"utf8";;)switch(N){case"hex":return G(this,z,Q);case"utf8":case"utf-8":return R(this,z,Q);case"ascii":return U(this,z,Q);case"latin1":case"binary":return O(this,z,Q);case"base64":return I(this,z,Q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,z,Q);default:if(oe)throw new TypeError("Unknown encoding: "+N);N=(N+"").toLowerCase(),oe=!0}}.apply(this,arguments)},o.prototype.equals=function(P){if(!o.isBuffer(P))throw new TypeError("Argument must be a Buffer");return this===P||o.compare(this,P)===0},o.prototype.inspect=function(){var P="",N=y.INSPECT_MAX_BYTES;return P=this.toString("hex",0,N).replace(/(.{2})/g,"$1 ").trim(),this.length>N&&(P+=" ... "),"<Buffer "+P+">"},a&&(o.prototype[a]=o.prototype.inspect),o.prototype.compare=function(P,N,z,Q,oe){if(Re(P,Uint8Array)&&(P=o.from(P,P.offset,P.byteLength)),!o.isBuffer(P))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof P);if(N===void 0&&(N=0),z===void 0&&(z=P?P.length:0),Q===void 0&&(Q=0),oe===void 0&&(oe=this.length),N<0||z>P.length||Q<0||oe>this.length)throw new RangeError("out of range index");if(oe<=Q&&z<=N)return 0;if(oe<=Q)return-1;if(z<=N)return 1;if(this===P)return 0;for(var K=(oe>>>=0)-(Q>>>=0),xe=(z>>>=0)-(N>>>=0),ee=Math.min(K,xe),ge=this.slice(Q,oe),fe=P.slice(N,z),le=0;le<ee;++le)if(ge[le]!==fe[le]){K=ge[le],xe=fe[le];break}return K<xe?-1:xe<K?1:0},o.prototype.includes=function(P,N,z){return this.indexOf(P,N,z)!==-1},o.prototype.indexOf=function(P,N,z){return x(this,P,N,z,!0)},o.prototype.lastIndexOf=function(P,N,z){return x(this,P,N,z,!1)},o.prototype.write=function(P,N,z,Q){if(N===void 0)Q="utf8",z=this.length,N=0;else if(z===void 0&&typeof N=="string")Q=N,z=this.length,N=0;else{if(!isFinite(N))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");N>>>=0,isFinite(z)?(z>>>=0,Q===void 0&&(Q="utf8")):(Q=z,z=void 0)}var oe=this.length-N;if((z===void 0||oe<z)&&(z=oe),0<P.length&&(z<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q=Q||"utf8";for(var K,xe,ee,ge,fe,le,Ee=!1;;)switch(Q){case"hex":return E(this,P,N,z);case"utf8":case"utf-8":return fe=N,le=z,he(me(P,(ge=this).length-fe),ge,fe,le);case"ascii":return M(this,P,N,z);case"latin1":case"binary":return M(this,P,N,z);case"base64":return K=this,xe=N,ee=z,he(_e(P),K,xe,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,P,N,z);default:if(Ee)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase(),Ee=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;function U(P,N,z){var Q="";z=Math.min(P.length,z);for(var oe=N;oe<z;++oe)Q+=String.fromCharCode(127&P[oe]);return Q}function O(P,N,z){var Q="";z=Math.min(P.length,z);for(var oe=N;oe<z;++oe)Q+=String.fromCharCode(P[oe]);return Q}function G(P,N,z){var Q=P.length;(!N||N<0)&&(N=0),(!z||z<0||Q<z)&&(z=Q);for(var oe="",K=N;K<z;++K)oe+=ye[P[K]];return oe}function V(P,N,z){for(var Q=P.slice(N,z),oe="",K=0;K<Q.length;K+=2)oe+=String.fromCharCode(Q[K]+256*Q[K+1]);return oe}function te(P,N,z){if(P%1!=0||P<0)throw new RangeError("offset is not uint");if(z<P+N)throw new RangeError("Trying to access beyond buffer length")}function ne(P,N,z,Q,oe,K){if(!o.isBuffer(P))throw new TypeError('"buffer" argument must be a Buffer instance');if(oe<N||N<K)throw new RangeError('"value" argument is out of bounds');if(z+Q>P.length)throw new RangeError("Index out of range")}function $(P,N,z,Q){if(z+Q>P.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function se(P,N,z,Q,oe){return N=+N,z>>>=0,oe||$(P,0,z,4),h.write(P,N,z,Q,23,4),z+4}function J(P,N,z,Q,oe){return N=+N,z>>>=0,oe||$(P,0,z,8),h.write(P,N,z,Q,52,8),z+8}o.prototype.slice=function(P,N){var z=this.length;(P=~~P)<0?(P+=z)<0&&(P=0):z<P&&(P=z),(N=N===void 0?z:~~N)<0?(N+=z)<0&&(N=0):z<N&&(N=z),N<P&&(N=P);var Q=this.subarray(P,N);return Object.setPrototypeOf(Q,o.prototype),Q},o.prototype.readUIntLE=function(P,N,z){P>>>=0,N>>>=0,z||te(P,N,this.length);for(var Q=this[P],oe=1,K=0;++K<N&&(oe*=256);)Q+=this[P+K]*oe;return Q},o.prototype.readUIntBE=function(P,N,z){P>>>=0,N>>>=0,z||te(P,N,this.length);for(var Q=this[P+--N],oe=1;0<N&&(oe*=256);)Q+=this[P+--N]*oe;return Q},o.prototype.readUInt8=function(P,N){return P>>>=0,N||te(P,1,this.length),this[P]},o.prototype.readUInt16LE=function(P,N){return P>>>=0,N||te(P,2,this.length),this[P]|this[P+1]<<8},o.prototype.readUInt16BE=function(P,N){return P>>>=0,N||te(P,2,this.length),this[P]<<8|this[P+1]},o.prototype.readUInt32LE=function(P,N){return P>>>=0,N||te(P,4,this.length),(this[P]|this[P+1]<<8|this[P+2]<<16)+16777216*this[P+3]},o.prototype.readUInt32BE=function(P,N){return P>>>=0,N||te(P,4,this.length),16777216*this[P]+(this[P+1]<<16|this[P+2]<<8|this[P+3])},o.prototype.readIntLE=function(P,N,z){P>>>=0,N>>>=0,z||te(P,N,this.length);for(var Q=this[P],oe=1,K=0;++K<N&&(oe*=256);)Q+=this[P+K]*oe;return(oe*=128)<=Q&&(Q-=Math.pow(2,8*N)),Q},o.prototype.readIntBE=function(P,N,z){P>>>=0,N>>>=0,z||te(P,N,this.length);for(var Q=N,oe=1,K=this[P+--Q];0<Q&&(oe*=256);)K+=this[P+--Q]*oe;return(oe*=128)<=K&&(K-=Math.pow(2,8*N)),K},o.prototype.readInt8=function(P,N){return P>>>=0,N||te(P,1,this.length),128&this[P]?-1*(255-this[P]+1):this[P]},o.prototype.readInt16LE=function(P,N){P>>>=0,N||te(P,2,this.length);var z=this[P]|this[P+1]<<8;return 32768&z?4294901760|z:z},o.prototype.readInt16BE=function(P,N){P>>>=0,N||te(P,2,this.length);var z=this[P+1]|this[P]<<8;return 32768&z?4294901760|z:z},o.prototype.readInt32LE=function(P,N){return P>>>=0,N||te(P,4,this.length),this[P]|this[P+1]<<8|this[P+2]<<16|this[P+3]<<24},o.prototype.readInt32BE=function(P,N){return P>>>=0,N||te(P,4,this.length),this[P]<<24|this[P+1]<<16|this[P+2]<<8|this[P+3]},o.prototype.readFloatLE=function(P,N){return P>>>=0,N||te(P,4,this.length),h.read(this,P,!0,23,4)},o.prototype.readFloatBE=function(P,N){return P>>>=0,N||te(P,4,this.length),h.read(this,P,!1,23,4)},o.prototype.readDoubleLE=function(P,N){return P>>>=0,N||te(P,8,this.length),h.read(this,P,!0,52,8)},o.prototype.readDoubleBE=function(P,N){return P>>>=0,N||te(P,8,this.length),h.read(this,P,!1,52,8)},o.prototype.writeUIntLE=function(P,N,z,Q){P=+P,N>>>=0,z>>>=0,Q||ne(this,P,N,z,Math.pow(2,8*z)-1,0);var oe=1,K=0;for(this[N]=255&P;++K<z&&(oe*=256);)this[N+K]=P/oe&255;return N+z},o.prototype.writeUIntBE=function(P,N,z,Q){P=+P,N>>>=0,z>>>=0,Q||ne(this,P,N,z,Math.pow(2,8*z)-1,0);var oe=z-1,K=1;for(this[N+oe]=255&P;0<=--oe&&(K*=256);)this[N+oe]=P/K&255;return N+z},o.prototype.writeUInt8=function(P,N,z){return P=+P,N>>>=0,z||ne(this,P,N,1,255,0),this[N]=255&P,N+1},o.prototype.writeUInt16LE=function(P,N,z){return P=+P,N>>>=0,z||ne(this,P,N,2,65535,0),this[N]=255&P,this[N+1]=P>>>8,N+2},o.prototype.writeUInt16BE=function(P,N,z){return P=+P,N>>>=0,z||ne(this,P,N,2,65535,0),this[N]=P>>>8,this[N+1]=255&P,N+2},o.prototype.writeUInt32LE=function(P,N,z){return P=+P,N>>>=0,z||ne(this,P,N,4,4294967295,0),this[N+3]=P>>>24,this[N+2]=P>>>16,this[N+1]=P>>>8,this[N]=255&P,N+4},o.prototype.writeUInt32BE=function(P,N,z){return P=+P,N>>>=0,z||ne(this,P,N,4,4294967295,0),this[N]=P>>>24,this[N+1]=P>>>16,this[N+2]=P>>>8,this[N+3]=255&P,N+4},o.prototype.writeIntLE=function(P,N,z,Q){if(P=+P,N>>>=0,!Q){var oe=Math.pow(2,8*z-1);ne(this,P,N,z,oe-1,-oe)}var K=0,xe=1,ee=0;for(this[N]=255&P;++K<z&&(xe*=256);)P<0&&ee===0&&this[N+K-1]!==0&&(ee=1),this[N+K]=(P/xe>>0)-ee&255;return N+z},o.prototype.writeIntBE=function(P,N,z,Q){if(P=+P,N>>>=0,!Q){var oe=Math.pow(2,8*z-1);ne(this,P,N,z,oe-1,-oe)}var K=z-1,xe=1,ee=0;for(this[N+K]=255&P;0<=--K&&(xe*=256);)P<0&&ee===0&&this[N+K+1]!==0&&(ee=1),this[N+K]=(P/xe>>0)-ee&255;return N+z},o.prototype.writeInt8=function(P,N,z){return P=+P,N>>>=0,z||ne(this,P,N,1,127,-128),P<0&&(P=255+P+1),this[N]=255&P,N+1},o.prototype.writeInt16LE=function(P,N,z){return P=+P,N>>>=0,z||ne(this,P,N,2,32767,-32768),this[N]=255&P,this[N+1]=P>>>8,N+2},o.prototype.writeInt16BE=function(P,N,z){return P=+P,N>>>=0,z||ne(this,P,N,2,32767,-32768),this[N]=P>>>8,this[N+1]=255&P,N+2},o.prototype.writeInt32LE=function(P,N,z){return P=+P,N>>>=0,z||ne(this,P,N,4,2147483647,-2147483648),this[N]=255&P,this[N+1]=P>>>8,this[N+2]=P>>>16,this[N+3]=P>>>24,N+4},o.prototype.writeInt32BE=function(P,N,z){return P=+P,N>>>=0,z||ne(this,P,N,4,2147483647,-2147483648),P<0&&(P=4294967295+P+1),this[N]=P>>>24,this[N+1]=P>>>16,this[N+2]=P>>>8,this[N+3]=255&P,N+4},o.prototype.writeFloatLE=function(P,N,z){return se(this,P,N,!0,z)},o.prototype.writeFloatBE=function(P,N,z){return se(this,P,N,!1,z)},o.prototype.writeDoubleLE=function(P,N,z){return J(this,P,N,!0,z)},o.prototype.writeDoubleBE=function(P,N,z){return J(this,P,N,!1,z)},o.prototype.copy=function(P,N,z,Q){if(!o.isBuffer(P))throw new TypeError("argument should be a Buffer");if(z=z||0,Q||Q===0||(Q=this.length),N>=P.length&&(N=P.length),N=N||0,0<Q&&Q<z&&(Q=z),Q===z||P.length===0||this.length===0)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length),P.length-N<Q-z&&(Q=P.length-N+z);var oe=Q-z;if(this===P&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(N,z,Q);else if(this===P&&z<N&&N<Q)for(var K=oe-1;0<=K;--K)P[K+N]=this[K+z];else Uint8Array.prototype.set.call(P,this.subarray(z,Q),N);return oe},o.prototype.fill=function(P,N,z,Q){if(typeof P=="string"){if(typeof N=="string"?(Q=N,N=0,z=this.length):typeof z=="string"&&(Q=z,z=this.length),Q!==void 0&&typeof Q!="string")throw new TypeError("encoding must be a string");if(typeof Q=="string"&&!o.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);if(P.length===1){var oe=P.charCodeAt(0);(Q==="utf8"&&oe<128||Q==="latin1")&&(P=oe)}}else typeof P=="number"?P&=255:typeof P=="boolean"&&(P=Number(P));if(N<0||this.length<N||this.length<z)throw new RangeError("Out of range index");if(z<=N)return this;var K;if(N>>>=0,z=z===void 0?this.length:z>>>0,typeof(P=P||0)=="number")for(K=N;K<z;++K)this[K]=P;else{var xe=o.isBuffer(P)?P:o.from(P,Q),ee=xe.length;if(ee===0)throw new TypeError('The value "'+P+'" is invalid for argument "value"');for(K=0;K<z-N;++K)this[K+N]=xe[K%ee]}return this};var ue=/[^+/0-9A-Za-z-_]/g;function me(P,N){var z;N=N||1/0;for(var Q=P.length,oe=null,K=[],xe=0;xe<Q;++xe){if(55295<(z=P.charCodeAt(xe))&&z<57344){if(!oe){if(56319<z){-1<(N-=3)&&K.push(239,191,189);continue}if(xe+1===Q){-1<(N-=3)&&K.push(239,191,189);continue}oe=z;continue}if(z<56320){-1<(N-=3)&&K.push(239,191,189),oe=z;continue}z=65536+(oe-55296<<10|z-56320)}else oe&&-1<(N-=3)&&K.push(239,191,189);if(oe=null,z<128){if(--N<0)break;K.push(z)}else if(z<2048){if((N-=2)<0)break;K.push(z>>6|192,63&z|128)}else if(z<65536){if((N-=3)<0)break;K.push(z>>12|224,z>>6&63|128,63&z|128)}else{if(!(z<1114112))throw new Error("Invalid code point");if((N-=4)<0)break;K.push(z>>18|240,z>>12&63|128,z>>6&63|128,63&z|128)}}return K}function _e(P){return n.toByteArray(function(N){if((N=(N=N.split("=")[0]).trim().replace(ue,"")).length<2)return"";for(;N.length%4!=0;)N+="=";return N}(P))}function he(P,N,z,Q){for(var oe=0;oe<Q&&!(oe+z>=N.length||oe>=P.length);++oe)N[oe+z]=P[oe];return oe}function Re(P,N){return P instanceof N||P!=null&&P.constructor!=null&&P.constructor.name!=null&&P.constructor.name===N.name}function ve(P){return P!=P}var ye=function(){for(var P="0123456789abcdef",N=new Array(256),z=0;z<16;++z)for(var Q=16*z,oe=0;oe<16;++oe)N[Q+oe]=P[z]+P[oe];return N}()}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:236}],5:[function(e,b,y){b.exports=function(p){if(typeof p!="function")throw TypeError(String(p)+" is not a function");return p}},{}],6:[function(e,b,y){var p=e("../internals/is-object");b.exports=function(n){if(!p(n)&&n!==null)throw TypeError("Can't set "+String(n)+" as a prototype");return n}},{"../internals/is-object":74}],7:[function(e,b,y){var p=e("../internals/well-known-symbol"),n=e("../internals/object-create"),h=e("../internals/object-define-property"),a=p("unscopables"),f=Array.prototype;f[a]==null&&h.f(f,a,{configurable:!0,value:n(null)}),b.exports=function(l){f[a][l]=!0}},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],8:[function(e,b,y){var p=e("../internals/string-multibyte").charAt;b.exports=function(n,h,a){return h+(a?p(n,h).length:1)}},{"../internals/string-multibyte":123}],9:[function(e,b,y){b.exports=function(p,n,h){if(!(p instanceof n))throw TypeError("Incorrect "+(h?h+" ":"")+"invocation");return p}},{}],10:[function(e,b,y){var p=e("../internals/is-object");b.exports=function(n){if(!p(n))throw TypeError(String(n)+" is not an object");return n}},{"../internals/is-object":74}],11:[function(e,b,y){b.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(e,b,y){function p($){return l($)&&o(ne,t($))}var n,h=e("../internals/array-buffer-native"),a=e("../internals/descriptors"),f=e("../internals/global"),l=e("../internals/is-object"),o=e("../internals/has"),t=e("../internals/classof"),r=e("../internals/create-non-enumerable-property"),s=e("../internals/redefine"),i=e("../internals/object-define-property").f,d=e("../internals/object-get-prototype-of"),g=e("../internals/object-set-prototype-of"),v=e("../internals/well-known-symbol"),x=e("../internals/uid"),S=f.Int8Array,E=S&&S.prototype,M=f.Uint8ClampedArray,D=M&&M.prototype,I=S&&d(S),R=E&&d(E),L=Object.prototype,U=L.isPrototypeOf,O=v("toStringTag"),G=x("TYPED_ARRAY_TAG"),V=h&&!!g&&t(f.opera)!=="Opera",te=!1,ne={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(n in ne)f[n]||(V=!1);if((!V||typeof I!="function"||I===Function.prototype)&&(I=function(){throw TypeError("Incorrect invocation")},V))for(n in ne)f[n]&&g(f[n],I);if((!V||!R||R===L)&&(R=I.prototype,V))for(n in ne)f[n]&&g(f[n].prototype,R);if(V&&d(D)!==R&&g(D,R),a&&!o(R,O))for(n in te=!0,i(R,O,{get:function(){return l(this)?this[G]:void 0}}),ne)f[n]&&r(f[n],G,n);b.exports={NATIVE_ARRAY_BUFFER_VIEWS:V,TYPED_ARRAY_TAG:te&&G,aTypedArray:function($){if(p($))return $;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function($){if(g){if(U.call(I,$))return $}else for(var se in ne)if(o(ne,n)){var J=f[se];if(J&&($===J||U.call(J,$)))return $}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function($,se,J){if(a){if(J)for(var ue in ne){var me=f[ue];me&&o(me.prototype,$)&&delete me.prototype[$]}R[$]&&!J||s(R,$,J?se:V&&E[$]||se)}},exportTypedArrayStaticMethod:function($,se,J){var ue,me;if(a){if(g){if(J)for(ue in ne)(me=f[ue])&&o(me,$)&&delete me[$];if(I[$]&&!J)return;try{return s(I,$,J?se:V&&S[$]||se)}catch{}}for(ue in ne)!(me=f[ue])||me[$]&&!J||s(me,$,se)}},isView:function($){var se=t($);return se==="DataView"||o(ne,se)},isTypedArray:p,TypedArray:I,TypedArrayPrototype:R}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":37,"../internals/descriptors":42,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":143,"../internals/well-known-symbol":146}],13:[function(e,b,y){function p(fe){return[255&fe]}function n(fe){return[255&fe,fe>>8&255]}function h(fe){return[255&fe,fe>>8&255,fe>>16&255,fe>>24&255]}function a(fe){return fe[3]<<24|fe[2]<<16|fe[1]<<8|fe[0]}function f(fe){return N(fe,23,4)}function l(fe){return N(fe,52,8)}function o(fe,le){O(fe[ue],le,{get:function(){return ne(this)[le]}})}function t(fe,le,Ee,Ae){var Te=D(Ee),Ge=ne(fe);if(Te+le>Ge.byteLength)throw P(me);var Ze=ne(Ge.buffer).bytes,Ye=Te+Ge.byteOffset,Fe=Ze.slice(Ye,Ye+le);return Ae?Fe:Fe.reverse()}function r(fe,le,Ee,Ae,Te,Ge){var Ze=D(Ee),Ye=ne(fe);if(Ze+le>Ye.byteLength)throw P(me);for(var Fe=ne(Ye.buffer).bytes,dt=Ze+Ye.byteOffset,Le=Ae(+Te),Oe=0;Oe<le;Oe++)Fe[dt+Oe]=Le[Ge?Oe:le-Oe-1]}var s=e("../internals/global"),i=e("../internals/descriptors"),d=e("../internals/array-buffer-native"),g=e("../internals/create-non-enumerable-property"),v=e("../internals/redefine-all"),x=e("../internals/fails"),S=e("../internals/an-instance"),E=e("../internals/to-integer"),M=e("../internals/to-length"),D=e("../internals/to-index"),I=e("../internals/ieee754"),R=e("../internals/object-get-prototype-of"),L=e("../internals/object-set-prototype-of"),U=e("../internals/object-get-own-property-names").f,O=e("../internals/object-define-property").f,G=e("../internals/array-fill"),V=e("../internals/set-to-string-tag"),te=e("../internals/internal-state"),ne=te.get,$=te.set,se="ArrayBuffer",J="DataView",ue="prototype",me="Wrong index",_e=s[se],he=_e,Re=s[J],ve=Re&&Re[ue],ye=Object.prototype,P=s.RangeError,N=I.pack,z=I.unpack;if(d){if(!x(function(){_e(1)})||!x(function(){new _e(-1)})||x(function(){return new _e,new _e(1.5),new _e(NaN),_e.name!=se})){for(var Q,oe=(he=function(fe){return S(this,he),new _e(D(fe))})[ue]=_e[ue],K=U(_e),xe=0;K.length>xe;)(Q=K[xe++])in he||g(he,Q,_e[Q]);oe.constructor=he}L&&R(ve)!==ye&&L(ve,ye);var ee=new Re(new he(2)),ge=ve.setInt8;ee.setInt8(0,2147483648),ee.setInt8(1,2147483649),!ee.getInt8(0)&&ee.getInt8(1)||v(ve,{setInt8:function(fe,le){ge.call(this,fe,le<<24>>24)},setUint8:function(fe,le){ge.call(this,fe,le<<24>>24)}},{unsafe:!0})}else he=function(fe){S(this,he,se);var le=D(fe);$(this,{bytes:G.call(new Array(le),0),byteLength:le}),i||(this.byteLength=le)},Re=function(fe,le,Ee){S(this,Re,J),S(fe,he,J);var Ae=ne(fe).byteLength,Te=E(le);if(Te<0||Ae<Te)throw P("Wrong offset");if(Ae<Te+(Ee=Ee===void 0?Ae-Te:M(Ee)))throw P("Wrong length");$(this,{buffer:fe,byteLength:Ee,byteOffset:Te}),i||(this.buffer=fe,this.byteLength=Ee,this.byteOffset=Te)},i&&(o(he,"byteLength"),o(Re,"buffer"),o(Re,"byteLength"),o(Re,"byteOffset")),v(Re[ue],{getInt8:function(fe){return t(this,1,fe)[0]<<24>>24},getUint8:function(fe){return t(this,1,fe)[0]},getInt16:function(fe,le){var Ee=t(this,2,fe,1<arguments.length?le:void 0);return(Ee[1]<<8|Ee[0])<<16>>16},getUint16:function(fe,le){var Ee=t(this,2,fe,1<arguments.length?le:void 0);return Ee[1]<<8|Ee[0]},getInt32:function(fe,le){return a(t(this,4,fe,1<arguments.length?le:void 0))},getUint32:function(fe,le){return a(t(this,4,fe,1<arguments.length?le:void 0))>>>0},getFloat32:function(fe,le){return z(t(this,4,fe,1<arguments.length?le:void 0),23)},getFloat64:function(fe,le){return z(t(this,8,fe,1<arguments.length?le:void 0),52)},setInt8:function(fe,le){r(this,1,fe,p,le)},setUint8:function(fe,le){r(this,1,fe,p,le)},setInt16:function(fe,le,Ee){r(this,2,fe,n,le,2<arguments.length?Ee:void 0)},setUint16:function(fe,le,Ee){r(this,2,fe,n,le,2<arguments.length?Ee:void 0)},setInt32:function(fe,le,Ee){r(this,4,fe,h,le,2<arguments.length?Ee:void 0)},setUint32:function(fe,le,Ee){r(this,4,fe,h,le,2<arguments.length?Ee:void 0)},setFloat32:function(fe,le,Ee){r(this,4,fe,f,le,2<arguments.length?Ee:void 0)},setFloat64:function(fe,le,Ee){r(this,8,fe,l,le,2<arguments.length?Ee:void 0)}});V(he,se),V(Re,J),b.exports={ArrayBuffer:he,DataView:Re}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":37,"../internals/descriptors":42,"../internals/fails":50,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":131,"../internals/to-integer":133,"../internals/to-length":134}],14:[function(e,b,y){var p=e("../internals/to-object"),n=e("../internals/to-absolute-index"),h=e("../internals/to-length"),a=Math.min;b.exports=[].copyWithin||function(f,l,o){var t=p(this),r=h(t.length),s=n(f,r),i=n(l,r),d=2<arguments.length?o:void 0,g=a((d===void 0?r:n(d,r))-i,r-s),v=1;for(i<s&&s<i+g&&(v=-1,i+=g-1,s+=g-1);0<g--;)i in t?t[s]=t[i]:delete t[s],s+=v,i+=v;return t}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],15:[function(e,b,y){var p=e("../internals/to-object"),n=e("../internals/to-absolute-index"),h=e("../internals/to-length");b.exports=function(a,f,l){for(var o=p(this),t=h(o.length),r=arguments.length,s=n(1<r?f:void 0,t),i=2<r?l:void 0,d=i===void 0?t:n(i,t);s<d;)o[s++]=a;return o}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],16:[function(e,b,y){var p=e("../internals/array-iteration").forEach,n=e("../internals/array-method-is-strict"),h=e("../internals/array-method-uses-to-length"),a=n("forEach"),f=h("forEach");b.exports=a&&f?[].forEach:function(l,o){return p(this,l,1<arguments.length?o:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(e,b,y){var p=e("../internals/function-bind-context"),n=e("../internals/to-object"),h=e("../internals/call-with-safe-iteration-closing"),a=e("../internals/is-array-iterator-method"),f=e("../internals/to-length"),l=e("../internals/create-property"),o=e("../internals/get-iterator-method");b.exports=function(t,r,s){var i,d,g,v,x,S,E=n(t),M=typeof this=="function"?this:Array,D=arguments.length,I=1<D?r:void 0,R=I!==void 0,L=o(E),U=0;if(R&&(I=p(I,2<D?s:void 0,2)),L==null||M==Array&&a(L))for(d=new M(i=f(E.length));U<i;U++)S=R?I(E[U],U):E[U],l(d,U,S);else for(x=(v=L.call(E)).next,d=new M;!(g=x.call(v)).done;U++)S=R?h(v,I,[g.value,U],!0):g.value,l(d,U,S);return d.length=U,d}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":39,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],18:[function(e,b,y){function p(f){return function(l,o,t){var r,s=n(l),i=h(s.length),d=a(t,i);if(f&&o!=o){for(;d<i;)if((r=s[d++])!=r)return!0}else for(;d<i;d++)if((f||d in s)&&s[d]===o)return f||d||0;return!f&&-1}}var n=e("../internals/to-indexed-object"),h=e("../internals/to-length"),a=e("../internals/to-absolute-index");b.exports={includes:p(!0),indexOf:p(!1)}},{"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134}],19:[function(e,b,y){function p(t){var r=t==1,s=t==2,i=t==3,d=t==4,g=t==6,v=t==5||g;return function(x,S,E,M){for(var D,I,R=a(x),L=h(R),U=n(S,E,3),O=f(L.length),G=0,V=M||l,te=r?V(x,O):s?V(x,0):void 0;G<O;G++)if((v||G in L)&&(I=U(D=L[G],G,R),t)){if(r)te[G]=I;else if(I)switch(t){case 3:return!0;case 5:return D;case 6:return G;case 2:o.call(te,D)}else if(d)return!1}return g?-1:i||d?d:te}}var n=e("../internals/function-bind-context"),h=e("../internals/indexed-object"),a=e("../internals/to-object"),f=e("../internals/to-length"),l=e("../internals/array-species-create"),o=[].push;b.exports={forEach:p(0),map:p(1),filter:p(2),some:p(3),every:p(4),find:p(5),findIndex:p(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],20:[function(e,b,y){var p=e("../internals/to-indexed-object"),n=e("../internals/to-integer"),h=e("../internals/to-length"),a=e("../internals/array-method-is-strict"),f=e("../internals/array-method-uses-to-length"),l=Math.min,o=[].lastIndexOf,t=!!o&&1/[1].lastIndexOf(1,-0)<0,r=a("lastIndexOf"),s=f("indexOf",{ACCESSORS:!0,1:0}),i=t||!r||!s;b.exports=i?function(d,g){if(t)return o.apply(this,arguments)||0;var v=p(this),x=h(v.length),S=x-1;for(1<arguments.length&&(S=l(S,n(g))),S<0&&(S=x+S);0<=S;S--)if(S in v&&v[S]===d)return S||0;return-1}:o},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":132,"../internals/to-integer":133,"../internals/to-length":134}],21:[function(e,b,y){var p=e("../internals/fails"),n=e("../internals/well-known-symbol"),h=e("../internals/engine-v8-version"),a=n("species");b.exports=function(f){return 51<=h||!p(function(){var l=[];return(l.constructor={})[a]=function(){return{foo:1}},l[f](Boolean).foo!==1})}},{"../internals/engine-v8-version":47,"../internals/fails":50,"../internals/well-known-symbol":146}],22:[function(e,b,y){var p=e("../internals/fails");b.exports=function(n,h){var a=[][n];return!!a&&p(function(){a.call(null,h||function(){throw 1},1)})}},{"../internals/fails":50}],23:[function(e,b,y){function p(o){throw o}var n=e("../internals/descriptors"),h=e("../internals/fails"),a=e("../internals/has"),f=Object.defineProperty,l={};b.exports=function(o,t){if(a(l,o))return l[o];var r=[][o],s=!!a(t=t||{},"ACCESSORS")&&t.ACCESSORS,i=a(t,0)?t[0]:p,d=a(t,1)?t[1]:void 0;return l[o]=!!r&&!h(function(){if(s&&!n)return!0;var g={length:-1};s?f(g,1,{enumerable:!0,get:p}):g[1]=1,r.call(g,i,d)})}},{"../internals/descriptors":42,"../internals/fails":50,"../internals/has":60}],24:[function(e,b,y){function p(l){return function(o,t,r,s){n(t);var i=h(o),d=a(i),g=f(i.length),v=l?g-1:0,x=l?-1:1;if(r<2)for(;;){if(v in d){s=d[v],v+=x;break}if(v+=x,l?v<0:g<=v)throw TypeError("Reduce of empty array with no initial value")}for(;l?0<=v:v<g;v+=x)v in d&&(s=t(s,d[v],v,i));return s}}var n=e("../internals/a-function"),h=e("../internals/to-object"),a=e("../internals/indexed-object"),f=e("../internals/to-length");b.exports={left:p(!1),right:p(!0)}},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],25:[function(e,b,y){var p=e("../internals/is-object"),n=e("../internals/is-array"),h=e("../internals/well-known-symbol")("species");b.exports=function(a,f){var l;return n(a)&&(typeof(l=a.constructor)!="function"||l!==Array&&!n(l.prototype)?p(l)&&(l=l[h])===null&&(l=void 0):l=void 0),new(l===void 0?Array:l)(f===0?0:f)}},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":146}],26:[function(e,b,y){var p=e("../internals/an-object");b.exports=function(n,h,a,f){try{return f?h(p(a)[0],a[1]):h(a)}catch(o){var l=n.return;throw l!==void 0&&p(l.call(n)),o}}},{"../internals/an-object":10}],27:[function(e,b,y){var p=e("../internals/well-known-symbol")("iterator"),n=!1;try{var h=0,a={next:function(){return{done:!!h++}},return:function(){n=!0}};a[p]=function(){return this},Array.from(a,function(){throw 2})}catch{}b.exports=function(f,l){if(!l&&!n)return!1;var o=!1;try{var t={};t[p]=function(){return{next:function(){return{done:o=!0}}}},f(t)}catch{}return o}},{"../internals/well-known-symbol":146}],28:[function(e,b,y){var p={}.toString;b.exports=function(n){return p.call(n).slice(8,-1)}},{}],29:[function(e,b,y){var p=e("../internals/to-string-tag-support"),n=e("../internals/classof-raw"),h=e("../internals/well-known-symbol")("toStringTag"),a=n(function(){return arguments}())=="Arguments";b.exports=p?n:function(f){var l,o,t;return f===void 0?"Undefined":f===null?"Null":typeof(o=function(r,s){try{return r[s]}catch{}}(l=Object(f),h))=="string"?o:a?n(l):(t=n(l))=="Object"&&typeof l.callee=="function"?"Arguments":t}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":139,"../internals/well-known-symbol":146}],30:[function(e,b,y){var p=e("../internals/object-define-property").f,n=e("../internals/object-create"),h=e("../internals/redefine-all"),a=e("../internals/function-bind-context"),f=e("../internals/an-instance"),l=e("../internals/iterate"),o=e("../internals/define-iterator"),t=e("../internals/set-species"),r=e("../internals/descriptors"),s=e("../internals/internal-metadata").fastKey,i=e("../internals/internal-state"),d=i.set,g=i.getterFor;b.exports={getConstructor:function(v,x,S,E){function M(L,U,O){var G,V,te=I(L),ne=R(L,U);return ne?ne.value=O:(te.last=ne={index:V=s(U,!0),key:U,value:O,previous:G=te.last,next:void 0,removed:!1},te.first||(te.first=ne),G&&(G.next=ne),r?te.size++:L.size++,V!=="F"&&(te.index[V]=ne)),L}var D=v(function(L,U){f(L,D,x),d(L,{type:x,index:n(null),first:void 0,last:void 0,size:0}),r||(L.size=0),U!=null&&l(U,L[E],L,S)}),I=g(x),R=function(L,U){var O,G=I(L),V=s(U);if(V!=="F")return G.index[V];for(O=G.first;O;O=O.next)if(O.key==U)return O};return h(D.prototype,{clear:function(){for(var L=I(this),U=L.index,O=L.first;O;)O.removed=!0,O.previous&&(O.previous=O.previous.next=void 0),delete U[O.index],O=O.next;L.first=L.last=void 0,r?L.size=0:this.size=0},delete:function(L){var U=I(this),O=R(this,L);if(O){var G=O.next,V=O.previous;delete U.index[O.index],O.removed=!0,V&&(V.next=G),G&&(G.previous=V),U.first==O&&(U.first=G),U.last==O&&(U.last=V),r?U.size--:this.size--}return!!O},forEach:function(L,U){for(var O,G=I(this),V=a(L,1<arguments.length?U:void 0,3);O=O?O.next:G.first;)for(V(O.value,O.key,this);O&&O.removed;)O=O.previous},has:function(L){return!!R(this,L)}}),h(D.prototype,S?{get:function(L){var U=R(this,L);return U&&U.value},set:function(L,U){return M(this,L===0?0:L,U)}}:{add:function(L){return M(this,L=L===0?0:L,L)}}),r&&p(D.prototype,"size",{get:function(){return I(this).size}}),D},setStrong:function(v,x,S){var E=x+" Iterator",M=g(x),D=g(E);o(v,x,function(I,R){d(this,{type:E,target:I,state:M(I),kind:R,last:void 0})},function(){for(var I=D(this),R=I.kind,L=I.last;L&&L.removed;)L=L.previous;return I.target&&(I.last=L=L?L.next:I.state.first)?R=="keys"?{value:L.key,done:!1}:R=="values"?{value:L.value,done:!1}:{value:[L.key,L.value],done:!1}:{value:I.target=void 0,done:!0}},S?"entries":"values",!S,!0),t(x)}}},{"../internals/an-instance":9,"../internals/define-iterator":40,"../internals/descriptors":42,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/global"),h=e("../internals/is-forced"),a=e("../internals/redefine"),f=e("../internals/internal-metadata"),l=e("../internals/iterate"),o=e("../internals/an-instance"),t=e("../internals/is-object"),r=e("../internals/fails"),s=e("../internals/check-correctness-of-iteration"),i=e("../internals/set-to-string-tag"),d=e("../internals/inherit-if-required");b.exports=function(g,v,x){function S($){var se=R[$];a(R,$,$=="add"?function(J){return se.call(this,J===0?0:J),this}:$=="delete"?function(J){return!(M&&!t(J))&&se.call(this,J===0?0:J)}:$=="get"?function(J){return M&&!t(J)?void 0:se.call(this,J===0?0:J)}:$=="has"?function(J){return!(M&&!t(J))&&se.call(this,J===0?0:J)}:function(J,ue){return se.call(this,J===0?0:J,ue),this})}var E=g.indexOf("Map")!==-1,M=g.indexOf("Weak")!==-1,D=E?"set":"add",I=n[g],R=I&&I.prototype,L=I,U={};if(h(g,typeof I!="function"||!(M||R.forEach&&!r(function(){new I().entries().next()}))))L=x.getConstructor(v,g,E,D),f.REQUIRED=!0;else if(h(g,!0)){var O=new L,G=O[D](M?{}:-0,1)!=O,V=r(function(){O.has(1)}),te=s(function($){new I($)}),ne=!M&&r(function(){for(var $=new I,se=5;se--;)$[D](se,se);return!$.has(-0)});te||(((L=v(function($,se){o($,L,g);var J=d(new I,$,L);return se!=null&&l(se,J[D],J,E),J})).prototype=R).constructor=L),(V||ne)&&(S("delete"),S("has"),E&&S("get")),(ne||G)&&S(D),M&&R.clear&&delete R.clear}return U[g]=L,p({global:!0,forced:L!=I},U),i(L,g),M||x.setStrong(L,g,E),L}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":49,"../internals/fails":50,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],32:[function(e,b,y){var p=e("../internals/has"),n=e("../internals/own-keys"),h=e("../internals/object-get-own-property-descriptor"),a=e("../internals/object-define-property");b.exports=function(f,l){for(var o=n(l),t=a.f,r=h.f,s=0;s<o.length;s++){var i=o[s];p(f,i)||t(f,i,r(l,i))}}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],33:[function(e,b,y){var p=e("../internals/well-known-symbol")("match");b.exports=function(n){var h=/./;try{"/./"[n](h)}catch{try{return h[p]=!1,"/./"[n](h)}catch{}}return!1}},{"../internals/well-known-symbol":146}],34:[function(e,b,y){var p=e("../internals/fails");b.exports=!p(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype})},{"../internals/fails":50}],35:[function(e,b,y){var p=e("../internals/require-object-coercible"),n=/"/g;b.exports=function(h,a,f,l){var o=String(p(h)),t="<"+a;return f!==""&&(t+=" "+f+'="'+String(l).replace(n,"&quot;")+'"'),t+">"+o+"</"+a+">"}},{"../internals/require-object-coercible":113}],36:[function(e,b,y){function p(){return this}var n=e("../internals/iterators-core").IteratorPrototype,h=e("../internals/object-create"),a=e("../internals/create-property-descriptor"),f=e("../internals/set-to-string-tag"),l=e("../internals/iterators");b.exports=function(o,t,r){var s=t+" Iterator";return o.prototype=h(n,{next:a(1,r)}),f(o,s,!1,!0),l[s]=p,o}},{"../internals/create-property-descriptor":38,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],37:[function(e,b,y){var p=e("../internals/descriptors"),n=e("../internals/object-define-property"),h=e("../internals/create-property-descriptor");b.exports=p?function(a,f,l){return n.f(a,f,h(1,l))}:function(a,f,l){return a[f]=l,a}},{"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/object-define-property":92}],38:[function(e,b,y){b.exports=function(p,n){return{enumerable:!(1&p),configurable:!(2&p),writable:!(4&p),value:n}}},{}],39:[function(e,b,y){var p=e("../internals/to-primitive"),n=e("../internals/object-define-property"),h=e("../internals/create-property-descriptor");b.exports=function(a,f,l){var o=p(f);o in a?n.f(a,o,h(0,l)):a[o]=l}},{"../internals/create-property-descriptor":38,"../internals/object-define-property":92,"../internals/to-primitive":138}],40:[function(e,b,y){function p(){return this}var n=e("../internals/export"),h=e("../internals/create-iterator-constructor"),a=e("../internals/object-get-prototype-of"),f=e("../internals/object-set-prototype-of"),l=e("../internals/set-to-string-tag"),o=e("../internals/create-non-enumerable-property"),t=e("../internals/redefine"),r=e("../internals/well-known-symbol"),s=e("../internals/is-pure"),i=e("../internals/iterators"),d=e("../internals/iterators-core"),g=d.IteratorPrototype,v=d.BUGGY_SAFARI_ITERATORS,x=r("iterator"),S="values",E="entries";b.exports=function(M,D,I,R,L,U,O){h(I,D,R);function G(he){if(he===L&&me)return me;if(!v&&he in J)return J[he];switch(he){case"keys":case S:case E:return function(){return new I(this,he)}}return function(){return new I(this)}}var V,te,ne,$=D+" Iterator",se=!1,J=M.prototype,ue=J[x]||J["@@iterator"]||L&&J[L],me=!v&&ue||G(L),_e=D=="Array"&&J.entries||ue;if(_e&&(V=a(_e.call(new M)),g!==Object.prototype&&V.next&&(s||a(V)===g||(f?f(V,g):typeof V[x]!="function"&&o(V,x,p)),l(V,$,!0,!0),s&&(i[$]=p))),L==S&&ue&&ue.name!==S&&(se=!0,me=function(){return ue.call(this)}),s&&!O||J[x]===me||o(J,x,me),i[D]=me,L)if(te={values:G(S),keys:U?me:G("keys"),entries:G(E)},O)for(ne in te)!v&&!se&&ne in J||t(J,ne,te[ne]);else n({target:D,proto:!0,forced:v||se},te);return te}},{"../internals/create-iterator-constructor":36,"../internals/create-non-enumerable-property":37,"../internals/export":49,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146}],41:[function(e,b,y){var p=e("../internals/path"),n=e("../internals/has"),h=e("../internals/well-known-symbol-wrapped"),a=e("../internals/object-define-property").f;b.exports=function(f){var l=p.Symbol||(p.Symbol={});n(l,f)||a(l,f,{value:h.f(f)})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":145}],42:[function(e,b,y){var p=e("../internals/fails");b.exports=!p(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":50}],43:[function(e,b,y){var p=e("../internals/global"),n=e("../internals/is-object"),h=p.document,a=n(h)&&n(h.createElement);b.exports=function(f){return a?h.createElement(f):{}}},{"../internals/global":59,"../internals/is-object":74}],44:[function(e,b,y){b.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],45:[function(e,b,y){var p=e("../internals/engine-user-agent");b.exports=/(iphone|ipod|ipad).*applewebkit/i.test(p)},{"../internals/engine-user-agent":46}],46:[function(e,b,y){var p=e("../internals/get-built-in");b.exports=p("navigator","userAgent")||""},{"../internals/get-built-in":56}],47:[function(e,b,y){var p,n,h=e("../internals/global"),a=e("../internals/engine-user-agent"),f=h.process,l=f&&f.versions,o=l&&l.v8;o?n=(p=o.split("."))[0]+p[1]:a&&(!(p=a.match(/Edge\/(\d+)/))||74<=p[1])&&(p=a.match(/Chrome\/(\d+)/))&&(n=p[1]),b.exports=n&&+n},{"../internals/engine-user-agent":46,"../internals/global":59}],48:[function(e,b,y){b.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],49:[function(e,b,y){var p=e("../internals/global"),n=e("../internals/object-get-own-property-descriptor").f,h=e("../internals/create-non-enumerable-property"),a=e("../internals/redefine"),f=e("../internals/set-global"),l=e("../internals/copy-constructor-properties"),o=e("../internals/is-forced");b.exports=function(t,r){var s,i,d,g,v,x=t.target,S=t.global,E=t.stat;if(s=S?p:E?p[x]||f(x,{}):(p[x]||{}).prototype)for(i in r){if(g=r[i],d=t.noTargetGet?(v=n(s,i))&&v.value:s[i],!o(S?i:x+(E?".":"#")+i,t.forced)&&d!==void 0){if(typeof g==typeof d)continue;l(g,d)}(t.sham||d&&d.sham)&&h(g,"sham",!0),a(s,i,g,t)}}},{"../internals/copy-constructor-properties":32,"../internals/create-non-enumerable-property":37,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],50:[function(e,b,y){b.exports=function(p){try{return!!p()}catch{return!0}}},{}],51:[function(e,b,y){e("../modules/es.regexp.exec");var p=e("../internals/redefine"),n=e("../internals/fails"),h=e("../internals/well-known-symbol"),a=e("../internals/regexp-exec"),f=e("../internals/create-non-enumerable-property"),l=h("species"),o=!n(function(){var d=/./;return d.exec=function(){var g=[];return g.groups={a:"7"},g},"".replace(d,"$<a>")!=="7"}),t="a".replace(/./,"$0")==="$0",r=h("replace"),s=!!/./[r]&&/./[r]("a","$0")==="",i=!n(function(){var d=/(?:)/,g=d.exec;d.exec=function(){return g.apply(this,arguments)};var v="ab".split(d);return v.length!==2||v[0]!=="a"||v[1]!=="b"});b.exports=function(d,g,v,x){var S=h(d),E=!n(function(){var U={};return U[S]=function(){return 7},""[d](U)!=7}),M=E&&!n(function(){var U=!1,O=/a/;return d==="split"&&((O={constructor:{}}).constructor[l]=function(){return O},O.flags="",O[S]=/./[S]),O.exec=function(){return U=!0,null},O[S](""),!U});if(!E||!M||d==="replace"&&(!o||!t||s)||d==="split"&&!i){var D=/./[S],I=v(S,""[d],function(U,O,G,V,te){return O.exec===a?E&&!te?{done:!0,value:D.call(O,G,V)}:{done:!0,value:U.call(G,O,V)}:{done:!1}},{REPLACE_KEEPS_$0:t,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:s}),R=I[0],L=I[1];p(String.prototype,d,R),p(RegExp.prototype,S,g==2?function(U,O){return L.call(U,this,O)}:function(U){return L.call(U,this)})}x&&f(RegExp.prototype[S],"sham",!0)}},{"../internals/create-non-enumerable-property":37,"../internals/fails":50,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":146,"../modules/es.regexp.exec":181}],52:[function(e,b,y){var p=e("../internals/is-array"),n=e("../internals/to-length"),h=e("../internals/function-bind-context"),a=function(f,l,o,t,r,s,i,d){for(var g,v=r,x=0,S=!!i&&h(i,d,3);x<t;){if(x in o){if(g=S?S(o[x],x,l):o[x],0<s&&p(g))v=a(f,l,g,n(g.length),v,s-1)-1;else{if(9007199254740991<=v)throw TypeError("Exceed the acceptable array length");f[v]=g}v++}x++}return v};b.exports=a},{"../internals/function-bind-context":54,"../internals/is-array":72,"../internals/to-length":134}],53:[function(e,b,y){var p=e("../internals/fails");b.exports=!p(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":50}],54:[function(e,b,y){var p=e("../internals/a-function");b.exports=function(n,h,a){if(p(n),h===void 0)return n;switch(a){case 0:return function(){return n.call(h)};case 1:return function(f){return n.call(h,f)};case 2:return function(f,l){return n.call(h,f,l)};case 3:return function(f,l,o){return n.call(h,f,l,o)}}return function(){return n.apply(h,arguments)}}},{"../internals/a-function":5}],55:[function(e,b,y){var p=e("../internals/a-function"),n=e("../internals/is-object"),h=[].slice,a={};b.exports=Function.bind||function(f){var l=p(this),o=h.call(arguments,1),t=function(){var r=o.concat(h.call(arguments));return this instanceof t?function(s,i,d){if(!(i in a)){for(var g=[],v=0;v<i;v++)g[v]="a["+v+"]";a[i]=Function("C,a","return new C("+g.join(",")+")")}return a[i](s,d)}(l,r.length,r):l.apply(f,r)};return n(l.prototype)&&(t.prototype=l.prototype),t}},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(e,b,y){function p(a){return typeof a=="function"?a:void 0}var n=e("../internals/path"),h=e("../internals/global");b.exports=function(a,f){return arguments.length<2?p(n[a])||p(h[a]):n[a]&&n[a][f]||h[a]&&h[a][f]}},{"../internals/global":59,"../internals/path":104}],57:[function(e,b,y){var p=e("../internals/classof"),n=e("../internals/iterators"),h=e("../internals/well-known-symbol")("iterator");b.exports=function(a){if(a!=null)return a[h]||a["@@iterator"]||n[p(a)]}},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":146}],58:[function(e,b,y){var p=e("../internals/an-object"),n=e("../internals/get-iterator-method");b.exports=function(h){var a=n(h);if(typeof a!="function")throw TypeError(String(h)+" is not iterable");return p(a.call(h))}},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(e,b,y){(function(p){function n(h){return h&&h.Math==Math&&h}b.exports=n(typeof globalThis=="object"&&globalThis)||n(typeof window=="object"&&window)||n(typeof self=="object"&&self)||n(typeof p=="object"&&p)||Function("return this")()}).call(this,typeof Bn<"u"?Bn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],60:[function(e,b,y){var p={}.hasOwnProperty;b.exports=function(n,h){return p.call(n,h)}},{}],61:[function(e,b,y){b.exports={}},{}],62:[function(e,b,y){var p=e("../internals/global");b.exports=function(n,h){var a=p.console;a&&a.error&&(arguments.length===1?a.error(n):a.error(n,h))}},{"../internals/global":59}],63:[function(e,b,y){var p=e("../internals/get-built-in");b.exports=p("document","documentElement")},{"../internals/get-built-in":56}],64:[function(e,b,y){var p=e("../internals/descriptors"),n=e("../internals/fails"),h=e("../internals/document-create-element");b.exports=!p&&!n(function(){return Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":42,"../internals/document-create-element":43,"../internals/fails":50}],65:[function(e,b,y){var p=Math.abs,n=Math.pow,h=Math.floor,a=Math.log,f=Math.LN2;b.exports={pack:function(l,o,t){var r,s,i,d=new Array(t),g=8*t-o-1,v=(1<<g)-1,x=v>>1,S=o===23?n(2,-24)-n(2,-77):0,E=l<0||l===0&&1/l<0?1:0,M=0;for((l=p(l))!=l||l===1/0?(s=l!=l?1:0,r=v):(r=h(a(l)/f),l*(i=n(2,-r))<1&&(r--,i*=2),2<=(l+=1<=r+x?S/i:S*n(2,1-x))*i&&(r++,i/=2),v<=r+x?(s=0,r=v):1<=r+x?(s=(l*i-1)*n(2,o),r+=x):(s=l*n(2,x-1)*n(2,o),r=0));8<=o;d[M++]=255&s,s/=256,o-=8);for(r=r<<o|s,g+=o;0<g;d[M++]=255&r,r/=256,g-=8);return d[--M]|=128*E,d},unpack:function(l,o){var t,r=l.length,s=8*r-o-1,i=(1<<s)-1,d=i>>1,g=s-7,v=r-1,x=l[v--],S=127&x;for(x>>=7;0<g;S=256*S+l[v],v--,g-=8);for(t=S&(1<<-g)-1,S>>=-g,g+=o;0<g;t=256*t+l[v],v--,g-=8);if(S===0)S=1-d;else{if(S===i)return t?NaN:x?-1/0:1/0;t+=n(2,o),S-=d}return(x?-1:1)*t*n(2,S-o)}}},{}],66:[function(e,b,y){var p=e("../internals/fails"),n=e("../internals/classof-raw"),h="".split;b.exports=p(function(){return!Object("z").propertyIsEnumerable(0)})?function(a){return n(a)=="String"?h.call(a,""):Object(a)}:Object},{"../internals/classof-raw":28,"../internals/fails":50}],67:[function(e,b,y){var p=e("../internals/is-object"),n=e("../internals/object-set-prototype-of");b.exports=function(h,a,f){var l,o;return n&&typeof(l=a.constructor)=="function"&&l!==f&&p(o=l.prototype)&&o!==f.prototype&&n(h,o),h}},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(e,b,y){var p=e("../internals/shared-store"),n=Function.toString;typeof p.inspectSource!="function"&&(p.inspectSource=function(h){return n.call(h)}),b.exports=p.inspectSource},{"../internals/shared-store":119}],69:[function(e,b,y){function p(d){f(d,t,{value:{objectID:"O"+ ++r,weakData:{}}})}var n=e("../internals/hidden-keys"),h=e("../internals/is-object"),a=e("../internals/has"),f=e("../internals/object-define-property").f,l=e("../internals/uid"),o=e("../internals/freezing"),t=l("meta"),r=0,s=Object.isExtensible||function(){return!0},i=b.exports={REQUIRED:!1,fastKey:function(d,g){if(!h(d))return typeof d=="symbol"?d:(typeof d=="string"?"S":"P")+d;if(!a(d,t)){if(!s(d))return"F";if(!g)return"E";p(d)}return d[t].objectID},getWeakData:function(d,g){if(!a(d,t)){if(!s(d))return!0;if(!g)return!1;p(d)}return d[t].weakData},onFreeze:function(d){return o&&i.REQUIRED&&s(d)&&!a(d,t)&&p(d),d}};n[t]=!0},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":143}],70:[function(e,b,y){var p,n,h,a=e("../internals/native-weak-map"),f=e("../internals/global"),l=e("../internals/is-object"),o=e("../internals/create-non-enumerable-property"),t=e("../internals/has"),r=e("../internals/shared-key"),s=e("../internals/hidden-keys"),i=f.WeakMap;if(a){var d=new i,g=d.get,v=d.has,x=d.set;p=function(E,M){return x.call(d,E,M),M},n=function(E){return g.call(d,E)||{}},h=function(E){return v.call(d,E)}}else{var S=r("state");s[S]=!0,p=function(E,M){return o(E,S,M),M},n=function(E){return t(E,S)?E[S]:{}},h=function(E){return t(E,S)}}b.exports={set:p,get:n,has:h,enforce:function(E){return h(E)?n(E):p(E,{})},getterFor:function(E){return function(M){var D;if(!l(M)||(D=n(M)).type!==E)throw TypeError("Incompatible receiver, "+E+" required");return D}}}},{"../internals/create-non-enumerable-property":37,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(e,b,y){var p=e("../internals/well-known-symbol"),n=e("../internals/iterators"),h=p("iterator"),a=Array.prototype;b.exports=function(f){return f!==void 0&&(n.Array===f||a[h]===f)}},{"../internals/iterators":79,"../internals/well-known-symbol":146}],72:[function(e,b,y){var p=e("../internals/classof-raw");b.exports=Array.isArray||function(n){return p(n)=="Array"}},{"../internals/classof-raw":28}],73:[function(e,b,y){function p(t,r){var s=f[a(t)];return s==o||s!=l&&(typeof r=="function"?n(r):!!r)}var n=e("../internals/fails"),h=/#|\.prototype\./,a=p.normalize=function(t){return String(t).replace(h,".").toLowerCase()},f=p.data={},l=p.NATIVE="N",o=p.POLYFILL="P";b.exports=p},{"../internals/fails":50}],74:[function(e,b,y){b.exports=function(p){return typeof p=="object"?p!==null:typeof p=="function"}},{}],75:[function(e,b,y){b.exports=!1},{}],76:[function(e,b,y){var p=e("../internals/is-object"),n=e("../internals/classof-raw"),h=e("../internals/well-known-symbol")("match");b.exports=function(a){var f;return p(a)&&((f=a[h])!==void 0?!!f:n(a)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":146}],77:[function(e,b,y){function p(t,r){this.stopped=t,this.result=r}var n=e("../internals/an-object"),h=e("../internals/is-array-iterator-method"),a=e("../internals/to-length"),f=e("../internals/function-bind-context"),l=e("../internals/get-iterator-method"),o=e("../internals/call-with-safe-iteration-closing");(b.exports=function(t,r,s,i,d){var g,v,x,S,E,M,D,I=f(r,s,i?2:1);if(d)g=t;else{if(typeof(v=l(t))!="function")throw TypeError("Target is not iterable");if(h(v)){for(x=0,S=a(t.length);x<S;x++)if((E=i?I(n(D=t[x])[0],D[1]):I(t[x]))&&E instanceof p)return E;return new p(!1)}g=v.call(t)}for(M=g.next;!(D=M.call(g)).done;)if(typeof(E=o(g,I,D.value,i))=="object"&&E&&E instanceof p)return E;return new p(!1)}).stop=function(t){return new p(!0,t)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134}],78:[function(e,b,y){var p,n,h,a=e("../internals/object-get-prototype-of"),f=e("../internals/create-non-enumerable-property"),l=e("../internals/has"),o=e("../internals/well-known-symbol"),t=e("../internals/is-pure"),r=o("iterator"),s=!1;[].keys&&("next"in(h=[].keys())?(n=a(a(h)))!==Object.prototype&&(p=n):s=!0),p==null&&(p={}),t||l(p,r)||f(p,r,function(){return this}),b.exports={IteratorPrototype:p,BUGGY_SAFARI_ITERATORS:s}},{"../internals/create-non-enumerable-property":37,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":146}],79:[function(e,b,y){arguments[4][61][0].apply(y,arguments)},{dup:61}],80:[function(e,b,y){b.exports=Math.sign||function(p){return(p=+p)==0||p!=p?p:p<0?-1:1}},{}],81:[function(e,b,y){var p,n,h,a,f,l,o,t,r=e("../internals/global"),s=e("../internals/object-get-own-property-descriptor").f,i=e("../internals/classof-raw"),d=e("../internals/task").set,g=e("../internals/engine-is-ios"),v=r.MutationObserver||r.WebKitMutationObserver,x=r.process,S=r.Promise,E=i(x)=="process",M=s(r,"queueMicrotask"),D=M&&M.value;D||(p=function(){var I,R;for(E&&(I=x.domain)&&I.exit();n;){R=n.fn,n=n.next;try{R()}catch(L){throw n?a():h=void 0,L}}h=void 0,I&&I.enter()},a=E?function(){x.nextTick(p)}:v&&!g?(f=!0,l=document.createTextNode(""),new v(p).observe(l,{characterData:!0}),function(){l.data=f=!f}):S&&S.resolve?(o=S.resolve(void 0),t=o.then,function(){t.call(o,p)}):function(){d.call(r,p)}),b.exports=D||function(I){var R={fn:I,next:void 0};h&&(h.next=R),n||(n=R,a()),h=R}},{"../internals/classof-raw":28,"../internals/engine-is-ios":45,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":128}],82:[function(e,b,y){var p=e("../internals/global");b.exports=p.Promise},{"../internals/global":59}],83:[function(e,b,y){var p=e("../internals/fails");b.exports=!!Object.getOwnPropertySymbols&&!p(function(){return!String(Symbol())})},{"../internals/fails":50}],84:[function(e,b,y){var p=e("../internals/fails"),n=e("../internals/well-known-symbol"),h=e("../internals/is-pure"),a=n("iterator");b.exports=!p(function(){var f=new URL("b?a=1&b=2&c=3","http://a"),l=f.searchParams,o="";return f.pathname="c%20d",l.forEach(function(t,r){l.delete("b"),o+=r+t}),h&&!f.toJSON||!l.sort||f.href!=="http://a/c%20d?a=1&c=3"||l.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!l[a]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||o!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":50,"../internals/is-pure":75,"../internals/well-known-symbol":146}],85:[function(e,b,y){var p=e("../internals/global"),n=e("../internals/inspect-source"),h=p.WeakMap;b.exports=typeof h=="function"&&/native code/.test(n(h))},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(e,b,y){function p(h){var a,f;this.promise=new h(function(l,o){if(a!==void 0||f!==void 0)throw TypeError("Bad Promise constructor");a=l,f=o}),this.resolve=n(a),this.reject=n(f)}var n=e("../internals/a-function");b.exports.f=function(h){return new p(h)}},{"../internals/a-function":5}],87:[function(e,b,y){var p=e("../internals/is-regexp");b.exports=function(n){if(p(n))throw TypeError("The method doesn't accept regular expressions");return n}},{"../internals/is-regexp":76}],88:[function(e,b,y){var p=e("../internals/global").isFinite;b.exports=Number.isFinite||function(n){return typeof n=="number"&&p(n)}},{"../internals/global":59}],89:[function(e,b,y){var p=e("../internals/descriptors"),n=e("../internals/fails"),h=e("../internals/object-keys"),a=e("../internals/object-get-own-property-symbols"),f=e("../internals/object-property-is-enumerable"),l=e("../internals/to-object"),o=e("../internals/indexed-object"),t=Object.assign,r=Object.defineProperty;b.exports=!t||n(function(){if(p&&t({b:1},t(r({},"a",{enumerable:!0,get:function(){r(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var s={},i={},d=Symbol(),g="abcdefghijklmnopqrst";return s[d]=7,g.split("").forEach(function(v){i[v]=v}),t({},s)[d]!=7||h(t({},i)).join("")!=g})?function(s,i){for(var d=l(s),g=arguments.length,v=1,x=a.f,S=f.f;v<g;)for(var E,M=o(arguments[v++]),D=x?h(M).concat(x(M)):h(M),I=D.length,R=0;R<I;)E=D[R++],p&&!S.call(M,E)||(d[E]=M[E]);return d}:t},{"../internals/descriptors":42,"../internals/fails":50,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":135}],90:[function(e,b,y){function p(){}function n(x){return"<script>"+x+"</"+d+">"}var h,a=e("../internals/an-object"),f=e("../internals/object-define-properties"),l=e("../internals/enum-bug-keys"),o=e("../internals/hidden-keys"),t=e("../internals/html"),r=e("../internals/document-create-element"),s=e("../internals/shared-key"),i="prototype",d="script",g=s("IE_PROTO"),v=function(){try{h=document.domain&&new ActiveXObject("htmlfile")}catch{}var x,S;v=h?function(M){M.write(n("")),M.close();var D=M.parentWindow.Object;return M=null,D}(h):((S=r("iframe")).style.display="none",t.appendChild(S),S.src=String("javascript:"),(x=S.contentWindow.document).open(),x.write(n("document.F=Object")),x.close(),x.F);for(var E=l.length;E--;)delete v[i][l[E]];return v()};o[g]=!0,b.exports=Object.create||function(x,S){var E;return x!==null?(p[i]=a(x),E=new p,p[i]=null,E[g]=x):E=v(),S===void 0?E:f(E,S)}},{"../internals/an-object":10,"../internals/document-create-element":43,"../internals/enum-bug-keys":48,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(e,b,y){var p=e("../internals/descriptors"),n=e("../internals/object-define-property"),h=e("../internals/an-object"),a=e("../internals/object-keys");b.exports=p?Object.defineProperties:function(f,l){h(f);for(var o,t=a(l),r=t.length,s=0;s<r;)n.f(f,o=t[s++],l[o]);return f}},{"../internals/an-object":10,"../internals/descriptors":42,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(e,b,y){var p=e("../internals/descriptors"),n=e("../internals/ie8-dom-define"),h=e("../internals/an-object"),a=e("../internals/to-primitive"),f=Object.defineProperty;y.f=p?f:function(l,o,t){if(h(l),o=a(o,!0),h(t),n)try{return f(l,o,t)}catch{}if("get"in t||"set"in t)throw TypeError("Accessors not supported");return"value"in t&&(l[o]=t.value),l}},{"../internals/an-object":10,"../internals/descriptors":42,"../internals/ie8-dom-define":64,"../internals/to-primitive":138}],93:[function(e,b,y){var p=e("../internals/descriptors"),n=e("../internals/object-property-is-enumerable"),h=e("../internals/create-property-descriptor"),a=e("../internals/to-indexed-object"),f=e("../internals/to-primitive"),l=e("../internals/has"),o=e("../internals/ie8-dom-define"),t=Object.getOwnPropertyDescriptor;y.f=p?t:function(r,s){if(r=a(r),s=f(s,!0),o)try{return t(r,s)}catch{}if(l(r,s))return h(!n.f.call(r,s),r[s])}},{"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":132,"../internals/to-primitive":138}],94:[function(e,b,y){var p=e("../internals/to-indexed-object"),n=e("../internals/object-get-own-property-names").f,h={}.toString,a=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];b.exports.f=function(f){return a&&h.call(f)=="[object Window]"?function(l){try{return n(l)}catch{return a.slice()}}(f):n(p(f))}},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":132}],95:[function(e,b,y){var p=e("../internals/object-keys-internal"),n=e("../internals/enum-bug-keys").concat("length","prototype");y.f=Object.getOwnPropertyNames||function(h){return p(h,n)}},{"../internals/enum-bug-keys":48,"../internals/object-keys-internal":98}],96:[function(e,b,y){y.f=Object.getOwnPropertySymbols},{}],97:[function(e,b,y){var p=e("../internals/has"),n=e("../internals/to-object"),h=e("../internals/shared-key"),a=e("../internals/correct-prototype-getter"),f=h("IE_PROTO"),l=Object.prototype;b.exports=a?Object.getPrototypeOf:function(o){return o=n(o),p(o,f)?o[f]:typeof o.constructor=="function"&&o instanceof o.constructor?o.constructor.prototype:o instanceof Object?l:null}},{"../internals/correct-prototype-getter":34,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":135}],98:[function(e,b,y){var p=e("../internals/has"),n=e("../internals/to-indexed-object"),h=e("../internals/array-includes").indexOf,a=e("../internals/hidden-keys");b.exports=function(f,l){var o,t=n(f),r=0,s=[];for(o in t)!p(a,o)&&p(t,o)&&s.push(o);for(;l.length>r;)p(t,o=l[r++])&&(~h(s,o)||s.push(o));return s}},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":132}],99:[function(e,b,y){var p=e("../internals/object-keys-internal"),n=e("../internals/enum-bug-keys");b.exports=Object.keys||function(h){return p(h,n)}},{"../internals/enum-bug-keys":48,"../internals/object-keys-internal":98}],100:[function(e,b,y){var p={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,h=n&&!p.call({1:2},1);y.f=h?function(a){var f=n(this,a);return!!f&&f.enumerable}:p},{}],101:[function(e,b,y){var p=e("../internals/an-object"),n=e("../internals/a-possible-prototype");b.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var h,a=!1,f={};try{(h=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(f,[]),a=f instanceof Array}catch{}return function(l,o){return p(l),n(o),a?h.call(l,o):l.__proto__=o,l}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(e,b,y){var p=e("../internals/to-string-tag-support"),n=e("../internals/classof");b.exports=p?{}.toString:function(){return"[object "+n(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":139}],103:[function(e,b,y){var p=e("../internals/get-built-in"),n=e("../internals/object-get-own-property-names"),h=e("../internals/object-get-own-property-symbols"),a=e("../internals/an-object");b.exports=p("Reflect","ownKeys")||function(f){var l=n.f(a(f)),o=h.f;return o?l.concat(o(f)):l}},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(e,b,y){var p=e("../internals/global");b.exports=p},{"../internals/global":59}],105:[function(e,b,y){b.exports=function(p){try{return{error:!1,value:p()}}catch(n){return{error:!0,value:n}}}},{}],106:[function(e,b,y){var p=e("../internals/an-object"),n=e("../internals/is-object"),h=e("../internals/new-promise-capability");b.exports=function(a,f){if(p(a),n(f)&&f.constructor===a)return f;var l=h.f(a);return(0,l.resolve)(f),l.promise}},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(e,b,y){var p=e("../internals/redefine");b.exports=function(n,h,a){for(var f in h)p(n,f,h[f],a);return n}},{"../internals/redefine":108}],108:[function(e,b,y){var p=e("../internals/global"),n=e("../internals/create-non-enumerable-property"),h=e("../internals/has"),a=e("../internals/set-global"),f=e("../internals/inspect-source"),l=e("../internals/internal-state"),o=l.get,t=l.enforce,r=String(String).split("String");(b.exports=function(s,i,d,g){var v=!!g&&!!g.unsafe,x=!!g&&!!g.enumerable,S=!!g&&!!g.noTargetGet;typeof d=="function"&&(typeof i!="string"||h(d,"name")||n(d,"name",i),t(d).source=r.join(typeof i=="string"?i:"")),s!==p?(v?!S&&s[i]&&(x=!0):delete s[i],x?s[i]=d:n(s,i,d)):x?s[i]=d:a(i,d)})(Function.prototype,"toString",function(){return typeof this=="function"&&o(this).source||f(this)})},{"../internals/create-non-enumerable-property":37,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(e,b,y){var p=e("./classof-raw"),n=e("./regexp-exec");b.exports=function(h,a){var f=h.exec;if(typeof f=="function"){var l=f.call(h,a);if(typeof l!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return l}if(p(h)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return n.call(h,a)}},{"./classof-raw":28,"./regexp-exec":110}],110:[function(e,b,y){var p,n,h=e("./regexp-flags"),a=e("./regexp-sticky-helpers"),f=RegExp.prototype.exec,l=String.prototype.replace,o=f,t=(p=/a/,n=/b*/g,f.call(p,"a"),f.call(n,"a"),p.lastIndex!==0||n.lastIndex!==0),r=a.UNSUPPORTED_Y||a.BROKEN_CARET,s=/()??/.exec("")[1]!==void 0;(t||s||r)&&(o=function(i){var d,g,v,x,S=this,E=r&&S.sticky,M=h.call(S),D=S.source,I=0,R=i;return E&&((M=M.replace("y","")).indexOf("g")===-1&&(M+="g"),R=String(i).slice(S.lastIndex),0<S.lastIndex&&(!S.multiline||S.multiline&&i[S.lastIndex-1]!==`
`)&&(D="(?: "+D+")",R=" "+R,I++),g=new RegExp("^(?:"+D+")",M)),s&&(g=new RegExp("^"+D+"$(?!\\s)",M)),t&&(d=S.lastIndex),v=f.call(E?g:S,R),E?v?(v.input=v.input.slice(I),v[0]=v[0].slice(I),v.index=S.lastIndex,S.lastIndex+=v[0].length):S.lastIndex=0:t&&v&&(S.lastIndex=S.global?v.index+v[0].length:d),s&&v&&1<v.length&&l.call(v[0],g,function(){for(x=1;x<arguments.length-2;x++)arguments[x]===void 0&&(v[x]=void 0)}),v}),b.exports=o},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(e,b,y){var p=e("../internals/an-object");b.exports=function(){var n=p(this),h="";return n.global&&(h+="g"),n.ignoreCase&&(h+="i"),n.multiline&&(h+="m"),n.dotAll&&(h+="s"),n.unicode&&(h+="u"),n.sticky&&(h+="y"),h}},{"../internals/an-object":10}],112:[function(e,b,y){var p=e("./fails");function n(h,a){return RegExp(h,a)}y.UNSUPPORTED_Y=p(function(){var h=n("a","y");return h.lastIndex=2,h.exec("abcd")!=null}),y.BROKEN_CARET=p(function(){var h=n("^r","gy");return h.lastIndex=2,h.exec("str")!=null})},{"./fails":50}],113:[function(e,b,y){b.exports=function(p){if(p==null)throw TypeError("Can't call method on "+p);return p}},{}],114:[function(e,b,y){b.exports=Object.is||function(p,n){return p===n?p!==0||1/p==1/n:p!=p&&n!=n}},{}],115:[function(e,b,y){var p=e("../internals/global"),n=e("../internals/create-non-enumerable-property");b.exports=function(h,a){try{n(p,h,a)}catch{p[h]=a}return a}},{"../internals/create-non-enumerable-property":37,"../internals/global":59}],116:[function(e,b,y){var p=e("../internals/get-built-in"),n=e("../internals/object-define-property"),h=e("../internals/well-known-symbol"),a=e("../internals/descriptors"),f=h("species");b.exports=function(l){var o=p(l),t=n.f;a&&o&&!o[f]&&t(o,f,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":42,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],117:[function(e,b,y){var p=e("../internals/object-define-property").f,n=e("../internals/has"),h=e("../internals/well-known-symbol")("toStringTag");b.exports=function(a,f,l){a&&!n(a=l?a:a.prototype,h)&&p(a,h,{configurable:!0,value:f})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],118:[function(e,b,y){var p=e("../internals/shared"),n=e("../internals/uid"),h=p("keys");b.exports=function(a){return h[a]||(h[a]=n(a))}},{"../internals/shared":120,"../internals/uid":143}],119:[function(e,b,y){var p=e("../internals/global"),n=e("../internals/set-global"),h="__core-js_shared__",a=p[h]||n(h,{});b.exports=a},{"../internals/global":59,"../internals/set-global":115}],120:[function(e,b,y){var p=e("../internals/is-pure"),n=e("../internals/shared-store");(b.exports=function(h,a){return n[h]||(n[h]=a!==void 0?a:{})})("versions",[]).push({version:"3.6.5",mode:p?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(e,b,y){var p=e("../internals/an-object"),n=e("../internals/a-function"),h=e("../internals/well-known-symbol")("species");b.exports=function(a,f){var l,o=p(a).constructor;return o===void 0||(l=p(o)[h])==null?f:n(l)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":146}],122:[function(e,b,y){var p=e("../internals/fails");b.exports=function(n){return p(function(){var h=""[n]('"');return h!==h.toLowerCase()||3<h.split('"').length})}},{"../internals/fails":50}],123:[function(e,b,y){function p(a){return function(f,l){var o,t,r=String(h(f)),s=n(l),i=r.length;return s<0||i<=s?a?"":void 0:(o=r.charCodeAt(s))<55296||56319<o||s+1===i||(t=r.charCodeAt(s+1))<56320||57343<t?a?r.charAt(s):o:a?r.slice(s,s+2):t-56320+(o-55296<<10)+65536}}var n=e("../internals/to-integer"),h=e("../internals/require-object-coercible");b.exports={codeAt:p(!1),charAt:p(!0)}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],124:[function(e,b,y){function p(s){return s+22+75*(s<26)}function n(s,i,d){var g=0;for(s=d?t(s/700):s>>1,s+=t(s/i);455<s;g+=36)s=t(s/35);return t(g+36*s/(s+38))}function h(s){var i,d,g=[],v=(s=function(te){for(var ne=[],$=0,se=te.length;$<se;){var J=te.charCodeAt($++);if(55296<=J&&J<=56319&&$<se){var ue=te.charCodeAt($++);(64512&ue)==56320?ne.push(((1023&J)<<10)+(1023&ue)+65536):(ne.push(J),$--)}else ne.push(J)}return ne}(s)).length,x=128,S=0,E=72;for(i=0;i<s.length;i++)(d=s[i])<128&&g.push(r(d));var M=g.length,D=M;for(M&&g.push("-");D<v;){var I=a;for(i=0;i<s.length;i++)x<=(d=s[i])&&d<I&&(I=d);var R=D+1;if(I-x>t((a-S)/R))throw RangeError(o);for(S+=(I-x)*R,x=I,i=0;i<s.length;i++){if((d=s[i])<x&&++S>a)throw RangeError(o);if(d==x){for(var L=S,U=36;;U+=36){var O=U<=E?1:E+26<=U?26:U-E;if(L<O)break;var G=L-O,V=36-O;g.push(r(p(O+G%V))),L=t(G/V)}g.push(r(p(L))),E=n(S,R,D==M),S=0,++D}}++S,++x}return g.join("")}var a=2147483647,f=/[^\0-\u007E]/,l=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",t=Math.floor,r=String.fromCharCode;b.exports=function(s){var i,d,g=[],v=s.toLowerCase().replace(l,".").split(".");for(i=0;i<v.length;i++)d=v[i],g.push(f.test(d)?"xn--"+h(d):d);return g.join(".")}},{}],125:[function(e,b,y){var p=e("../internals/to-integer"),n=e("../internals/require-object-coercible");b.exports="".repeat||function(h){var a=String(n(this)),f="",l=p(h);if(l<0||l==1/0)throw RangeError("Wrong number of repetitions");for(;0<l;(l>>>=1)&&(a+=a))1&l&&(f+=a);return f}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],126:[function(e,b,y){var p=e("../internals/fails"),n=e("../internals/whitespaces");b.exports=function(h){return p(function(){return!!n[h]()||"\u200B\x85\u180E"[h]()!="\u200B\x85\u180E"||n[h].name!==h})}},{"../internals/fails":50,"../internals/whitespaces":147}],127:[function(e,b,y){function p(l){return function(o){var t=String(n(o));return 1&l&&(t=t.replace(a,"")),2&l&&(t=t.replace(f,"")),t}}var n=e("../internals/require-object-coercible"),h="["+e("../internals/whitespaces")+"]",a=RegExp("^"+h+h+"*"),f=RegExp(h+h+"*$");b.exports={start:p(1),end:p(2),trim:p(3)}},{"../internals/require-object-coercible":113,"../internals/whitespaces":147}],128:[function(e,b,y){function p(O){if(L.hasOwnProperty(O)){var G=L[O];delete L[O],G()}}function n(O){return function(){p(O)}}function h(O){p(O.data)}function a(O){t.postMessage(O+"",x.protocol+"//"+x.host)}var f,l,o,t=e("../internals/global"),r=e("../internals/fails"),s=e("../internals/classof-raw"),i=e("../internals/function-bind-context"),d=e("../internals/html"),g=e("../internals/document-create-element"),v=e("../internals/engine-is-ios"),x=t.location,S=t.setImmediate,E=t.clearImmediate,M=t.process,D=t.MessageChannel,I=t.Dispatch,R=0,L={},U="onreadystatechange";S&&E||(S=function(O){for(var G=[],V=1;V<arguments.length;)G.push(arguments[V++]);return L[++R]=function(){(typeof O=="function"?O:Function(O)).apply(void 0,G)},f(R),R},E=function(O){delete L[O]},s(M)=="process"?f=function(O){M.nextTick(n(O))}:I&&I.now?f=function(O){I.now(n(O))}:D&&!v?(o=(l=new D).port2,l.port1.onmessage=h,f=i(o.postMessage,o,1)):!t.addEventListener||typeof postMessage!="function"||t.importScripts||r(a)||x.protocol==="file:"?f=U in g("script")?function(O){d.appendChild(g("script"))[U]=function(){d.removeChild(this),p(O)}}:function(O){setTimeout(n(O),0)}:(f=a,t.addEventListener("message",h,!1))),b.exports={set:S,clear:E}},{"../internals/classof-raw":28,"../internals/document-create-element":43,"../internals/engine-is-ios":45,"../internals/fails":50,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],129:[function(e,b,y){var p=e("../internals/classof-raw");b.exports=function(n){if(typeof n!="number"&&p(n)!="Number")throw TypeError("Incorrect invocation");return+n}},{"../internals/classof-raw":28}],130:[function(e,b,y){var p=e("../internals/to-integer"),n=Math.max,h=Math.min;b.exports=function(a,f){var l=p(a);return l<0?n(l+f,0):h(l,f)}},{"../internals/to-integer":133}],131:[function(e,b,y){var p=e("../internals/to-integer"),n=e("../internals/to-length");b.exports=function(h){if(h===void 0)return 0;var a=p(h),f=n(a);if(a!==f)throw RangeError("Wrong length or index");return f}},{"../internals/to-integer":133,"../internals/to-length":134}],132:[function(e,b,y){var p=e("../internals/indexed-object"),n=e("../internals/require-object-coercible");b.exports=function(h){return p(n(h))}},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],133:[function(e,b,y){var p=Math.ceil,n=Math.floor;b.exports=function(h){return isNaN(h=+h)?0:(0<h?n:p)(h)}},{}],134:[function(e,b,y){var p=e("../internals/to-integer"),n=Math.min;b.exports=function(h){return 0<h?n(p(h),9007199254740991):0}},{"../internals/to-integer":133}],135:[function(e,b,y){var p=e("../internals/require-object-coercible");b.exports=function(n){return Object(p(n))}},{"../internals/require-object-coercible":113}],136:[function(e,b,y){var p=e("../internals/to-positive-integer");b.exports=function(n,h){var a=p(n);if(a%h)throw RangeError("Wrong offset");return a}},{"../internals/to-positive-integer":137}],137:[function(e,b,y){var p=e("../internals/to-integer");b.exports=function(n){var h=p(n);if(h<0)throw RangeError("The argument can't be less than 0");return h}},{"../internals/to-integer":133}],138:[function(e,b,y){var p=e("../internals/is-object");b.exports=function(n,h){if(!p(n))return n;var a,f;if(h&&typeof(a=n.toString)=="function"&&!p(f=a.call(n))||typeof(a=n.valueOf)=="function"&&!p(f=a.call(n))||!h&&typeof(a=n.toString)=="function"&&!p(f=a.call(n)))return f;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":74}],139:[function(e,b,y){var p={};p[e("../internals/well-known-symbol")("toStringTag")]="z",b.exports=String(p)==="[object z]"},{"../internals/well-known-symbol":146}],140:[function(e,b,y){function p(le,Ee){for(var Ae=0,Te=Ee.length,Ge=new(xe(le))(Te);Ae<Te;)Ge[Ae]=Ee[Ae++];return Ge}function n(le,Ee){he(le,Ee,{get:function(){return me(this)[Ee]}})}function h(le){var Ee;return le instanceof P||(Ee=R(le))=="ArrayBuffer"||Ee=="SharedArrayBuffer"}function a(le,Ee){return ee(le)&&typeof Ee!="symbol"&&Ee in le&&String(+Ee)==String(Ee)}function f(le,Ee){return a(le,Ee=D(Ee,!0))?v(2,le[Ee]):Re(le,Ee)}function l(le,Ee,Ae){return!(a(le,Ee=D(Ee,!0))&&L(Ae)&&I(Ae,"value"))||I(Ae,"get")||I(Ae,"set")||Ae.configurable||I(Ae,"writable")&&!Ae.writable||I(Ae,"enumerable")&&!Ae.enumerable?he(le,Ee,Ae):(le[Ee]=Ae.value,le)}var o=e("../internals/export"),t=e("../internals/global"),r=e("../internals/descriptors"),s=e("../internals/typed-array-constructors-require-wrappers"),i=e("../internals/array-buffer-view-core"),d=e("../internals/array-buffer"),g=e("../internals/an-instance"),v=e("../internals/create-property-descriptor"),x=e("../internals/create-non-enumerable-property"),S=e("../internals/to-length"),E=e("../internals/to-index"),M=e("../internals/to-offset"),D=e("../internals/to-primitive"),I=e("../internals/has"),R=e("../internals/classof"),L=e("../internals/is-object"),U=e("../internals/object-create"),O=e("../internals/object-set-prototype-of"),G=e("../internals/object-get-own-property-names").f,V=e("../internals/typed-array-from"),te=e("../internals/array-iteration").forEach,ne=e("../internals/set-species"),$=e("../internals/object-define-property"),se=e("../internals/object-get-own-property-descriptor"),J=e("../internals/internal-state"),ue=e("../internals/inherit-if-required"),me=J.get,_e=J.set,he=$.f,Re=se.f,ve=Math.round,ye=t.RangeError,P=d.ArrayBuffer,N=d.DataView,z=i.NATIVE_ARRAY_BUFFER_VIEWS,Q=i.TYPED_ARRAY_TAG,oe=i.TypedArray,K=i.TypedArrayPrototype,xe=i.aTypedArrayConstructor,ee=i.isTypedArray,ge="BYTES_PER_ELEMENT",fe="Wrong length";r?(z||(se.f=f,$.f=l,n(K,"buffer"),n(K,"byteOffset"),n(K,"byteLength"),n(K,"length")),o({target:"Object",stat:!0,forced:!z},{getOwnPropertyDescriptor:f,defineProperty:l}),b.exports=function(le,Ee,Ae){function Te(Xe,pe){he(Xe,pe,{get:function(){return et=pe,(F=me(this)).view[Ye](et*Ge+F.byteOffset,!0);var et,F},set:function(et){return F=pe,q=et,W=me(this),Ae&&(q=(q=ve(q))<0?0:255<q?255:255&q),void W.view[Fe](F*Ge+W.byteOffset,q,!0);var F,q,W},enumerable:!0})}var Ge=le.match(/\d+$/)[0]/8,Ze=le+(Ae?"Clamped":"")+"Array",Ye="get"+le,Fe="set"+le,dt=t[Ze],Le=dt,Oe=Le&&Le.prototype,ze={};z?s&&(Le=Ee(function(Xe,pe,et,F){return g(Xe,Le,Ze),ue(L(pe)?h(pe)?F!==void 0?new dt(pe,M(et,Ge),F):et!==void 0?new dt(pe,M(et,Ge)):new dt(pe):ee(pe)?p(Le,pe):V.call(Le,pe):new dt(E(pe)),Xe,Le)}),O&&O(Le,oe),te(G(dt),function(Xe){Xe in Le||x(Le,Xe,dt[Xe])}),Le.prototype=Oe):(Le=Ee(function(Xe,pe,et,F){g(Xe,Le,Ze);var q,W,X,ie=0,we=0;if(L(pe)){if(!h(pe))return ee(pe)?p(Le,pe):V.call(Le,pe);q=pe,we=M(et,Ge);var Me=pe.byteLength;if(F===void 0){if(Me%Ge||(W=Me-we)<0)throw ye(fe)}else if(Me<(W=S(F)*Ge)+we)throw ye(fe);X=W/Ge}else X=E(pe),q=new P(W=X*Ge);for(_e(Xe,{buffer:q,byteOffset:we,byteLength:W,length:X,view:new N(q)});ie<X;)Te(Xe,ie++)}),O&&O(Le,oe),Oe=Le.prototype=U(K)),Oe.constructor!==Le&&x(Oe,"constructor",Le),Q&&x(Oe,Q,Ze),ze[Ze]=Le,o({global:!0,forced:Le!=dt,sham:!z},ze),ge in Le||x(Le,ge,Ge),ge in Oe||x(Oe,ge,Ge),ne(Ze)}):b.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":37,"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/export":49,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":131,"../internals/to-length":134,"../internals/to-offset":136,"../internals/to-primitive":138,"../internals/typed-array-constructors-require-wrappers":141,"../internals/typed-array-from":142}],141:[function(e,b,y){var p=e("../internals/global"),n=e("../internals/fails"),h=e("../internals/check-correctness-of-iteration"),a=e("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,f=p.ArrayBuffer,l=p.Int8Array;b.exports=!a||!n(function(){l(1)})||!n(function(){new l(-1)})||!h(function(o){new l,new l(null),new l(1.5),new l(o)},!0)||n(function(){return new l(new f(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":50,"../internals/global":59}],142:[function(e,b,y){var p=e("../internals/to-object"),n=e("../internals/to-length"),h=e("../internals/get-iterator-method"),a=e("../internals/is-array-iterator-method"),f=e("../internals/function-bind-context"),l=e("../internals/array-buffer-view-core").aTypedArrayConstructor;b.exports=function(o,t,r){var s,i,d,g,v,x,S=p(o),E=arguments.length,M=1<E?t:void 0,D=M!==void 0,I=h(S);if(I!=null&&!a(I))for(x=(v=I.call(S)).next,S=[];!(g=x.call(v)).done;)S.push(g.value);for(D&&2<E&&(M=f(M,r,2)),i=n(S.length),d=new(l(this))(i),s=0;s<i;s++)d[s]=D?M(S[s],s):S[s];return d}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],143:[function(e,b,y){var p=0,n=Math.random();b.exports=function(h){return"Symbol("+String(h===void 0?"":h)+")_"+(++p+n).toString(36)}},{}],144:[function(e,b,y){var p=e("../internals/native-symbol");b.exports=p&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":83}],145:[function(e,b,y){var p=e("../internals/well-known-symbol");y.f=p},{"../internals/well-known-symbol":146}],146:[function(e,b,y){var p=e("../internals/global"),n=e("../internals/shared"),h=e("../internals/has"),a=e("../internals/uid"),f=e("../internals/native-symbol"),l=e("../internals/use-symbol-as-uid"),o=n("wks"),t=p.Symbol,r=l?t:t&&t.withoutSetter||a;b.exports=function(s){return h(o,s)||(f&&h(t,s)?o[s]=t[s]:o[s]=r("Symbol."+s)),o[s]}},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":143,"../internals/use-symbol-as-uid":144}],147:[function(e,b,y){b.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},{}],148:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/global"),h=e("../internals/array-buffer"),a=e("../internals/set-species"),f="ArrayBuffer",l=h[f];p({global:!0,forced:n[f]!==l},{ArrayBuffer:l}),a(f)},{"../internals/array-buffer":13,"../internals/export":49,"../internals/global":59,"../internals/set-species":116}],149:[function(e,b,y){function p(M){if(!f(M))return!1;var D=M[g];return D!==void 0?!!D:a(M)}var n=e("../internals/export"),h=e("../internals/fails"),a=e("../internals/is-array"),f=e("../internals/is-object"),l=e("../internals/to-object"),o=e("../internals/to-length"),t=e("../internals/create-property"),r=e("../internals/array-species-create"),s=e("../internals/array-method-has-species-support"),i=e("../internals/well-known-symbol"),d=e("../internals/engine-v8-version"),g=i("isConcatSpreadable"),v=9007199254740991,x="Maximum allowed index exceeded",S=51<=d||!h(function(){var M=[];return M[g]=!1,M.concat()[0]!==M}),E=s("concat");n({target:"Array",proto:!0,forced:!S||!E},{concat:function(M){var D,I,R,L,U,O=l(this),G=r(O,0),V=0;for(D=-1,R=arguments.length;D<R;D++)if(p(U=D===-1?O:arguments[D])){if(L=o(U.length),v<V+L)throw TypeError(x);for(I=0;I<L;I++,V++)I in U&&t(G,V,U[I])}else{if(v<=V)throw TypeError(x);t(G,V++,U)}return G.length=V,G}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":39,"../internals/engine-v8-version":47,"../internals/export":49,"../internals/fails":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":134,"../internals/to-object":135,"../internals/well-known-symbol":146}],150:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/array-iteration").every,h=e("../internals/array-method-is-strict"),a=e("../internals/array-method-uses-to-length"),f=h("every"),l=a("every");p({target:"Array",proto:!0,forced:!f||!l},{every:function(o,t){return n(this,o,1<arguments.length?t:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],151:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/array-fill"),h=e("../internals/add-to-unscopables");p({target:"Array",proto:!0},{fill:n}),h("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":49}],152:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/array-iteration").filter,h=e("../internals/array-method-has-species-support"),a=e("../internals/array-method-uses-to-length"),f=h("filter"),l=a("filter");p({target:"Array",proto:!0,forced:!f||!l},{filter:function(o,t){return n(this,o,1<arguments.length?t:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":49}],153:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/flatten-into-array"),h=e("../internals/to-object"),a=e("../internals/to-length"),f=e("../internals/a-function"),l=e("../internals/array-species-create");p({target:"Array",proto:!0},{flatMap:function(o,t){var r,s=h(this),i=a(s.length);return f(o),(r=l(s,0)).length=n(r,s,s,i,0,1,o,1<arguments.length?t:void 0),r}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":49,"../internals/flatten-into-array":52,"../internals/to-length":134,"../internals/to-object":135}],154:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/array-for-each");p({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},{"../internals/array-for-each":16,"../internals/export":49}],155:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/array-from");p({target:"Array",stat:!0,forced:!e("../internals/check-correctness-of-iteration")(function(h){Array.from(h)})},{from:n})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":49}],156:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/array-includes").includes,h=e("../internals/add-to-unscopables");p({target:"Array",proto:!0,forced:!e("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(a,f){return n(this,a,1<arguments.length?f:void 0)}}),h("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":49}],157:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/array-includes").indexOf,h=e("../internals/array-method-is-strict"),a=e("../internals/array-method-uses-to-length"),f=[].indexOf,l=!!f&&1/[1].indexOf(1,-0)<0,o=h("indexOf"),t=a("indexOf",{ACCESSORS:!0,1:0});p({target:"Array",proto:!0,forced:l||!o||!t},{indexOf:function(r,s){return l?f.apply(this,arguments)||0:n(this,r,1<arguments.length?s:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],158:[function(e,b,y){var p=e("../internals/to-indexed-object"),n=e("../internals/add-to-unscopables"),h=e("../internals/iterators"),a=e("../internals/internal-state"),f=e("../internals/define-iterator"),l="Array Iterator",o=a.set,t=a.getterFor(l);b.exports=f(Array,"Array",function(r,s){o(this,{type:l,target:p(r),index:0,kind:s})},function(){var r=t(this),s=r.target,i=r.kind,d=r.index++;return!s||d>=s.length?{value:r.target=void 0,done:!0}:i=="keys"?{value:d,done:!1}:i=="values"?{value:s[d],done:!1}:{value:[d,s[d]],done:!1}},"values"),h.Arguments=h.Array,n("keys"),n("values"),n("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":40,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":132}],159:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/indexed-object"),h=e("../internals/to-indexed-object"),a=e("../internals/array-method-is-strict"),f=[].join,l=n!=Object,o=a("join",",");p({target:"Array",proto:!0,forced:l||!o},{join:function(t){return f.call(h(this),t===void 0?",":t)}})},{"../internals/array-method-is-strict":22,"../internals/export":49,"../internals/indexed-object":66,"../internals/to-indexed-object":132}],160:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/array-last-index-of");p({target:"Array",proto:!0,forced:n!==[].lastIndexOf},{lastIndexOf:n})},{"../internals/array-last-index-of":20,"../internals/export":49}],161:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/array-iteration").map,h=e("../internals/array-method-has-species-support"),a=e("../internals/array-method-uses-to-length"),f=h("map"),l=a("map");p({target:"Array",proto:!0,forced:!f||!l},{map:function(o,t){return n(this,o,1<arguments.length?t:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":49}],162:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/is-object"),h=e("../internals/is-array"),a=e("../internals/to-absolute-index"),f=e("../internals/to-length"),l=e("../internals/to-indexed-object"),o=e("../internals/create-property"),t=e("../internals/well-known-symbol"),r=e("../internals/array-method-has-species-support"),s=e("../internals/array-method-uses-to-length"),i=r("slice"),d=s("slice",{ACCESSORS:!0,0:0,1:2}),g=t("species"),v=[].slice,x=Math.max;p({target:"Array",proto:!0,forced:!i||!d},{slice:function(S,E){var M,D,I,R=l(this),L=f(R.length),U=a(S,L),O=a(E===void 0?L:E,L);if(h(R)&&(typeof(M=R.constructor)!="function"||M!==Array&&!h(M.prototype)?n(M)&&(M=M[g])===null&&(M=void 0):M=void 0,M===Array||M===void 0))return v.call(R,U,O);for(D=new(M===void 0?Array:M)(x(O-U,0)),I=0;U<O;U++,I++)U in R&&o(D,I,R[U]);return D.length=I,D}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":39,"../internals/export":49,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134,"../internals/well-known-symbol":146}],163:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/array-iteration").some,h=e("../internals/array-method-is-strict"),a=e("../internals/array-method-uses-to-length"),f=h("some"),l=a("some");p({target:"Array",proto:!0,forced:!f||!l},{some:function(o,t){return n(this,o,1<arguments.length?t:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],164:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/to-absolute-index"),h=e("../internals/to-integer"),a=e("../internals/to-length"),f=e("../internals/to-object"),l=e("../internals/array-species-create"),o=e("../internals/create-property"),t=e("../internals/array-method-has-species-support"),r=e("../internals/array-method-uses-to-length"),s=t("splice"),i=r("splice",{ACCESSORS:!0,0:0,1:2}),d=Math.max,g=Math.min;p({target:"Array",proto:!0,forced:!s||!i},{splice:function(v,x){var S,E,M,D,I,R,L=f(this),U=a(L.length),O=n(v,U),G=arguments.length;if(G===0?S=E=0:E=G===1?(S=0,U-O):(S=G-2,g(d(h(x),0),U-O)),9007199254740991<U+S-E)throw TypeError("Maximum allowed length exceeded");for(M=l(L,E),D=0;D<E;D++)(I=O+D)in L&&o(M,D,L[I]);if(S<(M.length=E)){for(D=O;D<U-E;D++)R=D+S,(I=D+E)in L?L[R]=L[I]:delete L[R];for(D=U;U-E+S<D;D--)delete L[D-1]}else if(E<S)for(D=U-E;O<D;D--)R=D+S-1,(I=D+E-1)in L?L[R]=L[I]:delete L[R];for(D=0;D<S;D++)L[D+O]=arguments[D+2];return L.length=U-E+S,M}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":39,"../internals/export":49,"../internals/to-absolute-index":130,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],165:[function(e,b,y){e("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],166:[function(e,b,y){var p=e("../internals/descriptors"),n=e("../internals/object-define-property").f,h=Function.prototype,a=h.toString,f=/^\s*function ([^ (]*)/;!p||"name"in h||n(h,"name",{configurable:!0,get:function(){try{return a.call(this).match(f)[1]}catch{return""}}})},{"../internals/descriptors":42,"../internals/object-define-property":92}],167:[function(e,b,y){var p=e("../internals/collection"),n=e("../internals/collection-strong");b.exports=p("Map",function(h){return function(a){return h(this,arguments.length?a:void 0)}},n)},{"../internals/collection":31,"../internals/collection-strong":30}],168:[function(e,b,y){var p=e("../internals/export"),n=Math.hypot,h=Math.abs,a=Math.sqrt;p({target:"Math",stat:!0,forced:!!n&&n(1/0,NaN)!==1/0},{hypot:function(f,l){for(var o,t,r=0,s=0,i=arguments.length,d=0;s<i;)d<(o=h(arguments[s++]))?(r=r*(t=d/o)*t+1,d=o):r+=0<o?(t=o/d)*t:o;return d===1/0?1/0:d*a(r)}})},{"../internals/export":49}],169:[function(e,b,y){e("../internals/export")({target:"Math",stat:!0},{sign:e("../internals/math-sign")})},{"../internals/export":49,"../internals/math-sign":80}],170:[function(e,b,y){function p(O){var G,V,te,ne,$,se,J,ue,me=r(O,!1);if(typeof me=="string"&&2<me.length){if((G=(me=x(me)).charCodeAt(0))===43||G===45){if((V=me.charCodeAt(2))===88||V===120)return NaN}else if(G===48){switch(me.charCodeAt(1)){case 66:case 98:te=2,ne=49;break;case 79:case 111:te=8,ne=55;break;default:return+me}for(se=($=me.slice(2)).length,J=0;J<se;J++)if((ue=$.charCodeAt(J))<48||ne<ue)return NaN;return parseInt($,te)}}return+me}var n=e("../internals/descriptors"),h=e("../internals/global"),a=e("../internals/is-forced"),f=e("../internals/redefine"),l=e("../internals/has"),o=e("../internals/classof-raw"),t=e("../internals/inherit-if-required"),r=e("../internals/to-primitive"),s=e("../internals/fails"),i=e("../internals/object-create"),d=e("../internals/object-get-own-property-names").f,g=e("../internals/object-get-own-property-descriptor").f,v=e("../internals/object-define-property").f,x=e("../internals/string-trim").trim,S="Number",E=h[S],M=E.prototype,D=o(i(M))==S;if(a(S,!E(" 0o1")||!E("0b1")||E("+0x1"))){for(var I,R=function(O){var G=arguments.length<1?0:O,V=this;return V instanceof R&&(D?s(function(){M.valueOf.call(V)}):o(V)!=S)?t(new E(p(G)),V,R):p(G)},L=n?d(E):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),U=0;L.length>U;U++)l(E,I=L[U])&&!l(R,I)&&v(R,I,g(E,I));(R.prototype=M).constructor=R,f(h,S,R)}},{"../internals/classof-raw":28,"../internals/descriptors":42,"../internals/fails":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":127,"../internals/to-primitive":138}],171:[function(e,b,y){e("../internals/export")({target:"Number",stat:!0},{isFinite:e("../internals/number-is-finite")})},{"../internals/export":49,"../internals/number-is-finite":88}],172:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/to-integer"),h=e("../internals/this-number-value"),a=e("../internals/string-repeat"),f=e("../internals/fails"),l=1 .toFixed,o=Math.floor,t=function(r,s,i){return s===0?i:s%2==1?t(r,s-1,i*r):t(r*r,s/2,i)};p({target:"Number",proto:!0,forced:l&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||0xde0b6b3a7640080 .toFixed(0)!=="1000000000000000128")||!f(function(){l.call({})})},{toFixed:function(r){function s(L,U){for(var O=-1,G=U;++O<6;)G+=L*D[O],D[O]=G%1e7,G=o(G/1e7)}function i(L){for(var U=6,O=0;0<=--U;)O+=D[U],D[U]=o(O/L),O=O%L*1e7}function d(){for(var L=6,U="";0<=--L;)if(U!==""||L===0||D[L]!==0){var O=String(D[L]);U=U===""?O:U+a.call("0",7-O.length)+O}return U}var g,v,x,S,E=h(this),M=n(r),D=[0,0,0,0,0,0],I="",R="0";if(M<0||20<M)throw RangeError("Incorrect fraction digits");if(E!=E)return"NaN";if(E<=-1e21||1e21<=E)return String(E);if(E<0&&(I="-",E=-E),1e-21<E)if(v=(g=function(L){for(var U=0,O=L;4096<=O;)U+=12,O/=4096;for(;2<=O;)U+=1,O/=2;return U}(E*t(2,69,1))-69)<0?E*t(2,-g,1):E/t(2,g,1),v*=4503599627370496,0<(g=52-g)){for(s(0,v),x=M;7<=x;)s(1e7,0),x-=7;for(s(t(10,x,1),0),x=g-1;23<=x;)i(1<<23),x-=23;i(1<<x),s(1,1),i(2),R=d()}else s(0,v),s(1<<-g,0),R=d()+a.call("0",M);return R=0<M?I+((S=R.length)<=M?"0."+a.call("0",M-S)+R:R.slice(0,S-M)+"."+R.slice(S-M)):I+R}})},{"../internals/export":49,"../internals/fails":50,"../internals/string-repeat":125,"../internals/this-number-value":129,"../internals/to-integer":133}],173:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/object-assign");p({target:"Object",stat:!0,forced:Object.assign!==n},{assign:n})},{"../internals/export":49,"../internals/object-assign":89}],174:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/fails"),h=e("../internals/object-get-own-property-names-external").f;p({target:"Object",stat:!0,forced:n(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:h})},{"../internals/export":49,"../internals/fails":50,"../internals/object-get-own-property-names-external":94}],175:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/fails"),h=e("../internals/to-object"),a=e("../internals/object-get-prototype-of"),f=e("../internals/correct-prototype-getter");p({target:"Object",stat:!0,forced:n(function(){a(1)}),sham:!f},{getPrototypeOf:function(l){return a(h(l))}})},{"../internals/correct-prototype-getter":34,"../internals/export":49,"../internals/fails":50,"../internals/object-get-prototype-of":97,"../internals/to-object":135}],176:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/to-object"),h=e("../internals/object-keys");p({target:"Object",stat:!0,forced:e("../internals/fails")(function(){h(1)})},{keys:function(a){return h(n(a))}})},{"../internals/export":49,"../internals/fails":50,"../internals/object-keys":99,"../internals/to-object":135}],177:[function(e,b,y){var p=e("../internals/to-string-tag-support"),n=e("../internals/redefine"),h=e("../internals/object-to-string");p||n(Object.prototype,"toString",h,{unsafe:!0})},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":139}],178:[function(e,b,y){function p(Le){var Oe;return!(!D(Le)||typeof(Oe=Le.then)!="function")&&Oe}function n(Le,Oe,ze){if(!Oe.notified){Oe.notified=!0;var Xe=Oe.reactions;ne(function(){for(var pe=Oe.value,et=Oe.state==1,F=0;Xe.length>F;){var q,W,X,ie=Xe[F++],we=et?ie.ok:ie.fail,Me=ie.resolve,Be=ie.reject,de=ie.domain;try{we?(et||(Oe.rejection===2&&Fe(Le,Oe),Oe.rejection=1),we===!0?q=pe:(de&&de.enter(),q=we(pe),de&&(de.exit(),X=!0)),q===ie.promise?Be(oe("Promise-chain cycle")):(W=p(q))?W.call(q,Me,Be):Me(q)):Be(pe)}catch(We){de&&!X&&de.exit(),Be(We)}}Oe.reactions=[],Oe.notified=!1,ze&&!Oe.rejection&&Ze(Le,Oe)})}}function h(Le,Oe,ze){var Xe,pe;Ee?((Xe=K.createEvent("Event")).promise=Oe,Xe.reason=ze,Xe.initEvent(Le,!1,!0),d.dispatchEvent(Xe)):Xe={promise:Oe,reason:ze},(pe=d["on"+Le])?pe(Xe):Le===Ae&&se("Unhandled promise rejection",ze)}function a(Le,Oe,ze,Xe){return function(pe){Le(Oe,ze,pe,Xe)}}function f(Le,Oe,ze,Xe){Oe.done||(Oe.done=!0,Xe&&(Oe=Xe),Oe.value=ze,Oe.state=2,n(Le,Oe,!0))}var l,o,t,r,s=e("../internals/export"),i=e("../internals/is-pure"),d=e("../internals/global"),g=e("../internals/get-built-in"),v=e("../internals/native-promise-constructor"),x=e("../internals/redefine"),S=e("../internals/redefine-all"),E=e("../internals/set-to-string-tag"),M=e("../internals/set-species"),D=e("../internals/is-object"),I=e("../internals/a-function"),R=e("../internals/an-instance"),L=e("../internals/classof-raw"),U=e("../internals/inspect-source"),O=e("../internals/iterate"),G=e("../internals/check-correctness-of-iteration"),V=e("../internals/species-constructor"),te=e("../internals/task").set,ne=e("../internals/microtask"),$=e("../internals/promise-resolve"),se=e("../internals/host-report-errors"),J=e("../internals/new-promise-capability"),ue=e("../internals/perform"),me=e("../internals/internal-state"),_e=e("../internals/is-forced"),he=e("../internals/well-known-symbol"),Re=e("../internals/engine-v8-version"),ve=he("species"),ye="Promise",P=me.get,N=me.set,z=me.getterFor(ye),Q=v,oe=d.TypeError,K=d.document,xe=d.process,ee=g("fetch"),ge=J.f,fe=ge,le=L(xe)=="process",Ee=!!(K&&K.createEvent&&d.dispatchEvent),Ae="unhandledrejection",Te=_e(ye,function(){if(U(Q)===String(Q)&&(Re===66||!le&&typeof PromiseRejectionEvent!="function")||i&&!Q.prototype.finally)return!0;if(51<=Re&&/native code/.test(Q))return!1;function Le(ze){ze(function(){},function(){})}var Oe=Q.resolve(1);return(Oe.constructor={})[ve]=Le,!(Oe.then(function(){})instanceof Le)}),Ge=Te||!G(function(Le){Q.all(Le).catch(function(){})}),Ze=function(Le,Oe){te.call(d,function(){var ze,Xe=Oe.value;if(Ye(Oe)&&(ze=ue(function(){le?xe.emit("unhandledRejection",Xe,Le):h(Ae,Le,Xe)}),Oe.rejection=le||Ye(Oe)?2:1,ze.error))throw ze.value})},Ye=function(Le){return Le.rejection!==1&&!Le.parent},Fe=function(Le,Oe){te.call(d,function(){le?xe.emit("rejectionHandled",Le):h("rejectionhandled",Le,Oe.value)})},dt=function(Le,Oe,ze,Xe){if(!Oe.done){Oe.done=!0,Xe&&(Oe=Xe);try{if(Le===ze)throw oe("Promise can't be resolved itself");var pe=p(ze);pe?ne(function(){var et={done:!1};try{pe.call(ze,a(dt,Le,et,Oe),a(f,Le,et,Oe))}catch(F){f(Le,et,F,Oe)}}):(Oe.value=ze,Oe.state=1,n(Le,Oe,!1))}catch(et){f(Le,{done:!1},et,Oe)}}};Te&&(Q=function(Le){R(this,Q,ye),I(Le),l.call(this);var Oe=P(this);try{Le(a(dt,this,Oe),a(f,this,Oe))}catch(ze){f(this,Oe,ze)}},(l=function(){N(this,{type:ye,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=S(Q.prototype,{then:function(Le,Oe){var ze=z(this),Xe=ge(V(this,Q));return Xe.ok=typeof Le!="function"||Le,Xe.fail=typeof Oe=="function"&&Oe,Xe.domain=le?xe.domain:void 0,ze.parent=!0,ze.reactions.push(Xe),ze.state!=0&&n(this,ze,!1),Xe.promise},catch:function(Le){return this.then(void 0,Le)}}),o=function(){var Le=new l,Oe=P(Le);this.promise=Le,this.resolve=a(dt,Le,Oe),this.reject=a(f,Le,Oe)},J.f=ge=function(Le){return Le===Q||Le===t?new o(Le):fe(Le)},i||typeof v!="function"||(r=v.prototype.then,x(v.prototype,"then",function(Le,Oe){var ze=this;return new Q(function(Xe,pe){r.call(ze,Xe,pe)}).then(Le,Oe)},{unsafe:!0}),typeof ee=="function"&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(Le){return $(Q,ee.apply(d,arguments))}}))),s({global:!0,wrap:!0,forced:Te},{Promise:Q}),E(Q,ye,!1,!0),M(ye),t=g(ye),s({target:ye,stat:!0,forced:Te},{reject:function(Le){var Oe=ge(this);return Oe.reject.call(void 0,Le),Oe.promise}}),s({target:ye,stat:!0,forced:i||Te},{resolve:function(Le){return $(i&&this===t?Q:this,Le)}}),s({target:ye,stat:!0,forced:Ge},{all:function(Le){var Oe=this,ze=ge(Oe),Xe=ze.resolve,pe=ze.reject,et=ue(function(){var F=I(Oe.resolve),q=[],W=0,X=1;O(Le,function(ie){var we=W++,Me=!1;q.push(void 0),X++,F.call(Oe,ie).then(function(Be){Me||(Me=!0,q[we]=Be,--X||Xe(q))},pe)}),--X||Xe(q)});return et.error&&pe(et.value),ze.promise},race:function(Le){var Oe=this,ze=ge(Oe),Xe=ze.reject,pe=ue(function(){var et=I(Oe.resolve);O(Le,function(F){et.call(Oe,F).then(ze.resolve,Xe)})});return pe.error&&Xe(pe.value),ze.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":47,"../internals/export":49,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":128,"../internals/well-known-symbol":146}],179:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/get-built-in"),h=e("../internals/a-function"),a=e("../internals/an-object"),f=e("../internals/is-object"),l=e("../internals/object-create"),o=e("../internals/function-bind"),t=e("../internals/fails"),r=n("Reflect","construct"),s=t(function(){function g(){}return!(r(function(){},[],g)instanceof g)}),i=!t(function(){r(function(){})}),d=s||i;p({target:"Reflect",stat:!0,forced:d,sham:d},{construct:function(g,v,x){h(g),a(v);var S=arguments.length<3?g:h(x);if(i&&!s)return r(g,v,S);if(g==S){switch(v.length){case 0:return new g;case 1:return new g(v[0]);case 2:return new g(v[0],v[1]);case 3:return new g(v[0],v[1],v[2]);case 4:return new g(v[0],v[1],v[2],v[3])}var E=[null];return E.push.apply(E,v),new(o.apply(g,E))}var M=S.prototype,D=l(f(M)?M:Object.prototype),I=Function.apply.call(g,D,v);return f(I)?I:D}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":49,"../internals/fails":50,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],180:[function(e,b,y){var p=e("../internals/descriptors"),n=e("../internals/global"),h=e("../internals/is-forced"),a=e("../internals/inherit-if-required"),f=e("../internals/object-define-property").f,l=e("../internals/object-get-own-property-names").f,o=e("../internals/is-regexp"),t=e("../internals/regexp-flags"),r=e("../internals/regexp-sticky-helpers"),s=e("../internals/redefine"),i=e("../internals/fails"),d=e("../internals/internal-state").set,g=e("../internals/set-species"),v=e("../internals/well-known-symbol")("match"),x=n.RegExp,S=x.prototype,E=/a/g,M=/a/g,D=new x(E)!==E,I=r.UNSUPPORTED_Y;if(p&&h("RegExp",!D||I||i(function(){return M[v]=!1,x(E)!=E||x(M)==M||x(E,"i")!="/a/i"}))){let G=function(V){V in R||f(R,V,{configurable:!0,get:function(){return x[V]},set:function(te){x[V]=te}})};for(var O=G,R=function(V,te){var ne,$=this instanceof R,se=o(V),J=te===void 0;if(!$&&se&&V.constructor===R&&J)return V;D?se&&!J&&(V=V.source):V instanceof R&&(J&&(te=t.call(V)),V=V.source),I&&(ne=!!te&&-1<te.indexOf("y"))&&(te=te.replace(/y/g,""));var ue=a(D?new x(V,te):x(V,te),$?this:S,R);return I&&ne&&d(ue,{sticky:ne}),ue},L=l(x),U=0;L.length>U;)G(L[U++]);(S.constructor=R).prototype=S,s(n,"RegExp",R)}g("RegExp")},{"../internals/descriptors":42,"../internals/fails":50,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":146}],181:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/regexp-exec");p({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},{"../internals/export":49,"../internals/regexp-exec":110}],182:[function(e,b,y){var p=e("../internals/redefine"),n=e("../internals/an-object"),h=e("../internals/fails"),a=e("../internals/regexp-flags"),f="toString",l=RegExp.prototype,o=l[f],t=h(function(){return o.call({source:"a",flags:"b"})!="/a/b"}),r=o.name!=f;(t||r)&&p(RegExp.prototype,f,function(){var s=n(this),i=String(s.source),d=s.flags;return"/"+i+"/"+String(d===void 0&&s instanceof RegExp&&!("flags"in l)?a.call(s):d)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":50,"../internals/redefine":108,"../internals/regexp-flags":111}],183:[function(e,b,y){var p=e("../internals/collection"),n=e("../internals/collection-strong");b.exports=p("Set",function(h){return function(a){return h(this,arguments.length?a:void 0)}},n)},{"../internals/collection":31,"../internals/collection-strong":30}],184:[function(e,b,y){var p,n=e("../internals/export"),h=e("../internals/object-get-own-property-descriptor").f,a=e("../internals/to-length"),f=e("../internals/not-a-regexp"),l=e("../internals/require-object-coercible"),o=e("../internals/correct-is-regexp-logic"),t=e("../internals/is-pure"),r="".endsWith,s=Math.min,i=o("endsWith");n({target:"String",proto:!0,forced:!!(t||i||!(p=h(String.prototype,"endsWith"))||p.writable)&&!i},{endsWith:function(d,g){var v=String(l(this));f(d);var x=1<arguments.length?g:void 0,S=a(v.length),E=x===void 0?S:s(a(x),S),M=String(d);return r?r.call(v,M,E):v.slice(E-M.length,E)===M}})},{"../internals/correct-is-regexp-logic":33,"../internals/export":49,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":134}],185:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/not-a-regexp"),h=e("../internals/require-object-coercible");p({target:"String",proto:!0,forced:!e("../internals/correct-is-regexp-logic")("includes")},{includes:function(a,f){return!!~String(h(this)).indexOf(n(a),1<arguments.length?f:void 0)}})},{"../internals/correct-is-regexp-logic":33,"../internals/export":49,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],186:[function(e,b,y){var p=e("../internals/string-multibyte").charAt,n=e("../internals/internal-state"),h=e("../internals/define-iterator"),a="String Iterator",f=n.set,l=n.getterFor(a);h(String,"String",function(o){f(this,{type:a,string:String(o),index:0})},function(){var o,t=l(this),r=t.string,s=t.index;return s>=r.length?{value:void 0,done:!0}:(o=p(r,s),t.index+=o.length,{value:o,done:!1})})},{"../internals/define-iterator":40,"../internals/internal-state":70,"../internals/string-multibyte":123}],187:[function(e,b,y){var p=e("../internals/fix-regexp-well-known-symbol-logic"),n=e("../internals/an-object"),h=e("../internals/to-length"),a=e("../internals/require-object-coercible"),f=e("../internals/advance-string-index"),l=e("../internals/regexp-exec-abstract");p("match",1,function(o,t,r){return[function(s){var i=a(this),d=s==null?void 0:s[o];return d!==void 0?d.call(s,i):new RegExp(s)[o](String(i))},function(s){var i=r(t,s,this);if(i.done)return i.value;var d=n(s),g=String(this);if(!d.global)return l(d,g);for(var v,x=d.unicode,S=[],E=d.lastIndex=0;(v=l(d,g))!==null;){var M=String(v[0]);(S[E]=M)===""&&(d.lastIndex=f(g,h(d.lastIndex),x)),E++}return E===0?null:S}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":134}],188:[function(e,b,y){e("../internals/export")({target:"String",proto:!0},{repeat:e("../internals/string-repeat")})},{"../internals/export":49,"../internals/string-repeat":125}],189:[function(e,b,y){var p=e("../internals/fix-regexp-well-known-symbol-logic"),n=e("../internals/an-object"),h=e("../internals/to-object"),a=e("../internals/to-length"),f=e("../internals/to-integer"),l=e("../internals/require-object-coercible"),o=e("../internals/advance-string-index"),t=e("../internals/regexp-exec-abstract"),r=Math.max,s=Math.min,i=Math.floor,d=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g;p("replace",2,function(v,x,S,E){var M=E.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,D=E.REPLACE_KEEPS_$0,I=M?"$":"$0";return[function(L,U){var O=l(this),G=L==null?void 0:L[v];return G!==void 0?G.call(L,O,U):x.call(String(O),L,U)},function(L,U){if(!M&&D||typeof U=="string"&&U.indexOf(I)===-1){var O=S(x,L,this,U);if(O.done)return O.value}var G=n(L),V=String(this),te=typeof U=="function";te||(U=String(U));var ne=G.global;if(ne){var $=G.unicode;G.lastIndex=0}for(var se=[];;){var J=t(G,V);if(J===null||(se.push(J),!ne))break;String(J[0])===""&&(G.lastIndex=o(V,a(G.lastIndex),$))}for(var ue,me="",_e=0,he=0;he<se.length;he++){J=se[he];for(var Re=String(J[0]),ve=r(s(f(J.index),V.length),0),ye=[],P=1;P<J.length;P++)ye.push((ue=J[P])===void 0?ue:String(ue));var N=J.groups;if(te){var z=[Re].concat(ye,ve,V);N!==void 0&&z.push(N);var Q=String(U.apply(void 0,z))}else Q=R(Re,V,ve,ye,N,U);_e<=ve&&(me+=V.slice(_e,ve)+Q,_e=ve+Re.length)}return me+V.slice(_e)}];function R(L,U,O,G,V,te){var ne=O+L.length,$=G.length,se=g;return V!==void 0&&(V=h(V),se=d),x.call(te,se,function(J,ue){var me;switch(ue.charAt(0)){case"$":return"$";case"&":return L;case"`":return U.slice(0,O);case"'":return U.slice(ne);case"<":me=V[ue.slice(1,-1)];break;default:var _e=+ue;if(_e==0)return J;if($<_e){var he=i(_e/10);return he===0?J:he<=$?G[he-1]===void 0?ue.charAt(1):G[he-1]+ue.charAt(1):J}me=G[_e-1]}return me===void 0?"":me})}})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],190:[function(e,b,y){var p=e("../internals/fix-regexp-well-known-symbol-logic"),n=e("../internals/an-object"),h=e("../internals/require-object-coercible"),a=e("../internals/same-value"),f=e("../internals/regexp-exec-abstract");p("search",1,function(l,o,t){return[function(r){var s=h(this),i=r==null?void 0:r[l];return i!==void 0?i.call(r,s):new RegExp(r)[l](String(s))},function(r){var s=t(o,r,this);if(s.done)return s.value;var i=n(r),d=String(this),g=i.lastIndex;a(g,0)||(i.lastIndex=0);var v=f(i,d);return a(i.lastIndex,g)||(i.lastIndex=g),v===null?-1:v.index}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],191:[function(e,b,y){var p=e("../internals/fix-regexp-well-known-symbol-logic"),n=e("../internals/is-regexp"),h=e("../internals/an-object"),a=e("../internals/require-object-coercible"),f=e("../internals/species-constructor"),l=e("../internals/advance-string-index"),o=e("../internals/to-length"),t=e("../internals/regexp-exec-abstract"),r=e("../internals/regexp-exec"),s=e("../internals/fails"),i=[].push,d=Math.min,g=4294967295,v=!s(function(){return!RegExp(g,"y")});p("split",2,function(x,S,E){var M;return M="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(D,I){var R=String(a(this)),L=I===void 0?g:I>>>0;if(L==0)return[];if(D===void 0)return[R];if(!n(D))return S.call(R,D,L);for(var U,O,G,V=[],te=(D.ignoreCase?"i":"")+(D.multiline?"m":"")+(D.unicode?"u":"")+(D.sticky?"y":""),ne=0,$=new RegExp(D.source,te+"g");(U=r.call($,R))&&!(ne<(O=$.lastIndex)&&(V.push(R.slice(ne,U.index)),1<U.length&&U.index<R.length&&i.apply(V,U.slice(1)),G=U[0].length,ne=O,V.length>=L));)$.lastIndex===U.index&&$.lastIndex++;return ne===R.length?!G&&$.test("")||V.push(""):V.push(R.slice(ne)),V.length>L?V.slice(0,L):V}:"0".split(void 0,0).length?function(D,I){return D===void 0&&I===0?[]:S.call(this,D,I)}:S,[function(D,I){var R=a(this),L=D==null?void 0:D[x];return L!==void 0?L.call(D,R,I):M.call(String(R),D,I)},function(D,I){var R=E(M,D,this,I,M!==S);if(R.done)return R.value;var L=h(D),U=String(this),O=f(L,RegExp),G=L.unicode,V=(L.ignoreCase?"i":"")+(L.multiline?"m":"")+(L.unicode?"u":"")+(v?"y":"g"),te=new O(v?L:"^(?:"+L.source+")",V),ne=I===void 0?g:I>>>0;if(ne==0)return[];if(U.length===0)return t(te,U)===null?[U]:[];for(var $=0,se=0,J=[];se<U.length;){te.lastIndex=v?se:0;var ue,me=t(te,v?U:U.slice(se));if(me===null||(ue=d(o(te.lastIndex+(v?0:se)),U.length))===$)se=l(U,se,G);else{if(J.push(U.slice($,se)),J.length===ne)return J;for(var _e=1;_e<=me.length-1;_e++)if(J.push(me[_e]),J.length===ne)return J;se=$=ue}}return J.push(U.slice($)),J}]},!v)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":50,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":134}],192:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/create-html");p({target:"String",proto:!0,forced:e("../internals/string-html-forced")("sub")},{sub:function(){return n(this,"sub","","")}})},{"../internals/create-html":35,"../internals/export":49,"../internals/string-html-forced":122}],193:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/string-trim").trim;p({target:"String",proto:!0,forced:e("../internals/string-trim-forced")("trim")},{trim:function(){return n(this)}})},{"../internals/export":49,"../internals/string-trim":127,"../internals/string-trim-forced":126}],194:[function(e,b,y){var p=e("../internals/export"),n=e("../internals/descriptors"),h=e("../internals/global"),a=e("../internals/has"),f=e("../internals/is-object"),l=e("../internals/object-define-property").f,o=e("../internals/copy-constructor-properties"),t=h.Symbol;if(n&&typeof t=="function"&&(!("description"in t.prototype)||t().description!==void 0)){var r={},s=function(x){var S=arguments.length<1||x===void 0?void 0:String(x),E=this instanceof s?new t(S):S===void 0?t():t(S);return S===""&&(r[E]=!0),E};o(s,t);var i=s.prototype=t.prototype;i.constructor=s;var d=i.toString,g=String(t("test"))=="Symbol(test)",v=/^Symbol\((.*)\)[^)]+$/;l(i,"description",{configurable:!0,get:function(){var x=f(this)?this.valueOf():this,S=d.call(x);if(a(r,x))return"";var E=g?S.slice(7,-1):S.replace(v,"$1");return E===""?void 0:E}}),p({global:!0,forced:!0},{Symbol:s})}},{"../internals/copy-constructor-properties":32,"../internals/descriptors":42,"../internals/export":49,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],195:[function(e,b,y){e("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":41}],196:[function(e,b,y){function p(W,X){var ie=Ze[W]=R(fe[oe]);return xe(ie,{type:Q,tag:W,description:X}),r||(ie.description=X),ie}function n(W,X){S(W);var ie=M(X),we=L(ie).concat(q(ie));return N(we,function(Me){r&&!F.call(ie,Me)||et(W,Me,ie[Me])}),W}function h(W,X){var ie=M(W),we=D(X,!0);if(ie!==ge||!g(Ze,we)||g(Ye,we)){var Me=Ee(ie,we);return!Me||!g(Ze,we)||g(ie,z)&&ie[z][we]||(Me.enumerable=!0),Me}}function a(W){var X=Te(M(W)),ie=[];return N(X,function(we){g(Ze,we)||g(me,we)||ie.push(we)}),ie}var f=e("../internals/export"),l=e("../internals/global"),o=e("../internals/get-built-in"),t=e("../internals/is-pure"),r=e("../internals/descriptors"),s=e("../internals/native-symbol"),i=e("../internals/use-symbol-as-uid"),d=e("../internals/fails"),g=e("../internals/has"),v=e("../internals/is-array"),x=e("../internals/is-object"),S=e("../internals/an-object"),E=e("../internals/to-object"),M=e("../internals/to-indexed-object"),D=e("../internals/to-primitive"),I=e("../internals/create-property-descriptor"),R=e("../internals/object-create"),L=e("../internals/object-keys"),U=e("../internals/object-get-own-property-names"),O=e("../internals/object-get-own-property-names-external"),G=e("../internals/object-get-own-property-symbols"),V=e("../internals/object-get-own-property-descriptor"),te=e("../internals/object-define-property"),ne=e("../internals/object-property-is-enumerable"),$=e("../internals/create-non-enumerable-property"),se=e("../internals/redefine"),J=e("../internals/shared"),ue=e("../internals/shared-key"),me=e("../internals/hidden-keys"),_e=e("../internals/uid"),he=e("../internals/well-known-symbol"),Re=e("../internals/well-known-symbol-wrapped"),ve=e("../internals/define-well-known-symbol"),ye=e("../internals/set-to-string-tag"),P=e("../internals/internal-state"),N=e("../internals/array-iteration").forEach,z=ue("hidden"),Q="Symbol",oe="prototype",K=he("toPrimitive"),xe=P.set,ee=P.getterFor(Q),ge=Object[oe],fe=l.Symbol,le=o("JSON","stringify"),Ee=V.f,Ae=te.f,Te=O.f,Ge=ne.f,Ze=J("symbols"),Ye=J("op-symbols"),Fe=J("string-to-symbol-registry"),dt=J("symbol-to-string-registry"),Le=J("wks"),Oe=l.QObject,ze=!Oe||!Oe[oe]||!Oe[oe].findChild,Xe=r&&d(function(){return R(Ae({},"a",{get:function(){return Ae(this,"a",{value:7}).a}})).a!=7})?function(W,X,ie){var we=Ee(ge,X);we&&delete ge[X],Ae(W,X,ie),we&&W!==ge&&Ae(ge,X,we)}:Ae,pe=i?function(W){return typeof W=="symbol"}:function(W){return Object(W)instanceof fe},et=function(W,X,ie){W===ge&&et(Ye,X,ie),S(W);var we=D(X,!0);return S(ie),g(Ze,we)?(ie.enumerable?(g(W,z)&&W[z][we]&&(W[z][we]=!1),ie=R(ie,{enumerable:I(0,!1)})):(g(W,z)||Ae(W,z,I(1,{})),W[z][we]=!0),Xe(W,we,ie)):Ae(W,we,ie)},F=function(W){var X=D(W,!0),ie=Ge.call(this,X);return!(this===ge&&g(Ze,X)&&!g(Ye,X))&&(!(ie||!g(this,X)||!g(Ze,X)||g(this,z)&&this[z][X])||ie)},q=function(W){var X=W===ge,ie=Te(X?Ye:M(W)),we=[];return N(ie,function(Me){!g(Ze,Me)||X&&!g(ge,Me)||we.push(Ze[Me])}),we};s||(se((fe=function(W){if(this instanceof fe)throw TypeError("Symbol is not a constructor");var X=arguments.length&&W!==void 0?String(W):void 0,ie=_e(X),we=function(Me){this===ge&&we.call(Ye,Me),g(this,z)&&g(this[z],ie)&&(this[z][ie]=!1),Xe(this,ie,I(1,Me))};return r&&ze&&Xe(ge,ie,{configurable:!0,set:we}),p(ie,X)})[oe],"toString",function(){return ee(this).tag}),se(fe,"withoutSetter",function(W){return p(_e(W),W)}),ne.f=F,te.f=et,V.f=h,U.f=O.f=a,G.f=q,Re.f=function(W){return p(he(W),W)},r&&(Ae(fe[oe],"description",{configurable:!0,get:function(){return ee(this).description}}),t||se(ge,"propertyIsEnumerable",F,{unsafe:!0}))),f({global:!0,wrap:!0,forced:!s,sham:!s},{Symbol:fe}),N(L(Le),function(W){ve(W)}),f({target:Q,stat:!0,forced:!s},{for:function(W){var X=String(W);if(g(Fe,X))return Fe[X];var ie=fe(X);return Fe[X]=ie,dt[ie]=X,ie},keyFor:function(W){if(!pe(W))throw TypeError(W+" is not a symbol");if(g(dt,W))return dt[W]},useSetter:function(){ze=!0},useSimple:function(){ze=!1}}),f({target:"Object",stat:!0,forced:!s,sham:!r},{create:function(W,X){return X===void 0?R(W):n(R(W),X)},defineProperty:et,defineProperties:n,getOwnPropertyDescriptor:h}),f({target:"Object",stat:!0,forced:!s},{getOwnPropertyNames:a,getOwnPropertySymbols:q}),f({target:"Object",stat:!0,forced:d(function(){G.f(1)})},{getOwnPropertySymbols:function(W){return G.f(E(W))}}),le&&f({target:"JSON",stat:!0,forced:!s||d(function(){var W=fe();return le([W])!="[null]"||le({a:W})!="{}"||le(Object(W))!="{}"})},{stringify:function(W,X,ie){for(var we,Me=[W],Be=1;Be<arguments.length;)Me.push(arguments[Be++]);if((x(we=X)||W!==void 0)&&!pe(W))return v(X)||(X=function(de,We){if(typeof we=="function"&&(We=we.call(this,de,We)),!pe(We))return We}),Me[1]=X,le.apply(null,Me)}}),fe[oe][K]||$(fe[oe],K,fe[oe].valueOf),ye(fe,Q),me[z]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":37,"../internals/create-property-descriptor":38,"../internals/define-well-known-symbol":41,"../internals/descriptors":42,"../internals/export":49,"../internals/fails":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":132,"../internals/to-object":135,"../internals/to-primitive":138,"../internals/uid":143,"../internals/use-symbol-as-uid":144,"../internals/well-known-symbol":146,"../internals/well-known-symbol-wrapped":145}],197:[function(e,b,y){var p=e("../internals/array-buffer-view-core"),n=e("../internals/array-copy-within"),h=p.aTypedArray;(0,p.exportTypedArrayMethod)("copyWithin",function(a,f,l){return n.call(h(this),a,f,2<arguments.length?l:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],198:[function(e,b,y){var p=e("../internals/array-buffer-view-core"),n=e("../internals/array-iteration").every,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("every",function(a,f){return n(h(this),a,1<arguments.length?f:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],199:[function(e,b,y){var p=e("../internals/array-buffer-view-core"),n=e("../internals/array-fill"),h=p.aTypedArray;(0,p.exportTypedArrayMethod)("fill",function(a){return n.apply(h(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],200:[function(e,b,y){var p=e("../internals/array-buffer-view-core"),n=e("../internals/array-iteration").filter,h=e("../internals/species-constructor"),a=p.aTypedArray,f=p.aTypedArrayConstructor;(0,p.exportTypedArrayMethod)("filter",function(l,o){for(var t=n(a(this),l,1<arguments.length?o:void 0),r=h(this,this.constructor),s=0,i=t.length,d=new(f(r))(i);s<i;)d[s]=t[s++];return d})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],201:[function(e,b,y){var p=e("../internals/array-buffer-view-core"),n=e("../internals/array-iteration").findIndex,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("findIndex",function(a,f){return n(h(this),a,1<arguments.length?f:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],202:[function(e,b,y){var p=e("../internals/array-buffer-view-core"),n=e("../internals/array-iteration").find,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("find",function(a,f){return n(h(this),a,1<arguments.length?f:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],203:[function(e,b,y){e("../internals/typed-array-constructor")("Float32",function(p){return function(n,h,a){return p(this,n,h,a)}})},{"../internals/typed-array-constructor":140}],204:[function(e,b,y){e("../internals/typed-array-constructor")("Float64",function(p){return function(n,h,a){return p(this,n,h,a)}})},{"../internals/typed-array-constructor":140}],205:[function(e,b,y){var p=e("../internals/array-buffer-view-core"),n=e("../internals/array-iteration").forEach,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("forEach",function(a,f){n(h(this),a,1<arguments.length?f:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],206:[function(e,b,y){var p=e("../internals/array-buffer-view-core"),n=e("../internals/array-includes").includes,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("includes",function(a,f){return n(h(this),a,1<arguments.length?f:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],207:[function(e,b,y){var p=e("../internals/array-buffer-view-core"),n=e("../internals/array-includes").indexOf,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("indexOf",function(a,f){return n(h(this),a,1<arguments.length?f:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],208:[function(e,b,y){e("../internals/typed-array-constructor")("Int16",function(p){return function(n,h,a){return p(this,n,h,a)}})},{"../internals/typed-array-constructor":140}],209:[function(e,b,y){e("../internals/typed-array-constructor")("Int32",function(p){return function(n,h,a){return p(this,n,h,a)}})},{"../internals/typed-array-constructor":140}],210:[function(e,b,y){function p(){return o.call(s(this))}var n=e("../internals/global"),h=e("../internals/array-buffer-view-core"),a=e("../modules/es.array.iterator"),f=e("../internals/well-known-symbol")("iterator"),l=n.Uint8Array,o=a.values,t=a.keys,r=a.entries,s=h.aTypedArray,i=h.exportTypedArrayMethod,d=l&&l.prototype[f],g=!!d&&(d.name=="values"||d.name==null);i("entries",function(){return r.call(s(this))}),i("keys",function(){return t.call(s(this))}),i("values",p,!g),i(f,p,!g)},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],211:[function(e,b,y){var p=e("../internals/array-buffer-view-core"),n=p.aTypedArray,h=p.exportTypedArrayMethod,a=[].join;h("join",function(f){return a.apply(n(this),arguments)})},{"../internals/array-buffer-view-core":12}],212:[function(e,b,y){var p=e("../internals/array-buffer-view-core"),n=e("../internals/array-last-index-of"),h=p.aTypedArray;(0,p.exportTypedArrayMethod)("lastIndexOf",function(a){return n.apply(h(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],213:[function(e,b,y){var p=e("../internals/array-buffer-view-core"),n=e("../internals/array-iteration").map,h=e("../internals/species-constructor"),a=p.aTypedArray,f=p.aTypedArrayConstructor;(0,p.exportTypedArrayMethod)("map",function(l,o){return n(a(this),l,1<arguments.length?o:void 0,function(t,r){return new(f(h(t,t.constructor)))(r)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],214:[function(e,b,y){var p=e("../internals/array-buffer-view-core"),n=e("../internals/array-reduce").right,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("reduceRight",function(a,f){return n(h(this),a,arguments.length,1<arguments.length?f:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],215:[function(e,b,y){var p=e("../internals/array-buffer-view-core"),n=e("../internals/array-reduce").left,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("reduce",function(a,f){return n(h(this),a,arguments.length,1<arguments.length?f:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],216:[function(e,b,y){var p=e("../internals/array-buffer-view-core"),n=p.aTypedArray,h=p.exportTypedArrayMethod,a=Math.floor;h("reverse",function(){for(var f,l=n(this).length,o=a(l/2),t=0;t<o;)f=this[t],this[t++]=this[--l],this[l]=f;return this})},{"../internals/array-buffer-view-core":12}],217:[function(e,b,y){var p=e("../internals/array-buffer-view-core"),n=e("../internals/to-length"),h=e("../internals/to-offset"),a=e("../internals/to-object"),f=e("../internals/fails"),l=p.aTypedArray;(0,p.exportTypedArrayMethod)("set",function(o,t){l(this);var r=h(1<arguments.length?t:void 0,1),s=this.length,i=a(o),d=n(i.length),g=0;if(s<d+r)throw RangeError("Wrong length");for(;g<d;)this[r+g]=i[g++]},f(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/to-length":134,"../internals/to-object":135,"../internals/to-offset":136}],218:[function(e,b,y){var p=e("../internals/array-buffer-view-core"),n=e("../internals/species-constructor"),h=e("../internals/fails"),a=p.aTypedArray,f=p.aTypedArrayConstructor,l=p.exportTypedArrayMethod,o=[].slice;l("slice",function(t,r){for(var s=o.call(a(this),t,r),i=n(this,this.constructor),d=0,g=s.length,v=new(f(i))(g);d<g;)v[d]=s[d++];return v},h(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/species-constructor":121}],219:[function(e,b,y){var p=e("../internals/array-buffer-view-core"),n=e("../internals/array-iteration").some,h=p.aTypedArray;(0,p.exportTypedArrayMethod)("some",function(a,f){return n(h(this),a,1<arguments.length?f:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],220:[function(e,b,y){var p=e("../internals/array-buffer-view-core"),n=p.aTypedArray,h=p.exportTypedArrayMethod,a=[].sort;h("sort",function(f){return a.call(n(this),f)})},{"../internals/array-buffer-view-core":12}],221:[function(e,b,y){var p=e("../internals/array-buffer-view-core"),n=e("../internals/to-length"),h=e("../internals/to-absolute-index"),a=e("../internals/species-constructor"),f=p.aTypedArray;(0,p.exportTypedArrayMethod)("subarray",function(l,o){var t=f(this),r=t.length,s=h(l,r);return new(a(t,t.constructor))(t.buffer,t.byteOffset+s*t.BYTES_PER_ELEMENT,n((o===void 0?r:h(o,r))-s))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":130,"../internals/to-length":134}],222:[function(e,b,y){var p=e("../internals/global"),n=e("../internals/array-buffer-view-core"),h=e("../internals/fails"),a=p.Int8Array,f=n.aTypedArray,l=n.exportTypedArrayMethod,o=[].toLocaleString,t=[].slice,r=!!a&&h(function(){o.call(new a(1))});l("toLocaleString",function(){return o.apply(r?t.call(f(this)):f(this),arguments)},h(function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()})||!h(function(){a.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/global":59}],223:[function(e,b,y){var p=e("../internals/array-buffer-view-core").exportTypedArrayMethod,n=e("../internals/fails"),h=e("../internals/global").Uint8Array,a=h&&h.prototype||{},f=[].toString,l=[].join;n(function(){f.call({})})&&(f=function(){return l.call(this)}),p("toString",f,a.toString!=f)},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/global":59}],224:[function(e,b,y){e("../internals/typed-array-constructor")("Uint16",function(p){return function(n,h,a){return p(this,n,h,a)}})},{"../internals/typed-array-constructor":140}],225:[function(e,b,y){e("../internals/typed-array-constructor")("Uint32",function(p){return function(n,h,a){return p(this,n,h,a)}})},{"../internals/typed-array-constructor":140}],226:[function(e,b,y){e("../internals/typed-array-constructor")("Uint8",function(p){return function(n,h,a){return p(this,n,h,a)}})},{"../internals/typed-array-constructor":140}],227:[function(e,b,y){e("../internals/typed-array-constructor")("Uint8",function(p){return function(n,h,a){return p(this,n,h,a)}},!0)},{"../internals/typed-array-constructor":140}],228:[function(e,b,y){var p=e("../internals/global"),n=e("../internals/dom-iterables"),h=e("../internals/array-for-each"),a=e("../internals/create-non-enumerable-property");for(var f in n){var l=p[f],o=l&&l.prototype;if(o&&o.forEach!==h)try{a(o,"forEach",h)}catch{o.forEach=h}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":37,"../internals/dom-iterables":44,"../internals/global":59}],229:[function(e,b,y){var p=e("../internals/global"),n=e("../internals/dom-iterables"),h=e("../modules/es.array.iterator"),a=e("../internals/create-non-enumerable-property"),f=e("../internals/well-known-symbol"),l=f("iterator"),o=f("toStringTag"),t=h.values;for(var r in n){var s=p[r],i=s&&s.prototype;if(i){if(i[l]!==t)try{a(i,l,t)}catch{i[l]=t}if(i[o]||a(i,o,r),n[r]){for(var d in h)if(i[d]!==h[d])try{a(i,d,h[d])}catch{i[d]=h[d]}}}}},{"../internals/create-non-enumerable-property":37,"../internals/dom-iterables":44,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],230:[function(e,b,y){e("../modules/es.array.iterator");function p(Q){try{return decodeURIComponent(Q)}catch{return Q}}function n(Q){var oe,K=Q.replace(he," "),xe=4;try{return decodeURIComponent(K)}catch{for(;xe;)K=K.replace((oe=xe--,Re[oe-1]||(Re[oe-1]=RegExp("((?:%[\\da-f]{2}){"+oe+"})","gi"))),p);return K}}function h(Q){return ye[Q]}function a(Q){return encodeURIComponent(Q).replace(ve,h)}function f(Q,oe){if(oe)for(var K,xe,ee=oe.split("&"),ge=0;ge<ee.length;)(K=ee[ge++]).length&&(xe=K.split("="),Q.push({key:n(xe.shift()),value:n(xe.join("="))}))}function l(Q){this.entries.length=0,f(this.entries,Q)}function o(Q,oe){if(Q<oe)throw TypeError("Not enough arguments")}var t=e("../internals/export"),r=e("../internals/get-built-in"),s=e("../internals/native-url"),i=e("../internals/redefine"),d=e("../internals/redefine-all"),g=e("../internals/set-to-string-tag"),v=e("../internals/create-iterator-constructor"),x=e("../internals/internal-state"),S=e("../internals/an-instance"),E=e("../internals/has"),M=e("../internals/function-bind-context"),D=e("../internals/classof"),I=e("../internals/an-object"),R=e("../internals/is-object"),L=e("../internals/object-create"),U=e("../internals/create-property-descriptor"),O=e("../internals/get-iterator"),G=e("../internals/get-iterator-method"),V=e("../internals/well-known-symbol"),te=r("fetch"),ne=r("Headers"),$=V("iterator"),se="URLSearchParams",J=se+"Iterator",ue=x.set,me=x.getterFor(se),_e=x.getterFor(J),he=/\+/g,Re=Array(4),ve=/[!'()~]|%20/g,ye={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},P=v(function(Q,oe){ue(this,{type:J,iterator:O(me(Q).entries),kind:oe})},"Iterator",function(){var Q=_e(this),oe=Q.kind,K=Q.iterator.next(),xe=K.value;return K.done||(K.value=oe==="keys"?xe.key:oe==="values"?xe.value:[xe.key,xe.value]),K}),N=function(Q){S(this,N,se);var oe,K,xe,ee,ge,fe,le,Ee,Ae,Te=0<arguments.length?Q:void 0,Ge=[];if(ue(this,{type:se,entries:Ge,updateURL:function(){},updateSearchParams:l}),Te!==void 0)if(R(Te))if(typeof(oe=G(Te))=="function")for(xe=(K=oe.call(Te)).next;!(ee=xe.call(K)).done;){if((le=(fe=(ge=O(I(ee.value))).next).call(ge)).done||(Ee=fe.call(ge)).done||!fe.call(ge).done)throw TypeError("Expected sequence with length 2");Ge.push({key:le.value+"",value:Ee.value+""})}else for(Ae in Te)E(Te,Ae)&&Ge.push({key:Ae,value:Te[Ae]+""});else f(Ge,typeof Te=="string"?Te.charAt(0)==="?"?Te.slice(1):Te:Te+"")},z=N.prototype;d(z,{append:function(Q,oe){o(arguments.length,2);var K=me(this);K.entries.push({key:Q+"",value:oe+""}),K.updateURL()},delete:function(Q){o(arguments.length,1);for(var oe=me(this),K=oe.entries,xe=Q+"",ee=0;ee<K.length;)K[ee].key===xe?K.splice(ee,1):ee++;oe.updateURL()},get:function(Q){o(arguments.length,1);for(var oe=me(this).entries,K=Q+"",xe=0;xe<oe.length;xe++)if(oe[xe].key===K)return oe[xe].value;return null},getAll:function(Q){o(arguments.length,1);for(var oe=me(this).entries,K=Q+"",xe=[],ee=0;ee<oe.length;ee++)oe[ee].key===K&&xe.push(oe[ee].value);return xe},has:function(Q){o(arguments.length,1);for(var oe=me(this).entries,K=Q+"",xe=0;xe<oe.length;)if(oe[xe++].key===K)return!0;return!1},set:function(Q,oe){o(arguments.length,1);for(var K,xe=me(this),ee=xe.entries,ge=!1,fe=Q+"",le=oe+"",Ee=0;Ee<ee.length;Ee++)(K=ee[Ee]).key===fe&&(ge?ee.splice(Ee--,1):(ge=!0,K.value=le));ge||ee.push({key:fe,value:le}),xe.updateURL()},sort:function(){var Q,oe,K,xe=me(this),ee=xe.entries,ge=ee.slice();for(K=ee.length=0;K<ge.length;K++){for(Q=ge[K],oe=0;oe<K;oe++)if(ee[oe].key>Q.key){ee.splice(oe,0,Q);break}oe===K&&ee.push(Q)}xe.updateURL()},forEach:function(Q,oe){for(var K,xe=me(this).entries,ee=M(Q,1<arguments.length?oe:void 0,3),ge=0;ge<xe.length;)ee((K=xe[ge++]).value,K.key,this)},keys:function(){return new P(this,"keys")},values:function(){return new P(this,"values")},entries:function(){return new P(this,"entries")}},{enumerable:!0}),i(z,$,z.entries),i(z,"toString",function(){for(var Q,oe=me(this).entries,K=[],xe=0;xe<oe.length;)Q=oe[xe++],K.push(a(Q.key)+"="+a(Q.value));return K.join("&")},{enumerable:!0}),g(N,se),t({global:!0,forced:!s},{URLSearchParams:N}),s||typeof te!="function"||typeof ne!="function"||t({global:!0,enumerable:!0,forced:!0},{fetch:function(Q,oe){var K,xe,ee,ge=[Q];return 1<arguments.length&&(R(K=oe)&&(xe=K.body,D(xe)===se&&((ee=K.headers?new ne(K.headers):new ne).has("content-type")||ee.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),K=L(K,{body:U(0,String(xe)),headers:U(0,ee)}))),ge.push(K)),te.apply(this,ge)}}),b.exports={URLSearchParams:N,getState:me}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":36,"../internals/create-property-descriptor":38,"../internals/export":49,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],231:[function(e,b,y){e("../modules/es.string.iterator");function p(ae,Ie){var He,Ue,$e;if(Ie.charAt(0)=="["){if(Ie.charAt(Ie.length-1)!="]"||!(He=fe(Ie.slice(1,-1))))return _e;ae.host=He}else if(Ye(ae)){if(Ie=L(Ie),oe.test(Ie)||(He=ge(Ie))===null)return _e;ae.host=He}else{if(K.test(Ie))return _e;for(He="",Ue=I(Ie),$e=0;$e<Ue.length;$e++)He+=Ge(Ue[$e],le);ae.host=He}}function n(ae){var Ie,He,Ue,$e;if(typeof ae=="number"){for(Ie=[],He=0;He<4;He++)Ie.unshift(ae%256),ae=J(ae/256);return Ie.join(".")}if(typeof ae!="object")return ae;for(Ie="",Ue=function(De){for(var vt=null,St=1,Et=null,mt=0,Qe=0;Qe<8;Qe++)De[Qe]!==0?(St<mt&&(vt=Et,St=mt),Et=null,mt=0):(Et===null&&(Et=Qe),++mt);return St<mt&&(vt=Et,St=mt),vt}(ae),He=0;He<8;He++)$e&&ae[He]===0||($e=$e&&!1,Ue===He?(Ie+=He?":":"::",$e=!0):(Ie+=ae[He].toString(16),He<7&&(Ie+=":")));return"["+Ie+"]"}function h(ae){return ae.username!=""||ae.password!=""}function a(ae){return!ae.host||ae.cannotBeABaseURL||ae.scheme=="file"}function f(ae,Ie){var He;return ae.length==2&&Re.test(ae.charAt(0))&&((He=ae.charAt(1))==":"||!Ie&&He=="|")}function l(ae){var Ie;return 1<ae.length&&f(ae.slice(0,2))&&(ae.length==2||(Ie=ae.charAt(2))==="/"||Ie==="\\"||Ie==="?"||Ie==="#")}function o(ae){var Ie=ae.path,He=Ie.length;!He||ae.scheme=="file"&&He==1&&f(Ie[0],!0)||Ie.pop()}function t(ae,Ie,He,Ue){var $e,De,vt,St,Et,mt,Qe=He||Fe,Dt=0,st="",bn=!1,Zr=!1,wn=!1;for(He||(ae.scheme="",ae.username="",ae.password="",ae.host=null,ae.port=null,ae.path=[],ae.query=null,ae.fragment=null,ae.cannotBeABaseURL=!1,Ie=Ie.replace(xe,"")),Ie=Ie.replace(ee,""),$e=I(Ie);Dt<=$e.length;){switch(De=$e[Dt],Qe){case Fe:if(!De||!Re.test(De)){if(He)return me;Qe=Le;continue}st+=De.toLowerCase(),Qe=dt;break;case dt:if(De&&(ve.test(De)||De=="+"||De=="-"||De=="."))st+=De.toLowerCase();else{if(De!=":"){if(He)return me;st="",Qe=Le,Dt=0;continue}if(He&&(Ye(ae)!=M(Ze,st)||st=="file"&&(h(ae)||ae.port!==null)||ae.scheme=="file"&&!ae.host))return;if(ae.scheme=st,He)return void(Ye(ae)&&Ze[ae.scheme]==ae.port&&(ae.port=null));st="",ae.scheme=="file"?Qe=we:Ye(ae)&&Ue&&Ue.scheme==ae.scheme?Qe=Oe:Ye(ae)?Qe=et:$e[Dt+1]=="/"?(Qe=ze,Dt++):(ae.cannotBeABaseURL=!0,ae.path.push(""),Qe=rt)}break;case Le:if(!Ue||Ue.cannotBeABaseURL&&De!="#")return me;if(Ue.cannotBeABaseURL&&De=="#"){ae.scheme=Ue.scheme,ae.path=Ue.path.slice(),ae.query=Ue.query,ae.fragment="",ae.cannotBeABaseURL=!0,Qe=ft;break}Qe=Ue.scheme=="file"?we:Xe;continue;case Oe:if(De!="/"||$e[Dt+1]!="/"){Qe=Xe;continue}Qe=F,Dt++;break;case ze:if(De=="/"){Qe=q;break}Qe=We;continue;case Xe:if(ae.scheme=Ue.scheme,De==s)ae.username=Ue.username,ae.password=Ue.password,ae.host=Ue.host,ae.port=Ue.port,ae.path=Ue.path.slice(),ae.query=Ue.query;else if(De=="/"||De=="\\"&&Ye(ae))Qe=pe;else if(De=="?")ae.username=Ue.username,ae.password=Ue.password,ae.host=Ue.host,ae.port=Ue.port,ae.path=Ue.path.slice(),ae.query="",Qe=lt;else{if(De!="#"){ae.username=Ue.username,ae.password=Ue.password,ae.host=Ue.host,ae.port=Ue.port,ae.path=Ue.path.slice(),ae.path.pop(),Qe=We;continue}ae.username=Ue.username,ae.password=Ue.password,ae.host=Ue.host,ae.port=Ue.port,ae.path=Ue.path.slice(),ae.query=Ue.query,ae.fragment="",Qe=ft}break;case pe:if(!Ye(ae)||De!="/"&&De!="\\"){if(De!="/"){ae.username=Ue.username,ae.password=Ue.password,ae.host=Ue.host,ae.port=Ue.port,Qe=We;continue}Qe=q}else Qe=F;break;case et:if(Qe=F,De!="/"||st.charAt(Dt+1)!="/")continue;Dt++;break;case F:if(De=="/"||De=="\\")break;Qe=q;continue;case q:if(De=="@"){bn&&(st="%40"+st),bn=!0,vt=I(st);for(var xn=0;xn<vt.length;xn++){var _n=vt[xn];if(_n!=":"||wn){var sn=Ge(_n,Te);wn?ae.password+=sn:ae.username+=sn}else wn=!0}st=""}else if(De==s||De=="/"||De=="?"||De=="#"||De=="\\"&&Ye(ae)){if(bn&&st=="")return"Invalid authority";Dt-=I(st).length+1,st="",Qe=W}else st+=De;break;case W:case X:if(He&&ae.scheme=="file"){Qe=Be;continue}if(De!=":"||Zr){if(De==s||De=="/"||De=="?"||De=="#"||De=="\\"&&Ye(ae)){if(Ye(ae)&&st=="")return _e;if(He&&st==""&&(h(ae)||ae.port!==null))return;if(St=p(ae,st))return St;if(st="",Qe=de,He)return;continue}De=="["?Zr=!0:De=="]"&&(Zr=!1),st+=De}else{if(st=="")return _e;if(St=p(ae,st))return St;if(st="",Qe=ie,He==X)return}break;case ie:if(!ye.test(De)){if(De==s||De=="/"||De=="?"||De=="#"||De=="\\"&&Ye(ae)||He){if(st!=""){var an=parseInt(st,10);if(65535<an)return he;ae.port=Ye(ae)&&an===Ze[ae.scheme]?null:an,st=""}if(He)return;Qe=de;continue}return he}st+=De;break;case we:if(ae.scheme="file",De=="/"||De=="\\")Qe=Me;else{if(!Ue||Ue.scheme!="file"){Qe=We;continue}if(De==s)ae.host=Ue.host,ae.path=Ue.path.slice(),ae.query=Ue.query;else if(De=="?")ae.host=Ue.host,ae.path=Ue.path.slice(),ae.query="",Qe=lt;else{if(De!="#"){l($e.slice(Dt).join(""))||(ae.host=Ue.host,ae.path=Ue.path.slice(),o(ae)),Qe=We;continue}ae.host=Ue.host,ae.path=Ue.path.slice(),ae.query=Ue.query,ae.fragment="",Qe=ft}}break;case Me:if(De=="/"||De=="\\"){Qe=Be;break}Ue&&Ue.scheme=="file"&&!l($e.slice(Dt).join(""))&&(f(Ue.path[0],!0)?ae.path.push(Ue.path[0]):ae.host=Ue.host),Qe=We;continue;case Be:if(De==s||De=="/"||De=="\\"||De=="?"||De=="#"){if(!He&&f(st))Qe=We;else if(st==""){if(ae.host="",He)return;Qe=de}else{if(St=p(ae,st))return St;if(ae.host=="localhost"&&(ae.host=""),He)return;st="",Qe=de}continue}st+=De;break;case de:if(Ye(ae)){if(Qe=We,De!="/"&&De!="\\")continue}else if(He||De!="?")if(He||De!="#"){if(De!=s&&(Qe=We,De!="/"))continue}else ae.fragment="",Qe=ft;else ae.query="",Qe=lt;break;case We:if(De==s||De=="/"||De=="\\"&&Ye(ae)||!He&&(De=="?"||De=="#")){if((mt=(mt=st).toLowerCase())===".."||mt==="%2e."||mt===".%2e"||mt==="%2e%2e"?(o(ae),De=="/"||De=="\\"&&Ye(ae)||ae.path.push("")):(Et=st)==="."||Et.toLowerCase()==="%2e"?De=="/"||De=="\\"&&Ye(ae)||ae.path.push(""):(ae.scheme=="file"&&!ae.path.length&&f(st)&&(ae.host&&(ae.host=""),st=st.charAt(0)+":"),ae.path.push(st)),st="",ae.scheme=="file"&&(De==s||De=="?"||De=="#"))for(;1<ae.path.length&&ae.path[0]==="";)ae.path.shift();De=="?"?(ae.query="",Qe=lt):De=="#"&&(ae.fragment="",Qe=ft)}else st+=Ge(De,Ae);break;case rt:De=="?"?(ae.query="",Qe=lt):De=="#"?(ae.fragment="",Qe=ft):De!=s&&(ae.path[0]+=Ge(De,le));break;case lt:He||De!="#"?De!=s&&(De=="'"&&Ye(ae)?ae.query+="%27":ae.query+=De=="#"?"%23":Ge(De,le)):(ae.fragment="",Qe=ft);break;case ft:De!=s&&(ae.fragment+=Ge(De,Ee))}Dt++}}function r(ae,Ie){return{get:ae,set:Ie,configurable:!0,enumerable:!0}}var s,i=e("../internals/export"),d=e("../internals/descriptors"),g=e("../internals/native-url"),v=e("../internals/global"),x=e("../internals/object-define-properties"),S=e("../internals/redefine"),E=e("../internals/an-instance"),M=e("../internals/has"),D=e("../internals/object-assign"),I=e("../internals/array-from"),R=e("../internals/string-multibyte").codeAt,L=e("../internals/string-punycode-to-ascii"),U=e("../internals/set-to-string-tag"),O=e("../modules/web.url-search-params"),G=e("../internals/internal-state"),V=v.URL,te=O.URLSearchParams,ne=O.getState,$=G.set,se=G.getterFor("URL"),J=Math.floor,ue=Math.pow,me="Invalid scheme",_e="Invalid host",he="Invalid port",Re=/[A-Za-z]/,ve=/[\d+-.A-Za-z]/,ye=/\d/,P=/^(0x|0X)/,N=/^[0-7]+$/,z=/^\d+$/,Q=/^[\dA-Fa-f]+$/,oe=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,K=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,xe=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,ee=/[\u0009\u000A\u000D]/g,ge=function(ae){var Ie,He,Ue,$e,De,vt,St,Et=ae.split(".");if(Et.length&&Et[Et.length-1]==""&&Et.pop(),4<(Ie=Et.length))return ae;for(He=[],Ue=0;Ue<Ie;Ue++){if(($e=Et[Ue])=="")return ae;if(De=10,1<$e.length&&$e.charAt(0)=="0"&&(De=P.test($e)?16:8,$e=$e.slice(De==8?1:2)),$e==="")vt=0;else{if(!(De==10?z:De==8?N:Q).test($e))return ae;vt=parseInt($e,De)}He.push(vt)}for(Ue=0;Ue<Ie;Ue++)if(vt=He[Ue],Ue==Ie-1){if(vt>=ue(256,5-Ie))return null}else if(255<vt)return null;for(St=He.pop(),Ue=0;Ue<He.length;Ue++)St+=He[Ue]*ue(256,3-Ue);return St},fe=function(ae){function Ie(){return ae.charAt(st)}var He,Ue,$e,De,vt,St,Et,mt=[0,0,0,0,0,0,0,0],Qe=0,Dt=null,st=0;if(Ie()==":"){if(ae.charAt(1)!=":")return;st+=2,Dt=++Qe}for(;Ie();){if(Qe==8)return;if(Ie()!=":"){for(He=Ue=0;Ue<4&&Q.test(Ie());)He=16*He+parseInt(Ie(),16),st++,Ue++;if(Ie()=="."){if(Ue==0||(st-=Ue,6<Qe))return;for($e=0;Ie();){if(De=null,0<$e){if(!(Ie()=="."&&$e<4))return;st++}if(!ye.test(Ie()))return;for(;ye.test(Ie());){if(vt=parseInt(Ie(),10),De===null)De=vt;else{if(De==0)return;De=10*De+vt}if(255<De)return;st++}mt[Qe]=256*mt[Qe]+De,++$e!=2&&$e!=4||Qe++}if($e!=4)return;break}if(Ie()==":"){if(st++,!Ie())return}else if(Ie())return;mt[Qe++]=He}else{if(Dt!==null)return;st++,Dt=++Qe}}if(Dt!==null)for(St=Qe-Dt,Qe=7;Qe!=0&&0<St;)Et=mt[Qe],mt[Qe--]=mt[Dt+St-1],mt[Dt+--St]=Et;else if(Qe!=8)return;return mt},le={},Ee=D({},le,{" ":1,'"':1,"<":1,">":1,"`":1}),Ae=D({},Ee,{"#":1,"?":1,"{":1,"}":1}),Te=D({},Ae,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Ge=function(ae,Ie){var He=R(ae,0);return 32<He&&He<127&&!M(Ie,ae)?ae:encodeURIComponent(ae)},Ze={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Ye=function(ae){return M(Ze,ae.scheme)},Fe={},dt={},Le={},Oe={},ze={},Xe={},pe={},et={},F={},q={},W={},X={},ie={},we={},Me={},Be={},de={},We={},rt={},lt={},ft={},ut=function(ae,Ie){var He,Ue,$e=E(this,ut,"URL"),De=1<arguments.length?Ie:void 0,vt=String(ae),St=$($e,{type:"URL"});if(De!==void 0){if(De instanceof ut)He=se(De);else if(Ue=t(He={},String(De)))throw TypeError(Ue)}if(Ue=t(St,vt,null,He))throw TypeError(Ue);var Et=St.searchParams=new te,mt=ne(Et);mt.updateSearchParams(St.query),mt.updateURL=function(){St.query=String(Et)||null},d||($e.href=xt.call($e),$e.origin=pr.call($e),$e.protocol=Yt.call($e),$e.username=Hr.call($e),$e.password=xr.call($e),$e.host=mr.call($e),$e.hostname=zr.call($e),$e.port=qr.call($e),$e.pathname=Xr.call($e),$e.search=Yr.call($e),$e.searchParams=Qr.call($e),$e.hash=on.call($e))},ht=ut.prototype,xt=function(){var ae=se(this),Ie=ae.scheme,He=ae.username,Ue=ae.password,$e=ae.host,De=ae.port,vt=ae.path,St=ae.query,Et=ae.fragment,mt=Ie+":";return $e!==null?(mt+="//",h(ae)&&(mt+=He+(Ue?":"+Ue:"")+"@"),mt+=n($e),De!==null&&(mt+=":"+De)):Ie=="file"&&(mt+="//"),mt+=ae.cannotBeABaseURL?vt[0]:vt.length?"/"+vt.join("/"):"",St!==null&&(mt+="?"+St),Et!==null&&(mt+="#"+Et),mt},pr=function(){var ae=se(this),Ie=ae.scheme,He=ae.port;if(Ie=="blob")try{return new URL(Ie.path[0]).origin}catch{return"null"}return Ie!="file"&&Ye(ae)?Ie+"://"+n(ae.host)+(He!==null?":"+He:""):"null"},Yt=function(){return se(this).scheme+":"},Hr=function(){return se(this).username},xr=function(){return se(this).password},mr=function(){var ae=se(this),Ie=ae.host,He=ae.port;return Ie===null?"":He===null?n(Ie):n(Ie)+":"+He},zr=function(){var ae=se(this).host;return ae===null?"":n(ae)},qr=function(){var ae=se(this).port;return ae===null?"":String(ae)},Xr=function(){var ae=se(this),Ie=ae.path;return ae.cannotBeABaseURL?Ie[0]:Ie.length?"/"+Ie.join("/"):""},Yr=function(){var ae=se(this).query;return ae?"?"+ae:""},Qr=function(){return se(this).searchParams},on=function(){var ae=se(this).fragment;return ae?"#"+ae:""};if(d&&x(ht,{href:r(xt,function(ae){var Ie=se(this),He=String(ae),Ue=t(Ie,He);if(Ue)throw TypeError(Ue);ne(Ie.searchParams).updateSearchParams(Ie.query)}),origin:r(pr),protocol:r(Yt,function(ae){var Ie=se(this);t(Ie,String(ae)+":",Fe)}),username:r(Hr,function(ae){var Ie=se(this),He=I(String(ae));if(!a(Ie)){Ie.username="";for(var Ue=0;Ue<He.length;Ue++)Ie.username+=Ge(He[Ue],Te)}}),password:r(xr,function(ae){var Ie=se(this),He=I(String(ae));if(!a(Ie)){Ie.password="";for(var Ue=0;Ue<He.length;Ue++)Ie.password+=Ge(He[Ue],Te)}}),host:r(mr,function(ae){var Ie=se(this);Ie.cannotBeABaseURL||t(Ie,String(ae),W)}),hostname:r(zr,function(ae){var Ie=se(this);Ie.cannotBeABaseURL||t(Ie,String(ae),X)}),port:r(qr,function(ae){var Ie=se(this);a(Ie)||((ae=String(ae))==""?Ie.port=null:t(Ie,ae,ie))}),pathname:r(Xr,function(ae){var Ie=se(this);Ie.cannotBeABaseURL||(Ie.path=[],t(Ie,ae+"",de))}),search:r(Yr,function(ae){var Ie=se(this);(ae=String(ae))==""?Ie.query=null:(ae.charAt(0)=="?"&&(ae=ae.slice(1)),Ie.query="",t(Ie,ae,lt)),ne(Ie.searchParams).updateSearchParams(Ie.query)}),searchParams:r(Qr),hash:r(on,function(ae){var Ie=se(this);(ae=String(ae))!=""?(ae.charAt(0)=="#"&&(ae=ae.slice(1)),Ie.fragment="",t(Ie,ae,ft)):Ie.fragment=null})}),S(ht,"toJSON",function(){return xt.call(this)},{enumerable:!0}),S(ht,"toString",function(){return xt.call(this)},{enumerable:!0}),V){var kr=V.createObjectURL,Pr=V.revokeObjectURL;kr&&S(ut,"createObjectURL",function(ae){return kr.apply(V,arguments)}),Pr&&S(ut,"revokeObjectURL",function(ae){return Pr.apply(V,arguments)})}U(ut,"URL"),i({global:!0,forced:!g,sham:!d},{URL:ut})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":42,"../internals/export":49,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":124,"../modules/es.string.iterator":186,"../modules/web.url-search-params":230}],232:[function(e,b,y){b.exports=e("./").polyfill()},{"./":233}],233:[function(e,b,y){(function(p,n){var h,a;h=this,a=function(){function f(ee){return typeof ee=="function"}var l=Array.isArray?Array.isArray:function(ee){return Object.prototype.toString.call(ee)==="[object Array]"},o=0,t=void 0,r=void 0,s=function(ee,ge){E[o]=ee,E[o+1]=ge,(o+=2)===2&&(r?r(M):U())},i=typeof window<"u"?window:void 0,d=i||{},g=d.MutationObserver||d.WebKitMutationObserver,v=typeof self>"u"&&p!==void 0&&{}.toString.call(p)==="[object process]",x=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function S(){var ee=setTimeout;return function(){return ee(M,1)}}var E=new Array(1e3);function M(){for(var ee=0;ee<o;ee+=2)(0,E[ee])(E[ee+1]),E[ee]=void 0,E[ee+1]=void 0;o=0}var D,I,R,L,U=void 0;function O(ee,ge){var fe=this,le=new this.constructor(te);le[V]===void 0&&z(le);var Ee=fe._state;if(Ee){var Ae=arguments[Ee-1];s(function(){return P(Ee,le,Ae,fe._result)})}else ve(fe,le,ee,ge);return le}function G(ee){if(ee&&typeof ee=="object"&&ee.constructor===this)return ee;var ge=new this(te);return me(ge,ee),ge}U=v?function(){return p.nextTick(M)}:g?(I=0,R=new g(M),L=document.createTextNode(""),R.observe(L,{characterData:!0}),function(){L.data=I=++I%2}):x?((D=new MessageChannel).port1.onmessage=M,function(){return D.port2.postMessage(0)}):i===void 0&&typeof e=="function"?function(){try{var ee=Function("return this")().require("vertx");return(t=ee.runOnLoop||ee.runOnContext)!==void 0?function(){t(M)}:S()}catch{return S()}}():S();var V=Math.random().toString(36).substring(2);function te(){}var ne=void 0,$=1,se=2;function J(ee,ge,fe){s(function(le){var Ee=!1,Ae=function(Te,Ge,Ze,Ye){try{Te.call(Ge,Ze,Ye)}catch(Fe){return Fe}}(fe,ge,function(Te){Ee||(Ee=!0,ge!==Te?me(le,Te):he(le,Te))},function(Te){Ee||(Ee=!0,Re(le,Te))},le._label);!Ee&&Ae&&(Ee=!0,Re(le,Ae))},ee)}function ue(ee,ge,fe){var le,Ee;ge.constructor===ee.constructor&&fe===O&&ge.constructor.resolve===G?(le=ee,(Ee=ge)._state===$?he(le,Ee._result):Ee._state===se?Re(le,Ee._result):ve(Ee,void 0,function(Ae){return me(le,Ae)},function(Ae){return Re(le,Ae)})):fe===void 0?he(ee,ge):f(fe)?J(ee,ge,fe):he(ee,ge)}function me(ee,ge){if(ee===ge)Re(ee,new TypeError("You cannot resolve a promise with itself"));else if(Ee=typeof(le=ge),le===null||Ee!="object"&&Ee!="function")he(ee,ge);else{var fe=void 0;try{fe=ge.then}catch(Ae){return void Re(ee,Ae)}ue(ee,ge,fe)}var le,Ee}function _e(ee){ee._onerror&&ee._onerror(ee._result),ye(ee)}function he(ee,ge){ee._state===ne&&(ee._result=ge,ee._state=$,ee._subscribers.length!==0&&s(ye,ee))}function Re(ee,ge){ee._state===ne&&(ee._state=se,ee._result=ge,s(_e,ee))}function ve(ee,ge,fe,le){var Ee=ee._subscribers,Ae=Ee.length;ee._onerror=null,Ee[Ae]=ge,Ee[Ae+$]=fe,Ee[Ae+se]=le,Ae===0&&ee._state&&s(ye,ee)}function ye(ee){var ge=ee._subscribers,fe=ee._state;if(ge.length!==0){for(var le=void 0,Ee=void 0,Ae=ee._result,Te=0;Te<ge.length;Te+=3)le=ge[Te],Ee=ge[Te+fe],le?P(fe,le,Ee,Ae):Ee(Ae);ee._subscribers.length=0}}function P(ee,ge,fe,le){var Ee=f(fe),Ae=void 0,Te=void 0,Ge=!0;if(Ee){try{Ae=fe(le)}catch(Ze){Ge=!1,Te=Ze}if(ge===Ae)return void Re(ge,new TypeError("A promises callback cannot return that same promise."))}else Ae=le;ge._state!==ne||(Ee&&Ge?me(ge,Ae):Ge===!1?Re(ge,Te):ee===$?he(ge,Ae):ee===se&&Re(ge,Ae))}var N=0;function z(ee){ee[V]=N++,ee._state=void 0,ee._result=void 0,ee._subscribers=[]}var Q=(oe.prototype._enumerate=function(ee){for(var ge=0;this._state===ne&&ge<ee.length;ge++)this._eachEntry(ee[ge],ge)},oe.prototype._eachEntry=function(ee,ge){var fe=this._instanceConstructor,le=fe.resolve;if(le===G){var Ee=void 0,Ae=void 0,Te=!1;try{Ee=ee.then}catch(Ze){Te=!0,Ae=Ze}if(Ee===O&&ee._state!==ne)this._settledAt(ee._state,ge,ee._result);else if(typeof Ee!="function")this._remaining--,this._result[ge]=ee;else if(fe===K){var Ge=new fe(te);Te?Re(Ge,Ae):ue(Ge,ee,Ee),this._willSettleAt(Ge,ge)}else this._willSettleAt(new fe(function(Ze){return Ze(ee)}),ge)}else this._willSettleAt(le(ee),ge)},oe.prototype._settledAt=function(ee,ge,fe){var le=this.promise;le._state===ne&&(this._remaining--,ee===se?Re(le,fe):this._result[ge]=fe),this._remaining===0&&he(le,this._result)},oe.prototype._willSettleAt=function(ee,ge){var fe=this;ve(ee,void 0,function(le){return fe._settledAt($,ge,le)},function(le){return fe._settledAt(se,ge,le)})},oe);function oe(ee,ge){this._instanceConstructor=ee,this.promise=new ee(te),this.promise[V]||z(this.promise),l(ge)?(this.length=ge.length,this._remaining=ge.length,this._result=new Array(this.length),this.length===0?he(this.promise,this._result):(this.length=this.length||0,this._enumerate(ge),this._remaining===0&&he(this.promise,this._result))):Re(this.promise,new Error("Array Methods must be provided an Array"))}var K=(xe.prototype.catch=function(ee){return this.then(null,ee)},xe.prototype.finally=function(ee){var ge=this.constructor;return f(ee)?this.then(function(fe){return ge.resolve(ee()).then(function(){return fe})},function(fe){return ge.resolve(ee()).then(function(){throw fe})}):this.then(ee,ee)},xe);function xe(ee){this[V]=N++,this._result=this._state=void 0,this._subscribers=[],te!==ee&&(typeof ee!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof xe?function(ge,fe){try{fe(function(le){me(ge,le)},function(le){Re(ge,le)})}catch(le){Re(ge,le)}}(this,ee):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return K.prototype.then=O,K.all=function(ee){return new Q(this,ee).promise},K.race=function(ee){var ge=this;return l(ee)?new ge(function(fe,le){for(var Ee=ee.length,Ae=0;Ae<Ee;Ae++)ge.resolve(ee[Ae]).then(fe,le)}):new ge(function(fe,le){return le(new TypeError("You must pass an array to race."))})},K.resolve=G,K.reject=function(ee){var ge=new this(te);return Re(ge,ee),ge},K._setScheduler=function(ee){r=ee},K._setAsap=function(ee){s=ee},K._asap=s,K.polyfill=function(){var ee=void 0;if(n!==void 0)ee=n;else if(typeof self<"u")ee=self;else try{ee=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var ge=ee.Promise;if(ge){var fe=null;try{fe=Object.prototype.toString.call(ge.resolve())}catch{}if(fe==="[object Promise]"&&!ge.cast)return}ee.Promise=K},K.Promise=K},typeof y=="object"&&b!==void 0?b.exports=a():h.ES6Promise=a()}).call(this,e("_process"),typeof Bn<"u"?Bn:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:241}],234:[function(e,b,y){(function(p,n){if(y!==void 0&&b!==void 0)n(y,b);else{var h={exports:{}};n(h.exports,h),p.fetchJsonp=h.exports}})(this,function(p,n){var h=5e3,a="callback";function f(o){try{delete window[o]}catch{window[o]=void 0}}function l(o){var t=document.getElementById(o);t&&document.getElementsByTagName("head")[0].removeChild(t)}n.exports=function(o){var t=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],r=o,s=t.timeout||h,i=t.jsonpCallback||a,d=void 0;return new Promise(function(g,v){var x=t.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),S=i+"_"+x;window[x]=function(M){g({ok:!0,json:function(){return Promise.resolve(M)}}),d&&clearTimeout(d),l(S),f(x)},r+=r.indexOf("?")===-1?"?":"&";var E=document.createElement("script");E.setAttribute("src",""+r+i+"="+x),t.charset&&E.setAttribute("charset",t.charset),E.id=S,document.getElementsByTagName("head")[0].appendChild(E),d=setTimeout(function(){v(new Error("JSONP request to "+o+" timed out")),f(x),l(S),window[x]=function(){f(x)}},s),E.onerror=function(){v(new Error("JSONP request to "+o+" failed")),f(x),l(S),d&&clearTimeout(d)}})}})},{}],235:[function(e,b,y){var p=p||function(n){if(!(n===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent))){var h=n.document,a=function(){return n.URL||n.webkitURL||n},f=h.createElementNS("http://www.w3.org/1999/xhtml","a"),l="download"in f,o=/constructor/i.test(n.HTMLElement)||n.safari,t=/CriOS\/[\d]+/.test(navigator.userAgent),r=function(v){(n.setImmediate||n.setTimeout)(function(){throw v},0)},s=function(v){setTimeout(function(){typeof v=="string"?a().revokeObjectURL(v):v.remove()},4e4)},i=function(v){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(v.type)?new Blob([String.fromCharCode(65279),v],{type:v.type}):v},d=function(v,x,S){S||(v=i(v));function E(){(function(R,L,U){for(var O=(L=[].concat(L)).length;O--;){var G=R["on"+L[O]];if(typeof G=="function")try{G.call(R,U||R)}catch(V){r(V)}}})(D,"writestart progress write writeend".split(" "))}var M,D=this,I=v.type==="application/octet-stream";if(D.readyState=D.INIT,l)return M=a().createObjectURL(v),void setTimeout(function(){var R,L;f.href=M,f.download=x,R=f,L=new MouseEvent("click"),R.dispatchEvent(L),E(),s(M),D.readyState=D.DONE});(function(){if((t||I&&o)&&n.FileReader){var R=new FileReader;return R.onloadend=function(){var L=t?R.result:R.result.replace(/^data:[^;]*;/,"data:attachment/file;");n.open(L,"_blank")||(n.location.href=L),L=void 0,D.readyState=D.DONE,E()},R.readAsDataURL(v),D.readyState=D.INIT}M=M||a().createObjectURL(v),I?n.location.href=M:n.open(M,"_blank")||(n.location.href=M),D.readyState=D.DONE,E(),s(M)})()},g=d.prototype;return typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(v,x,S){return x=x||v.name||"download",S||(v=i(v)),navigator.msSaveOrOpenBlob(v,x)}:(g.abort=function(){},g.readyState=g.INIT=0,g.WRITING=1,g.DONE=2,g.error=g.onwritestart=g.onprogress=g.onwrite=g.onabort=g.onerror=g.onwriteend=null,function(v,x,S){return new d(v,x||v.name||"download",S)})}}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);b!==void 0&&b.exports?b.exports.saveAs=p:T!=null},{}],236:[function(e,b,y){y.read=function(p,n,h,a,f){var l,o,t=8*f-a-1,r=(1<<t)-1,s=r>>1,i=-7,d=h?f-1:0,g=h?-1:1,v=p[n+d];for(d+=g,l=v&(1<<-i)-1,v>>=-i,i+=t;0<i;l=256*l+p[n+d],d+=g,i-=8);for(o=l&(1<<-i)-1,l>>=-i,i+=a;0<i;o=256*o+p[n+d],d+=g,i-=8);if(l===0)l=1-s;else{if(l===r)return o?NaN:1/0*(v?-1:1);o+=Math.pow(2,a),l-=s}return(v?-1:1)*o*Math.pow(2,l-a)},y.write=function(p,n,h,a,f,l){var o,t,r,s=8*l-f-1,i=(1<<s)-1,d=i>>1,g=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=a?0:l-1,x=a?1:-1,S=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(t=isNaN(n)?1:0,o=i):(o=Math.floor(Math.log(n)/Math.LN2),n*(r=Math.pow(2,-o))<1&&(o--,r*=2),2<=(n+=1<=o+d?g/r:g*Math.pow(2,1-d))*r&&(o++,r/=2),i<=o+d?(t=0,o=i):1<=o+d?(t=(n*r-1)*Math.pow(2,f),o+=d):(t=n*Math.pow(2,d-1)*Math.pow(2,f),o=0));8<=f;p[h+v]=255&t,v+=x,t/=256,f-=8);for(o=o<<f|t,s+=f;0<s;p[h+v]=255&o,v+=x,o/=256,s-=8);p[h+v-x]|=128*S}},{}],237:[function(e,b,y){var p;function n(F,q){return F.b===q.b&&F.a===q.a}function h(F,q){return F.b<q.b||F.b===q.b&&F.a<=q.a}function a(F,q,W){var X=q.b-F.b,ie=W.b-q.b;return 0<X+ie?X<ie?q.a-F.a+X/(X+ie)*(F.a-W.a):q.a-W.a+ie/(X+ie)*(W.a-F.a):0}function f(F,q,W){var X=q.b-F.b,ie=W.b-q.b;return 0<X+ie?(q.a-W.a)*X+(q.a-F.a)*ie:0}function l(F,q){return F.a<q.a||F.a===q.a&&F.b<=q.b}function o(F,q,W){var X=q.a-F.a,ie=W.a-q.a;return 0<X+ie?X<ie?q.b-F.b+X/(X+ie)*(F.b-W.b):q.b-W.b+ie/(X+ie)*(W.b-F.b):0}function t(F,q,W){var X=q.a-F.a,ie=W.a-q.a;return 0<X+ie?(q.b-W.b)*X+(q.b-F.b)*ie:0}function r(F,q,W,X){return(F=F<0?0:F)<=(W=W<0?0:W)?W===0?(q+X)/2:q+F/(F+W)*(X-q):X+W/(F+W)*(q-X)}function s(F){var q=x(F.b);return E(q,F.c),E(q.b,F.c),M(q,F.a),q}function i(F,q){var W=!1,X=!1;F!==q&&(q.a!==F.a&&(X=!0,I(q.a,F.a)),q.d!==F.d&&(W=!0,R(q.d,F.d)),S(q,F),X||(E(q,F.a),F.a.c=F),W||(M(q,F.d),F.d.a=F))}function d(F){var q=F.b,W=!1;F.d!==F.b.d&&(W=!0,R(F.d,F.b.d)),F.c===F?I(F.a,null):(F.b.d.a=le(F),F.a.c=F.c,S(F,le(F)),W||M(F,F.d)),q.c===q?(I(q.a,null),R(q.d,null)):(F.d.a=le(q),q.a.c=q.c,S(q,le(q))),D(F)}function g(F){var q=x(F),W=q.b;return S(q,F.e),q.a=F.b.a,E(W,q.a),q.d=W.d=F.d,q=q.b,S(F.b,le(F.b)),S(F.b,q),F.b.a=q.a,q.b.a.c=q.b,q.b.d=F.b.d,q.f=F.f,q.b.f=F.b.f,q}function v(F,q){var W=!1,X=x(F),ie=X.b;return q.d!==F.d&&(W=!0,R(q.d,F.d)),S(X,F.e),S(ie,q),X.a=F.b.a,ie.a=q.a,X.d=ie.d=F.d,F.d.a=ie,W||M(X,F.d),X}function x(F){var q=new fe,W=new fe,X=F.b.h;return(((W.h=X).b.h=q).h=F).b.h=W,q.b=W,((q.c=q).e=W).b=q,(W.c=W).e=q}function S(F,q){var W=F.c,X=q.c;W.b.e=q,(X.b.e=F).c=X,q.c=W}function E(F,q){var W=q.f,X=new Ae(q,W);for(W.e=X,W=(q.f=X).c=F;W.a=X,(W=W.c)!==F;);}function M(F,q){var W=q.d,X=new ge(q,W);for(W.b=X,(q.d=X).a=F,X.c=q.c,W=F;W.d=X,(W=W.e)!==F;);}function D(F){var q=F.h;F=F.b.h,(q.b.h=F).b.h=q}function I(F,q){for(var W=F.c,X=W;X.a=q,(X=X.c)!==W;);W=F.f,((X=F.e).f=W).e=X}function R(F,q){for(var W=F.a,X=W;X.d=q,(X=X.e)!==W;);W=F.d,((X=F.b).d=W).b=X}function L(F){var q=0;return Math.abs(F[1])>Math.abs(F[0])&&(q=1),Math.abs(F[2])>Math.abs(F[q])&&(q=2),q}function U(F,q){F.f+=q.f,F.b.f+=q.b.f}function O(F,q,W){return F=F.a,q=q.a,W=W.a,q.b.a===F?W.b.a===F?h(q.a,W.a)?f(W.b.a,q.a,W.a)<=0:0<=f(q.b.a,W.a,q.a):f(W.b.a,F,W.a)<=0:W.b.a===F?0<=f(q.b.a,F,q.a):(q=a(q.b.a,F,q.a),(F=a(W.b.a,F,W.a))<=q)}function G(F){F.a.i=null;var q=F.e;q.a.c=q.c,q.c.a=q.a,F.e=null}function V(F,q){d(F.a),F.c=!1,(F.a=q).i=F}function te(F){for(var q=F.a.a;(F=et(F)).a.a===q;);return F.c&&(V(F,q=v(pe(F).a.b,F.a.e)),F=et(F)),F}function ne(F,q,W){var X=new Xe;return X.a=W,X.e=Q(F.f,q.e,X),W.i=X}function $(F,q){switch(F.s){case 100130:return(1&q)!=0;case 100131:return q!==0;case 100132:return 0<q;case 100133:return q<0;case 100134:return 2<=q||q<=-2}return!1}function se(F){var q=F.a,W=q.d;W.c=F.d,W.a=q,G(F)}function J(F,q,W){for(q=(F=q).a;F!==W;){F.c=!1;var X=pe(F),ie=X.a;if(ie.a!==q.a){if(!X.c){se(F);break}V(X,ie=v(q.c.b,ie.b))}q.c!==ie&&(i(le(ie),ie),i(q,ie)),se(F),q=X.a,F=X}return q}function ue(F,q,W,X,ie,we){for(var Me=!0;ne(F,q,W.b),(W=W.c)!==X;);for(ie===null&&(ie=pe(q).a.b.c);(W=(X=pe(q)).a.b).a===ie.a;)W.c!==ie&&(i(le(W),W),i(le(ie),W)),X.f=q.f-W.f,X.d=$(F,X.f),q.b=!0,!Me&&Re(F,q)&&(U(W,ie),G(q),d(ie)),Me=!1,q=X,ie=W;q.b=!0,we&&ye(F,q)}function me(F,q,W,X,ie){var we=[q.g[0],q.g[1],q.g[2]];q.d=null,q.d=F.o&&F.o(we,W,X,F.c)||null,q.d===null&&(ie?F.n||(ee(F,100156),F.n=!0):q.d=W[0])}function _e(F,q,W){var X=[null,null,null,null];X[0]=q.a.d,X[1]=W.a.d,me(F,q.a,X,[.5,.5,0,0],!1),i(q,W)}function he(F,q,W,X,ie){var we=Math.abs(q.b-F.b)+Math.abs(q.a-F.a),Me=Math.abs(W.b-F.b)+Math.abs(W.a-F.a),Be=ie+1;X[ie]=.5*Me/(we+Me),X[Be]=.5*we/(we+Me),F.g[0]+=X[ie]*q.g[0]+X[Be]*W.g[0],F.g[1]+=X[ie]*q.g[1]+X[Be]*W.g[1],F.g[2]+=X[ie]*q.g[2]+X[Be]*W.g[2]}function Re(F,q){var W=pe(q),X=q.a,ie=W.a;if(h(X.a,ie.a)){if(0<f(ie.b.a,X.a,ie.a))return!1;if(n(X.a,ie.a)){if(X.a!==ie.a){W=F.e;var we=X.a.h;if(0<=we){var Me=(W=W.b).d,Be=W.e,de=W.c,We=de[we];Me[We]=Me[W.a],(de[Me[We]]=We)<=--W.a&&(We<=1||h(Be[Me[We>>1]],Be[Me[We]])?Oe(W,We):ze(W,We)),Be[we]=null,de[we]=W.b,W.b=we}else for(W.c[-(we+1)]=null;0<W.a&&W.c[W.d[W.a-1]]===null;)--W.a;_e(F,le(ie),X)}}else g(ie.b),i(X,le(ie)),q.b=W.b=!0}else{if(f(X.b.a,ie.a,X.a)<0)return!1;et(q).b=q.b=!0,g(X.b),i(le(ie),X)}return!0}function ve(F,q){var W=pe(q),X=q.a,ie=W.a,we=X.a,Me=ie.a,Be=X.b.a,de=ie.b.a,We=new Ae;if(f(Be,F.a,we),f(de,F.a,Me),we===Me||Math.min(we.a,Be.a)>Math.max(Me.a,de.a))return!1;if(h(we,Me)){if(0<f(de,we,Me))return!1}else if(f(Be,Me,we)<0)return!1;var rt,lt,ft=Be,ut=we,ht=de,xt=Me;if(h(ft,ut)||(rt=ft,ft=ut,ut=rt),h(ht,xt)||(rt=ht,ht=xt,xt=rt),h(ft,ht)||(rt=ft,ft=ht,ht=rt,rt=ut,ut=xt,xt=rt),h(ht,ut)?h(ut,xt)?((rt=a(ft,ht,ut))+(lt=a(ht,ut,xt))<0&&(rt=-rt,lt=-lt),We.b=r(rt,ht.b,lt,ut.b)):((rt=f(ft,ht,ut))+(lt=-f(ft,xt,ut))<0&&(rt=-rt,lt=-lt),We.b=r(rt,ht.b,lt,xt.b)):We.b=(ht.b+ut.b)/2,l(ft,ut)||(rt=ft,ft=ut,ut=rt),l(ht,xt)||(rt=ht,ht=xt,xt=rt),l(ft,ht)||(rt=ft,ft=ht,ht=rt,rt=ut,ut=xt,xt=rt),l(ht,ut)?l(ut,xt)?((rt=o(ft,ht,ut))+(lt=o(ht,ut,xt))<0&&(rt=-rt,lt=-lt),We.a=r(rt,ht.a,lt,ut.a)):((rt=t(ft,ht,ut))+(lt=-t(ft,xt,ut))<0&&(rt=-rt,lt=-lt),We.a=r(rt,ht.a,lt,xt.a)):We.a=(ht.a+ut.a)/2,h(We,F.a)&&(We.b=F.a.b,We.a=F.a.a),ft=h(we,Me)?we:Me,h(ft,We)&&(We.b=ft.b,We.a=ft.a),n(We,we)||n(We,Me))return Re(F,q),!1;if(!n(Be,F.a)&&0<=f(Be,F.a,We)||!n(de,F.a)&&f(de,F.a,We)<=0){if(de===F.a)return g(X.b),i(ie.b,X),X=pe(q=te(q)).a,J(F,pe(q),W),ue(F,q,le(X),X,X,!0),!0;if(Be!==F.a)return 0<=f(Be,F.a,We)&&(et(q).b=q.b=!0,g(X.b),X.a.b=F.a.b,X.a.a=F.a.a),f(de,F.a,We)<=0&&(q.b=W.b=!0,g(ie.b),ie.a.b=F.a.b,ie.a.a=F.a.a),!1;for(g(ie.b),i(X.e,le(ie)),Me=(we=W=q).a.b.a;(we=et(we)).a.b.a===Me;);return we=pe(q=we).a.b.c,W.a=le(ie),ue(F,q,(ie=J(F,W,null)).c,X.b.c,we,!0),!0}return g(X.b),g(ie.b),i(le(ie),X),X.a.b=We.b,X.a.a=We.a,X.a.h=Ge(F.e,X.a),X=X.a,ie=[0,0,0,0],We=[we.d,Be.d,Me.d,de.d],X.g[0]=X.g[1]=X.g[2]=0,he(X,we,Be,ie,0),he(X,Me,de,ie,2),me(F,X,We,ie,!0),et(q).b=q.b=W.b=!0,!1}function ye(F,q){for(var W=pe(q);;){for(;W.b;)W=pe(q=W);if(!q.b&&((q=et(W=q))===null||!q.b))break;q.b=!1;var X,ie=q.a,we=W.a;if(X=ie.b.a!==we.b.a)e:{var Me=pe(X=q),Be=X.a,de=Me.a,We=void 0;if(h(Be.b.a,de.b.a)){if(f(Be.b.a,de.b.a,Be.a)<0){X=!1;break e}et(X).b=X.b=!0,We=g(Be),i(de.b,We),We.d.c=X.d}else{if(0<f(de.b.a,Be.b.a,de.a)){X=!1;break e}X.b=Me.b=!0,We=g(de),i(Be.e,de.b),We.b.d.c=X.d}X=!0}if(X&&(W.c?(G(W),d(we),we=(W=pe(q)).a):q.c&&(G(q),d(ie),ie=(q=et(W)).a)),ie.a!==we.a){if(ie.b.a===we.b.a||q.c||W.c||ie.b.a!==F.a&&we.b.a!==F.a)Re(F,q);else if(ve(F,q))break}ie.a===we.a&&ie.b.a===we.b.a&&(U(we,ie),G(q),d(ie),q=et(W))}}function P(F,q){for(var W=(F.a=q).c;W.i===null;)if((W=W.c)===q.c){W=F;var X=q;(Me=new Xe).a=X.c.b;for(var ie=(de=W.f).a;(ie=ie.a).b!==null&&!de.c(de.b,Me,ie.b););var we=pe(de=ie.b),Me=de.a;if(ie=we.a,f(Me.b.a,X,Me.a)===0)n((Me=de.a).a,X)||n(Me.b.a,X)||(g(Me.b),de.c&&(d(Me.c),de.c=!1),i(X.c,Me),P(W,X));else{var Be=h(ie.b.a,Me.b.a)?de:we;we=void 0,de.d||Be.c?(we=Be===de?v(X.c.b,Me.e):v(ie.b.c.b,X.c).b,Be.c?V(Be,we):((de=ne(Me=W,de,we)).f=et(de).f+de.a.f,de.d=$(Me,de.f)),P(W,X)):ue(W,de,X.c,X.c,null,!0)}return}if(de=(Me=pe(W=te(W.i))).a,(Me=J(F,Me,null)).c===de){Me=(de=Me).c,ie=pe(W),we=W.a,Be=ie.a;var de,We=!1;we.b.a!==Be.b.a&&ve(F,W),n(we.a,F.a)&&(i(le(Me),we),Me=pe(W=te(W)).a,J(F,pe(W),ie),We=!0),n(Be.a,F.a)&&(i(de,le(Be)),de=J(F,ie,null),We=!0),We?ue(F,W,de.c,Me,Me,!0):(X=h(Be.a,we.a)?le(Be):we,ue(F,W,X=v(de.c.b,X),X.c,X.c,!1),X.b.i.c=!0,ye(F,W))}else ue(F,W,Me.c,de,de,!0)}function N(F,q){var W=new Xe,X=s(F.b);X.a.b=4e150,X.a.a=q,X.b.a.b=-4e150,X.b.a.a=q,F.a=X.b.a,W.a=X,W.f=0,W.d=!1,W.c=!1,W.h=!0,W.b=!1,X=Q(X=F.f,X.a,W),W.e=X}function z(F){this.a=new oe,this.b=F,this.c=O}function Q(F,q,W){for(;(q=q.c).b!==null&&!F.c(F.b,q.b,W););return F=new oe(W,q.a,q),q.a.c=F,q.a=F}function oe(F,q,W){this.b=F||null,this.a=q||this,this.c=W||this}function K(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function xe(F,q){if(F.d!==q)for(;F.d!==q;)if(F.d<q)switch(F.d){case 0:ee(F,100151),F.u(null);break;case 1:ee(F,100152),F.t()}else switch(F.d){case 2:ee(F,100154),F.v();break;case 1:ee(F,100153),F.w()}}function ee(F,q){F.p&&F.p(q,F.c)}function ge(F,q){this.b=F||this,this.d=q||this,this.a=null,this.c=!1}function fe(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function le(F){return F.b.e}function Ee(){this.c=new Ae,this.a=new ge,this.b=new fe,this.d=new fe,this.b.b=this.d,this.d.b=this.b}function Ae(F,q){this.e=F||this,this.f=q||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Te(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new Ye}function Ge(F,q){if(F.e){var W,X=F.b,ie=++X.a;return 2*ie>X.f&&(X.f*=2,X.c=Fe(X.c,X.f+1)),X.b===0?W=ie:(W=X.b,X.b=X.c[X.b]),X.e[W]=q,X.c[W]=ie,X.d[ie]=W,X.h&&ze(X,ie),W}return X=F.a++,F.c[X]=q,-(X+1)}function Ze(F){if(F.a===0)return Le(F.b);var q=F.c[F.d[F.a-1]];if(F.b.a!==0&&h(dt(F.b),q))return Le(F.b);for(;--F.a,0<F.a&&F.c[F.d[F.a-1]]===null;);return q}function Ye(){this.d=Fe([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function Fe(F,q){for(var W=Array(q),X=0;X<F.length;X++)W[X]=F[X];for(;X<q;X++)W[X]=0;return W}function dt(F){return F.e[F.d[1]]}function Le(F){var q=F.d,W=F.e,X=F.c,ie=q[1],we=W[ie];return 0<F.a&&(q[1]=q[F.a],X[q[1]]=1,W[ie]=null,X[ie]=F.b,F.b=ie,0<--F.a&&Oe(F,1)),we}function Oe(F,q){for(var W=F.d,X=F.e,ie=F.c,we=q,Me=W[we];;){var Be=we<<1;Be<F.a&&h(X[W[Be+1]],X[W[Be]])&&(Be+=1);var de=W[Be];if(Be>F.a||h(X[Me],X[de])){ie[W[we]=Me]=we;break}ie[W[we]=de]=we,we=Be}}function ze(F,q){for(var W=F.d,X=F.e,ie=F.c,we=q,Me=W[we];;){var Be=we>>1,de=W[Be];if(Be==0||h(X[de],X[Me])){ie[W[we]=Me]=we;break}ie[W[we]=de]=we,we=Be}}function Xe(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function pe(F){return F.e.c.b}function et(F){return F.e.a.b}(p=K.prototype).x=function(){xe(this,0)},p.B=function(F,q){switch(F){case 100142:return;case 100140:switch(q){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=q)}break;case 100141:return void(this.m=!!q);default:return void ee(this,100900)}ee(this,100901)},p.y=function(F){switch(F){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:ee(this,100900)}return!1},p.A=function(F,q,W){this.j[0]=F,this.j[1]=q,this.j[2]=W},p.z=function(F,q){var W=q||null;switch(F){case 100100:case 100106:this.h=W;break;case 100104:case 100110:this.l=W;break;case 100101:case 100107:this.k=W;break;case 100102:case 100108:this.i=W;break;case 100103:case 100109:this.p=W;break;case 100105:case 100111:this.o=W;break;case 100112:this.r=W;break;default:ee(this,100900)}},p.C=function(F,q){var W=!1,X=[0,0,0];xe(this,2);for(var ie=0;ie<3;++ie){var we=F[ie];we<-1e150&&(we=-1e150,W=!0),1e150<we&&(we=1e150,W=!0),X[ie]=we}W&&ee(this,100155),(W=this.q)===null?i(W=s(this.b),W.b):(g(W),W=W.e),W.a.d=q,W.a.g[0]=X[0],W.a.g[1]=X[1],W.a.g[2]=X[2],W.f=1,W.b.f=-1,this.q=W},p.u=function(F){xe(this,0),this.d=1,this.b=new Ee,this.c=F},p.t=function(){xe(this,1),this.d=2,this.q=null},p.v=function(){xe(this,2),this.d=1},p.w=function(){xe(this,1),this.d=0;var F,q,W=!1,X=[de=this.j[0],ie=this.j[1],Me=this.j[2]];if(de===0&&ie===0&&Me===0){for(var ie=[-2e150,-2e150,-2e150],we=[2e150,2e150,2e150],Me=[],Be=[],de=(W=this.b.c).e;de!==W;de=de.e)for(var We=0;We<3;++We){var rt=de.g[We];rt<we[We]&&(we[We]=rt,Be[We]=de),rt>ie[We]&&(ie[We]=rt,Me[We]=de)}if(de=0,ie[1]-we[1]>ie[0]-we[0]&&(de=1),ie[2]-we[2]>ie[de]-we[de]&&(de=2),we[de]>=ie[de])X[0]=0,X[1]=0,X[2]=1;else{for(ie=0,we=Be[de],Me=Me[de],Be=[0,0,0],we=[we.g[0]-Me.g[0],we.g[1]-Me.g[1],we.g[2]-Me.g[2]],We=[0,0,0],de=W.e;de!==W;de=de.e)We[0]=de.g[0]-Me.g[0],We[1]=de.g[1]-Me.g[1],We[2]=de.g[2]-Me.g[2],Be[0]=we[1]*We[2]-we[2]*We[1],Be[1]=we[2]*We[0]-we[0]*We[2],Be[2]=we[0]*We[1]-we[1]*We[0],ie<(rt=Be[0]*Be[0]+Be[1]*Be[1]+Be[2]*Be[2])&&(ie=rt,X[0]=Be[0],X[1]=Be[1],X[2]=Be[2]);ie<=0&&(X[0]=X[1]=X[2]=0,X[L(we)]=1)}W=!0}for(Be=L(X),de=this.b.c,ie=(Be+1)%3,Me=(Be+2)%3,Be=0<X[Be]?1:-1,X=de.e;X!==de;X=X.e)X.b=X.g[ie],X.a=Be*X.g[Me];if(W){for(X=0,de=(W=this.b.a).b;de!==W;de=de.b)if(!((ie=de.a).f<=0))for(;X+=(ie.a.b-ie.b.a.b)*(ie.a.a+ie.b.a.a),(ie=ie.e)!==de.a;);if(X<0)for(W=(X=this.b.c).e;W!==X;W=W.e)W.a=-W.a}for(this.n=!1,de=(X=this.b.b).h;de!==X;de=W)W=de.h,ie=de.e,n(de.a,de.b.a)&&de.e.e!==de&&(_e(this,ie,de),d(de),ie=(de=ie).e),ie.e===de&&(ie!==de&&(ie!==W&&ie!==W.b||(W=W.h),d(ie)),de!==W&&de!==W.b||(W=W.h),d(de));for(this.e=X=new Te,de=(W=this.b.c).e;de!==W;de=de.e)de.h=Ge(X,de);for(function(lt){lt.d=[];for(var ft=0;ft<lt.a;ft++)lt.d[ft]=ft;lt.d.sort(function(ut){return function(ht,xt){return h(ut[ht],ut[xt])?1:-1}}(lt.c)),lt.e=!0,function(ut){for(var ht=ut.a;1<=ht;--ht)Oe(ut,ht);ut.h=!0}(lt.b)}(X),this.f=new z(this),N(this,-4e150),N(this,4e150);(X=Ze(this.e))!==null;){for(;;){e:if(de=this.e,de.a===0)W=dt(de.b);else if(W=de.c[de.d[de.a-1]],de.b.a!==0&&(de=dt(de.b),h(de,W))){W=de;break e}if(W===null||!n(W,X))break;W=Ze(this.e),_e(this,X.c,W.c)}P(this,X)}for(this.a=this.f.a.a.b.a.a,X=0;(W=this.f.a.a.b)!==null;)W.h||++X,G(W);for(this.f=null,(X=this.e).b=null,X.d=null,this.e=X.c=null,de=(X=this.b).a.b;de!==X.a;de=W)W=de.b,(de=de.a).e.e===de&&(U(de.c,de),d(de));if(!this.n){if(X=this.b,this.m)for(de=X.b.h;de!==X.b;de=W)W=de.h,de.b.d.c!==de.d.c?de.f=de.d.c?1:-1:d(de);else for(de=X.a.b;de!==X.a;de=W)if(W=de.b,de.c){for(de=de.a;h(de.b.a,de.a);de=de.c.b);for(;h(de.a,de.b.a);de=de.e);for(ie=de.c.b,Me=void 0;de.e!==ie;)if(h(de.b.a,ie.a)){for(;ie.e!==de&&(h((q=ie.e).b.a,q.a)||f(ie.a,ie.b.a,ie.e.b.a)<=0);)ie=(Me=v(ie.e,ie)).b;ie=ie.c.b}else{for(;ie.e!==de&&(h((F=de.c.b).a,F.b.a)||0<=f(de.b.a,de.a,de.c.b.a));)de=(Me=v(de,de.c.b)).b;de=de.e}for(;ie.e.e!==de;)ie=(Me=v(ie.e,ie)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(W=(X=this.b).a.b;W!==X.a;W=W.b)if(W.c){for(this.h&&this.h(2,this.c),de=W.a;this.k&&this.k(de.a.d,this.c),(de=de.e)!==W.a;);this.i&&this.i(this.c)}}else{for(X=this.b,W=!!this.l,de=!1,ie=-1,Me=X.a.d;Me!==X.a;Me=Me.d)if(Me.c)for(de||(this.h&&this.h(4,this.c),de=!0),Be=Me.a;W&&ie!==(we=Be.b.d.c?0:1)&&(ie=we,this.l&&this.l(!!ie,this.c)),this.k&&this.k(Be.a.d,this.c),(Be=Be.e)!==Me.a;);de&&this.i&&this.i(this.c)}if(this.r){for(de=(X=this.b).a.b;de!==X.a;de=W)if(W=de.b,!de.c){for(Me=(ie=de.a).e,Be=void 0;Me=(Be=Me).e,(Be.d=null)===Be.b.d&&(Be.c===Be?I(Be.a,null):(Be.a.c=Be.c,S(Be,le(Be))),(we=Be.b).c===we?I(we.a,null):(we.a.c=we.c,S(we,le(we))),D(Be)),Be!==ie;);ie=de.d,((de=de.b).d=ie).b=de}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:K,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},K.prototype.gluDeleteTess=K.prototype.x,K.prototype.gluTessProperty=K.prototype.B,K.prototype.gluGetTessProperty=K.prototype.y,K.prototype.gluTessNormal=K.prototype.A,K.prototype.gluTessCallback=K.prototype.z,K.prototype.gluTessVertex=K.prototype.C,K.prototype.gluTessBeginPolygon=K.prototype.u,K.prototype.gluTessBeginContour=K.prototype.t,K.prototype.gluTessEndContour=K.prototype.v,K.prototype.gluTessEndPolygon=K.prototype.w,b!==void 0&&(b.exports=this.libtess)},{}],238:[function(e,b,y){function p(n,h,a,f){for(var l=n[h++],o=1<<l,t=1+o,r=1+t,s=l+1,i=(1<<s)-1,d=0,g=0,v=0,x=n[h++],S=new Int32Array(4096),E=null;;){for(;d<16&&x!==0;)g|=n[h++]<<d,d+=8,x===1?x=n[h++]:--x;if(d<s)break;var M=g&i;if(g>>=s,d-=s,M!=o){if(M==t)break;for(var D=M<r?M:E,I=0,R=D;o<R;)R=S[R]>>8,++I;var L=R;if(f<v+I+(D!==M?1:0))return void console.log("Warning, gif stream longer than expected.");a[v++]=L;var U=v+=I;for(D!==M&&(a[v++]=L),R=D;I--;)R=S[R],a[--U]=255&R,R>>=8;E!==null&&r<4096&&(S[r++]=E<<8|L,i+1<=r&&s<12&&(++s,i=i<<1|1)),E=M}else r=1+t,i=(1<<(s=l+1))-1,E=null}return v!==f&&console.log("Warning, gif stream shorter than expected."),a}try{y.GifWriter=function(n,h,a,f){var l=0,o=(f=f===void 0?{}:f).loop===void 0?null:f.loop,t=f.palette===void 0?null:f.palette;if(h<=0||a<=0||65535<h||65535<a)throw new Error("Width/Height invalid.");function r(E){var M=E.length;if(M<2||256<M||M&M-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return M}n[l++]=71,n[l++]=73,n[l++]=70,n[l++]=56,n[l++]=57,n[l++]=97;var s=0,i=0;if(t!==null){for(var d=r(t);d>>=1;)++s;if(d=1<<s,--s,f.background!==void 0){if(d<=(i=f.background))throw new Error("Background index out of range.");if(i===0)throw new Error("Background index explicitly passed as 0.")}}if(n[l++]=255&h,n[l++]=h>>8&255,n[l++]=255&a,n[l++]=a>>8&255,n[l++]=(t!==null?128:0)|s,n[l++]=i,n[l++]=0,t!==null)for(var g=0,v=t.length;g<v;++g){var x=t[g];n[l++]=x>>16&255,n[l++]=x>>8&255,n[l++]=255&x}if(o!==null){if(o<0||65535<o)throw new Error("Loop count invalid.");n[l++]=33,n[l++]=255,n[l++]=11,n[l++]=78,n[l++]=69,n[l++]=84,n[l++]=83,n[l++]=67,n[l++]=65,n[l++]=80,n[l++]=69,n[l++]=50,n[l++]=46,n[l++]=48,n[l++]=3,n[l++]=1,n[l++]=255&o,n[l++]=o>>8&255,n[l++]=0}var S=!1;this.addFrame=function(E,M,D,I,R,L){if(S===!0&&(--l,S=!1),L=L===void 0?{}:L,E<0||M<0||65535<E||65535<M)throw new Error("x/y invalid.");if(D<=0||I<=0||65535<D||65535<I)throw new Error("Width/Height invalid.");if(R.length<D*I)throw new Error("Not enough pixels for the frame size.");var U=!0,O=L.palette;if(O==null&&(U=!1,O=t),O==null)throw new Error("Must supply either a local or global palette.");for(var G=r(O),V=0;G>>=1;)++V;G=1<<V;var te=L.delay===void 0?0:L.delay,ne=L.disposal===void 0?0:L.disposal;if(ne<0||3<ne)throw new Error("Disposal out of range.");var $=!1,se=0;if(L.transparent!==void 0&&L.transparent!==null&&($=!0,(se=L.transparent)<0||G<=se))throw new Error("Transparent color index.");if(ne===0&&!$&&te===0||(n[l++]=33,n[l++]=249,n[l++]=4,n[l++]=ne<<2|($===!0?1:0),n[l++]=255&te,n[l++]=te>>8&255,n[l++]=se,n[l++]=0),n[l++]=44,n[l++]=255&E,n[l++]=E>>8&255,n[l++]=255&M,n[l++]=M>>8&255,n[l++]=255&D,n[l++]=D>>8&255,n[l++]=255&I,n[l++]=I>>8&255,n[l++]=U===!0?128|V-1:0,U===!0)for(var J=0,ue=O.length;J<ue;++J){var me=O[J];n[l++]=me>>16&255,n[l++]=me>>8&255,n[l++]=255&me}return l=function(_e,he,Re,ve){_e[he++]=Re;var ye=he++,P=1<<Re,N=P-1,z=1+P,Q=1+z,oe=Re+1,K=0,xe=0;function ee(Ye){for(;Ye<=K;)_e[he++]=255&xe,xe>>=8,K-=8,he===ye+256&&(_e[ye]=255,ye=he++)}function ge(Ye){xe|=Ye<<K,K+=oe,ee(8)}var fe=ve[0]&N,le={};ge(P);for(var Ee=1,Ae=ve.length;Ee<Ae;++Ee){var Te=ve[Ee]&N,Ge=fe<<8|Te,Ze=le[Ge];if(Ze===void 0){for(xe|=fe<<K,K+=oe;8<=K;)_e[he++]=255&xe,xe>>=8,K-=8,he===ye+256&&(_e[ye]=255,ye=he++);Q===4096?(ge(P),Q=1+z,oe=Re+1,le={}):(1<<oe<=Q&&++oe,le[Ge]=Q++),fe=Te}else fe=Ze}return ge(fe),ge(z),ee(1),ye+1===he?_e[ye]=0:(_e[ye]=he-ye-1,_e[he++]=0),he}(n,l,V<2?2:V,R)},this.end=function(){return S===!1&&(n[l++]=59,S=!0),l},this.getOutputBuffer=function(){return n},this.setOutputBuffer=function(E){n=E},this.getOutputBufferPosition=function(){return l},this.setOutputBufferPosition=function(E){l=E}},y.GifReader=function(n){var h=0;if(n[h++]!==71||n[h++]!==73||n[h++]!==70||n[h++]!==56||(n[h++]+1&253)!=56||n[h++]!==97)throw new Error("Invalid GIF 87a/89a header.");var a=n[h++]|n[h++]<<8,f=n[h++]|n[h++]<<8,l=n[h++],o=l>>7,t=1<<1+(7&l);n[h++],n[h++];var r=null,s=null;o&&(r=h,h+=3*(s=t));var i=!0,d=[],g=0,v=null,x=0,S=null;for(this.width=a,this.height=f;i&&h<n.length;)switch(n[h++]){case 33:switch(n[h++]){case 255:if(n[h]!==11||n[h+1]==78&&n[h+2]==69&&n[h+3]==84&&n[h+4]==83&&n[h+5]==67&&n[h+6]==65&&n[h+7]==80&&n[h+8]==69&&n[h+9]==50&&n[h+10]==46&&n[h+11]==48&&n[h+12]==3&&n[h+13]==1&&n[h+16]==0)h+=14,S=n[h++]|n[h++]<<8,h++;else for(h+=12;;){if(!(0<=($=n[h++])))throw Error("Invalid block size");if($===0)break;h+=$}break;case 249:if(n[h++]!==4||n[h+4]!==0)throw new Error("Invalid graphics extension block.");var E=n[h++];g=n[h++]|n[h++]<<8,v=n[h++],(1&E)==0&&(v=null),x=E>>2&7,h++;break;case 254:for(;;){if(!(0<=($=n[h++])))throw Error("Invalid block size");if($===0)break;h+=$}break;default:throw new Error("Unknown graphic control label: 0x"+n[h-1].toString(16))}break;case 44:var M=n[h++]|n[h++]<<8,D=n[h++]|n[h++]<<8,I=n[h++]|n[h++]<<8,R=n[h++]|n[h++]<<8,L=n[h++],U=L>>6&1,O=1<<1+(7&L),G=r,V=s,te=!1;L>>7&&(te=!0,G=h,h+=3*(V=O));var ne=h;for(h++;;){var $;if(!(0<=($=n[h++])))throw Error("Invalid block size");if($===0)break;h+=$}d.push({x:M,y:D,width:I,height:R,has_local_palette:te,palette_offset:G,palette_size:V,data_offset:ne,data_length:h-ne,transparent_index:v,interlaced:!!U,delay:g,disposal:x});break;case 59:i=!1;break;default:throw new Error("Unknown gif block: 0x"+n[h-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return S},this.frameInfo=function(se){if(se<0||se>=d.length)throw new Error("Frame index out of range.");return d[se]},this.decodeAndBlitFrameBGRA=function(se,J){var ue=this.frameInfo(se),me=ue.width*ue.height,_e=new Uint8Array(me);p(n,ue.data_offset,_e,me);var he=ue.palette_offset,Re=ue.transparent_index;Re===null&&(Re=256);var ve=ue.width,ye=a-ve,P=ve,N=4*(ue.y*a+ue.x),z=4*((ue.y+ue.height)*a+ue.x),Q=N,oe=4*ye;ue.interlaced===!0&&(oe+=4*a*7);for(var K=8,xe=0,ee=_e.length;xe<ee;++xe){var ge=_e[xe];if(P===0&&(P=ve,z<=(Q+=oe)&&(oe=4*ye+4*a*(K-1),Q=N+(ve+ye)*(K<<1),K>>=1)),ge===Re)Q+=4;else{var fe=n[he+3*ge],le=n[he+3*ge+1],Ee=n[he+3*ge+2];J[Q++]=Ee,J[Q++]=le,J[Q++]=fe,J[Q++]=255}--P}},this.decodeAndBlitFrameRGBA=function(se,J){var ue=this.frameInfo(se),me=ue.width*ue.height,_e=new Uint8Array(me);p(n,ue.data_offset,_e,me);var he=ue.palette_offset,Re=ue.transparent_index;Re===null&&(Re=256);var ve=ue.width,ye=a-ve,P=ve,N=4*(ue.y*a+ue.x),z=4*((ue.y+ue.height)*a+ue.x),Q=N,oe=4*ye;ue.interlaced===!0&&(oe+=4*a*7);for(var K=8,xe=0,ee=_e.length;xe<ee;++xe){var ge=_e[xe];if(P===0&&(P=ve,z<=(Q+=oe)&&(oe=4*ye+4*a*(K-1),Q=N+(ve+ye)*(K<<1),K>>=1)),ge===Re)Q+=4;else{var fe=n[he+3*ge],le=n[he+3*ge+1],Ee=n[he+3*ge+2];J[Q++]=fe,J[Q++]=le,J[Q++]=Ee,J[Q++]=255}--P}}}}catch{}},{}],239:[function(e,b,y){(function(p){var n,h;n=this,h=function(a){function f(u){if(this==null)throw TypeError();var m=String(this),w=m.length,_=u?Number(u):0;if(_!=_&&(_=0),!(_<0||w<=_)){var C,k=m.charCodeAt(_);return 55296<=k&&k<=56319&&_+1<w&&56320<=(C=m.charCodeAt(_+1))&&C<=57343?1024*(k-55296)+C-56320+65536:k}}var l;String.prototype.codePointAt||((l=function(){try{var u={},m=Object.defineProperty,w=m(u,u,u)&&m}catch{}return w}())?l(String.prototype,"codePointAt",{value:f,configurable:!0,writable:!0}):String.prototype.codePointAt=f);var o=0,t=-3;function r(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function s(u,m){this.source=u,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=m,this.destLen=0,this.ltree=new r,this.dtree=new r}var i=new r,d=new r,g=new Uint8Array(30),v=new Uint16Array(30),x=new Uint8Array(30),S=new Uint16Array(30),E=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),M=new r,D=new Uint8Array(320);function I(u,m,w,_){var C,k;for(C=0;C<w;++C)u[C]=0;for(C=0;C<30-w;++C)u[C+w]=C/w|0;for(k=_,C=0;C<30;++C)m[C]=k,k+=1<<u[C]}var R=new Uint16Array(16);function L(u,m,w,_){var C,k;for(C=0;C<16;++C)u.table[C]=0;for(C=0;C<_;++C)u.table[m[w+C]]++;for(C=k=u.table[0]=0;C<16;++C)R[C]=k,k+=u.table[C];for(C=0;C<_;++C)m[w+C]&&(u.trans[R[m[w+C]]++]=C)}function U(u){u.bitcount--||(u.tag=u.source[u.sourceIndex++],u.bitcount=7);var m=1&u.tag;return u.tag>>>=1,m}function O(u,m,w){if(!m)return w;for(;u.bitcount<24;)u.tag|=u.source[u.sourceIndex++]<<u.bitcount,u.bitcount+=8;var _=u.tag&65535>>>16-m;return u.tag>>>=m,u.bitcount-=m,_+w}function G(u,m){for(;u.bitcount<24;)u.tag|=u.source[u.sourceIndex++]<<u.bitcount,u.bitcount+=8;for(var w=0,_=0,C=0,k=u.tag;_=2*_+(1&k),k>>>=1,++C,w+=m.table[C],0<=(_-=m.table[C]););return u.tag=k,u.bitcount-=C,m.trans[w+_]}function V(u,m,w){var _,C,k,B,H,Y;for(_=O(u,5,257),C=O(u,5,1),k=O(u,4,4),B=0;B<19;++B)D[B]=0;for(B=0;B<k;++B){var re=O(u,3,0);D[E[B]]=re}for(L(M,D,0,19),H=0;H<_+C;){var ce=G(u,M);switch(ce){case 16:var be=D[H-1];for(Y=O(u,2,3);Y;--Y)D[H++]=be;break;case 17:for(Y=O(u,3,3);Y;--Y)D[H++]=0;break;case 18:for(Y=O(u,7,11);Y;--Y)D[H++]=0;break;default:D[H++]=ce}}L(m,D,0,_),L(w,D,_,C)}function te(u,m,w){for(;;){var _,C,k,B,H=G(u,m);if(H===256)return o;if(H<256)u.dest[u.destLen++]=H;else for(_=O(u,g[H-=257],v[H]),C=G(u,w),B=k=u.destLen-O(u,x[C],S[C]);B<k+_;++B)u.dest[u.destLen++]=u.dest[B]}}function ne(u){for(var m,w;8<u.bitcount;)u.sourceIndex--,u.bitcount-=8;if((m=256*(m=u.source[u.sourceIndex+1])+u.source[u.sourceIndex])!==(65535&~(256*u.source[u.sourceIndex+3]+u.source[u.sourceIndex+2])))return t;for(u.sourceIndex+=4,w=m;w;--w)u.dest[u.destLen++]=u.source[u.sourceIndex++];return u.bitcount=0,o}(function(u,m){var w;for(w=0;w<7;++w)u.table[w]=0;for(u.table[7]=24,u.table[8]=152,u.table[9]=112,w=0;w<24;++w)u.trans[w]=256+w;for(w=0;w<144;++w)u.trans[24+w]=w;for(w=0;w<8;++w)u.trans[168+w]=280+w;for(w=0;w<112;++w)u.trans[176+w]=144+w;for(w=0;w<5;++w)m.table[w]=0;for(m.table[5]=32,w=0;w<32;++w)m.trans[w]=w})(i,d),I(g,v,4,3),I(x,S,2,1),g[28]=0,v[28]=258;var $=function(u,m){var w,_,C=new s(u,m);do{switch(w=U(C),O(C,2,0)){case 0:_=ne(C);break;case 1:_=te(C,i,d);break;case 2:V(C,C.ltree,C.dtree),_=te(C,C.ltree,C.dtree);break;default:_=t}if(_!==o)throw new Error("Data error")}while(!w);return C.destLen<C.dest.length?typeof C.dest.slice=="function"?C.dest.slice(0,C.destLen):C.dest.subarray(0,C.destLen):C.dest};function se(u,m,w,_,C){return Math.pow(1-C,3)*u+3*Math.pow(1-C,2)*C*m+3*(1-C)*Math.pow(C,2)*w+Math.pow(C,3)*_}function J(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function ue(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function me(u){throw new Error(u)}function _e(u,m){u||me(m)}J.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},J.prototype.addPoint=function(u,m){typeof u=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=u,this.x2=u),u<this.x1&&(this.x1=u),u>this.x2&&(this.x2=u)),typeof m=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=m,this.y2=m),m<this.y1&&(this.y1=m),m>this.y2&&(this.y2=m))},J.prototype.addX=function(u){this.addPoint(u,null)},J.prototype.addY=function(u){this.addPoint(null,u)},J.prototype.addBezier=function(u,m,w,_,C,k,B,H){var Y=[u,m],re=[w,_],ce=[C,k],be=[B,H];this.addPoint(u,m),this.addPoint(B,H);for(var Z=0;Z<=1;Z++){var Ve=6*Y[Z]-12*re[Z]+6*ce[Z],Ne=-3*Y[Z]+9*re[Z]-9*ce[Z]+3*be[Z],Pe=3*re[Z]-3*Y[Z];if(Ne!=0){var je=Math.pow(Ve,2)-4*Pe*Ne;if(!(je<0)){var ke=(-Ve+Math.sqrt(je))/(2*Ne);0<ke&&ke<1&&(Z===0&&this.addX(se(Y[Z],re[Z],ce[Z],be[Z],ke)),Z===1&&this.addY(se(Y[Z],re[Z],ce[Z],be[Z],ke)));var Je=(-Ve-Math.sqrt(je))/(2*Ne);0<Je&&Je<1&&(Z===0&&this.addX(se(Y[Z],re[Z],ce[Z],be[Z],Je)),Z===1&&this.addY(se(Y[Z],re[Z],ce[Z],be[Z],Je)))}}else{if(Ve==0)continue;var Ke=-Pe/Ve;0<Ke&&Ke<1&&(Z===0&&this.addX(se(Y[Z],re[Z],ce[Z],be[Z],Ke)),Z===1&&this.addY(se(Y[Z],re[Z],ce[Z],be[Z],Ke)))}}},J.prototype.addQuad=function(u,m,w,_,C,k){var B=u+.6666666666666666*(w-u),H=m+2/3*(_-m),Y=B+1/3*(C-u),re=H+1/3*(k-m);this.addBezier(u,m,B,H,Y,re,C,k)},ue.prototype.moveTo=function(u,m){this.commands.push({type:"M",x:u,y:m})},ue.prototype.lineTo=function(u,m){this.commands.push({type:"L",x:u,y:m})},ue.prototype.curveTo=ue.prototype.bezierCurveTo=function(u,m,w,_,C,k){this.commands.push({type:"C",x1:u,y1:m,x2:w,y2:_,x:C,y:k})},ue.prototype.quadTo=ue.prototype.quadraticCurveTo=function(u,m,w,_){this.commands.push({type:"Q",x1:u,y1:m,x:w,y:_})},ue.prototype.close=ue.prototype.closePath=function(){this.commands.push({type:"Z"})},ue.prototype.extend=function(u){if(u.commands)u=u.commands;else if(u instanceof J){var m=u;return this.moveTo(m.x1,m.y1),this.lineTo(m.x2,m.y1),this.lineTo(m.x2,m.y2),this.lineTo(m.x1,m.y2),void this.close()}Array.prototype.push.apply(this.commands,u)},ue.prototype.getBoundingBox=function(){for(var u=new J,m=0,w=0,_=0,C=0,k=0;k<this.commands.length;k++){var B=this.commands[k];switch(B.type){case"M":u.addPoint(B.x,B.y),m=_=B.x,w=C=B.y;break;case"L":u.addPoint(B.x,B.y),_=B.x,C=B.y;break;case"Q":u.addQuad(_,C,B.x1,B.y1,B.x,B.y),_=B.x,C=B.y;break;case"C":u.addBezier(_,C,B.x1,B.y1,B.x2,B.y2,B.x,B.y),_=B.x,C=B.y;break;case"Z":_=m,C=w;break;default:throw new Error("Unexpected path command "+B.type)}}return u.isEmpty()&&u.addPoint(0,0),u},ue.prototype.draw=function(u){u.beginPath();for(var m=0;m<this.commands.length;m+=1){var w=this.commands[m];w.type==="M"?u.moveTo(w.x,w.y):w.type==="L"?u.lineTo(w.x,w.y):w.type==="C"?u.bezierCurveTo(w.x1,w.y1,w.x2,w.y2,w.x,w.y):w.type==="Q"?u.quadraticCurveTo(w.x1,w.y1,w.x,w.y):w.type==="Z"&&u.closePath()}this.fill&&(u.fillStyle=this.fill,u.fill()),this.stroke&&(u.strokeStyle=this.stroke,u.lineWidth=this.strokeWidth,u.stroke())},ue.prototype.toPathData=function(u){function m(){for(var k,B=arguments,H="",Y=0;Y<arguments.length;Y+=1){var re=B[Y];0<=re&&0<Y&&(H+=" "),H+=(k=re,Math.round(k)===k?""+Math.round(k):k.toFixed(u))}return H}u=u!==void 0?u:2;for(var w="",_=0;_<this.commands.length;_+=1){var C=this.commands[_];C.type==="M"?w+="M"+m(C.x,C.y):C.type==="L"?w+="L"+m(C.x,C.y):C.type==="C"?w+="C"+m(C.x1,C.y1,C.x2,C.y2,C.x,C.y):C.type==="Q"?w+="Q"+m(C.x1,C.y1,C.x,C.y):C.type==="Z"&&(w+="Z")}return w},ue.prototype.toSVG=function(u){var m='<path d="';return m+=this.toPathData(u),m+='"',this.fill&&this.fill!=="black"&&(this.fill===null?m+=' fill="none"':m+=' fill="'+this.fill+'"'),this.stroke&&(m+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),m+="/>"},ue.prototype.toDOMElement=function(u){var m=this.toPathData(u),w=document.createElementNS("http://www.w3.org/2000/svg","path");return w.setAttribute("d",m),w};var he={fail:me,argument:_e,assert:_e},Re={},ve={},ye={};function P(u){return function(){return u}}ve.BYTE=function(u){return he.argument(0<=u&&u<=255,"Byte value should be between 0 and 255."),[u]},ye.BYTE=P(1),ve.CHAR=function(u){return[u.charCodeAt(0)]},ye.CHAR=P(1),ve.CHARARRAY=function(u){for(var m=[],w=0;w<u.length;w+=1)m[w]=u.charCodeAt(w);return m},ye.CHARARRAY=function(u){return u.length},ve.USHORT=function(u){return[u>>8&255,255&u]},ye.USHORT=P(2),ve.SHORT=function(u){return 32768<=u&&(u=-(65536-u)),[u>>8&255,255&u]},ye.SHORT=P(2),ve.UINT24=function(u){return[u>>16&255,u>>8&255,255&u]},ye.UINT24=P(3),ve.ULONG=function(u){return[u>>24&255,u>>16&255,u>>8&255,255&u]},ye.ULONG=P(4),ve.LONG=function(u){return 2147483648<=u&&(u=-(4294967296-u)),[u>>24&255,u>>16&255,u>>8&255,255&u]},ye.LONG=P(4),ve.FIXED=ve.ULONG,ye.FIXED=ye.ULONG,ve.FWORD=ve.SHORT,ye.FWORD=ye.SHORT,ve.UFWORD=ve.USHORT,ye.UFWORD=ye.USHORT,ve.LONGDATETIME=function(u){return[0,0,0,0,u>>24&255,u>>16&255,u>>8&255,255&u]},ye.LONGDATETIME=P(8),ve.TAG=function(u){return he.argument(u.length===4,"Tag should be exactly 4 ASCII characters."),[u.charCodeAt(0),u.charCodeAt(1),u.charCodeAt(2),u.charCodeAt(3)]},ye.TAG=P(4),ve.Card8=ve.BYTE,ye.Card8=ye.BYTE,ve.Card16=ve.USHORT,ye.Card16=ye.USHORT,ve.OffSize=ve.BYTE,ye.OffSize=ye.BYTE,ve.SID=ve.USHORT,ye.SID=ye.USHORT,ve.NUMBER=function(u){return-107<=u&&u<=107?[u+139]:108<=u&&u<=1131?[247+((u-=108)>>8),255&u]:-1131<=u&&u<=-108?[251+((u=-u-108)>>8),255&u]:-32768<=u&&u<=32767?ve.NUMBER16(u):ve.NUMBER32(u)},ye.NUMBER=function(u){return ve.NUMBER(u).length},ve.NUMBER16=function(u){return[28,u>>8&255,255&u]},ye.NUMBER16=P(3),ve.NUMBER32=function(u){return[29,u>>24&255,u>>16&255,u>>8&255,255&u]},ye.NUMBER32=P(5),ve.REAL=function(u){var m=u.toString(),w=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(m);if(w){var _=parseFloat("1e"+((w[2]?+w[2]:0)+w[1].length));m=(Math.round(u*_)/_).toString()}for(var C="",k=0,B=m.length;k<B;k+=1){var H=m[k];C+=H==="e"?m[++k]==="-"?"c":"b":H==="."?"a":H==="-"?"e":H}for(var Y=[30],re=0,ce=(C+=1&C.length?"f":"ff").length;re<ce;re+=2)Y.push(parseInt(C.substr(re,2),16));return Y},ye.REAL=function(u){return ve.REAL(u).length},ve.NAME=ve.CHARARRAY,ye.NAME=ye.CHARARRAY,ve.STRING=ve.CHARARRAY,ye.STRING=ye.CHARARRAY,Re.UTF8=function(u,m,w){for(var _=[],C=w,k=0;k<C;k++,m+=1)_[k]=u.getUint8(m);return String.fromCharCode.apply(null,_)},Re.UTF16=function(u,m,w){for(var _=[],C=w/2,k=0;k<C;k++,m+=2)_[k]=u.getUint16(m);return String.fromCharCode.apply(null,_)},ve.UTF16=function(u){for(var m=[],w=0;w<u.length;w+=1){var _=u.charCodeAt(w);m[m.length]=_>>8&255,m[m.length]=255&_}return m},ye.UTF16=function(u){return 2*u.length};var N={"x-mac-croatian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\u0160\u2122\xB4\xA8\u2260\u017D\xD8\u221E\xB1\u2264\u2265\u2206\xB5\u2202\u2211\u220F\u0161\u222B\xAA\xBA\u03A9\u017E\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u0106\xAB\u010C\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u0110\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\uF8FF\xA9\u2044\u20AC\u2039\u203A\xC6\xBB\u2013\xB7\u201A\u201E\u2030\xC2\u0107\xC1\u010D\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u0111\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u03C0\xCB\u02DA\xB8\xCA\xE6\u02C7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F\u2020\xB0\u0490\xA3\xA7\u2022\xB6\u0406\xAE\xA9\u2122\u0402\u0452\u2260\u0403\u0453\u221E\xB1\u2264\u2265\u0456\xB5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\u040B\u045B\u040C\u045C\u0455\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u201E\u040E\u045E\u040F\u045F\u2116\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E","x-mac-gaelic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u1E02\xB1\u2264\u2265\u1E03\u010A\u010B\u1E0A\u1E0B\u1E1E\u1E1F\u0120\u0121\u1E40\xE6\xF8\u1E41\u1E56\u1E57\u027C\u0192\u017F\u1E60\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\u1E61\u1E9B\xFF\u0178\u1E6A\u20AC\u2039\u203A\u0176\u0177\u1E6B\xB7\u1EF2\u1EF3\u204A\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u2663\xD2\xDA\xDB\xD9\u0131\xDD\xFD\u0174\u0175\u1E84\u1E85\u1E80\u1E81\u1E82\u1E83","x-mac-greek":"\xC4\xB9\xB2\xC9\xB3\xD6\xDC\u0385\xE0\xE2\xE4\u0384\xA8\xE7\xE9\xE8\xEA\xEB\xA3\u2122\xEE\xEF\u2022\xBD\u2030\xF4\xF6\xA6\u20AC\xF9\xFB\xFC\u2020\u0393\u0394\u0398\u039B\u039E\u03A0\xDF\xAE\xA9\u03A3\u03AA\xA7\u2260\xB0\xB7\u0391\xB1\u2264\u2265\xA5\u0392\u0395\u0396\u0397\u0399\u039A\u039C\u03A6\u03AB\u03A8\u03A9\u03AC\u039D\xAC\u039F\u03A1\u2248\u03A4\xAB\xBB\u2026\xA0\u03A5\u03A7\u0386\u0388\u0153\u2013\u2015\u201C\u201D\u2018\u2019\xF7\u0389\u038A\u038C\u038E\u03AD\u03AE\u03AF\u03CC\u038F\u03CD\u03B1\u03B2\u03C8\u03B4\u03B5\u03C6\u03B3\u03B7\u03B9\u03BE\u03BA\u03BB\u03BC\u03BD\u03BF\u03C0\u03CE\u03C1\u03C3\u03C4\u03B8\u03C9\u03C2\u03C7\u03C5\u03B6\u03CA\u03CB\u0390\u03B0\xAD","x-mac-icelandic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\xDD\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\xD0\xF0\xDE\xFE\xFD\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140A\u140B\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144E\u144F\u1450\u1451\u1455\u1456\u1466\u146D\u146E\u146F\u1470\u1472\u1473\u1483\u148B\u148C\u148D\u148E\u1490\u1491\xB0\u14A1\u14A5\u14A6\u2022\xB6\u14A7\xAE\xA9\u2122\u14A8\u14AA\u14AB\u14BB\u14C2\u14C3\u14C4\u14C5\u14C7\u14C8\u14D0\u14EF\u14F0\u14F1\u14F2\u14F4\u14F5\u1505\u14D5\u14D6\u14D7\u14D8\u14DA\u14DB\u14EA\u1528\u1529\u152A\u152B\u152D\u2026\xA0\u152E\u153E\u1555\u1556\u1557\u2013\u2014\u201C\u201D\u2018\u2019\u1558\u1559\u155A\u155D\u1546\u1547\u1548\u1549\u154B\u154C\u1550\u157F\u1580\u1581\u1582\u1583\u1584\u1585\u158F\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15A0\u15A1\u15A2\u15A3\u15A4\u15A5\u15A6\u157C\u0141\u0142","x-mac-ce":"\xC4\u0100\u0101\xC9\u0104\xD6\xDC\xE1\u0105\u010C\xE4\u010D\u0106\u0107\xE9\u0179\u017A\u010E\xED\u010F\u0112\u0113\u0116\xF3\u0117\xF4\xF6\xF5\xFA\u011A\u011B\xFC\u2020\xB0\u0118\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\u0119\xA8\u2260\u0123\u012E\u012F\u012A\u2264\u2265\u012B\u0136\u2202\u2211\u0142\u013B\u013C\u013D\u013E\u0139\u013A\u0145\u0146\u0143\xAC\u221A\u0144\u0147\u2206\xAB\xBB\u2026\xA0\u0148\u0150\xD5\u0151\u014C\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\u014D\u0154\u0155\u0158\u2039\u203A\u0159\u0156\u0157\u0160\u201A\u201E\u0161\u015A\u015B\xC1\u0164\u0165\xCD\u017D\u017E\u016A\xD3\xD4\u016B\u016E\xDA\u016F\u0170\u0171\u0172\u0173\xDD\xFD\u0137\u017B\u0141\u017C\u0122\u02C7",macintosh:"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-romanian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\u0102\u0218\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\u0103\u0219\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\u021A\u021B\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-turkish":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u011E\u011F\u0130\u0131\u015E\u015F\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\uF8A0\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7"};Re.MACSTRING=function(u,m,w,_){var C=N[_];if(C!==void 0){for(var k="",B=0;B<w;B++){var H=u.getUint8(m+B);k+=H<=127?String.fromCharCode(H):C[127&H]}return k}};var z,Q=typeof WeakMap=="function"&&new WeakMap;function oe(u){return-128<=u&&u<=127}function K(u,m,w){for(var _=0,C=u.length;m<C&&_<64&&u[m]===0;)++m,++_;return w.push(128|_-1),m}function xe(u,m,w){for(var _=0,C=u.length,k=m;k<C&&_<64;){var B=u[k];if(!oe(B)||B===0&&k+1<C&&u[k+1]===0)break;++k,++_}w.push(_-1);for(var H=m;H<k;++H)w.push(u[H]+256&255);return k}function ee(u,m,w){for(var _=0,C=u.length,k=m;k<C&&_<64;){var B=u[k];if(B===0||oe(B)&&k+1<C&&oe(u[k+1]))break;++k,++_}w.push(64|_-1);for(var H=m;H<k;++H){var Y=u[H];w.push(Y+65536>>8&255,Y+256&255)}return k}ve.MACSTRING=function(u,m){var w=function(B){if(!z)for(var H in z={},N)z[H]=new String(H);var Y=z[B];if(Y!==void 0){if(Q){var re=Q.get(Y);if(re!==void 0)return re}var ce=N[B];if(ce!==void 0){for(var be={},Z=0;Z<ce.length;Z++)be[ce.charCodeAt(Z)]=Z+128;return Q&&Q.set(Y,be),be}}}(m);if(w!==void 0){for(var _=[],C=0;C<u.length;C++){var k=u.charCodeAt(C);if(128<=k&&(k=w[k])===void 0)return;_[C]=k}return _}},ye.MACSTRING=function(u,m){var w=ve.MACSTRING(u,m);return w!==void 0?w.length:0},ve.VARDELTAS=function(u){for(var m=0,w=[];m<u.length;){var _=u[m];m=_===0?K(u,m,w):-128<=_&&_<=127?xe(u,m,w):ee(u,m,w)}return w},ve.INDEX=function(u){for(var m=1,w=[m],_=[],C=0;C<u.length;C+=1){var k=ve.OBJECT(u[C]);Array.prototype.push.apply(_,k),m+=k.length,w.push(m)}if(_.length===0)return[0,0];for(var B=[],H=1+Math.floor(Math.log(m)/Math.log(2))/8|0,Y=[void 0,ve.BYTE,ve.USHORT,ve.UINT24,ve.ULONG][H],re=0;re<w.length;re+=1){var ce=Y(w[re]);Array.prototype.push.apply(B,ce)}return Array.prototype.concat(ve.Card16(u.length),ve.OffSize(H),B,_)},ye.INDEX=function(u){return ve.INDEX(u).length},ve.DICT=function(u){for(var m=[],w=Object.keys(u),_=w.length,C=0;C<_;C+=1){var k=parseInt(w[C],0),B=u[k];m=(m=m.concat(ve.OPERAND(B.value,B.type))).concat(ve.OPERATOR(k))}return m},ye.DICT=function(u){return ve.DICT(u).length},ve.OPERATOR=function(u){return u<1200?[u]:[12,u-1200]},ve.OPERAND=function(u,m){var w=[];if(Array.isArray(m))for(var _=0;_<m.length;_+=1)he.argument(u.length===m.length,"Not enough arguments given for type"+m),w=w.concat(ve.OPERAND(u[_],m[_]));else if(m==="SID")w=w.concat(ve.NUMBER(u));else if(m==="offset")w=w.concat(ve.NUMBER32(u));else if(m==="number")w=w.concat(ve.NUMBER(u));else{if(m!=="real")throw new Error("Unknown operand type "+m);w=w.concat(ve.REAL(u))}return w},ve.OP=ve.BYTE,ye.OP=ye.BYTE;var ge=typeof WeakMap=="function"&&new WeakMap;function fe(u,m,w){for(var _=0;_<m.length;_+=1){var C=m[_];this[C.name]=C.value}if(this.tableName=u,this.fields=m,w)for(var k=Object.keys(w),B=0;B<k.length;B+=1){var H=k[B],Y=w[H];this[H]!==void 0&&(this[H]=Y)}}function le(u,m,w){w===void 0&&(w=m.length);var _=new Array(m.length+1);_[0]={name:u+"Count",type:"USHORT",value:w};for(var C=0;C<m.length;C++)_[C+1]={name:u+C,type:"USHORT",value:m[C]};return _}function Ee(u,m,w){var _=m.length,C=new Array(_+1);C[0]={name:u+"Count",type:"USHORT",value:_};for(var k=0;k<_;k++)C[k+1]={name:u+k,type:"TABLE",value:w(m[k],k)};return C}function Ae(u,m,w){var _=m.length,C=[];C[0]={name:u+"Count",type:"USHORT",value:_};for(var k=0;k<_;k++)C=C.concat(w(m[k],k));return C}function Te(u){u.format===1?fe.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(le("glyph",u.glyphs))):he.assert(!1,"Can't create coverage table format 2 yet.")}function Ge(u){fe.call(this,"scriptListTable",Ae("scriptRecord",u,function(m,w){var _=m.script,C=_.defaultLangSys;return he.assert(!!C,"Unable to write GSUB: script "+m.tag+" has no default language system."),[{name:"scriptTag"+w,type:"TAG",value:m.tag},{name:"script"+w,type:"TABLE",value:new fe("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new fe("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:C.reqFeatureIndex}].concat(le("featureIndex",C.featureIndexes)))}].concat(Ae("langSys",_.langSysRecords,function(k,B){var H=k.langSys;return[{name:"langSysTag"+B,type:"TAG",value:k.tag},{name:"langSys"+B,type:"TABLE",value:new fe("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:H.reqFeatureIndex}].concat(le("featureIndex",H.featureIndexes)))}]})))}]}))}function Ze(u){fe.call(this,"featureListTable",Ae("featureRecord",u,function(m,w){var _=m.feature;return[{name:"featureTag"+w,type:"TAG",value:m.tag},{name:"feature"+w,type:"TABLE",value:new fe("featureTable",[{name:"featureParams",type:"USHORT",value:_.featureParams}].concat(le("lookupListIndex",_.lookupListIndexes)))}]}))}function Ye(u,m){fe.call(this,"lookupListTable",Ee("lookup",u,function(w){var _=m[w.lookupType];return he.assert(!!_,"Unable to write GSUB lookup type "+w.lookupType+" tables."),new fe("lookupTable",[{name:"lookupType",type:"USHORT",value:w.lookupType},{name:"lookupFlag",type:"USHORT",value:w.lookupFlag}].concat(Ee("subtable",w.subtables,_)))}))}ve.CHARSTRING=function(u){if(ge){var m=ge.get(u);if(m!==void 0)return m}for(var w=[],_=u.length,C=0;C<_;C+=1){var k=u[C];w=w.concat(ve[k.type](k.value))}return ge&&ge.set(u,w),w},ye.CHARSTRING=function(u){return ve.CHARSTRING(u).length},ve.OBJECT=function(u){var m=ve[u.type];return he.argument(m!==void 0,"No encoding function for type "+u.type),m(u.value)},ye.OBJECT=function(u){var m=ye[u.type];return he.argument(m!==void 0,"No sizeOf function for type "+u.type),m(u.value)},ve.TABLE=function(u){for(var m=[],w=u.fields.length,_=[],C=[],k=0;k<w;k+=1){var B=u.fields[k],H=ve[B.type];he.argument(H!==void 0,"No encoding function for field type "+B.type+" ("+B.name+")");var Y=u[B.name];Y===void 0&&(Y=B.value);var re=H(Y);B.type==="TABLE"?(C.push(m.length),m=m.concat([0,0]),_.push(re)):m=m.concat(re)}for(var ce=0;ce<_.length;ce+=1){var be=C[ce],Z=m.length;he.argument(Z<65536,"Table "+u.tableName+" too big."),m[be]=Z>>8,m[be+1]=255&Z,m=m.concat(_[ce])}return m},ye.TABLE=function(u){for(var m=0,w=u.fields.length,_=0;_<w;_+=1){var C=u.fields[_],k=ye[C.type];he.argument(k!==void 0,"No sizeOf function for field type "+C.type+" ("+C.name+")");var B=u[C.name];B===void 0&&(B=C.value),m+=k(B),C.type==="TABLE"&&(m+=2)}return m},ve.RECORD=ve.TABLE,ye.RECORD=ye.TABLE,ve.LITERAL=function(u){return u},ye.LITERAL=function(u){return u.length},fe.prototype.encode=function(){return ve.TABLE(this)},fe.prototype.sizeOf=function(){return ye.TABLE(this)};var Fe={Table:fe,Record:fe,Coverage:(Te.prototype=Object.create(fe.prototype)).constructor=Te,ScriptList:(Ge.prototype=Object.create(fe.prototype)).constructor=Ge,FeatureList:(Ze.prototype=Object.create(fe.prototype)).constructor=Ze,LookupList:(Ye.prototype=Object.create(fe.prototype)).constructor=Ye,ushortList:le,tableList:Ee,recordList:Ae};function dt(u,m){return u.getUint8(m)}function Le(u,m){return u.getUint16(m,!1)}function Oe(u,m){return u.getUint32(m,!1)}function ze(u,m){return u.getInt16(m,!1)+u.getUint16(m+2,!1)/65535}var Xe={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function pe(u,m){this.data=u,this.offset=m,this.relativeOffset=0}pe.prototype.parseByte=function(){var u=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,u},pe.prototype.parseChar=function(){var u=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,u},pe.prototype.parseCard8=pe.prototype.parseByte,pe.prototype.parseCard16=pe.prototype.parseUShort=function(){var u=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,u},pe.prototype.parseSID=pe.prototype.parseUShort,pe.prototype.parseOffset16=pe.prototype.parseUShort,pe.prototype.parseShort=function(){var u=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,u},pe.prototype.parseF2Dot14=function(){var u=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,u},pe.prototype.parseOffset32=pe.prototype.parseULong=function(){var u=Oe(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,u},pe.prototype.parseFixed=function(){var u=ze(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,u},pe.prototype.parseString=function(u){var m=this.data,w=this.offset+this.relativeOffset,_="";this.relativeOffset+=u;for(var C=0;C<u;C++)_+=String.fromCharCode(m.getUint8(w+C));return _},pe.prototype.parseTag=function(){return this.parseString(4)},pe.prototype.parseLongDateTime=function(){var u=Oe(this.data,this.offset+this.relativeOffset+4);return u-=2082844800,this.relativeOffset+=8,u},pe.prototype.parseVersion=function(u){var m=Le(this.data,this.offset+this.relativeOffset),w=Le(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,u===void 0&&(u=4096),m+w/u/10},pe.prototype.skip=function(u,m){m===void 0&&(m=1),this.relativeOffset+=Xe[u]*m},pe.prototype.parseULongList=function(u){u===void 0&&(u=this.parseULong());for(var m=new Array(u),w=this.data,_=this.offset+this.relativeOffset,C=0;C<u;C++)m[C]=w.getUint32(_),_+=4;return this.relativeOffset+=4*u,m},pe.prototype.parseOffset16List=pe.prototype.parseUShortList=function(u){u===void 0&&(u=this.parseUShort());for(var m=new Array(u),w=this.data,_=this.offset+this.relativeOffset,C=0;C<u;C++)m[C]=w.getUint16(_),_+=2;return this.relativeOffset+=2*u,m},pe.prototype.parseShortList=function(u){for(var m=new Array(u),w=this.data,_=this.offset+this.relativeOffset,C=0;C<u;C++)m[C]=w.getInt16(_),_+=2;return this.relativeOffset+=2*u,m},pe.prototype.parseByteList=function(u){for(var m=new Array(u),w=this.data,_=this.offset+this.relativeOffset,C=0;C<u;C++)m[C]=w.getUint8(_++);return this.relativeOffset+=u,m},pe.prototype.parseList=function(u,m){m||(m=u,u=this.parseUShort());for(var w=new Array(u),_=0;_<u;_++)w[_]=m.call(this);return w},pe.prototype.parseList32=function(u,m){m||(m=u,u=this.parseULong());for(var w=new Array(u),_=0;_<u;_++)w[_]=m.call(this);return w},pe.prototype.parseRecordList=function(u,m){m||(m=u,u=this.parseUShort());for(var w=new Array(u),_=Object.keys(m),C=0;C<u;C++){for(var k={},B=0;B<_.length;B++){var H=_[B],Y=m[H];k[H]=Y.call(this)}w[C]=k}return w},pe.prototype.parseRecordList32=function(u,m){m||(m=u,u=this.parseULong());for(var w=new Array(u),_=Object.keys(m),C=0;C<u;C++){for(var k={},B=0;B<_.length;B++){var H=_[B],Y=m[H];k[H]=Y.call(this)}w[C]=k}return w},pe.prototype.parseStruct=function(u){if(typeof u=="function")return u.call(this);for(var m=Object.keys(u),w={},_=0;_<m.length;_++){var C=m[_],k=u[C];w[C]=k.call(this)}return w},pe.prototype.parseValueRecord=function(u){if(u===void 0&&(u=this.parseUShort()),u!==0){var m={};return 1&u&&(m.xPlacement=this.parseShort()),2&u&&(m.yPlacement=this.parseShort()),4&u&&(m.xAdvance=this.parseShort()),8&u&&(m.yAdvance=this.parseShort()),16&u&&(m.xPlaDevice=void 0,this.parseShort()),32&u&&(m.yPlaDevice=void 0,this.parseShort()),64&u&&(m.xAdvDevice=void 0,this.parseShort()),128&u&&(m.yAdvDevice=void 0,this.parseShort()),m}},pe.prototype.parseValueRecordList=function(){for(var u=this.parseUShort(),m=this.parseUShort(),w=new Array(m),_=0;_<m;_++)w[_]=this.parseValueRecord(u);return w},pe.prototype.parsePointer=function(u){var m=this.parseOffset16();if(0<m)return new pe(this.data,this.offset+m).parseStruct(u)},pe.prototype.parsePointer32=function(u){var m=this.parseOffset32();if(0<m)return new pe(this.data,this.offset+m).parseStruct(u)},pe.prototype.parseListOfLists=function(u){for(var m=this.parseOffset16List(),w=m.length,_=this.relativeOffset,C=new Array(w),k=0;k<w;k++){var B=m[k];if(B!==0)if(this.relativeOffset=B,u){for(var H=this.parseOffset16List(),Y=new Array(H.length),re=0;re<H.length;re++)this.relativeOffset=B+H[re],Y[re]=u.call(this);C[k]=Y}else C[k]=this.parseUShortList();else C[k]=void 0}return this.relativeOffset=_,C},pe.prototype.parseCoverage=function(){var u=this.offset+this.relativeOffset,m=this.parseUShort(),w=this.parseUShort();if(m===1)return{format:1,glyphs:this.parseUShortList(w)};if(m!==2)throw new Error("0x"+u.toString(16)+": Coverage format must be 1 or 2.");for(var _=new Array(w),C=0;C<w;C++)_[C]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:_}},pe.prototype.parseClassDef=function(){var u=this.offset+this.relativeOffset,m=this.parseUShort();if(m===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(m===2)return{format:2,ranges:this.parseRecordList({start:pe.uShort,end:pe.uShort,classId:pe.uShort})};throw new Error("0x"+u.toString(16)+": ClassDef format must be 1 or 2.")},pe.list=function(u,m){return function(){return this.parseList(u,m)}},pe.list32=function(u,m){return function(){return this.parseList32(u,m)}},pe.recordList=function(u,m){return function(){return this.parseRecordList(u,m)}},pe.recordList32=function(u,m){return function(){return this.parseRecordList32(u,m)}},pe.pointer=function(u){return function(){return this.parsePointer(u)}},pe.pointer32=function(u){return function(){return this.parsePointer32(u)}},pe.tag=pe.prototype.parseTag,pe.byte=pe.prototype.parseByte,pe.uShort=pe.offset16=pe.prototype.parseUShort,pe.uShortList=pe.prototype.parseUShortList,pe.uLong=pe.offset32=pe.prototype.parseULong,pe.uLongList=pe.prototype.parseULongList,pe.struct=pe.prototype.parseStruct,pe.coverage=pe.prototype.parseCoverage,pe.classDef=pe.prototype.parseClassDef;var et={reserved:pe.uShort,reqFeatureIndex:pe.uShort,featureIndexes:pe.uShortList};pe.prototype.parseScriptList=function(){return this.parsePointer(pe.recordList({tag:pe.tag,script:pe.pointer({defaultLangSys:pe.pointer(et),langSysRecords:pe.recordList({tag:pe.tag,langSys:pe.pointer(et)})})}))||[]},pe.prototype.parseFeatureList=function(){return this.parsePointer(pe.recordList({tag:pe.tag,feature:pe.pointer({featureParams:pe.offset16,lookupListIndexes:pe.uShortList})}))||[]},pe.prototype.parseLookupList=function(u){return this.parsePointer(pe.list(pe.pointer(function(){var m=this.parseUShort();he.argument(1<=m&&m<=9,"GPOS/GSUB lookup type "+m+" unknown.");var w=this.parseUShort(),_=16&w;return{lookupType:m,lookupFlag:w,subtables:this.parseList(pe.pointer(u[m])),markFilteringSet:_?this.parseUShort():void 0}})))||[]},pe.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var u=this.parseUShort(),m=this.parseUShort();return he.argument(u===1&&m<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:pe.offset32,featureTableSubstitutionOffset:pe.offset32})})||[]};var F={getByte:dt,getCard8:dt,getUShort:Le,getCard16:Le,getShort:function(u,m){return u.getInt16(m,!1)},getULong:Oe,getFixed:ze,getTag:function(u,m){for(var w="",_=m;_<m+4;_+=1)w+=String.fromCharCode(u.getInt8(_));return w},getOffset:function(u,m,w){for(var _=0,C=0;C<w;C+=1)_<<=8,_+=u.getUint8(m+C);return _},getBytes:function(u,m,w){for(var _=[],C=m;C<w;C+=1)_.push(u.getUint8(C));return _},bytesToString:function(u){for(var m="",w=0;w<u.length;w+=1)m+=String.fromCharCode(u[w]);return m},Parser:pe},q={parse:function(u,m){var w={};w.version=F.getUShort(u,m),he.argument(w.version===0,"cmap table version should be 0."),w.numTables=F.getUShort(u,m+2);for(var _=-1,C=w.numTables-1;0<=C;--C){var k=F.getUShort(u,m+4+8*C),B=F.getUShort(u,m+4+8*C+2);if(k===3&&(B===0||B===1||B===10)||k===0&&(B===0||B===1||B===2||B===3||B===4)){_=F.getULong(u,m+4+8*C+4);break}}if(_===-1)throw new Error("No valid cmap sub-tables found.");var H=new F.Parser(u,m+_);if(w.format=H.parseUShort(),w.format===12)(function(Y,re){var ce;re.parseUShort(),Y.length=re.parseULong(),Y.language=re.parseULong(),Y.groupCount=ce=re.parseULong(),Y.glyphIndexMap={};for(var be=0;be<ce;be+=1)for(var Z=re.parseULong(),Ve=re.parseULong(),Ne=re.parseULong(),Pe=Z;Pe<=Ve;Pe+=1)Y.glyphIndexMap[Pe]=Ne,Ne++})(w,H);else{if(w.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+w.format+").");(function(Y,re,ce,be,Z){var Ve;Y.length=re.parseUShort(),Y.language=re.parseUShort(),Y.segCount=Ve=re.parseUShort()>>1,re.skip("uShort",3),Y.glyphIndexMap={};for(var Ne=new F.Parser(ce,be+Z+14),Pe=new F.Parser(ce,be+Z+16+2*Ve),je=new F.Parser(ce,be+Z+16+4*Ve),ke=new F.Parser(ce,be+Z+16+6*Ve),Je=be+Z+16+8*Ve,Ke=0;Ke<Ve-1;Ke+=1)for(var yt=void 0,nt=Ne.parseUShort(),it=Pe.parseUShort(),Ut=je.parseShort(),bt=ke.parseUShort(),gt=it;gt<=nt;gt+=1)bt!==0?(Je=ke.offset+ke.relativeOffset-2,Je+=bt,Je+=2*(gt-it),(yt=F.getUShort(ce,Je))!==0&&(yt=yt+Ut&65535)):yt=gt+Ut&65535,Y.glyphIndexMap[gt]=yt})(w,H,u,m,_)}return w},make:function(u){var m,w=!0;for(m=u.length-1;0<m;--m)if(65535<u.get(m).unicode){console.log("Adding CMAP format 12 (needed!)"),w=!1;break}var _=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:w?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:w?12:20}];w||(_=_.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),_=_.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var C,k,B,H=new Fe.Table("cmap",_);for(H.segments=[],m=0;m<u.length;m+=1){for(var Y=u.get(m),re=0;re<Y.unicodes.length;re+=1)C=H,k=Y.unicodes[re],B=m,C.segments.push({end:k,start:k,delta:-(k-B),offset:0,glyphIndex:B});H.segments=H.segments.sort(function(yt,nt){return yt.start-nt.start})}H.segments.push({end:65535,start:65535,delta:1,offset:0});var ce=H.segments.length,be=0,Z=[],Ve=[],Ne=[],Pe=[],je=[],ke=[];for(m=0;m<ce;m+=1){var Je=H.segments[m];Je.end<=65535&&Je.start<=65535?(Z=Z.concat({name:"end_"+m,type:"USHORT",value:Je.end}),Ve=Ve.concat({name:"start_"+m,type:"USHORT",value:Je.start}),Ne=Ne.concat({name:"idDelta_"+m,type:"SHORT",value:Je.delta}),Pe=Pe.concat({name:"idRangeOffset_"+m,type:"USHORT",value:Je.offset}),Je.glyphId!==void 0&&(je=je.concat({name:"glyph_"+m,type:"USHORT",value:Je.glyphId}))):be+=1,w||Je.glyphIndex===void 0||(ke=(ke=(ke=ke.concat({name:"cmap12Start_"+m,type:"ULONG",value:Je.start})).concat({name:"cmap12End_"+m,type:"ULONG",value:Je.end})).concat({name:"cmap12Glyph_"+m,type:"ULONG",value:Je.glyphIndex}))}if(H.segCountX2=2*(ce-be),H.searchRange=2*Math.pow(2,Math.floor(Math.log(ce-be)/Math.log(2))),H.entrySelector=Math.log(H.searchRange/2)/Math.log(2),H.rangeShift=H.segCountX2-H.searchRange,H.fields=H.fields.concat(Z),H.fields.push({name:"reservedPad",type:"USHORT",value:0}),H.fields=H.fields.concat(Ve),H.fields=H.fields.concat(Ne),H.fields=H.fields.concat(Pe),H.fields=H.fields.concat(je),H.cmap4Length=14+2*Z.length+2+2*Ve.length+2*Ne.length+2*Pe.length+2*je.length,!w){var Ke=16+4*ke.length;H.cmap12Offset=20+H.cmap4Length,H.fields=H.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:Ke},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:ke.length/3}]),H.fields=H.fields.concat(ke)}return H}},W=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],X=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],ie=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],we=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Me(u){this.font=u}function Be(u){this.cmap=u}function de(u,m){this.encoding=u,this.charset=m}function We(u){switch(u.version){case 1:this.names=we.slice();break;case 2:this.names=new Array(u.numberOfGlyphs);for(var m=0;m<u.numberOfGlyphs;m++)u.glyphNameIndex[m]<we.length?this.names[m]=we[u.glyphNameIndex[m]]:this.names[m]=u.names[u.glyphNameIndex[m]-we.length];break;case 2.5:this.names=new Array(u.numberOfGlyphs);for(var w=0;w<u.numberOfGlyphs;w++)this.names[w]=we[w+u.glyphNameIndex[w]];break;case 3:default:this.names=[]}}Me.prototype.charToGlyphIndex=function(u){var m=u.codePointAt(0),w=this.font.glyphs;if(w){for(var _=0;_<w.length;_+=1)for(var C=w.get(_),k=0;k<C.unicodes.length;k+=1)if(C.unicodes[k]===m)return _}return null},Be.prototype.charToGlyphIndex=function(u){return this.cmap.glyphIndexMap[u.codePointAt(0)]||0},de.prototype.charToGlyphIndex=function(u){var m=u.codePointAt(0),w=this.encoding[m];return this.charset.indexOf(w)},We.prototype.nameToGlyphIndex=function(u){return this.names.indexOf(u)},We.prototype.glyphIndexToName=function(u){return this.names[u]};var rt={line:function(u,m,w,_,C){u.beginPath(),u.moveTo(m,w),u.lineTo(_,C),u.stroke()}};function lt(u){this.bindConstructorValues(u)}function ft(u,m,w){Object.defineProperty(u,m,{get:function(){return u.path,u[w]},set:function(_){u[w]=_},enumerable:!0,configurable:!0})}function ut(u,m){if(this.font=u,this.glyphs={},Array.isArray(m))for(var w=0;w<m.length;w++)this.glyphs[w]=m[w];this.length=m&&m.length||0}lt.prototype.bindConstructorValues=function(u){var m,w;this.index=u.index||0,this.name=u.name||null,this.unicode=u.unicode||void 0,this.unicodes=u.unicodes||u.unicode!==void 0?[u.unicode]:[],u.xMin&&(this.xMin=u.xMin),u.yMin&&(this.yMin=u.yMin),u.xMax&&(this.xMax=u.xMax),u.yMax&&(this.yMax=u.yMax),u.advanceWidth&&(this.advanceWidth=u.advanceWidth),Object.defineProperty(this,"path",(m=u.path,w=m||new ue,{configurable:!0,get:function(){return typeof w=="function"&&(w=w()),w},set:function(_){w=_}}))},lt.prototype.addUnicode=function(u){this.unicodes.length===0&&(this.unicode=u),this.unicodes.push(u)},lt.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},lt.prototype.getPath=function(u,m,w,_,C){var k,B;u=u!==void 0?u:0,m=m!==void 0?m:0,w=w!==void 0?w:72;var H=(_=_||{}).xScale,Y=_.yScale;if(_.hinting&&C&&C.hinting&&(B=this.path&&C.hinting.exec(this,w)),B)k=C.hinting.getCommands(B),u=Math.round(u),m=Math.round(m),H=Y=1;else{k=this.path.commands;var re=1/this.path.unitsPerEm*w;H===void 0&&(H=re),Y===void 0&&(Y=re)}for(var ce=new ue,be=0;be<k.length;be+=1){var Z=k[be];Z.type==="M"?ce.moveTo(u+Z.x*H,m+-Z.y*Y):Z.type==="L"?ce.lineTo(u+Z.x*H,m+-Z.y*Y):Z.type==="Q"?ce.quadraticCurveTo(u+Z.x1*H,m+-Z.y1*Y,u+Z.x*H,m+-Z.y*Y):Z.type==="C"?ce.curveTo(u+Z.x1*H,m+-Z.y1*Y,u+Z.x2*H,m+-Z.y2*Y,u+Z.x*H,m+-Z.y*Y):Z.type==="Z"&&ce.closePath()}return ce},lt.prototype.getContours=function(){if(this.points===void 0)return[];for(var u=[],m=[],w=0;w<this.points.length;w+=1){var _=this.points[w];m.push(_),_.lastPointOfContour&&(u.push(m),m=[])}return he.argument(m.length===0,"There are still points left in the current contour."),u},lt.prototype.getMetrics=function(){for(var u=this.path.commands,m=[],w=[],_=0;_<u.length;_+=1){var C=u[_];C.type!=="Z"&&(m.push(C.x),w.push(C.y)),C.type!=="Q"&&C.type!=="C"||(m.push(C.x1),w.push(C.y1)),C.type==="C"&&(m.push(C.x2),w.push(C.y2))}var k={xMin:Math.min.apply(null,m),yMin:Math.min.apply(null,w),xMax:Math.max.apply(null,m),yMax:Math.max.apply(null,w),leftSideBearing:this.leftSideBearing};return isFinite(k.xMin)||(k.xMin=0),isFinite(k.xMax)||(k.xMax=this.advanceWidth),isFinite(k.yMin)||(k.yMin=0),isFinite(k.yMax)||(k.yMax=0),k.rightSideBearing=this.advanceWidth-k.leftSideBearing-(k.xMax-k.xMin),k},lt.prototype.draw=function(u,m,w,_,C){this.getPath(m,w,_,C).draw(u)},lt.prototype.drawPoints=function(u,m,w,_){function C(be,Z,Ve,Ne){var Pe=2*Math.PI;u.beginPath();for(var je=0;je<be.length;je+=1)u.moveTo(Z+be[je].x*Ne,Ve+be[je].y*Ne),u.arc(Z+be[je].x*Ne,Ve+be[je].y*Ne,2,0,Pe,!1);u.closePath(),u.fill()}m=m!==void 0?m:0,w=w!==void 0?w:0,_=_!==void 0?_:24;for(var k=1/this.path.unitsPerEm*_,B=[],H=[],Y=this.path,re=0;re<Y.commands.length;re+=1){var ce=Y.commands[re];ce.x!==void 0&&B.push({x:ce.x,y:-ce.y}),ce.x1!==void 0&&H.push({x:ce.x1,y:-ce.y1}),ce.x2!==void 0&&H.push({x:ce.x2,y:-ce.y2})}u.fillStyle="blue",C(B,m,w,k),u.fillStyle="red",C(H,m,w,k)},lt.prototype.drawMetrics=function(u,m,w,_){var C;m=m!==void 0?m:0,w=w!==void 0?w:0,_=_!==void 0?_:24,C=1/this.path.unitsPerEm*_,u.lineWidth=1,u.strokeStyle="black",rt.line(u,m,-1e4,m,1e4),rt.line(u,-1e4,w,1e4,w);var k=this.xMin||0,B=this.yMin||0,H=this.xMax||0,Y=this.yMax||0,re=this.advanceWidth||0;u.strokeStyle="blue",rt.line(u,m+k*C,-1e4,m+k*C,1e4),rt.line(u,m+H*C,-1e4,m+H*C,1e4),rt.line(u,-1e4,w+-B*C,1e4,w+-B*C),rt.line(u,-1e4,w+-Y*C,1e4,w+-Y*C),u.strokeStyle="green",rt.line(u,m+re*C,-1e4,m+re*C,1e4)},ut.prototype.get=function(u){return typeof this.glyphs[u]=="function"&&(this.glyphs[u]=this.glyphs[u]()),this.glyphs[u]},ut.prototype.push=function(u,m){this.glyphs[u]=m,this.length++};var ht={GlyphSet:ut,glyphLoader:function(u,m){return new lt({index:m,font:u})},ttfGlyphLoader:function(u,m,w,_,C,k){return function(){var B=new lt({index:m,font:u});return B.path=function(){w(B,_,C);var H=k(u.glyphs,B);return H.unitsPerEm=u.unitsPerEm,H},ft(B,"xMin","_xMin"),ft(B,"xMax","_xMax"),ft(B,"yMin","_yMin"),ft(B,"yMax","_yMax"),B}},cffGlyphLoader:function(u,m,w,_){return function(){var C=new lt({index:m,font:u});return C.path=function(){var k=w(u,C,_);return k.unitsPerEm=u.unitsPerEm,k},C}}};function xt(u,m){if(u===m)return!0;if(Array.isArray(u)&&Array.isArray(m)){if(u.length!==m.length)return!1;for(var w=0;w<u.length;w+=1)if(!xt(u[w],m[w]))return!1;return!0}return!1}function pr(u){return u.length<1240?107:u.length<33900?1131:32768}function Yt(u,m,w){var _,C,k=[],B=[],H=F.getCard16(u,m);if(H!==0){var Y=F.getByte(u,m+2);_=m+(H+1)*Y+2;for(var re=m+3,ce=0;ce<H+1;ce+=1)k.push(F.getOffset(u,re,Y)),re+=Y;C=_+k[H]}else C=m+2;for(var be=0;be<k.length-1;be+=1){var Z=F.getBytes(u,_+k[be],_+k[be+1]);w&&(Z=w(Z)),B.push(Z)}return{objects:B,startOffset:m,endOffset:C}}function Hr(u,m){if(m===28)return u.parseByte()<<8|u.parseByte();if(m===29)return u.parseByte()<<24|u.parseByte()<<16|u.parseByte()<<8|u.parseByte();if(m===30)return function(w){for(var _="",C=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var k=w.parseByte(),B=k>>4,H=15&k;if(B==15||(_+=C[B],H==15))break;_+=C[H]}return parseFloat(_)}(u);if(32<=m&&m<=246)return m-139;if(247<=m&&m<=250)return 256*(m-247)+u.parseByte()+108;if(251<=m&&m<=254)return 256*-(m-251)-u.parseByte()-108;throw new Error("Invalid b0 "+m)}function xr(u,m,w){m=m!==void 0?m:0;var _=new F.Parser(u,m),C=[],k=[];for(w=w!==void 0?w:u.length;_.relativeOffset<w;){var B=_.parseByte();B<=21?(B===12&&(B=1200+_.parseByte()),C.push([B,k]),k=[]):k.push(Hr(_,B))}return function(H){for(var Y={},re=0;re<H.length;re+=1){var ce=H[re][0],be=H[re][1],Z=void 0;if(Z=be.length===1?be[0]:be,Y.hasOwnProperty(ce)&&!isNaN(Y[ce]))throw new Error("Object "+Y+" already has key "+ce);Y[ce]=Z}return Y}(C)}function mr(u,m){return m=m<=390?W[m]:u[m-391]}function zr(u,m,w){for(var _,C={},k=0;k<m.length;k+=1){var B=m[k];if(Array.isArray(B.type)){var H=[];H.length=B.type.length;for(var Y=0;Y<B.type.length;Y++)(_=u[B.op]!==void 0?u[B.op][Y]:void 0)===void 0&&(_=B.value!==void 0&&B.value[Y]!==void 0?B.value[Y]:null),B.type[Y]==="SID"&&(_=mr(w,_)),H[Y]=_;C[B.name]=H}else(_=u[B.op])===void 0&&(_=B.value!==void 0?B.value:null),B.type==="SID"&&(_=mr(w,_)),C[B.name]=_}return C}var qr=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Xr=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Yr(u,m,w,_){return zr(xr(u,m,w),Xr,_)}function Qr(u,m,w,_){for(var C,k,B=[],H=0;H<w.length;H+=1){var Y=new DataView(new Uint8Array(w[H]).buffer),re=(k=_,zr(xr(C=Y,0,C.byteLength),qr,k));re._subrs=[],re._subrsBias=0;var ce=re.private[0],be=re.private[1];if(ce!==0&&be!==0){var Z=Yr(u,be+m,ce,_);if(re._defaultWidthX=Z.defaultWidthX,re._nominalWidthX=Z.nominalWidthX,Z.subrs!==0){var Ve=Yt(u,be+Z.subrs+m);re._subrs=Ve.objects,re._subrsBias=pr(re._subrs)}re._privateDict=Z}B.push(re)}return B}function on(u,m,w){var _,C,k,B,H,Y,re,ce,be=new ue,Z=[],Ve=0,Ne=!1,Pe=!1,je=0,ke=0;if(u.isCIDFont){var Je=u.tables.cff.topDict._fdSelect[m.index],Ke=u.tables.cff.topDict._fdArray[Je];H=Ke._subrs,Y=Ke._subrsBias,re=Ke._defaultWidthX,ce=Ke._nominalWidthX}else H=u.tables.cff.topDict._subrs,Y=u.tables.cff.topDict._subrsBias,re=u.tables.cff.topDict._defaultWidthX,ce=u.tables.cff.topDict._nominalWidthX;var yt=re;function nt(Ut,bt){Pe&&be.closePath(),be.moveTo(Ut,bt),Pe=!0}function it(){Z.length%2==0||Ne||(yt=Z.shift()+ce),Ve+=Z.length>>1,Z.length=0,Ne=!0}return function Ut(bt){for(var gt,wt,Ct,jt,It,Mt,Tt,Bt,At,Ft,_t,Vt,Pt=0;Pt<bt.length;){var Lt=bt[Pt];switch(Pt+=1,Lt){case 1:case 3:it();break;case 4:1<Z.length&&!Ne&&(yt=Z.shift()+ce,Ne=!0),ke+=Z.pop(),nt(je,ke);break;case 5:for(;0<Z.length;)je+=Z.shift(),ke+=Z.shift(),be.lineTo(je,ke);break;case 6:for(;0<Z.length&&(je+=Z.shift(),be.lineTo(je,ke),Z.length!==0);)ke+=Z.shift(),be.lineTo(je,ke);break;case 7:for(;0<Z.length&&(ke+=Z.shift(),be.lineTo(je,ke),Z.length!==0);)je+=Z.shift(),be.lineTo(je,ke);break;case 8:for(;0<Z.length;)_=je+Z.shift(),C=ke+Z.shift(),k=_+Z.shift(),B=C+Z.shift(),je=k+Z.shift(),ke=B+Z.shift(),be.curveTo(_,C,k,B,je,ke);break;case 10:It=Z.pop()+Y,(Mt=H[It])&&Ut(Mt);break;case 11:return;case 12:switch(Lt=bt[Pt],Pt+=1,Lt){case 35:_=je+Z.shift(),C=ke+Z.shift(),k=_+Z.shift(),B=C+Z.shift(),Tt=k+Z.shift(),Bt=B+Z.shift(),At=Tt+Z.shift(),Ft=Bt+Z.shift(),_t=At+Z.shift(),Vt=Ft+Z.shift(),je=_t+Z.shift(),ke=Vt+Z.shift(),Z.shift(),be.curveTo(_,C,k,B,Tt,Bt),be.curveTo(At,Ft,_t,Vt,je,ke);break;case 34:_=je+Z.shift(),C=ke,k=_+Z.shift(),B=C+Z.shift(),Tt=k+Z.shift(),Bt=B,At=Tt+Z.shift(),Ft=B,_t=At+Z.shift(),Vt=ke,je=_t+Z.shift(),be.curveTo(_,C,k,B,Tt,Bt),be.curveTo(At,Ft,_t,Vt,je,ke);break;case 36:_=je+Z.shift(),C=ke+Z.shift(),k=_+Z.shift(),B=C+Z.shift(),Tt=k+Z.shift(),Bt=B,At=Tt+Z.shift(),Ft=B,_t=At+Z.shift(),Vt=Ft+Z.shift(),je=_t+Z.shift(),be.curveTo(_,C,k,B,Tt,Bt),be.curveTo(At,Ft,_t,Vt,je,ke);break;case 37:_=je+Z.shift(),C=ke+Z.shift(),k=_+Z.shift(),B=C+Z.shift(),Tt=k+Z.shift(),Bt=B+Z.shift(),At=Tt+Z.shift(),Ft=Bt+Z.shift(),_t=At+Z.shift(),Vt=Ft+Z.shift(),Math.abs(_t-je)>Math.abs(Vt-ke)?je=_t+Z.shift():ke=Vt+Z.shift(),be.curveTo(_,C,k,B,Tt,Bt),be.curveTo(At,Ft,_t,Vt,je,ke);break;default:console.log("Glyph "+m.index+": unknown operator 1200"+Lt),Z.length=0}break;case 14:0<Z.length&&!Ne&&(yt=Z.shift()+ce,Ne=!0),Pe&&(be.closePath(),Pe=!1);break;case 18:it();break;case 19:case 20:it(),Pt+=Ve+7>>3;break;case 21:2<Z.length&&!Ne&&(yt=Z.shift()+ce,Ne=!0),ke+=Z.pop(),nt(je+=Z.pop(),ke);break;case 22:1<Z.length&&!Ne&&(yt=Z.shift()+ce,Ne=!0),nt(je+=Z.pop(),ke);break;case 23:it();break;case 24:for(;2<Z.length;)_=je+Z.shift(),C=ke+Z.shift(),k=_+Z.shift(),B=C+Z.shift(),je=k+Z.shift(),ke=B+Z.shift(),be.curveTo(_,C,k,B,je,ke);je+=Z.shift(),ke+=Z.shift(),be.lineTo(je,ke);break;case 25:for(;6<Z.length;)je+=Z.shift(),ke+=Z.shift(),be.lineTo(je,ke);_=je+Z.shift(),C=ke+Z.shift(),k=_+Z.shift(),B=C+Z.shift(),je=k+Z.shift(),ke=B+Z.shift(),be.curveTo(_,C,k,B,je,ke);break;case 26:for(Z.length%2&&(je+=Z.shift());0<Z.length;)_=je,C=ke+Z.shift(),k=_+Z.shift(),B=C+Z.shift(),je=k,ke=B+Z.shift(),be.curveTo(_,C,k,B,je,ke);break;case 27:for(Z.length%2&&(ke+=Z.shift());0<Z.length;)_=je+Z.shift(),C=ke,k=_+Z.shift(),B=C+Z.shift(),je=k+Z.shift(),ke=B,be.curveTo(_,C,k,B,je,ke);break;case 28:gt=bt[Pt],wt=bt[Pt+1],Z.push((gt<<24|wt<<16)>>16),Pt+=2;break;case 29:It=Z.pop()+u.gsubrsBias,(Mt=u.gsubrs[It])&&Ut(Mt);break;case 30:for(;0<Z.length&&(_=je,C=ke+Z.shift(),k=_+Z.shift(),B=C+Z.shift(),je=k+Z.shift(),ke=B+(Z.length===1?Z.shift():0),be.curveTo(_,C,k,B,je,ke),Z.length!==0);)_=je+Z.shift(),C=ke,k=_+Z.shift(),B=C+Z.shift(),ke=B+Z.shift(),je=k+(Z.length===1?Z.shift():0),be.curveTo(_,C,k,B,je,ke);break;case 31:for(;0<Z.length&&(_=je+Z.shift(),C=ke,k=_+Z.shift(),B=C+Z.shift(),ke=B+Z.shift(),je=k+(Z.length===1?Z.shift():0),be.curveTo(_,C,k,B,je,ke),Z.length!==0);)_=je,C=ke+Z.shift(),k=_+Z.shift(),B=C+Z.shift(),je=k+Z.shift(),ke=B+(Z.length===1?Z.shift():0),be.curveTo(_,C,k,B,je,ke);break;default:Lt<32?console.log("Glyph "+m.index+": unknown operator "+Lt):Lt<247?Z.push(Lt-139):Lt<251?(gt=bt[Pt],Pt+=1,Z.push(256*(Lt-247)+gt+108)):Lt<255?(gt=bt[Pt],Pt+=1,Z.push(256*-(Lt-251)-gt-108)):(gt=bt[Pt],wt=bt[Pt+1],Ct=bt[Pt+2],jt=bt[Pt+3],Pt+=4,Z.push((gt<<24|wt<<16|Ct<<8|jt)/65536))}}}(w),m.advanceWidth=yt,be}function kr(u,m){var w,_=W.indexOf(u);return 0<=_&&(w=_),0<=(_=m.indexOf(u))?w=_+W.length:(w=W.length+m.length,m.push(u)),w}function Pr(u,m,w){for(var _={},C=0;C<u.length;C+=1){var k=u[C],B=m[k.name];B===void 0||xt(B,k.value)||(k.type==="SID"&&(B=kr(B,w)),_[k.op]={name:k.name,type:k.type,value:B})}return _}function ae(u,m){var w=new Fe.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return w.dict=Pr(qr,u,m),w}function Ie(u){var m=new Fe.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return m.topDicts=[{name:"topDict_0",type:"TABLE",value:u}],m}function He(u){var m=[],w=u.path;m.push({name:"width",type:"NUMBER",value:u.advanceWidth});for(var _=0,C=0,k=0;k<w.commands.length;k+=1){var B=void 0,H=void 0,Y=w.commands[k];if(Y.type==="Q"&&(Y={type:"C",x:Y.x,y:Y.y,x1:1/3*_+2/3*Y.x1,y1:1/3*C+2/3*Y.y1,x2:1/3*Y.x+2/3*Y.x1,y2:1/3*Y.y+2/3*Y.y1}),Y.type==="M")B=Math.round(Y.x-_),H=Math.round(Y.y-C),m.push({name:"dx",type:"NUMBER",value:B}),m.push({name:"dy",type:"NUMBER",value:H}),m.push({name:"rmoveto",type:"OP",value:21}),_=Math.round(Y.x),C=Math.round(Y.y);else if(Y.type==="L")B=Math.round(Y.x-_),H=Math.round(Y.y-C),m.push({name:"dx",type:"NUMBER",value:B}),m.push({name:"dy",type:"NUMBER",value:H}),m.push({name:"rlineto",type:"OP",value:5}),_=Math.round(Y.x),C=Math.round(Y.y);else if(Y.type==="C"){var re=Math.round(Y.x1-_),ce=Math.round(Y.y1-C),be=Math.round(Y.x2-Y.x1),Z=Math.round(Y.y2-Y.y1);B=Math.round(Y.x-Y.x2),H=Math.round(Y.y-Y.y2),m.push({name:"dx1",type:"NUMBER",value:re}),m.push({name:"dy1",type:"NUMBER",value:ce}),m.push({name:"dx2",type:"NUMBER",value:be}),m.push({name:"dy2",type:"NUMBER",value:Z}),m.push({name:"dx",type:"NUMBER",value:B}),m.push({name:"dy",type:"NUMBER",value:H}),m.push({name:"rrcurveto",type:"OP",value:8}),_=Math.round(Y.x),C=Math.round(Y.y)}}return m.push({name:"endchar",type:"OP",value:14}),m}var Ue={parse:function(u,m,w){w.tables.cff={};var _,C,k,B=Yt(u,(_=u,C=m,(k={}).formatMajor=F.getCard8(_,C),k.formatMinor=F.getCard8(_,C+1),k.size=F.getCard8(_,C+2),k.offsetSize=F.getCard8(_,C+3),k.startOffset=C,k.endOffset=C+4,k).endOffset,F.bytesToString),H=Yt(u,B.endOffset),Y=Yt(u,H.endOffset,F.bytesToString),re=Yt(u,Y.endOffset);w.gsubrs=re.objects,w.gsubrsBias=pr(w.gsubrs);var ce=Qr(u,m,H.objects,Y.objects);if(ce.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+ce.length);var be=ce[0];if((w.tables.cff.topDict=be)._privateDict&&(w.defaultWidthX=be._privateDict.defaultWidthX,w.nominalWidthX=be._privateDict.nominalWidthX),be.ros[0]!==void 0&&be.ros[1]!==void 0&&(w.isCIDFont=!0),w.isCIDFont){var Z=be.fdArray,Ve=be.fdSelect;if(Z===0||Ve===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var Ne=Qr(u,m,Yt(u,Z+=m).objects,Y.objects);be._fdArray=Ne,Ve+=m,be._fdSelect=function(it,Ut,bt,gt){var wt,Ct=[],jt=new F.Parser(it,Ut),It=jt.parseCard8();if(It===0)for(var Mt=0;Mt<bt;Mt++){if(gt<=(wt=jt.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+wt+" (FD count "+gt+")");Ct.push(wt)}else{if(It!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+It);var Tt,Bt=jt.parseCard16(),At=jt.parseCard16();if(At!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+At);for(var Ft=0;Ft<Bt;Ft++){if(wt=jt.parseCard8(),Tt=jt.parseCard16(),gt<=wt)throw new Error("CFF table CID Font FDSelect has bad FD index value "+wt+" (FD count "+gt+")");if(bt<Tt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+Tt);for(;At<Tt;At++)Ct.push(wt);At=Tt}if(Tt!==bt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+Tt)}return Ct}(u,Ve,w.numGlyphs,Ne.length)}var Pe=m+be.private[1],je=Yr(u,Pe,be.private[0],Y.objects);if(w.defaultWidthX=je.defaultWidthX,w.nominalWidthX=je.nominalWidthX,je.subrs!==0){var ke=Yt(u,Pe+je.subrs);w.subrs=ke.objects,w.subrsBias=pr(w.subrs)}else w.subrs=[],w.subrsBias=0;var Je=Yt(u,m+be.charStrings);w.nGlyphs=Je.objects.length;var Ke=function(it,Ut,bt,gt){var wt,Ct,jt=new F.Parser(it,Ut);--bt;var It=[".notdef"],Mt=jt.parseCard8();if(Mt===0)for(var Tt=0;Tt<bt;Tt+=1)wt=jt.parseSID(),It.push(mr(gt,wt));else if(Mt===1)for(;It.length<=bt;){wt=jt.parseSID(),Ct=jt.parseCard8();for(var Bt=0;Bt<=Ct;Bt+=1)It.push(mr(gt,wt)),wt+=1}else{if(Mt!==2)throw new Error("Unknown charset format "+Mt);for(;It.length<=bt;){wt=jt.parseSID(),Ct=jt.parseCard16();for(var At=0;At<=Ct;At+=1)It.push(mr(gt,wt)),wt+=1}}return It}(u,m+be.charset,w.nGlyphs,Y.objects);be.encoding===0?w.cffEncoding=new de(X,Ke):be.encoding===1?w.cffEncoding=new de(ie,Ke):w.cffEncoding=function(it,Ut,bt){var gt,wt={},Ct=new F.Parser(it,Ut),jt=Ct.parseCard8();if(jt===0)for(var It=Ct.parseCard8(),Mt=0;Mt<It;Mt+=1)wt[gt=Ct.parseCard8()]=Mt;else{if(jt!==1)throw new Error("Unknown encoding format "+jt);var Tt=Ct.parseCard8();gt=1;for(var Bt=0;Bt<Tt;Bt+=1)for(var At=Ct.parseCard8(),Ft=Ct.parseCard8(),_t=At;_t<=At+Ft;_t+=1)wt[_t]=gt,gt+=1}return new de(wt,bt)}(u,m+be.encoding,Ke),w.encoding=w.encoding||w.cffEncoding,w.glyphs=new ht.GlyphSet(w);for(var yt=0;yt<w.nGlyphs;yt+=1){var nt=Je.objects[yt];w.glyphs.push(yt,ht.cffGlyphLoader(w,yt,on,nt))}},make:function(u,m){for(var w,_=new Fe.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),C=1/m.unitsPerEm,k={version:m.version,fullName:m.fullName,familyName:m.familyName,weight:m.weightName,fontBBox:m.fontBBox||[0,0,0,0],fontMatrix:[C,0,0,C,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},B=[],H=1;H<u.length;H+=1)w=u.get(H),B.push(w.name);var Y=[];_.header=new Fe.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),_.nameIndex=function(Ne){var Pe=new Fe.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Pe.names=[];for(var je=0;je<Ne.length;je+=1)Pe.names.push({name:"name_"+je,type:"NAME",value:Ne[je]});return Pe}([m.postScriptName]);var re,ce,be,Z=ae(k,Y);_.topDictIndex=Ie(Z),_.globalSubrIndex=new Fe.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),_.charsets=function(Ne,Pe){for(var je=new Fe.Record("Charsets",[{name:"format",type:"Card8",value:0}]),ke=0;ke<Ne.length;ke+=1){var Je=kr(Ne[ke],Pe);je.fields.push({name:"glyph_"+ke,type:"SID",value:Je})}return je}(B,Y),_.charStringsIndex=function(Ne){for(var Pe=new Fe.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),je=0;je<Ne.length;je+=1){var ke=Ne.get(je),Je=He(ke);Pe.charStrings.push({name:ke.name,type:"CHARSTRING",value:Je})}return Pe}(u),_.privateDict=(re={},ce=Y,(be=new Fe.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=Pr(Xr,re,ce),be),_.stringIndex=function(Ne){var Pe=new Fe.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Pe.strings=[];for(var je=0;je<Ne.length;je+=1)Pe.strings.push({name:"string_"+je,type:"STRING",value:Ne[je]});return Pe}(Y);var Ve=_.header.sizeOf()+_.nameIndex.sizeOf()+_.topDictIndex.sizeOf()+_.stringIndex.sizeOf()+_.globalSubrIndex.sizeOf();return k.charset=Ve,k.encoding=0,k.charStrings=k.charset+_.charsets.sizeOf(),k.private[1]=k.charStrings+_.charStringsIndex.sizeOf(),Z=ae(k,Y),_.topDictIndex=Ie(Z),_}},$e={parse:function(u,m){var w={},_=new F.Parser(u,m);return w.version=_.parseVersion(),w.fontRevision=Math.round(1e3*_.parseFixed())/1e3,w.checkSumAdjustment=_.parseULong(),w.magicNumber=_.parseULong(),he.argument(w.magicNumber===1594834165,"Font header has wrong magic number."),w.flags=_.parseUShort(),w.unitsPerEm=_.parseUShort(),w.created=_.parseLongDateTime(),w.modified=_.parseLongDateTime(),w.xMin=_.parseShort(),w.yMin=_.parseShort(),w.xMax=_.parseShort(),w.yMax=_.parseShort(),w.macStyle=_.parseUShort(),w.lowestRecPPEM=_.parseUShort(),w.fontDirectionHint=_.parseShort(),w.indexToLocFormat=_.parseShort(),w.glyphDataFormat=_.parseShort(),w},make:function(u){var m=Math.round(new Date().getTime()/1e3)+2082844800,w=m;return u.createdTimestamp&&(w=u.createdTimestamp+2082844800),new Fe.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:w},{name:"modified",type:"LONGDATETIME",value:m},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],u)}},De={parse:function(u,m){var w={},_=new F.Parser(u,m);return w.version=_.parseVersion(),w.ascender=_.parseShort(),w.descender=_.parseShort(),w.lineGap=_.parseShort(),w.advanceWidthMax=_.parseUShort(),w.minLeftSideBearing=_.parseShort(),w.minRightSideBearing=_.parseShort(),w.xMaxExtent=_.parseShort(),w.caretSlopeRise=_.parseShort(),w.caretSlopeRun=_.parseShort(),w.caretOffset=_.parseShort(),_.relativeOffset+=8,w.metricDataFormat=_.parseShort(),w.numberOfHMetrics=_.parseUShort(),w},make:function(u){return new Fe.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],u)}},vt={parse:function(u,m,w,_,C){for(var k,B,H=new F.Parser(u,m),Y=0;Y<_;Y+=1){Y<w&&(k=H.parseUShort(),B=H.parseShort());var re=C.get(Y);re.advanceWidth=k,re.leftSideBearing=B}},make:function(u){for(var m=new Fe.Table("hmtx",[]),w=0;w<u.length;w+=1){var _=u.get(w),C=_.advanceWidth||0,k=_.leftSideBearing||0;m.fields.push({name:"advanceWidth_"+w,type:"USHORT",value:C}),m.fields.push({name:"leftSideBearing_"+w,type:"SHORT",value:k})}return m}},St={make:function(u){for(var m=new Fe.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:u.length}]),w="",_=12+4*u.length,C=0;C<u.length;++C){var k=w.indexOf(u[C]);k<0&&(k=w.length,w+=u[C]),m.fields.push({name:"offset "+C,type:"USHORT",value:_+k}),m.fields.push({name:"length "+C,type:"USHORT",value:u[C].length})}return m.fields.push({name:"stringPool",type:"CHARARRAY",value:w}),m},parse:function(u,m){var w=new F.Parser(u,m),_=w.parseULong();he.argument(_===1,"Unsupported ltag table version."),w.skip("uLong",1);for(var C=w.parseULong(),k=[],B=0;B<C;B++){for(var H="",Y=m+w.parseUShort(),re=w.parseUShort(),ce=Y;ce<Y+re;++ce)H+=String.fromCharCode(u.getInt8(ce));k.push(H)}return k}},Et={parse:function(u,m){var w={},_=new F.Parser(u,m);return w.version=_.parseVersion(),w.numGlyphs=_.parseUShort(),w.version===1&&(w.maxPoints=_.parseUShort(),w.maxContours=_.parseUShort(),w.maxCompositePoints=_.parseUShort(),w.maxCompositeContours=_.parseUShort(),w.maxZones=_.parseUShort(),w.maxTwilightPoints=_.parseUShort(),w.maxStorage=_.parseUShort(),w.maxFunctionDefs=_.parseUShort(),w.maxInstructionDefs=_.parseUShort(),w.maxStackElements=_.parseUShort(),w.maxSizeOfInstructions=_.parseUShort(),w.maxComponentElements=_.parseUShort(),w.maxComponentDepth=_.parseUShort()),w},make:function(u){return new Fe.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:u}])}},mt=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Qe={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Dt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},st={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function bn(u,m,w){switch(u){case 0:if(m===65535)return"und";if(w)return w[m];break;case 1:return Qe[m];case 3:return st[m]}}var Zr="utf-16",wn={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},xn={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function _n(u,m,w){switch(u){case 0:return Zr;case 1:return xn[w]||wn[m];case 3:if(m===1||m===10)return Zr}}function sn(u){var m={};for(var w in u)m[u[w]]=parseInt(w);return m}function an(u,m,w,_,C,k){return new Fe.Record("NameRecord",[{name:"platformID",type:"USHORT",value:u},{name:"encodingID",type:"USHORT",value:m},{name:"languageID",type:"USHORT",value:w},{name:"nameID",type:"USHORT",value:_},{name:"length",type:"USHORT",value:C},{name:"offset",type:"USHORT",value:k}])}function Do(u,m){var w=function(k,B){var H=k.length,Y=B.length-H+1;e:for(var re=0;re<Y;re++)for(;re<Y;re++){for(var ce=0;ce<H;ce++)if(B[re+ce]!==k[ce])continue e;return re}return-1}(u,m);if(w<0){w=m.length;for(var _=0,C=u.length;_<C;++_)m.push(u[_])}return w}var Io={parse:function(u,m,w){for(var _={},C=new F.Parser(u,m),k=C.parseUShort(),B=C.parseUShort(),H=C.offset+C.parseUShort(),Y=0;Y<B;Y++){var re=C.parseUShort(),ce=C.parseUShort(),be=C.parseUShort(),Z=C.parseUShort(),Ve=mt[Z]||Z,Ne=C.parseUShort(),Pe=C.parseUShort(),je=bn(re,be,w),ke=_n(re,ce,be);if(ke!==void 0&&je!==void 0){var Je=void 0;if(Je=ke===Zr?Re.UTF16(u,H+Pe,Ne):Re.MACSTRING(u,H+Pe,Ne,ke)){var Ke=_[Ve];Ke===void 0&&(Ke=_[Ve]={}),Ke[je]=Je}}}return k===1&&C.parseUShort(),_},make:function(u,m){var w,_=[],C={},k=sn(mt);for(var B in u){var H=k[B];if(H===void 0&&(H=B),w=parseInt(H),isNaN(w))throw new Error('Name table entry "'+B+'" does not exist, see nameTableNames for complete list.');C[w]=u[B],_.push(w)}for(var Y=sn(Qe),re=sn(st),ce=[],be=[],Z=0;Z<_.length;Z++){var Ve=C[w=_[Z]];for(var Ne in Ve){var Pe=Ve[Ne],je=1,ke=Y[Ne],Je=Dt[ke],Ke=_n(je,Je,ke),yt=ve.MACSTRING(Pe,Ke);yt===void 0&&(je=0,(ke=m.indexOf(Ne))<0&&(ke=m.length,m.push(Ne)),Je=4,yt=ve.UTF16(Pe));var nt=Do(yt,be);ce.push(an(je,Je,ke,w,yt.length,nt));var it=re[Ne];if(it!==void 0){var Ut=ve.UTF16(Pe),bt=Do(Ut,be);ce.push(an(3,1,it,w,Ut.length,bt))}}}ce.sort(function(Ct,jt){return Ct.platformID-jt.platformID||Ct.encodingID-jt.encodingID||Ct.languageID-jt.languageID||Ct.nameID-jt.nameID});for(var gt=new Fe.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:ce.length},{name:"stringOffset",type:"USHORT",value:6+12*ce.length}]),wt=0;wt<ce.length;wt++)gt.fields.push({name:"record_"+wt,type:"RECORD",value:ce[wt]});return gt.fields.push({name:"strings",type:"LITERAL",value:be}),gt}},to=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],ro={parse:function(u,m){var w={},_=new F.Parser(u,m);w.version=_.parseUShort(),w.xAvgCharWidth=_.parseShort(),w.usWeightClass=_.parseUShort(),w.usWidthClass=_.parseUShort(),w.fsType=_.parseUShort(),w.ySubscriptXSize=_.parseShort(),w.ySubscriptYSize=_.parseShort(),w.ySubscriptXOffset=_.parseShort(),w.ySubscriptYOffset=_.parseShort(),w.ySuperscriptXSize=_.parseShort(),w.ySuperscriptYSize=_.parseShort(),w.ySuperscriptXOffset=_.parseShort(),w.ySuperscriptYOffset=_.parseShort(),w.yStrikeoutSize=_.parseShort(),w.yStrikeoutPosition=_.parseShort(),w.sFamilyClass=_.parseShort(),w.panose=[];for(var C=0;C<10;C++)w.panose[C]=_.parseByte();return w.ulUnicodeRange1=_.parseULong(),w.ulUnicodeRange2=_.parseULong(),w.ulUnicodeRange3=_.parseULong(),w.ulUnicodeRange4=_.parseULong(),w.achVendID=String.fromCharCode(_.parseByte(),_.parseByte(),_.parseByte(),_.parseByte()),w.fsSelection=_.parseUShort(),w.usFirstCharIndex=_.parseUShort(),w.usLastCharIndex=_.parseUShort(),w.sTypoAscender=_.parseShort(),w.sTypoDescender=_.parseShort(),w.sTypoLineGap=_.parseShort(),w.usWinAscent=_.parseUShort(),w.usWinDescent=_.parseUShort(),1<=w.version&&(w.ulCodePageRange1=_.parseULong(),w.ulCodePageRange2=_.parseULong()),2<=w.version&&(w.sxHeight=_.parseShort(),w.sCapHeight=_.parseShort(),w.usDefaultChar=_.parseUShort(),w.usBreakChar=_.parseUShort(),w.usMaxContent=_.parseUShort()),w},make:function(u){return new Fe.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],u)},unicodeRanges:to,getUnicodeRange:function(u){for(var m=0;m<to.length;m+=1){var w=to[m];if(u>=w.begin&&u<w.end)return m}return-1}},Bo={parse:function(u,m){var w={},_=new F.Parser(u,m);switch(w.version=_.parseVersion(),w.italicAngle=_.parseFixed(),w.underlinePosition=_.parseShort(),w.underlineThickness=_.parseShort(),w.isFixedPitch=_.parseULong(),w.minMemType42=_.parseULong(),w.maxMemType42=_.parseULong(),w.minMemType1=_.parseULong(),w.maxMemType1=_.parseULong(),w.version){case 1:w.names=we.slice();break;case 2:w.numberOfGlyphs=_.parseUShort(),w.glyphNameIndex=new Array(w.numberOfGlyphs);for(var C=0;C<w.numberOfGlyphs;C++)w.glyphNameIndex[C]=_.parseUShort();w.names=[];for(var k=0;k<w.numberOfGlyphs;k++)if(w.glyphNameIndex[k]>=we.length){var B=_.parseChar();w.names.push(_.parseString(B))}break;case 2.5:w.numberOfGlyphs=_.parseUShort(),w.offset=new Array(w.numberOfGlyphs);for(var H=0;H<w.numberOfGlyphs;H++)w.offset[H]=_.parseChar()}return w},make:function(){return new Fe.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},nr=new Array(9);nr[1]=function(){var u=this.offset+this.relativeOffset,m=this.parseUShort();return m===1?{substFormat:1,coverage:this.parsePointer(pe.coverage),deltaGlyphId:this.parseUShort()}:m===2?{substFormat:2,coverage:this.parsePointer(pe.coverage),substitute:this.parseOffset16List()}:void he.assert(!1,"0x"+u.toString(16)+": lookup type 1 format must be 1 or 2.")},nr[2]=function(){var u=this.parseUShort();return he.argument(u===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:u,coverage:this.parsePointer(pe.coverage),sequences:this.parseListOfLists()}},nr[3]=function(){var u=this.parseUShort();return he.argument(u===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:u,coverage:this.parsePointer(pe.coverage),alternateSets:this.parseListOfLists()}},nr[4]=function(){var u=this.parseUShort();return he.argument(u===1,"GSUB ligature table identifier-format must be 1"),{substFormat:u,coverage:this.parsePointer(pe.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var ln={sequenceIndex:pe.uShort,lookupListIndex:pe.uShort};nr[5]=function(){var u=this.offset+this.relativeOffset,m=this.parseUShort();if(m===1)return{substFormat:m,coverage:this.parsePointer(pe.coverage),ruleSets:this.parseListOfLists(function(){var C=this.parseUShort(),k=this.parseUShort();return{input:this.parseUShortList(C-1),lookupRecords:this.parseRecordList(k,ln)}})};if(m===2)return{substFormat:m,coverage:this.parsePointer(pe.coverage),classDef:this.parsePointer(pe.classDef),classSets:this.parseListOfLists(function(){var C=this.parseUShort(),k=this.parseUShort();return{classes:this.parseUShortList(C-1),lookupRecords:this.parseRecordList(k,ln)}})};if(m===3){var w=this.parseUShort(),_=this.parseUShort();return{substFormat:m,coverages:this.parseList(w,pe.pointer(pe.coverage)),lookupRecords:this.parseRecordList(_,ln)}}he.assert(!1,"0x"+u.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},nr[6]=function(){var u=this.offset+this.relativeOffset,m=this.parseUShort();return m===1?{substFormat:1,coverage:this.parsePointer(pe.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ln)}})}:m===2?{substFormat:2,coverage:this.parsePointer(pe.coverage),backtrackClassDef:this.parsePointer(pe.classDef),inputClassDef:this.parsePointer(pe.classDef),lookaheadClassDef:this.parsePointer(pe.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ln)}})}:m===3?{substFormat:3,backtrackCoverage:this.parseList(pe.pointer(pe.coverage)),inputCoverage:this.parseList(pe.pointer(pe.coverage)),lookaheadCoverage:this.parseList(pe.pointer(pe.coverage)),lookupRecords:this.parseRecordList(ln)}:void he.assert(!1,"0x"+u.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},nr[7]=function(){var u=this.parseUShort();he.argument(u===1,"GSUB Extension Substitution subtable identifier-format must be 1");var m=this.parseUShort(),w=new pe(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:m,extension:nr[m].call(w)}},nr[8]=function(){var u=this.parseUShort();return he.argument(u===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:u,coverage:this.parsePointer(pe.coverage),backtrackCoverage:this.parseList(pe.pointer(pe.coverage)),lookaheadCoverage:this.parseList(pe.pointer(pe.coverage)),substitutes:this.parseUShortList()}};var Pn=new Array(9);Pn[1]=function(u){return u.substFormat===1?new Fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Fe.Coverage(u.coverage)},{name:"deltaGlyphID",type:"USHORT",value:u.deltaGlyphId}]):new Fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Fe.Coverage(u.coverage)}].concat(Fe.ushortList("substitute",u.substitute)))},Pn[3]=function(u){return he.assert(u.substFormat===1,"Lookup type 3 substFormat must be 1."),new Fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Fe.Coverage(u.coverage)}].concat(Fe.tableList("altSet",u.alternateSets,function(m){return new Fe.Table("alternateSetTable",Fe.ushortList("alternate",m))})))},Pn[4]=function(u){return he.assert(u.substFormat===1,"Lookup type 4 substFormat must be 1."),new Fe.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Fe.Coverage(u.coverage)}].concat(Fe.tableList("ligSet",u.ligatureSets,function(m){return new Fe.Table("ligatureSetTable",Fe.tableList("ligature",m,function(w){return new Fe.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:w.ligGlyph}].concat(Fe.ushortList("component",w.components,w.components.length+1)))}))})))};var Uo={parse:function(u,m){var w=new pe(u,m=m||0),_=w.parseVersion(1);return he.argument(_===1||_===1.1,"Unsupported GSUB table version."),_===1?{version:_,scripts:w.parseScriptList(),features:w.parseFeatureList(),lookups:w.parseLookupList(nr)}:{version:_,scripts:w.parseScriptList(),features:w.parseFeatureList(),lookups:w.parseLookupList(nr),variations:w.parseFeatureVariationsList()}},make:function(u){return new Fe.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Fe.ScriptList(u.scripts)},{name:"features",type:"TABLE",value:new Fe.FeatureList(u.features)},{name:"lookups",type:"TABLE",value:new Fe.LookupList(u.lookups,Pn)}])}},No={parse:function(u,m){var w=new F.Parser(u,m),_=w.parseULong();he.argument(_===1,"Unsupported META table version."),w.parseULong(),w.parseULong();for(var C=w.parseULong(),k={},B=0;B<C;B++){var H=w.parseTag(),Y=w.parseULong(),re=w.parseULong(),ce=Re.UTF8(u,m+Y,re);k[H]=ce}return k},make:function(u){var m=Object.keys(u).length,w="",_=16+12*m,C=new Fe.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:_},{name:"numTags",type:"ULONG",value:m}]);for(var k in u){var B=w.length;w+=u[k],C.fields.push({name:"tag "+k,type:"TAG",value:k}),C.fields.push({name:"offset "+k,type:"ULONG",value:_+B}),C.fields.push({name:"length "+k,type:"ULONG",value:u[k].length})}return C.fields.push({name:"stringPool",type:"CHARARRAY",value:w}),C}};function Fo(u){return Math.log(u)/Math.log(2)|0}function no(u){for(;u.length%4!=0;)u.push(0);for(var m=0,w=0;w<u.length;w+=4)m+=(u[w]<<24)+(u[w+1]<<16)+(u[w+2]<<8)+u[w+3];return m%=Math.pow(2,32)}function Go(u,m,w,_){return new Fe.Record("Table Record",[{name:"tag",type:"TAG",value:u!==void 0?u:""},{name:"checkSum",type:"ULONG",value:m!==void 0?m:0},{name:"offset",type:"ULONG",value:w!==void 0?w:0},{name:"length",type:"ULONG",value:_!==void 0?_:0}])}function Vo(u){var m=new Fe.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);m.tables=u,m.numTables=u.length;var w=Math.pow(2,Fo(m.numTables));m.searchRange=16*w,m.entrySelector=Fo(w),m.rangeShift=16*m.numTables-m.searchRange;for(var _=[],C=[],k=m.sizeOf()+Go().sizeOf()*m.numTables;k%4!=0;)k+=1,C.push({name:"padding",type:"BYTE",value:0});for(var B=0;B<u.length;B+=1){var H=u[B];he.argument(H.tableName.length===4,"Table name"+H.tableName+" is invalid.");var Y=H.sizeOf(),re=Go(H.tableName,no(H.encode()),k,Y);for(_.push({name:re.tag+" Table Record",type:"RECORD",value:re}),C.push({name:H.tableName+" table",type:"RECORD",value:H}),k+=Y,he.argument(!isNaN(k),"Something went wrong calculating the offset.");k%4!=0;)k+=1,C.push({name:"padding",type:"BYTE",value:0})}return _.sort(function(ce,be){return ce.value.tag>be.value.tag?1:-1}),m.fields=m.fields.concat(_),m.fields=m.fields.concat(C),m}function Wo(u,m,w){for(var _=0;_<m.length;_+=1){var C=u.charToGlyphIndex(m[_]);if(0<C)return u.glyphs.get(C).getMetrics()}return w}var Si={make:Vo,fontToTable:function(u){for(var m,w=[],_=[],C=[],k=[],B=[],H=[],Y=[],re=0,ce=0,be=0,Z=0,Ve=0,Ne=0;Ne<u.glyphs.length;Ne+=1){var Pe=u.glyphs.get(Ne),je=0|Pe.unicode;if(isNaN(Pe.advanceWidth))throw new Error("Glyph "+Pe.name+" ("+Ne+"): advanceWidth is not a number.");(je<m||m===void 0)&&0<je&&(m=je),re<je&&(re=je);var ke=ro.getUnicodeRange(je);if(ke<32)ce|=1<<ke;else if(ke<64)be|=1<<ke-32;else if(ke<96)Z|=1<<ke-64;else{if(!(ke<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Ve|=1<<ke-96}if(Pe.name!==".notdef"){var Je=Pe.getMetrics();w.push(Je.xMin),_.push(Je.yMin),C.push(Je.xMax),k.push(Je.yMax),H.push(Je.leftSideBearing),Y.push(Je.rightSideBearing),B.push(Pe.advanceWidth)}}var Ke={xMin:Math.min.apply(null,w),yMin:Math.min.apply(null,_),xMax:Math.max.apply(null,C),yMax:Math.max.apply(null,k),advanceWidthMax:Math.max.apply(null,B),advanceWidthAvg:function(dn){for(var ws=0,ho=0;ho<dn.length;ho+=1)ws+=dn[ho];return ws/dn.length}(B),minLeftSideBearing:Math.min.apply(null,H),maxLeftSideBearing:Math.max.apply(null,H),minRightSideBearing:Math.min.apply(null,Y)};Ke.ascender=u.ascender,Ke.descender=u.descender;var yt=$e.make({flags:3,unitsPerEm:u.unitsPerEm,xMin:Ke.xMin,yMin:Ke.yMin,xMax:Ke.xMax,yMax:Ke.yMax,lowestRecPPEM:3,createdTimestamp:u.createdTimestamp}),nt=De.make({ascender:Ke.ascender,descender:Ke.descender,advanceWidthMax:Ke.advanceWidthMax,minLeftSideBearing:Ke.minLeftSideBearing,minRightSideBearing:Ke.minRightSideBearing,xMaxExtent:Ke.maxLeftSideBearing+(Ke.xMax-Ke.xMin),numberOfHMetrics:u.glyphs.length}),it=Et.make(u.glyphs.length),Ut=ro.make({xAvgCharWidth:Math.round(Ke.advanceWidthAvg),usWeightClass:u.tables.os2.usWeightClass,usWidthClass:u.tables.os2.usWidthClass,usFirstCharIndex:m,usLastCharIndex:re,ulUnicodeRange1:ce,ulUnicodeRange2:be,ulUnicodeRange3:Z,ulUnicodeRange4:Ve,fsSelection:u.tables.os2.fsSelection,sTypoAscender:Ke.ascender,sTypoDescender:Ke.descender,sTypoLineGap:0,usWinAscent:Ke.yMax,usWinDescent:Math.abs(Ke.yMin),ulCodePageRange1:1,sxHeight:Wo(u,"xyvw",{yMax:Math.round(Ke.ascender/2)}).yMax,sCapHeight:Wo(u,"HIKLEFJMNTZBDPRAGOQSUVWXY",Ke).yMax,usDefaultChar:u.hasChar(" ")?32:0,usBreakChar:u.hasChar(" ")?32:0}),bt=vt.make(u.glyphs),gt=q.make(u.glyphs),wt=u.getEnglishName("fontFamily"),Ct=u.getEnglishName("fontSubfamily"),jt=wt+" "+Ct,It=u.getEnglishName("postScriptName");It=It||wt.replace(/\s/g,"")+"-"+Ct;var Mt={};for(var Tt in u.names)Mt[Tt]=u.names[Tt];Mt.uniqueID||(Mt.uniqueID={en:u.getEnglishName("manufacturer")+":"+jt}),Mt.postScriptName||(Mt.postScriptName={en:It}),Mt.preferredFamily||(Mt.preferredFamily=u.names.fontFamily),Mt.preferredSubfamily||(Mt.preferredSubfamily=u.names.fontSubfamily);var Bt=[],At=Io.make(Mt,Bt),Ft=0<Bt.length?St.make(Bt):void 0,_t=Bo.make(),Vt=Ue.make(u.glyphs,{version:u.getEnglishName("version"),fullName:jt,familyName:wt,weightName:Ct,postScriptName:It,unitsPerEm:u.unitsPerEm,fontBBox:[0,Ke.yMin,Ke.ascender,Ke.advanceWidthMax]}),Pt=u.metas&&0<Object.keys(u.metas).length?No.make(u.metas):void 0,Lt=[yt,nt,it,Ut,At,gt,_t,Vt,bt];Ft&&Lt.push(Ft),u.tables.gsub&&Lt.push(Uo.make(u.tables.gsub)),Pt&&Lt.push(Pt);for(var vr=Vo(Lt),cn=no(vr.encode()),Kr=vr.fields,Jt=!1,Jr=0;Jr<Kr.length;Jr+=1)if(Kr[Jr].name==="head table"){Kr[Jr].value.checkSumAdjustment=2981146554-cn,Jt=!0;break}if(!Jt)throw new Error("Could not find head table with checkSum to adjust.");return vr},computeCheckSum:no};function oo(u,m){for(var w=0,_=u.length-1;w<=_;){var C=w+_>>>1,k=u[C].tag;if(k===m)return C;k<m?w=1+C:_=C-1}return-w-1}function Ho(u,m){for(var w=0,_=u.length-1;w<=_;){var C=w+_>>>1,k=u[C];if(k===m)return C;k<m?w=1+C:_=C-1}return-w-1}function zo(u,m){for(var w,_=0,C=u.length-1;_<=C;){var k=_+C>>>1,B=(w=u[k]).start;if(B===m)return w;B<m?_=1+k:C=k-1}if(0<_)return m>(w=u[_-1]).end?0:w}function On(u,m){this.font=u,this.tableName=m}function Ln(u){On.call(this,u,"gpos")}function yr(u){On.call(this,u,"gsub")}function ji(u,m){var w=u.length;if(w!==m.length)return!1;for(var _=0;_<w;_++)if(u[_]!==m[_])return!1;return!0}function qo(u,m,w){for(var _=u.subtables,C=0;C<_.length;C++){var k=_[C];if(k.substFormat===m)return k}if(w)return _.push(w),w}function Xo(u){for(var m=new ArrayBuffer(u.length),w=new Uint8Array(m),_=0;_<u.length;++_)w[_]=u[_];return m}function un(u,m){if(!u)throw m}function Yo(u,m,w,_,C){var k;return k=0<(m&_)?(k=u.parseByte(),(m&C)==0&&(k=-k),w+k):0<(m&C)?w:w+u.parseShort()}function Ti(u,m,w){var _,C,k=new F.Parser(m,w);if(u.numberOfContours=k.parseShort(),u._xMin=k.parseShort(),u._yMin=k.parseShort(),u._xMax=k.parseShort(),u._yMax=k.parseShort(),0<u.numberOfContours){for(var B=u.endPointIndices=[],H=0;H<u.numberOfContours;H+=1)B.push(k.parseUShort());u.instructionLength=k.parseUShort(),u.instructions=[];for(var Y=0;Y<u.instructionLength;Y+=1)u.instructions.push(k.parseByte());var re=B[B.length-1]+1;_=[];for(var ce=0;ce<re;ce+=1)if(C=k.parseByte(),_.push(C),0<(8&C))for(var be=k.parseByte(),Z=0;Z<be;Z+=1)_.push(C),ce+=1;if(he.argument(_.length===re,"Bad flags."),0<B.length){var Ve,Ne=[];if(0<re){for(var Pe=0;Pe<re;Pe+=1)C=_[Pe],(Ve={}).onCurve=!!(1&C),Ve.lastPointOfContour=0<=B.indexOf(Pe),Ne.push(Ve);for(var je=0,ke=0;ke<re;ke+=1)C=_[ke],(Ve=Ne[ke]).x=Yo(k,C,je,2,16),je=Ve.x;for(var Je=0,Ke=0;Ke<re;Ke+=1)C=_[Ke],(Ve=Ne[Ke]).y=Yo(k,C,Je,4,32),Je=Ve.y}u.points=Ne}else u.points=[]}else if(u.numberOfContours===0)u.points=[];else{u.isComposite=!0,u.points=[],u.components=[];for(var yt=!0;yt;){_=k.parseUShort();var nt={glyphIndex:k.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&_)?0<(2&_)?(nt.dx=k.parseShort(),nt.dy=k.parseShort()):nt.matchedPoints=[k.parseUShort(),k.parseUShort()]:0<(2&_)?(nt.dx=k.parseChar(),nt.dy=k.parseChar()):nt.matchedPoints=[k.parseByte(),k.parseByte()],0<(8&_)?nt.xScale=nt.yScale=k.parseF2Dot14():0<(64&_)?(nt.xScale=k.parseF2Dot14(),nt.yScale=k.parseF2Dot14()):0<(128&_)&&(nt.xScale=k.parseF2Dot14(),nt.scale01=k.parseF2Dot14(),nt.scale10=k.parseF2Dot14(),nt.yScale=k.parseF2Dot14()),u.components.push(nt),yt=!!(32&_)}if(256&_){u.instructionLength=k.parseUShort(),u.instructions=[];for(var it=0;it<u.instructionLength;it+=1)u.instructions.push(k.parseByte())}}}function so(u,m){for(var w=[],_=0;_<u.length;_+=1){var C=u[_],k={x:m.xScale*C.x+m.scale01*C.y+m.dx,y:m.scale10*C.x+m.yScale*C.y+m.dy,onCurve:C.onCurve,lastPointOfContour:C.lastPointOfContour};w.push(k)}return w}function Qo(u){var m=new ue;if(!u)return m;for(var w=function(be){for(var Z=[],Ve=[],Ne=0;Ne<be.length;Ne+=1){var Pe=be[Ne];Ve.push(Pe),Pe.lastPointOfContour&&(Z.push(Ve),Ve=[])}return he.argument(Ve.length===0,"There are still points left in the current contour."),Z}(u),_=0;_<w.length;++_){var C=w[_],k=null,B=C[C.length-1],H=C[0];if(B.onCurve)m.moveTo(B.x,B.y);else if(H.onCurve)m.moveTo(H.x,H.y);else{var Y={x:.5*(B.x+H.x),y:.5*(B.y+H.y)};m.moveTo(Y.x,Y.y)}for(var re=0;re<C.length;++re)if(k=B,B=H,H=C[(re+1)%C.length],B.onCurve)m.lineTo(B.x,B.y);else{var ce=H;k.onCurve||(.5*(B.x+k.x),.5*(B.y+k.y)),H.onCurve||(ce={x:.5*(B.x+H.x),y:.5*(B.y+H.y)}),m.quadraticCurveTo(B.x,B.y,ce.x,ce.y)}m.closePath()}return m}function Ei(u,m){if(m.isComposite)for(var w=0;w<m.components.length;w+=1){var _=m.components[w],C=u.get(_.glyphIndex);if(C.getPath(),C.points){var k=void 0;if(_.matchedPoints===void 0)k=so(C.points,_);else{if(_.matchedPoints[0]>m.points.length-1||_.matchedPoints[1]>C.points.length-1)throw Error("Matched points out of range in "+m.name);var B=m.points[_.matchedPoints[0]],H=C.points[_.matchedPoints[1]],Y={xScale:_.xScale,scale01:_.scale01,scale10:_.scale10,yScale:_.yScale,dx:0,dy:0};H=so([H],Y)[0],Y.dx=B.x-H.x,Y.dy=B.y-H.y,k=so(C.points,Y)}m.points=m.points.concat(k)}}return Qo(m.points)}(Ln.prototype=On.prototype={searchTag:oo,binSearch:Ho,getTable:function(u){var m=this.font.tables[this.tableName];return!m&&u&&(m=this.font.tables[this.tableName]=this.createDefaultTable()),m},getScriptNames:function(){var u=this.getTable();return u?u.scripts.map(function(m){return m.tag}):[]},getDefaultScriptName:function(){var u=this.getTable();if(u){for(var m=!1,w=0;w<u.scripts.length;w++){var _=u.scripts[w].tag;if(_==="DFLT")return _;_==="latn"&&(m=!0)}return m?"latn":void 0}},getScriptTable:function(u,m){var w=this.getTable(m);if(w){u=u||"DFLT";var _=w.scripts,C=oo(w.scripts,u);if(0<=C)return _[C].script;if(m){var k={tag:u,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return _.splice(-1-C,0,k),k.script}}},getLangSysTable:function(u,m,w){var _=this.getScriptTable(u,w);if(_){if(!m||m==="dflt"||m==="DFLT")return _.defaultLangSys;var C=oo(_.langSysRecords,m);if(0<=C)return _.langSysRecords[C].langSys;if(w){var k={tag:m,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return _.langSysRecords.splice(-1-C,0,k),k.langSys}}},getFeatureTable:function(u,m,w,_){var C=this.getLangSysTable(u,m,_);if(C){for(var k,B=C.featureIndexes,H=this.font.tables[this.tableName].features,Y=0;Y<B.length;Y++)if((k=H[B[Y]]).tag===w)return k.feature;if(_){var re=H.length;return he.assert(re===0||w>=H[re-1].tag,"Features must be added in alphabetical order."),k={tag:w,feature:{params:0,lookupListIndexes:[]}},H.push(k),B.push(re),k.feature}}},getLookupTables:function(u,m,w,_,C){var k=this.getFeatureTable(u,m,w,C),B=[];if(k){for(var H,Y=k.lookupListIndexes,re=this.font.tables[this.tableName].lookups,ce=0;ce<Y.length;ce++)(H=re[Y[ce]]).lookupType===_&&B.push(H);if(B.length===0&&C){H={lookupType:_,lookupFlag:0,subtables:[],markFilteringSet:void 0};var be=re.length;return re.push(H),Y.push(be),[H]}}return B},getGlyphClass:function(u,m){switch(u.format){case 1:return u.startGlyph<=m&&m<u.startGlyph+u.classes.length?u.classes[m-u.startGlyph]:0;case 2:var w=zo(u.ranges,m);return w?w.classId:0}},getCoverageIndex:function(u,m){switch(u.format){case 1:var w=Ho(u.glyphs,m);return 0<=w?w:-1;case 2:var _=zo(u.ranges,m);return _?_.index+m-_.start:-1}},expandCoverage:function(u){if(u.format===1)return u.glyphs;for(var m=[],w=u.ranges,_=0;_<w.length;_++)for(var C=w[_],k=C.start,B=C.end,H=k;H<=B;H++)m.push(H);return m}}).init=function(){var u=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(u)},Ln.prototype.getKerningValue=function(u,m,w){for(var _=0;_<u.length;_++)for(var C=u[_].subtables,k=0;k<C.length;k++){var B=C[k],H=this.getCoverageIndex(B.coverage,m);if(!(H<0))switch(B.posFormat){case 1:for(var Y=B.pairSets[H],re=0;re<Y.length;re++){var ce=Y[re];if(ce.secondGlyph===w)return ce.value1&&ce.value1.xAdvance||0}break;case 2:var be=this.getGlyphClass(B.classDef1,m),Z=this.getGlyphClass(B.classDef2,w),Ve=B.classRecords[be][Z];return Ve.value1&&Ve.value1.xAdvance||0}}return 0},Ln.prototype.getKerningTables=function(u,m){if(this.font.tables.gpos)return this.getLookupTables(u,m,"kern",2)},(yr.prototype=On.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},yr.prototype.getSingle=function(u,m,w){for(var _=[],C=this.getLookupTables(m,w,u,1),k=0;k<C.length;k++)for(var B=C[k].subtables,H=0;H<B.length;H++){var Y=B[H],re=this.expandCoverage(Y.coverage),ce=void 0;if(Y.substFormat===1){var be=Y.deltaGlyphId;for(ce=0;ce<re.length;ce++){var Z=re[ce];_.push({sub:Z,by:Z+be})}}else{var Ve=Y.substitute;for(ce=0;ce<re.length;ce++)_.push({sub:re[ce],by:Ve[ce]})}}return _},yr.prototype.getAlternates=function(u,m,w){for(var _=[],C=this.getLookupTables(m,w,u,3),k=0;k<C.length;k++)for(var B=C[k].subtables,H=0;H<B.length;H++)for(var Y=B[H],re=this.expandCoverage(Y.coverage),ce=Y.alternateSets,be=0;be<re.length;be++)_.push({sub:re[be],by:ce[be]});return _},yr.prototype.getLigatures=function(u,m,w){for(var _=[],C=this.getLookupTables(m,w,u,4),k=0;k<C.length;k++)for(var B=C[k].subtables,H=0;H<B.length;H++)for(var Y=B[H],re=this.expandCoverage(Y.coverage),ce=Y.ligatureSets,be=0;be<re.length;be++)for(var Z=re[be],Ve=ce[be],Ne=0;Ne<Ve.length;Ne++){var Pe=Ve[Ne];_.push({sub:[Z].concat(Pe.components),by:Pe.ligGlyph})}return _},yr.prototype.addSingle=function(u,m,w,_){var C=qo(this.getLookupTables(w,_,u,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});he.assert(C.coverage.format===1,"Ligature: unable to modify coverage table format "+C.coverage.format);var k=m.sub,B=this.binSearch(C.coverage.glyphs,k);B<0&&(B=-1-B,C.coverage.glyphs.splice(B,0,k),C.substitute.splice(B,0,0)),C.substitute[B]=m.by},yr.prototype.addAlternate=function(u,m,w,_){var C=qo(this.getLookupTables(w,_,u,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});he.assert(C.coverage.format===1,"Ligature: unable to modify coverage table format "+C.coverage.format);var k=m.sub,B=this.binSearch(C.coverage.glyphs,k);B<0&&(B=-1-B,C.coverage.glyphs.splice(B,0,k),C.alternateSets.splice(B,0,0)),C.alternateSets[B]=m.by},yr.prototype.addLigature=function(u,m,w,_){var C=this.getLookupTables(w,_,u,4,!0)[0],k=C.subtables[0];k||(k={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},C.subtables[0]=k),he.assert(k.coverage.format===1,"Ligature: unable to modify coverage table format "+k.coverage.format);var B=m.sub[0],H=m.sub.slice(1),Y={ligGlyph:m.by,components:H},re=this.binSearch(k.coverage.glyphs,B);if(0<=re){for(var ce=k.ligatureSets[re],be=0;be<ce.length;be++)if(ji(ce[be].components,H))return;ce.push(Y)}else re=-1-re,k.coverage.glyphs.splice(re,0,B),k.ligatureSets.splice(re,0,[Y])},yr.prototype.getFeature=function(u,m,w){if(/ss\d\d/.test(u))return this.getSingle(u,m,w);switch(u){case"aalt":case"salt":return this.getSingle(u,m,w).concat(this.getAlternates(u,m,w));case"dlig":case"liga":case"rlig":return this.getLigatures(u,m,w)}},yr.prototype.add=function(u,m,w,_){if(/ss\d\d/.test(u))return this.addSingle(u,m,w,_);switch(u){case"aalt":case"salt":return typeof m.by=="number"?this.addSingle(u,m,w,_):this.addAlternate(u,m,w,_);case"dlig":case"liga":case"rlig":return this.addLigature(u,m,w,_)}};var Zo,$r,$o,io,Ko={getPath:Qo,parse:function(u,m,w,_){for(var C=new ht.GlyphSet(_),k=0;k<w.length-1;k+=1){var B=w[k];B!==w[k+1]?C.push(k,ht.ttfGlyphLoader(_,k,Ti,u,m+B,Ei)):C.push(k,ht.glyphLoader(_,k))}return C}};function Jo(u){this.font=u,this.getCommands=function(m){return Ko.getPath(m).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Ci(u){return u}function es(u){return Math.sign(u)*Math.round(Math.abs(u))}function Mi(u){return Math.sign(u)*Math.round(Math.abs(2*u))/2}function Ai(u){return Math.sign(u)*(Math.round(Math.abs(u)+.5)-.5)}function Ri(u){return Math.sign(u)*Math.ceil(Math.abs(u))}function ki(u){return Math.sign(u)*Math.floor(Math.abs(u))}function ts(u){var m=this.srPeriod,w=this.srPhase,_=1;return u<0&&(u=-u,_=-1),u+=this.srThreshold-w,u=Math.trunc(u/m)*m,(u+=w)<0?w*_:u*_}var gr={x:1,y:0,axis:"x",distance:function(u,m,w,_){return(w?u.xo:u.x)-(_?m.xo:m.x)},interpolate:function(u,m,w,_){var C,k,B,H,Y,re,ce;if(!_||_===this)return C=u.xo-m.xo,k=u.xo-w.xo,Y=m.x-m.xo,re=w.x-w.xo,(ce=(B=Math.abs(C))+(H=Math.abs(k)))===0?void(u.x=u.xo+(Y+re)/2):void(u.x=u.xo+(Y*H+re*B)/ce);C=_.distance(u,m,!0,!0),k=_.distance(u,w,!0,!0),Y=_.distance(m,m,!1,!0),re=_.distance(w,w,!1,!0),(ce=(B=Math.abs(C))+(H=Math.abs(k)))!==0?gr.setRelative(u,u,(Y*H+re*B)/ce,_,!0):gr.setRelative(u,u,(Y+re)/2,_,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(u,m,w,_,C){if(_&&_!==this){var k=C?m.xo:m.x,B=C?m.yo:m.y,H=k+w*_.x,Y=B+w*_.y;u.x=H+(u.y-Y)/_.normalSlope}else u.x=(C?m.xo:m.x)+w},slope:0,touch:function(u){u.xTouched=!0},touched:function(u){return u.xTouched},untouch:function(u){u.xTouched=!1}},_r={x:0,y:1,axis:"y",distance:function(u,m,w,_){return(w?u.yo:u.y)-(_?m.yo:m.y)},interpolate:function(u,m,w,_){var C,k,B,H,Y,re,ce;if(!_||_===this)return C=u.yo-m.yo,k=u.yo-w.yo,Y=m.y-m.yo,re=w.y-w.yo,(ce=(B=Math.abs(C))+(H=Math.abs(k)))===0?void(u.y=u.yo+(Y+re)/2):void(u.y=u.yo+(Y*H+re*B)/ce);C=_.distance(u,m,!0,!0),k=_.distance(u,w,!0,!0),Y=_.distance(m,m,!1,!0),re=_.distance(w,w,!1,!0),(ce=(B=Math.abs(C))+(H=Math.abs(k)))!==0?_r.setRelative(u,u,(Y*H+re*B)/ce,_,!0):_r.setRelative(u,u,(Y+re)/2,_,!0)},normalSlope:0,setRelative:function(u,m,w,_,C){if(_&&_!==this){var k=C?m.xo:m.x,B=C?m.yo:m.y,H=k+w*_.x,Y=B+w*_.y;u.y=Y+_.normalSlope*(u.x-H)}else u.y=(C?m.yo:m.y)+w},slope:Number.POSITIVE_INFINITY,touch:function(u){u.yTouched=!0},touched:function(u){return u.yTouched},untouch:function(u){u.yTouched=!1}};function Sn(u,m){this.x=u,this.y=m,this.axis=void 0,this.slope=m/u,this.normalSlope=-u/m,Object.freeze(this)}function jn(u,m){var w=Math.sqrt(u*u+m*m);return m/=w,(u/=w)===1&&m===0?gr:u===0&&m===1?_r:new Sn(u,m)}function Sr(u,m,w,_){this.x=this.xo=Math.round(64*u)/64,this.y=this.yo=Math.round(64*m)/64,this.lastPointOfContour=w,this.onCurve=_,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(gr),Object.freeze(_r),Sn.prototype.distance=function(u,m,w,_){return this.x*gr.distance(u,m,w,_)+this.y*_r.distance(u,m,w,_)},Sn.prototype.interpolate=function(u,m,w,_){var C,k,B,H,Y,re,ce;B=_.distance(u,m,!0,!0),H=_.distance(u,w,!0,!0),C=_.distance(m,m,!1,!0),k=_.distance(w,w,!1,!0),(ce=(Y=Math.abs(B))+(re=Math.abs(H)))!==0?this.setRelative(u,u,(C*re+k*Y)/ce,_,!0):this.setRelative(u,u,(C+k)/2,_,!0)},Sn.prototype.setRelative=function(u,m,w,_,C){_=_||this;var k=C?m.xo:m.x,B=C?m.yo:m.y,H=k+w*_.x,Y=B+w*_.y,re=_.normalSlope,ce=this.slope,be=u.x,Z=u.y;u.x=(ce*be-re*H+Y-Z)/(ce-re),u.y=ce*(u.x-be)+Z},Sn.prototype.touch=function(u){u.xTouched=!0,u.yTouched=!0},Sr.prototype.nextTouched=function(u){for(var m=this.nextPointOnContour;!u.touched(m)&&m!==this;)m=m.nextPointOnContour;return m},Sr.prototype.prevTouched=function(u){for(var m=this.prevPointOnContour;!u.touched(m)&&m!==this;)m=m.prevPointOnContour;return m};var Tn=Object.freeze(new Sr(0,0)),Pi={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Or(u,m){switch(this.env=u,this.stack=[],this.prog=m,u){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=gr,this.round=es}}function Dn(u){for(var m=u.tZone=new Array(u.gZone.length),w=0;w<m.length;w++)m[w]=new Sr(0,0)}function rs(u,m){var w,_=u.prog,C=u.ip,k=1;do if((w=_[++C])===88)k++;else if(w===89)k--;else if(w===64)C+=_[C+1]+1;else if(w===65)C+=2*_[C+1]+1;else if(176<=w&&w<=183)C+=w-176+1;else if(184<=w&&w<=191)C+=2*(w-184+1);else if(m&&k===1&&w===27)break;while(0<k);u.ip=C}function ns(u,m){a.DEBUG&&console.log(m.step,"SVTCA["+u.axis+"]"),m.fv=m.pv=m.dpv=u}function os(u,m){a.DEBUG&&console.log(m.step,"SPVTCA["+u.axis+"]"),m.pv=m.dpv=u}function ss(u,m){a.DEBUG&&console.log(m.step,"SFVTCA["+u.axis+"]"),m.fv=u}function is(u,m){var w,_,C=m.stack,k=C.pop(),B=C.pop(),H=m.z2[k],Y=m.z1[B];a.DEBUG&&console.log("SPVTL["+u+"]",k,B),_=u?(w=H.y-Y.y,Y.x-H.x):(w=Y.x-H.x,Y.y-H.y),m.pv=m.dpv=jn(w,_)}function as(u,m){var w,_,C=m.stack,k=C.pop(),B=C.pop(),H=m.z2[k],Y=m.z1[B];a.DEBUG&&console.log("SFVTL["+u+"]",k,B),_=u?(w=H.y-Y.y,Y.x-H.x):(w=Y.x-H.x,Y.y-H.y),m.fv=jn(w,_)}function ao(u){a.DEBUG&&console.log(u.step,"POP[]"),u.stack.pop()}function ls(u,m){var w=m.stack.pop(),_=m.z0[w],C=m.fv,k=m.pv;a.DEBUG&&console.log(m.step,"MDAP["+u+"]",w);var B=k.distance(_,Tn);u&&(B=m.round(B)),C.setRelative(_,Tn,B,k),C.touch(_),m.rp0=m.rp1=w}function us(u,m){var w,_,C,k=m.z2,B=k.length-2;a.DEBUG&&console.log(m.step,"IUP["+u.axis+"]");for(var H=0;H<B;H++)w=k[H],u.touched(w)||(_=w.prevTouched(u))!==w&&(_===(C=w.nextTouched(u))&&u.setRelative(w,w,u.distance(_,_,!1,!0),u,!0),u.interpolate(w,_,C,u))}function cs(u,m){for(var w=m.stack,_=u?m.rp1:m.rp2,C=(u?m.z0:m.z1)[_],k=m.fv,B=m.pv,H=m.loop,Y=m.z2;H--;){var re=w.pop(),ce=Y[re],be=B.distance(C,C,!1,!0);k.setRelative(ce,ce,be,B),k.touch(ce),a.DEBUG&&console.log(m.step,(1<m.loop?"loop "+(m.loop-H)+": ":"")+"SHP["+(u?"rp1":"rp2")+"]",re)}m.loop=1}function ds(u,m){var w=m.stack,_=u?m.rp1:m.rp2,C=(u?m.z0:m.z1)[_],k=m.fv,B=m.pv,H=w.pop(),Y=m.z2[m.contours[H]],re=Y;a.DEBUG&&console.log(m.step,"SHC["+u+"]",H);for(var ce=B.distance(C,C,!1,!0);re!==C&&k.setRelative(re,re,ce,B),(re=re.nextPointOnContour)!==Y;);}function hs(u,m){var w,_,C=m.stack,k=u?m.rp1:m.rp2,B=(u?m.z0:m.z1)[k],H=m.fv,Y=m.pv,re=C.pop();switch(a.DEBUG&&console.log(m.step,"SHZ["+u+"]",re),re){case 0:w=m.tZone;break;case 1:w=m.gZone;break;default:throw new Error("Invalid zone")}for(var ce=Y.distance(B,B,!1,!0),be=w.length-2,Z=0;Z<be;Z++)_=w[Z],H.setRelative(_,_,ce,Y)}function fs(u,m){var w=m.stack,_=w.pop()/64,C=w.pop(),k=m.z1[C],B=m.z0[m.rp0],H=m.fv,Y=m.pv;H.setRelative(k,B,_,Y),H.touch(k),a.DEBUG&&console.log(m.step,"MSIRP["+u+"]",_,C),m.rp1=m.rp0,m.rp2=C,u&&(m.rp0=C)}function ps(u,m){var w=m.stack,_=w.pop(),C=w.pop(),k=m.z0[C],B=m.fv,H=m.pv,Y=m.cvt[_];a.DEBUG&&console.log(m.step,"MIAP["+u+"]",_,"(",Y,")",C);var re=H.distance(k,Tn);u&&(Math.abs(re-Y)<m.cvCutIn&&(re=Y),re=m.round(re)),B.setRelative(k,Tn,re,H),m.zp0===0&&(k.xo=k.x,k.yo=k.y),B.touch(k),m.rp0=m.rp1=C}function ms(u,m){var w=m.stack,_=w.pop(),C=m.z2[_];a.DEBUG&&console.log(m.step,"GC["+u+"]",_),w.push(64*m.dpv.distance(C,Tn,u,!1))}function ys(u,m){var w=m.stack,_=w.pop(),C=w.pop(),k=m.z1[_],B=m.z0[C],H=m.dpv.distance(B,k,u,u);a.DEBUG&&console.log(m.step,"MD["+u+"]",_,C,"->",H),m.stack.push(Math.round(64*H))}function lo(u,m){var w=m.stack,_=w.pop(),C=m.fv,k=m.pv,B=m.ppem,H=m.deltaBase+16*(u-1),Y=m.deltaShift,re=m.z0;a.DEBUG&&console.log(m.step,"DELTAP["+u+"]",_,w);for(var ce=0;ce<_;ce++){var be=w.pop(),Z=w.pop();if(H+((240&Z)>>4)===B){var Ve=(15&Z)-8;0<=Ve&&Ve++,a.DEBUG&&console.log(m.step,"DELTAPFIX",be,"by",Ve*Y);var Ne=re[be];C.setRelative(Ne,Ne,Ve*Y,k)}}}function In(u,m){var w=m.stack,_=w.pop();a.DEBUG&&console.log(m.step,"ROUND[]"),w.push(64*m.round(_/64))}function uo(u,m){var w=m.stack,_=w.pop(),C=m.ppem,k=m.deltaBase+16*(u-1),B=m.deltaShift;a.DEBUG&&console.log(m.step,"DELTAC["+u+"]",_,w);for(var H=0;H<_;H++){var Y=w.pop(),re=w.pop();if(k+((240&re)>>4)===C){var ce=(15&re)-8;0<=ce&&ce++;var be=ce*B;a.DEBUG&&console.log(m.step,"DELTACFIX",Y,"by",be),m.cvt[Y]+=be}}}function gs(u,m){var w,_,C=m.stack,k=C.pop(),B=C.pop(),H=m.z2[k],Y=m.z1[B];a.DEBUG&&console.log(m.step,"SDPVTL["+u+"]",k,B),_=u?(w=H.y-Y.y,Y.x-H.x):(w=Y.x-H.x,Y.y-H.y),m.dpv=jn(w,_)}function Lr(u,m){var w=m.stack,_=m.prog,C=m.ip;a.DEBUG&&console.log(m.step,"PUSHB["+u+"]");for(var k=0;k<u;k++)w.push(_[++C]);m.ip=C}function Dr(u,m){var w=m.ip,_=m.prog,C=m.stack;a.DEBUG&&console.log(m.ip,"PUSHW["+u+"]");for(var k=0;k<u;k++){var B=_[++w]<<8|_[++w];32768&B&&(B=-(1+(65535^B))),C.push(B)}m.ip=w}function tt(u,m,w,_,C,k){var B,H,Y,re,ce=k.stack,be=u&&ce.pop(),Z=ce.pop(),Ve=k.rp0,Ne=k.z0[Ve],Pe=k.z1[Z],je=k.minDis,ke=k.fv,Je=k.dpv;Y=0<=(H=B=Je.distance(Pe,Ne,!0,!0))?1:-1,H=Math.abs(H),u&&(re=k.cvt[be],_&&Math.abs(H-re)<k.cvCutIn&&(H=re)),w&&H<je&&(H=je),_&&(H=k.round(H)),ke.setRelative(Pe,Ne,Y*H,Je),ke.touch(Pe),a.DEBUG&&console.log(k.step,(u?"MIRP[":"MDRP[")+(m?"M":"m")+(w?">":"_")+(_?"R":"_")+(C===0?"Gr":C===1?"Bl":C===2?"Wh":"")+"]",u?be+"("+k.cvt[be]+","+re+")":"",Z,"(d =",B,"->",Y*H,")"),k.rp1=k.rp0,k.rp2=Z,m&&(k.rp0=Z)}Jo.prototype.exec=function(u,m){if(typeof m!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var w=this.font,_=this._prepState;if(!_||_.ppem!==m){var C=this._fpgmState;if(!C){Or.prototype=Pi,(C=this._fpgmState=new Or("fpgm",w.tables.fpgm)).funcs=[],C.font=w,a.DEBUG&&(console.log("---EXEC FPGM---"),C.step=-1);try{$r(C)}catch(re){return console.log("Hinting error in FPGM:"+re),void(this._errorState=3)}}Or.prototype=C,(_=this._prepState=new Or("prep",w.tables.prep)).ppem=m;var k=w.tables.cvt;if(k)for(var B=_.cvt=new Array(k.length),H=m/w.unitsPerEm,Y=0;Y<k.length;Y++)B[Y]=k[Y]*H;else _.cvt=[];a.DEBUG&&(console.log("---EXEC PREP---"),_.step=-1);try{$r(_)}catch(re){this._errorState<2&&console.log("Hinting error in PREP:"+re),this._errorState=2}}if(!(1<this._errorState))try{return $o(u,_)}catch(re){return this._errorState<1&&(console.log("Hinting error:"+re),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},$o=function(u,m){var w,_,C,k=m.ppem/m.font.unitsPerEm,B=k,H=u.components;if(Or.prototype=m,H){var Y=m.font;_=[],w=[];for(var re=0;re<H.length;re++){var ce=H[re],be=Y.glyphs.get(ce.glyphIndex);C=new Or("glyf",be.instructions),a.DEBUG&&(console.log("---EXEC COMP "+re+"---"),C.step=-1),io(be,C,k,B);for(var Z=Math.round(ce.dx*k),Ve=Math.round(ce.dy*B),Ne=C.gZone,Pe=C.contours,je=0;je<Ne.length;je++){var ke=Ne[je];ke.xTouched=ke.yTouched=!1,ke.xo=ke.x=ke.x+Z,ke.yo=ke.y=ke.y+Ve}var Je=_.length;_.push.apply(_,Ne);for(var Ke=0;Ke<Pe.length;Ke++)w.push(Pe[Ke]+Je)}u.instructions&&!C.inhibitGridFit&&((C=new Or("glyf",u.instructions)).gZone=C.z0=C.z1=C.z2=_,C.contours=w,_.push(new Sr(0,0),new Sr(Math.round(u.advanceWidth*k),0)),a.DEBUG&&(console.log("---EXEC COMPOSITE---"),C.step=-1),$r(C),_.length-=2)}else C=new Or("glyf",u.instructions),a.DEBUG&&(console.log("---EXEC GLYPH---"),C.step=-1),io(u,C,k,B),_=C.gZone;return _},io=function(u,m,w,_){for(var C,k,B,H=u.points||[],Y=H.length,re=m.gZone=m.z0=m.z1=m.z2=[],ce=m.contours=[],be=0;be<Y;be++)C=H[be],re[be]=new Sr(C.x*w,C.y*_,C.lastPointOfContour,C.onCurve);for(var Z=0;Z<Y;Z++)C=re[Z],k||(k=C,ce.push(Z)),C.lastPointOfContour?((C.nextPointOnContour=k).prevPointOnContour=C,k=void 0):(B=re[Z+1],(C.nextPointOnContour=B).prevPointOnContour=C);if(!m.inhibitGridFit){if(a.DEBUG){console.log("PROCESSING GLYPH",m.stack);for(var Ve=0;Ve<Y;Ve++)console.log(Ve,re[Ve].x,re[Ve].y)}if(re.push(new Sr(0,0),new Sr(Math.round(u.advanceWidth*w),0)),$r(m),re.length-=2,a.DEBUG){console.log("FINISHED GLYPH",m.stack);for(var Ne=0;Ne<Y;Ne++)console.log(Ne,re[Ne].x,re[Ne].y)}}},$r=function(u){var m=u.prog;if(m){var w,_=m.length;for(u.ip=0;u.ip<_;u.ip++){if(a.DEBUG&&u.step++,!(w=Zo[m[u.ip]]))throw new Error("unknown instruction: 0x"+Number(m[u.ip]).toString(16));w(u)}}},Zo=[ns.bind(void 0,_r),ns.bind(void 0,gr),os.bind(void 0,_r),os.bind(void 0,gr),ss.bind(void 0,_r),ss.bind(void 0,gr),is.bind(void 0,0),is.bind(void 0,1),as.bind(void 0,0),as.bind(void 0,1),function(u){var m=u.stack,w=m.pop(),_=m.pop();a.DEBUG&&console.log(u.step,"SPVFS[]",w,_),u.pv=u.dpv=jn(_,w)},function(u){var m=u.stack,w=m.pop(),_=m.pop();a.DEBUG&&console.log(u.step,"SPVFS[]",w,_),u.fv=jn(_,w)},function(u){var m=u.stack,w=u.pv;a.DEBUG&&console.log(u.step,"GPV[]"),m.push(16384*w.x),m.push(16384*w.y)},function(u){var m=u.stack,w=u.fv;a.DEBUG&&console.log(u.step,"GFV[]"),m.push(16384*w.x),m.push(16384*w.y)},function(u){u.fv=u.pv,a.DEBUG&&console.log(u.step,"SFVTPV[]")},function(u){var m=u.stack,w=m.pop(),_=m.pop(),C=m.pop(),k=m.pop(),B=m.pop(),H=u.z0,Y=u.z1,re=H[w],ce=H[_],be=Y[C],Z=Y[k],Ve=u.z2[B];a.DEBUG&&console.log("ISECT[], ",w,_,C,k,B);var Ne=re.x,Pe=re.y,je=ce.x,ke=ce.y,Je=be.x,Ke=be.y,yt=Z.x,nt=Z.y,it=(Ne-je)*(Ke-nt)-(Pe-ke)*(Je-yt),Ut=Ne*ke-Pe*je,bt=Je*nt-Ke*yt;Ve.x=(Ut*(Je-yt)-bt*(Ne-je))/it,Ve.y=(Ut*(Ke-nt)-bt*(Pe-ke))/it},function(u){u.rp0=u.stack.pop(),a.DEBUG&&console.log(u.step,"SRP0[]",u.rp0)},function(u){u.rp1=u.stack.pop(),a.DEBUG&&console.log(u.step,"SRP1[]",u.rp1)},function(u){u.rp2=u.stack.pop(),a.DEBUG&&console.log(u.step,"SRP2[]",u.rp2)},function(u){var m=u.stack.pop();switch(a.DEBUG&&console.log(u.step,"SZP0[]",m),u.zp0=m){case 0:u.tZone||Dn(u),u.z0=u.tZone;break;case 1:u.z0=u.gZone;break;default:throw new Error("Invalid zone pointer")}},function(u){var m=u.stack.pop();switch(a.DEBUG&&console.log(u.step,"SZP1[]",m),u.zp1=m){case 0:u.tZone||Dn(u),u.z1=u.tZone;break;case 1:u.z1=u.gZone;break;default:throw new Error("Invalid zone pointer")}},function(u){var m=u.stack.pop();switch(a.DEBUG&&console.log(u.step,"SZP2[]",m),u.zp2=m){case 0:u.tZone||Dn(u),u.z2=u.tZone;break;case 1:u.z2=u.gZone;break;default:throw new Error("Invalid zone pointer")}},function(u){var m=u.stack.pop();switch(a.DEBUG&&console.log(u.step,"SZPS[]",m),u.zp0=u.zp1=u.zp2=m,m){case 0:u.tZone||Dn(u),u.z0=u.z1=u.z2=u.tZone;break;case 1:u.z0=u.z1=u.z2=u.gZone;break;default:throw new Error("Invalid zone pointer")}},function(u){u.loop=u.stack.pop(),a.DEBUG&&console.log(u.step,"SLOOP[]",u.loop)},function(u){a.DEBUG&&console.log(u.step,"RTG[]"),u.round=es},function(u){a.DEBUG&&console.log(u.step,"RTHG[]"),u.round=Ai},function(u){var m=u.stack.pop();a.DEBUG&&console.log(u.step,"SMD[]",m),u.minDis=m/64},function(u){a.DEBUG&&console.log(u.step,"ELSE[]"),rs(u,!1)},function(u){var m=u.stack.pop();a.DEBUG&&console.log(u.step,"JMPR[]",m),u.ip+=m-1},function(u){var m=u.stack.pop();a.DEBUG&&console.log(u.step,"SCVTCI[]",m),u.cvCutIn=m/64},void 0,void 0,function(u){var m=u.stack;a.DEBUG&&console.log(u.step,"DUP[]"),m.push(m[m.length-1])},ao,function(u){a.DEBUG&&console.log(u.step,"CLEAR[]"),u.stack.length=0},function(u){var m=u.stack,w=m.pop(),_=m.pop();a.DEBUG&&console.log(u.step,"SWAP[]"),m.push(w),m.push(_)},function(u){var m=u.stack;a.DEBUG&&console.log(u.step,"DEPTH[]"),m.push(m.length)},function(u){var m=u.stack,w=m.pop();a.DEBUG&&console.log(u.step,"CINDEX[]",w),m.push(m[m.length-w])},function(u){var m=u.stack,w=m.pop();a.DEBUG&&console.log(u.step,"MINDEX[]",w),m.push(m.splice(m.length-w,1)[0])},void 0,void 0,void 0,function(u){var m=u.stack,w=m.pop(),_=m.pop();a.DEBUG&&console.log(u.step,"LOOPCALL[]",w,_);var C=u.ip,k=u.prog;u.prog=u.funcs[w];for(var B=0;B<_;B++)$r(u),a.DEBUG&&console.log(++u.step,B+1<_?"next loopcall":"done loopcall",B);u.ip=C,u.prog=k},function(u){var m=u.stack.pop();a.DEBUG&&console.log(u.step,"CALL[]",m);var w=u.ip,_=u.prog;u.prog=u.funcs[m],$r(u),u.ip=w,u.prog=_,a.DEBUG&&console.log(++u.step,"returning from",m)},function(u){if(u.env!=="fpgm")throw new Error("FDEF not allowed here");var m=u.stack,w=u.prog,_=u.ip,C=m.pop(),k=_;for(a.DEBUG&&console.log(u.step,"FDEF[]",C);w[++_]!==45;);u.ip=_,u.funcs[C]=w.slice(k+1,_)},void 0,ls.bind(void 0,0),ls.bind(void 0,1),us.bind(void 0,_r),us.bind(void 0,gr),cs.bind(void 0,0),cs.bind(void 0,1),ds.bind(void 0,0),ds.bind(void 0,1),hs.bind(void 0,0),hs.bind(void 0,1),function(u){for(var m=u.stack,w=u.loop,_=u.fv,C=m.pop()/64,k=u.z2;w--;){var B=m.pop(),H=k[B];a.DEBUG&&console.log(u.step,(1<u.loop?"loop "+(u.loop-w)+": ":"")+"SHPIX[]",B,C),_.setRelative(H,H,C),_.touch(H)}u.loop=1},function(u){for(var m=u.stack,w=u.rp1,_=u.rp2,C=u.loop,k=u.z0[w],B=u.z1[_],H=u.fv,Y=u.dpv,re=u.z2;C--;){var ce=m.pop(),be=re[ce];a.DEBUG&&console.log(u.step,(1<u.loop?"loop "+(u.loop-C)+": ":"")+"IP[]",ce,w,"<->",_),H.interpolate(be,k,B,Y),H.touch(be)}u.loop=1},fs.bind(void 0,0),fs.bind(void 0,1),function(u){for(var m=u.stack,w=u.rp0,_=u.z0[w],C=u.loop,k=u.fv,B=u.pv,H=u.z1;C--;){var Y=m.pop(),re=H[Y];a.DEBUG&&console.log(u.step,(1<u.loop?"loop "+(u.loop-C)+": ":"")+"ALIGNRP[]",Y),k.setRelative(re,_,0,B),k.touch(re)}u.loop=1},function(u){a.DEBUG&&console.log(u.step,"RTDG[]"),u.round=Mi},ps.bind(void 0,0),ps.bind(void 0,1),function(u){var m=u.prog,w=u.ip,_=u.stack,C=m[++w];a.DEBUG&&console.log(u.step,"NPUSHB[]",C);for(var k=0;k<C;k++)_.push(m[++w]);u.ip=w},function(u){var m=u.ip,w=u.prog,_=u.stack,C=w[++m];a.DEBUG&&console.log(u.step,"NPUSHW[]",C);for(var k=0;k<C;k++){var B=w[++m]<<8|w[++m];32768&B&&(B=-(1+(65535^B))),_.push(B)}u.ip=m},function(u){var m=u.stack,w=u.store;w=w||(u.store=[]);var _=m.pop(),C=m.pop();a.DEBUG&&console.log(u.step,"WS",_,C),w[C]=_},function(u){var m=u.stack,w=u.store,_=m.pop();a.DEBUG&&console.log(u.step,"RS",_);var C=w&&w[_]||0;m.push(C)},function(u){var m=u.stack,w=m.pop(),_=m.pop();a.DEBUG&&console.log(u.step,"WCVTP",w,_),u.cvt[_]=w/64},function(u){var m=u.stack,w=m.pop();a.DEBUG&&console.log(u.step,"RCVT",w),m.push(64*u.cvt[w])},ms.bind(void 0,0),ms.bind(void 0,1),void 0,ys.bind(void 0,0),ys.bind(void 0,1),function(u){a.DEBUG&&console.log(u.step,"MPPEM[]"),u.stack.push(u.ppem)},void 0,function(u){a.DEBUG&&console.log(u.step,"FLIPON[]"),u.autoFlip=!0},void 0,void 0,function(u){var m=u.stack,w=m.pop(),_=m.pop();a.DEBUG&&console.log(u.step,"LT[]",w,_),m.push(_<w?1:0)},function(u){var m=u.stack,w=m.pop(),_=m.pop();a.DEBUG&&console.log(u.step,"LTEQ[]",w,_),m.push(_<=w?1:0)},function(u){var m=u.stack,w=m.pop(),_=m.pop();a.DEBUG&&console.log(u.step,"GT[]",w,_),m.push(w<_?1:0)},function(u){var m=u.stack,w=m.pop(),_=m.pop();a.DEBUG&&console.log(u.step,"GTEQ[]",w,_),m.push(w<=_?1:0)},function(u){var m=u.stack,w=m.pop(),_=m.pop();a.DEBUG&&console.log(u.step,"EQ[]",w,_),m.push(w===_?1:0)},function(u){var m=u.stack,w=m.pop(),_=m.pop();a.DEBUG&&console.log(u.step,"NEQ[]",w,_),m.push(w!==_?1:0)},function(u){var m=u.stack,w=m.pop();a.DEBUG&&console.log(u.step,"ODD[]",w),m.push(Math.trunc(w)%2?1:0)},function(u){var m=u.stack,w=m.pop();a.DEBUG&&console.log(u.step,"EVEN[]",w),m.push(Math.trunc(w)%2?0:1)},function(u){var m=u.stack.pop();a.DEBUG&&console.log(u.step,"IF[]",m),m||(rs(u,!0),a.DEBUG&&console.log(u.step,"EIF[]"))},function(u){a.DEBUG&&console.log(u.step,"EIF[]")},function(u){var m=u.stack,w=m.pop(),_=m.pop();a.DEBUG&&console.log(u.step,"AND[]",w,_),m.push(w&&_?1:0)},function(u){var m=u.stack,w=m.pop(),_=m.pop();a.DEBUG&&console.log(u.step,"OR[]",w,_),m.push(w||_?1:0)},function(u){var m=u.stack,w=m.pop();a.DEBUG&&console.log(u.step,"NOT[]",w),m.push(w?0:1)},lo.bind(void 0,1),function(u){var m=u.stack.pop();a.DEBUG&&console.log(u.step,"SDB[]",m),u.deltaBase=m},function(u){var m=u.stack.pop();a.DEBUG&&console.log(u.step,"SDS[]",m),u.deltaShift=Math.pow(.5,m)},function(u){var m=u.stack,w=m.pop(),_=m.pop();a.DEBUG&&console.log(u.step,"ADD[]",w,_),m.push(_+w)},function(u){var m=u.stack,w=m.pop(),_=m.pop();a.DEBUG&&console.log(u.step,"SUB[]",w,_),m.push(_-w)},function(u){var m=u.stack,w=m.pop(),_=m.pop();a.DEBUG&&console.log(u.step,"DIV[]",w,_),m.push(64*_/w)},function(u){var m=u.stack,w=m.pop(),_=m.pop();a.DEBUG&&console.log(u.step,"MUL[]",w,_),m.push(_*w/64)},function(u){var m=u.stack,w=m.pop();a.DEBUG&&console.log(u.step,"ABS[]",w),m.push(Math.abs(w))},function(u){var m=u.stack,w=m.pop();a.DEBUG&&console.log(u.step,"NEG[]",w),m.push(-w)},function(u){var m=u.stack,w=m.pop();a.DEBUG&&console.log(u.step,"FLOOR[]",w),m.push(64*Math.floor(w/64))},function(u){var m=u.stack,w=m.pop();a.DEBUG&&console.log(u.step,"CEILING[]",w),m.push(64*Math.ceil(w/64))},In.bind(void 0,0),In.bind(void 0,1),In.bind(void 0,2),In.bind(void 0,3),void 0,void 0,void 0,void 0,function(u){var m=u.stack,w=m.pop(),_=m.pop();a.DEBUG&&console.log(u.step,"WCVTF[]",w,_),u.cvt[_]=w*u.ppem/u.font.unitsPerEm},lo.bind(void 0,2),lo.bind(void 0,3),uo.bind(void 0,1),uo.bind(void 0,2),uo.bind(void 0,3),function(u){var m,w=u.stack.pop();switch(a.DEBUG&&console.log(u.step,"SROUND[]",w),u.round=ts,192&w){case 0:m=.5;break;case 64:m=1;break;case 128:m=2;break;default:throw new Error("invalid SROUND value")}switch(u.srPeriod=m,48&w){case 0:u.srPhase=0;break;case 16:u.srPhase=.25*m;break;case 32:u.srPhase=.5*m;break;case 48:u.srPhase=.75*m;break;default:throw new Error("invalid SROUND value")}w&=15,u.srThreshold=w===0?0:(w/8-.5)*m},function(u){var m,w=u.stack.pop();switch(a.DEBUG&&console.log(u.step,"S45ROUND[]",w),u.round=ts,192&w){case 0:m=Math.sqrt(2)/2;break;case 64:m=Math.sqrt(2);break;case 128:m=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(u.srPeriod=m,48&w){case 0:u.srPhase=0;break;case 16:u.srPhase=.25*m;break;case 32:u.srPhase=.5*m;break;case 48:u.srPhase=.75*m;break;default:throw new Error("invalid S45ROUND value")}w&=15,u.srThreshold=w===0?0:(w/8-.5)*m},void 0,void 0,function(u){a.DEBUG&&console.log(u.step,"ROFF[]"),u.round=Ci},void 0,function(u){a.DEBUG&&console.log(u.step,"RUTG[]"),u.round=Ri},function(u){a.DEBUG&&console.log(u.step,"RDTG[]"),u.round=ki},ao,ao,void 0,void 0,void 0,void 0,void 0,function(u){var m=u.stack.pop();a.DEBUG&&console.log(u.step,"SCANCTRL[]",m)},gs.bind(void 0,0),gs.bind(void 0,1),function(u){var m=u.stack,w=m.pop(),_=0;a.DEBUG&&console.log(u.step,"GETINFO[]",w),1&w&&(_=35),32&w&&(_|=4096),m.push(_)},void 0,function(u){var m=u.stack,w=m.pop(),_=m.pop(),C=m.pop();a.DEBUG&&console.log(u.step,"ROLL[]"),m.push(_),m.push(w),m.push(C)},function(u){var m=u.stack,w=m.pop(),_=m.pop();a.DEBUG&&console.log(u.step,"MAX[]",w,_),m.push(Math.max(_,w))},function(u){var m=u.stack,w=m.pop(),_=m.pop();a.DEBUG&&console.log(u.step,"MIN[]",w,_),m.push(Math.min(_,w))},function(u){var m=u.stack.pop();a.DEBUG&&console.log(u.step,"SCANTYPE[]",m)},function(u){var m=u.stack.pop(),w=u.stack.pop();switch(a.DEBUG&&console.log(u.step,"INSTCTRL[]",m,w),m){case 1:return void(u.inhibitGridFit=!!w);case 2:return void(u.ignoreCvt=!!w);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Lr.bind(void 0,1),Lr.bind(void 0,2),Lr.bind(void 0,3),Lr.bind(void 0,4),Lr.bind(void 0,5),Lr.bind(void 0,6),Lr.bind(void 0,7),Lr.bind(void 0,8),Dr.bind(void 0,1),Dr.bind(void 0,2),Dr.bind(void 0,3),Dr.bind(void 0,4),Dr.bind(void 0,5),Dr.bind(void 0,6),Dr.bind(void 0,7),Dr.bind(void 0,8),tt.bind(void 0,0,0,0,0,0),tt.bind(void 0,0,0,0,0,1),tt.bind(void 0,0,0,0,0,2),tt.bind(void 0,0,0,0,0,3),tt.bind(void 0,0,0,0,1,0),tt.bind(void 0,0,0,0,1,1),tt.bind(void 0,0,0,0,1,2),tt.bind(void 0,0,0,0,1,3),tt.bind(void 0,0,0,1,0,0),tt.bind(void 0,0,0,1,0,1),tt.bind(void 0,0,0,1,0,2),tt.bind(void 0,0,0,1,0,3),tt.bind(void 0,0,0,1,1,0),tt.bind(void 0,0,0,1,1,1),tt.bind(void 0,0,0,1,1,2),tt.bind(void 0,0,0,1,1,3),tt.bind(void 0,0,1,0,0,0),tt.bind(void 0,0,1,0,0,1),tt.bind(void 0,0,1,0,0,2),tt.bind(void 0,0,1,0,0,3),tt.bind(void 0,0,1,0,1,0),tt.bind(void 0,0,1,0,1,1),tt.bind(void 0,0,1,0,1,2),tt.bind(void 0,0,1,0,1,3),tt.bind(void 0,0,1,1,0,0),tt.bind(void 0,0,1,1,0,1),tt.bind(void 0,0,1,1,0,2),tt.bind(void 0,0,1,1,0,3),tt.bind(void 0,0,1,1,1,0),tt.bind(void 0,0,1,1,1,1),tt.bind(void 0,0,1,1,1,2),tt.bind(void 0,0,1,1,1,3),tt.bind(void 0,1,0,0,0,0),tt.bind(void 0,1,0,0,0,1),tt.bind(void 0,1,0,0,0,2),tt.bind(void 0,1,0,0,0,3),tt.bind(void 0,1,0,0,1,0),tt.bind(void 0,1,0,0,1,1),tt.bind(void 0,1,0,0,1,2),tt.bind(void 0,1,0,0,1,3),tt.bind(void 0,1,0,1,0,0),tt.bind(void 0,1,0,1,0,1),tt.bind(void 0,1,0,1,0,2),tt.bind(void 0,1,0,1,0,3),tt.bind(void 0,1,0,1,1,0),tt.bind(void 0,1,0,1,1,1),tt.bind(void 0,1,0,1,1,2),tt.bind(void 0,1,0,1,1,3),tt.bind(void 0,1,1,0,0,0),tt.bind(void 0,1,1,0,0,1),tt.bind(void 0,1,1,0,0,2),tt.bind(void 0,1,1,0,0,3),tt.bind(void 0,1,1,0,1,0),tt.bind(void 0,1,1,0,1,1),tt.bind(void 0,1,1,0,1,2),tt.bind(void 0,1,1,0,1,3),tt.bind(void 0,1,1,1,0,0),tt.bind(void 0,1,1,1,0,1),tt.bind(void 0,1,1,1,0,2),tt.bind(void 0,1,1,1,0,3),tt.bind(void 0,1,1,1,1,0),tt.bind(void 0,1,1,1,1,1),tt.bind(void 0,1,1,1,1,2),tt.bind(void 0,1,1,1,1,3)];var Oi=Array.from||function(u){return u.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function kt(u){(u=u||{}).empty||(un(u.familyName,"When creating a new Font object, familyName is required."),un(u.styleName,"When creating a new Font object, styleName is required."),un(u.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),un(u.ascender,"When creating a new Font object, ascender is required."),un(u.descender,"When creating a new Font object, descender is required."),un(u.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:u.familyName||" "},fontSubfamily:{en:u.styleName||" "},fullName:{en:u.fullName||u.familyName+" "+u.styleName},postScriptName:{en:u.postScriptName||(u.familyName+u.styleName).replace(/\s/g,"")},designer:{en:u.designer||" "},designerURL:{en:u.designerURL||" "},manufacturer:{en:u.manufacturer||" "},manufacturerURL:{en:u.manufacturerURL||" "},license:{en:u.license||" "},licenseURL:{en:u.licenseURL||" "},version:{en:u.version||"Version 0.1"},description:{en:u.description||" "},copyright:{en:u.copyright||" "},trademark:{en:u.trademark||" "}},this.unitsPerEm=u.unitsPerEm||1e3,this.ascender=u.ascender,this.descender=u.descender,this.createdTimestamp=u.createdTimestamp,this.tables={os2:{usWeightClass:u.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:u.widthClass||this.usWidthClasses.MEDIUM,fsSelection:u.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new ht.GlyphSet(this,u.glyphs||[]),this.encoding=new Me(this),this.position=new Ln(this),this.substitution=new yr(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:this.outlinesFormat==="truetype"?this._hinting=new Jo(this):void 0}})}function vs(u,m){var w=JSON.stringify(u),_=256;for(var C in m){var k=parseInt(C);if(k&&!(k<256)){if(JSON.stringify(m[C])===w)return k;_<=k&&(_=k+1)}}return m[_]=u,_}function Li(u,m,w,_){for(var C=[{name:"nameID_"+u,type:"USHORT",value:vs(m.name,_)},{name:"flags_"+u,type:"USHORT",value:0}],k=0;k<w.length;++k){var B=w[k].tag;C.push({name:"axis_"+u+" "+B,type:"FIXED",value:m.coordinates[B]<<16})}return C}function Di(u,m,w,_){var C={},k=new F.Parser(u,m);C.name=_[k.parseUShort()]||{},k.skip("uShort",1),C.coordinates={};for(var B=0;B<w.length;++B)C.coordinates[w[B].tag]=k.parseFixed();return C}kt.prototype.hasChar=function(u){return this.encoding.charToGlyphIndex(u)!==null},kt.prototype.charToGlyphIndex=function(u){return this.encoding.charToGlyphIndex(u)},kt.prototype.charToGlyph=function(u){var m=this.charToGlyphIndex(u),w=this.glyphs.get(m);return w=w||this.glyphs.get(0)},kt.prototype.stringToGlyphs=function(u,m){m=m||this.defaultRenderOptions;for(var w=Oi(u),_=[],C=0;C<w.length;C+=1){var k=w[C];_.push(this.charToGlyphIndex(k))}var B=_.length;if(m.features){var H=m.script||this.substitution.getDefaultScriptName(),Y=[];m.features.liga&&(Y=Y.concat(this.substitution.getFeature("liga",H,m.language))),m.features.rlig&&(Y=Y.concat(this.substitution.getFeature("rlig",H,m.language)));for(var re=0;re<B;re+=1)for(var ce=0;ce<Y.length;ce++){for(var be=Y[ce],Z=be.sub,Ve=Z.length,Ne=0;Ne<Ve&&Z[Ne]===_[re+Ne];)Ne++;Ne===Ve&&(_.splice(re,Ve,be.by),B=B-Ve+1)}}for(var Pe=new Array(B),je=this.glyphs.get(0),ke=0;ke<B;ke+=1)Pe[ke]=this.glyphs.get(_[ke])||je;return Pe},kt.prototype.nameToGlyphIndex=function(u){return this.glyphNames.nameToGlyphIndex(u)},kt.prototype.nameToGlyph=function(u){var m=this.nameToGlyphIndex(u),w=this.glyphs.get(m);return w=w||this.glyphs.get(0)},kt.prototype.glyphIndexToName=function(u){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(u):""},kt.prototype.getKerningValue=function(u,m){u=u.index||u,m=m.index||m;var w=this.position.defaultKerningTables;return w?this.position.getKerningValue(w,u,m):this.kerningPairs[u+","+m]||0},kt.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},kt.prototype.forEachGlyph=function(u,m,w,_,C,k){m=m!==void 0?m:0,w=w!==void 0?w:0,_=_!==void 0?_:72,C=C||this.defaultRenderOptions;var B,H=1/this.unitsPerEm*_,Y=this.stringToGlyphs(u,C);if(C.kerning){var re=C.script||this.position.getDefaultScriptName();B=this.position.getKerningTables(re,C.language)}for(var ce=0;ce<Y.length;ce+=1){var be=Y[ce];k.call(this,be,m,w,_,C),be.advanceWidth&&(m+=be.advanceWidth*H),C.kerning&&ce<Y.length-1&&(m+=(B?this.position.getKerningValue(B,be.index,Y[ce+1].index):this.getKerningValue(be,Y[ce+1]))*H),C.letterSpacing?m+=C.letterSpacing*_:C.tracking&&(m+=C.tracking/1e3*_)}return m},kt.prototype.getPath=function(u,m,w,_,C){var k=new ue;return this.forEachGlyph(u,m,w,_,C,function(B,H,Y,re){var ce=B.getPath(H,Y,re,C,this);k.extend(ce)}),k},kt.prototype.getPaths=function(u,m,w,_,C){var k=[];return this.forEachGlyph(u,m,w,_,C,function(B,H,Y,re){var ce=B.getPath(H,Y,re,C,this);k.push(ce)}),k},kt.prototype.getAdvanceWidth=function(u,m,w){return this.forEachGlyph(u,0,0,m,w,function(){})},kt.prototype.draw=function(u,m,w,_,C,k){this.getPath(m,w,_,C,k).draw(u)},kt.prototype.drawPoints=function(u,m,w,_,C,k){this.forEachGlyph(m,w,_,C,k,function(B,H,Y,re){B.drawPoints(u,H,Y,re)})},kt.prototype.drawMetrics=function(u,m,w,_,C,k){this.forEachGlyph(m,w,_,C,k,function(B,H,Y,re){B.drawMetrics(u,H,Y,re)})},kt.prototype.getEnglishName=function(u){var m=this.names[u];if(m)return m.en},kt.prototype.validate=function(){var u=this;function m(w){var _=u.getEnglishName(w);_&&_.trim().length}m("fontFamily"),m("weightName"),m("manufacturer"),m("copyright"),m("version"),this.unitsPerEm},kt.prototype.toTables=function(){return Si.fontToTable(this)},kt.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},kt.prototype.toArrayBuffer=function(){for(var u=this.toTables().encode(),m=new ArrayBuffer(u.length),w=new Uint8Array(m),_=0;_<u.length;_++)w[_]=u[_];return m},kt.prototype.download=function(u){var m=this.getEnglishName("fontFamily"),w=this.getEnglishName("fontSubfamily");u=u||m.replace(/\s/g,"")+"-"+w+".otf";var _=this.toArrayBuffer();if(typeof window<"u")window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,_.byteLength,function(B){B.root.getFile(u,{create:!0},function(H){H.createWriter(function(Y){var re=new DataView(_),ce=new Blob([re],{type:"font/opentype"});Y.write(ce),Y.addEventListener("writeend",function(){location.href=H.toURL()},!1)})})},function(B){throw new Error(B.name+": "+B.message)});else{var C=e("fs"),k=function(B){for(var H=new p(B.byteLength),Y=new Uint8Array(B),re=0;re<H.length;++re)H[re]=Y[re];return H}(_);C.writeFileSync(u,k)}},kt.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},kt.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},kt.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Ii={make:function(u,m){var w,_,C,k,B=new Fe.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:u.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:u.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*u.axes.length}]);B.offsetToData=B.sizeOf();for(var H=0;H<u.axes.length;H++)B.fields=B.fields.concat((w=H,_=u.axes[H],C=m,k=vs(_.name,C),[{name:"tag_"+w,type:"TAG",value:_.tag},{name:"minValue_"+w,type:"FIXED",value:_.minValue<<16},{name:"defaultValue_"+w,type:"FIXED",value:_.defaultValue<<16},{name:"maxValue_"+w,type:"FIXED",value:_.maxValue<<16},{name:"flags_"+w,type:"USHORT",value:0},{name:"nameID_"+w,type:"USHORT",value:k}]));for(var Y=0;Y<u.instances.length;Y++)B.fields=B.fields.concat(Li(Y,u.instances[Y],u.axes,m));return B},parse:function(u,m,w){var _=new F.Parser(u,m),C=_.parseULong();he.argument(C===65536,"Unsupported fvar table version.");var k=_.parseOffset16();_.skip("uShort",1);for(var B,H,Y,re,ce,be=_.parseUShort(),Z=_.parseUShort(),Ve=_.parseUShort(),Ne=_.parseUShort(),Pe=[],je=0;je<be;je++)Pe.push((B=u,H=m+k+je*Z,Y=w,ce=re=void 0,re={},ce=new F.Parser(B,H),re.tag=ce.parseTag(),re.minValue=ce.parseFixed(),re.defaultValue=ce.parseFixed(),re.maxValue=ce.parseFixed(),ce.skip("uShort",1),re.name=Y[ce.parseUShort()]||{},re));for(var ke=[],Je=m+k+be*Z,Ke=0;Ke<Ve;Ke++)ke.push(Di(u,Je+Ke*Ne,Pe,w));return{axes:Pe,instances:ke}}},or=new Array(10);or[1]=function(){var u=this.offset+this.relativeOffset,m=this.parseUShort();return m===1?{posFormat:1,coverage:this.parsePointer(pe.coverage),value:this.parseValueRecord()}:m===2?{posFormat:2,coverage:this.parsePointer(pe.coverage),values:this.parseValueRecordList()}:void he.assert(!1,"0x"+u.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},or[2]=function(){var u=this.offset+this.relativeOffset,m=this.parseUShort();he.assert(m===1||m===2,"0x"+u.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var w=this.parsePointer(pe.coverage),_=this.parseUShort(),C=this.parseUShort();if(m===1)return{posFormat:m,coverage:w,valueFormat1:_,valueFormat2:C,pairSets:this.parseList(pe.pointer(pe.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(_),value2:this.parseValueRecord(C)}})))};if(m===2){var k=this.parsePointer(pe.classDef),B=this.parsePointer(pe.classDef),H=this.parseUShort(),Y=this.parseUShort();return{posFormat:m,coverage:w,valueFormat1:_,valueFormat2:C,classDef1:k,classDef2:B,class1Count:H,class2Count:Y,classRecords:this.parseList(H,pe.list(Y,function(){return{value1:this.parseValueRecord(_),value2:this.parseValueRecord(C)}}))}}},or[3]=function(){return{error:"GPOS Lookup 3 not supported"}},or[4]=function(){return{error:"GPOS Lookup 4 not supported"}},or[5]=function(){return{error:"GPOS Lookup 5 not supported"}},or[6]=function(){return{error:"GPOS Lookup 6 not supported"}},or[7]=function(){return{error:"GPOS Lookup 7 not supported"}},or[8]=function(){return{error:"GPOS Lookup 8 not supported"}},or[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var Bi=new Array(10),Ui={parse:function(u,m){var w=new pe(u,m=m||0),_=w.parseVersion(1);return he.argument(_===1||_===1.1,"Unsupported GPOS table version "+_),_===1?{version:_,scripts:w.parseScriptList(),features:w.parseFeatureList(),lookups:w.parseLookupList(or)}:{version:_,scripts:w.parseScriptList(),features:w.parseFeatureList(),lookups:w.parseLookupList(or),variations:w.parseFeatureVariationsList()}},make:function(u){return new Fe.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Fe.ScriptList(u.scripts)},{name:"features",type:"TABLE",value:new Fe.FeatureList(u.features)},{name:"lookups",type:"TABLE",value:new Fe.LookupList(u.lookups,Bi)}])}},Ni={parse:function(u,m){var w=new F.Parser(u,m),_=w.parseUShort();if(_===0)return function(C){var k={};C.skip("uShort");var B=C.parseUShort();he.argument(B===0,"Unsupported kern sub-table version."),C.skip("uShort",2);var H=C.parseUShort();C.skip("uShort",3);for(var Y=0;Y<H;Y+=1){var re=C.parseUShort(),ce=C.parseUShort(),be=C.parseShort();k[re+","+ce]=be}return k}(w);if(_===1)return function(C){var k={};C.skip("uShort"),1<C.parseULong()&&console.warn("Only the first kern subtable is supported."),C.skip("uLong");var B=255&C.parseUShort();if(C.skip("uShort"),B==0){var H=C.parseUShort();C.skip("uShort",3);for(var Y=0;Y<H;Y+=1){var re=C.parseUShort(),ce=C.parseUShort(),be=C.parseShort();k[re+","+ce]=be}}return k}(w);throw new Error("Unsupported kern table version ("+_+").")}},Fi={parse:function(u,m,w,_){for(var C=new F.Parser(u,m),k=_?C.parseUShort:C.parseULong,B=[],H=0;H<w+1;H+=1){var Y=k.call(C);_&&(Y*=2),B.push(Y)}return B}};function Gi(u,m){e("fs").readFile(u,function(w,_){if(w)return m(w.message);m(null,Xo(_))})}function Vi(u,m){var w=new XMLHttpRequest;w.open("get",u,!0),w.responseType="arraybuffer",w.onload=function(){return w.response?m(null,w.response):m("Font could not be loaded: "+w.statusText)},w.onerror=function(){m("Font could not be loaded")},w.send()}function bs(u,m){for(var w=[],_=12,C=0;C<m;C+=1){var k=F.getTag(u,_),B=F.getULong(u,_+4),H=F.getULong(u,_+8),Y=F.getULong(u,_+12);w.push({tag:k,checksum:B,offset:H,length:Y,compression:!1}),_+=16}return w}function Ht(u,m){if(m.compression!=="WOFF")return{data:u,offset:m.offset};var w=new Uint8Array(u.buffer,m.offset+2,m.compressedLength-2),_=new Uint8Array(m.length);if($(w,_),_.byteLength!==m.length)throw new Error("Decompression error: "+m.tag+" decompressed length doesn't match recorded length");return{data:new DataView(_.buffer,0),offset:0}}function co(u){var m,w,_,C,k,B,H,Y,re,ce,be,Z,Ve,Ne,Pe=new kt({empty:!0}),je=new DataView(u,0),ke=[],Je=F.getTag(je,0);if(Je===String.fromCharCode(0,1,0,0)||Je==="true"||Je==="typ1")Pe.outlinesFormat="truetype",ke=bs(je,_=F.getUShort(je,4));else if(Je==="OTTO")Pe.outlinesFormat="cff",ke=bs(je,_=F.getUShort(je,4));else{if(Je!=="wOFF")throw new Error("Unsupported OpenType signature "+Je);var Ke=F.getTag(je,4);if(Ke===String.fromCharCode(0,1,0,0))Pe.outlinesFormat="truetype";else{if(Ke!=="OTTO")throw new Error("Unsupported OpenType flavor "+Je);Pe.outlinesFormat="cff"}ke=function(_t,Vt){for(var Pt=[],Lt=44,vr=0;vr<Vt;vr+=1){var cn=F.getTag(_t,Lt),Kr=F.getULong(_t,Lt+4),Jt=F.getULong(_t,Lt+8),Jr=F.getULong(_t,Lt+12),dn=void 0;dn=Jt<Jr&&"WOFF",Pt.push({tag:cn,offset:Kr,compression:dn,compressedLength:Jt,length:Jr}),Lt+=20}return Pt}(je,_=F.getUShort(je,12))}for(var yt=0;yt<_;yt+=1){var nt=ke[yt],it=void 0;switch(nt.tag){case"cmap":it=Ht(je,nt),Pe.tables.cmap=q.parse(it.data,it.offset),Pe.encoding=new Be(Pe.tables.cmap);break;case"cvt ":it=Ht(je,nt),Ne=new F.Parser(it.data,it.offset),Pe.tables.cvt=Ne.parseShortList(nt.length/2);break;case"fvar":k=nt;break;case"fpgm":it=Ht(je,nt),Ne=new F.Parser(it.data,it.offset),Pe.tables.fpgm=Ne.parseByteList(nt.length);break;case"head":it=Ht(je,nt),Pe.tables.head=$e.parse(it.data,it.offset),Pe.unitsPerEm=Pe.tables.head.unitsPerEm,m=Pe.tables.head.indexToLocFormat;break;case"hhea":it=Ht(je,nt),Pe.tables.hhea=De.parse(it.data,it.offset),Pe.ascender=Pe.tables.hhea.ascender,Pe.descender=Pe.tables.hhea.descender,Pe.numberOfHMetrics=Pe.tables.hhea.numberOfHMetrics;break;case"hmtx":re=nt;break;case"ltag":it=Ht(je,nt),w=St.parse(it.data,it.offset);break;case"maxp":it=Ht(je,nt),Pe.tables.maxp=Et.parse(it.data,it.offset),Pe.numGlyphs=Pe.tables.maxp.numGlyphs;break;case"name":Z=nt;break;case"OS/2":it=Ht(je,nt),Pe.tables.os2=ro.parse(it.data,it.offset);break;case"post":it=Ht(je,nt),Pe.tables.post=Bo.parse(it.data,it.offset),Pe.glyphNames=new We(Pe.tables.post);break;case"prep":it=Ht(je,nt),Ne=new F.Parser(it.data,it.offset),Pe.tables.prep=Ne.parseByteList(nt.length);break;case"glyf":B=nt;break;case"loca":be=nt;break;case"CFF ":C=nt;break;case"kern":ce=nt;break;case"GPOS":H=nt;break;case"GSUB":Y=nt;break;case"meta":Ve=nt}}var Ut=Ht(je,Z);if(Pe.tables.name=Io.parse(Ut.data,Ut.offset,w),Pe.names=Pe.tables.name,B&&be){var bt=m===0,gt=Ht(je,be),wt=Fi.parse(gt.data,gt.offset,Pe.numGlyphs,bt),Ct=Ht(je,B);Pe.glyphs=Ko.parse(Ct.data,Ct.offset,wt,Pe)}else{if(!C)throw new Error("Font doesn't contain TrueType or CFF outlines.");var jt=Ht(je,C);Ue.parse(jt.data,jt.offset,Pe)}var It=Ht(je,re);if(vt.parse(It.data,It.offset,Pe.numberOfHMetrics,Pe.numGlyphs,Pe.glyphs),function(_t){for(var Vt,Pt=_t.tables.cmap.glyphIndexMap,Lt=Object.keys(Pt),vr=0;vr<Lt.length;vr+=1){var cn=Lt[vr],Kr=Pt[cn];(Vt=_t.glyphs.get(Kr)).addUnicode(parseInt(cn))}for(var Jt=0;Jt<_t.glyphs.length;Jt+=1)Vt=_t.glyphs.get(Jt),_t.cffEncoding?_t.isCIDFont?Vt.name="gid"+Jt:Vt.name=_t.cffEncoding.charset[Jt]:_t.glyphNames.names&&(Vt.name=_t.glyphNames.glyphIndexToName(Jt))}(Pe),ce){var Mt=Ht(je,ce);Pe.kerningPairs=Ni.parse(Mt.data,Mt.offset)}else Pe.kerningPairs={};if(H){var Tt=Ht(je,H);Pe.tables.gpos=Ui.parse(Tt.data,Tt.offset),Pe.position.init()}if(Y){var Bt=Ht(je,Y);Pe.tables.gsub=Uo.parse(Bt.data,Bt.offset)}if(k){var At=Ht(je,k);Pe.tables.fvar=Ii.parse(At.data,At.offset,Pe.names)}if(Ve){var Ft=Ht(je,Ve);Pe.tables.meta=No.parse(Ft.data,Ft.offset),Pe.metas=Pe.tables.meta}return Pe}a.Font=kt,a.Glyph=lt,a.Path=ue,a.BoundingBox=J,a._parse=F,a.parse=co,a.load=function(u,m){(typeof window>"u"?Gi:Vi)(u,function(w,_){if(w)return m(w);var C;try{C=co(_)}catch(k){return m(k,null)}return m(null,C)})},a.loadSync=function(u){return co(Xo(e("fs").readFileSync(u)))},Object.defineProperty(a,"__esModule",{value:!0})},h(typeof y=="object"&&b!==void 0?y:n.opentype={})}).call(this,e("buffer").Buffer)},{buffer:4,fs:2}],240:[function(e,b,y){(function(p){function n(f,l){for(var o=0,t=f.length-1;0<=t;t--){var r=f[t];r==="."?f.splice(t,1):r===".."?(f.splice(t,1),o++):o&&(f.splice(t,1),o--)}if(l)for(;o--;)f.unshift("..");return f}function h(f,l){if(f.filter)return f.filter(l);for(var o=[],t=0;t<f.length;t++)l(f[t],t,f)&&o.push(f[t]);return o}y.resolve=function(){for(var f="",l=!1,o=arguments.length-1;-1<=o&&!l;o--){var t=0<=o?arguments[o]:p.cwd();if(typeof t!="string")throw new TypeError("Arguments to path.resolve must be strings");t&&(f=t+"/"+f,l=t.charAt(0)==="/")}return(l?"/":"")+(f=n(h(f.split("/"),function(r){return!!r}),!l).join("/"))||"."},y.normalize=function(f){var l=y.isAbsolute(f),o=a(f,-1)==="/";return(f=n(h(f.split("/"),function(t){return!!t}),!l).join("/"))||l||(f="."),f&&o&&(f+="/"),(l?"/":"")+f},y.isAbsolute=function(f){return f.charAt(0)==="/"},y.join=function(){var f=Array.prototype.slice.call(arguments,0);return y.normalize(h(f,function(l,o){if(typeof l!="string")throw new TypeError("Arguments to path.join must be strings");return l}).join("/"))},y.relative=function(f,l){function o(v){for(var x=0;x<v.length&&v[x]==="";x++);for(var S=v.length-1;0<=S&&v[S]==="";S--);return S<x?[]:v.slice(x,S-x+1)}f=y.resolve(f).substr(1),l=y.resolve(l).substr(1);for(var t=o(f.split("/")),r=o(l.split("/")),s=Math.min(t.length,r.length),i=s,d=0;d<s;d++)if(t[d]!==r[d]){i=d;break}var g=[];for(d=i;d<t.length;d++)g.push("..");return(g=g.concat(r.slice(i))).join("/")},y.sep="/",y.delimiter=":",y.dirname=function(f){if(typeof f!="string"&&(f+=""),f.length===0)return".";for(var l=f.charCodeAt(0),o=l===47,t=-1,r=!0,s=f.length-1;1<=s;--s)if((l=f.charCodeAt(s))===47){if(!r){t=s;break}}else r=!1;return t===-1?o?"/":".":o&&t===1?"/":f.slice(0,t)},y.basename=function(f,l){var o=function(t){typeof t!="string"&&(t+="");var r,s=0,i=-1,d=!0;for(r=t.length-1;0<=r;--r)if(t.charCodeAt(r)===47){if(!d){s=r+1;break}}else i===-1&&(d=!1,i=r+1);return i===-1?"":t.slice(s,i)}(f);return l&&o.substr(-1*l.length)===l&&(o=o.substr(0,o.length-l.length)),o},y.extname=function(f){typeof f!="string"&&(f+="");for(var l=-1,o=0,t=-1,r=!0,s=0,i=f.length-1;0<=i;--i){var d=f.charCodeAt(i);if(d===47){if(r)continue;o=i+1;break}t===-1&&(r=!1,t=i+1),d===46?l===-1?l=i:s!==1&&(s=1):l!==-1&&(s=-1)}return l===-1||t===-1||s===0||s===1&&l===t-1&&l===o+1?"":f.slice(l,t)};var a="ab".substr(-1)==="b"?function(f,l,o){return f.substr(l,o)}:function(f,l,o){return l<0&&(l=f.length+l),f.substr(l,o)}}).call(this,e("_process"))},{_process:241}],241:[function(e,b,y){var p,n,h=b.exports={};function a(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}function l(x){if(p===setTimeout)return setTimeout(x,0);if((p===a||!p)&&setTimeout)return p=setTimeout,setTimeout(x,0);try{return p(x,0)}catch{try{return p.call(null,x,0)}catch{return p.call(this,x,0)}}}(function(){try{p=typeof setTimeout=="function"?setTimeout:a}catch{p=a}try{n=typeof clearTimeout=="function"?clearTimeout:f}catch{n=f}})();var o,t=[],r=!1,s=-1;function i(){r&&o&&(r=!1,o.length?t=o.concat(t):s=-1,t.length&&d())}function d(){if(!r){var x=l(i);r=!0;for(var S=t.length;S;){for(o=t,t=[];++s<S;)o&&o[s].run();s=-1,S=t.length}o=null,r=!1,function(E){if(n===clearTimeout)return clearTimeout(E);if((n===f||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(E);try{n(E)}catch{try{return n.call(null,E)}catch{return n.call(this,E)}}}(x)}}function g(x,S){this.fun=x,this.array=S}function v(){}h.nextTick=function(x){var S=new Array(arguments.length-1);if(1<arguments.length)for(var E=1;E<arguments.length;E++)S[E-1]=arguments[E];t.push(new g(x,S)),t.length!==1||r||l(d)},g.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=v,h.addListener=v,h.once=v,h.off=v,h.removeListener=v,h.removeAllListeners=v,h.emit=v,h.prependListener=v,h.prependOnceListener=v,h.listeners=function(x){return[]},h.binding=function(x){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(x){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],242:[function(e,b,y){(function(p){if(!p.fetch){var n="URLSearchParams"in p,h="Symbol"in p&&"iterator"in Symbol,a="FileReader"in p&&"Blob"in p&&function(){try{return new Blob,!0}catch{return!1}}(),f="FormData"in p,l="ArrayBuffer"in p;if(l)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],t=function(O){return O&&DataView.prototype.isPrototypeOf(O)},r=ArrayBuffer.isView||function(O){return O&&-1<o.indexOf(Object.prototype.toString.call(O))};x.prototype.append=function(O,G){O=d(O),G=g(G);var V=this.map[O];this.map[O]=V?V+","+G:G},x.prototype.delete=function(O){delete this.map[d(O)]},x.prototype.get=function(O){return O=d(O),this.has(O)?this.map[O]:null},x.prototype.has=function(O){return this.map.hasOwnProperty(d(O))},x.prototype.set=function(O,G){this.map[d(O)]=g(G)},x.prototype.forEach=function(O,G){for(var V in this.map)this.map.hasOwnProperty(V)&&O.call(G,this.map[V],V,this)},x.prototype.keys=function(){var O=[];return this.forEach(function(G,V){O.push(V)}),v(O)},x.prototype.values=function(){var O=[];return this.forEach(function(G){O.push(G)}),v(O)},x.prototype.entries=function(){var O=[];return this.forEach(function(G,V){O.push([V,G])}),v(O)},h&&(x.prototype[Symbol.iterator]=x.prototype.entries);var s=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];R.prototype.clone=function(){return new R(this,{body:this._bodyInit})},I.call(R.prototype),I.call(U.prototype),U.prototype.clone=function(){return new U(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new x(this.headers),url:this.url})},U.error=function(){var O=new U(null,{status:0,statusText:""});return O.type="error",O};var i=[301,302,303,307,308];U.redirect=function(O,G){if(i.indexOf(G)===-1)throw new RangeError("Invalid status code");return new U(null,{status:G,headers:{location:O}})},p.Headers=x,p.Request=R,p.Response=U,p.fetch=function(O,G){return new Promise(function(V,te){var ne=new R(O,G),$=new XMLHttpRequest;$.onload=function(){var se,J,ue={status:$.status,statusText:$.statusText,headers:(se=$.getAllResponseHeaders()||"",J=new x,se.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(_e){var he=_e.split(":"),Re=he.shift().trim();if(Re){var ve=he.join(":").trim();J.append(Re,ve)}}),J)};ue.url="responseURL"in $?$.responseURL:ue.headers.get("X-Request-URL");var me="response"in $?$.response:$.responseText;V(new U(me,ue))},$.onerror=function(){te(new TypeError("Network request failed"))},$.ontimeout=function(){te(new TypeError("Network request failed"))},$.open(ne.method,ne.url,!0),ne.credentials==="include"?$.withCredentials=!0:ne.credentials==="omit"&&($.withCredentials=!1),"responseType"in $&&a&&($.responseType="blob"),ne.headers.forEach(function(se,J){$.setRequestHeader(J,se)}),$.send(ne._bodyInit===void 0?null:ne._bodyInit)})},p.fetch.polyfill=!0}function d(O){if(typeof O!="string"&&(O=String(O)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(O))throw new TypeError("Invalid character in header field name");return O.toLowerCase()}function g(O){return typeof O!="string"&&(O=String(O)),O}function v(O){var G={next:function(){var V=O.shift();return{done:V===void 0,value:V}}};return h&&(G[Symbol.iterator]=function(){return G}),G}function x(O){this.map={},O instanceof x?O.forEach(function(G,V){this.append(V,G)},this):Array.isArray(O)?O.forEach(function(G){this.append(G[0],G[1])},this):O&&Object.getOwnPropertyNames(O).forEach(function(G){this.append(G,O[G])},this)}function S(O){if(O.bodyUsed)return Promise.reject(new TypeError("Already read"));O.bodyUsed=!0}function E(O){return new Promise(function(G,V){O.onload=function(){G(O.result)},O.onerror=function(){V(O.error)}})}function M(O){var G=new FileReader,V=E(G);return G.readAsArrayBuffer(O),V}function D(O){if(O.slice)return O.slice(0);var G=new Uint8Array(O.byteLength);return G.set(new Uint8Array(O)),G.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(O){if(this._bodyInit=O)if(typeof O=="string")this._bodyText=O;else if(a&&Blob.prototype.isPrototypeOf(O))this._bodyBlob=O;else if(f&&FormData.prototype.isPrototypeOf(O))this._bodyFormData=O;else if(n&&URLSearchParams.prototype.isPrototypeOf(O))this._bodyText=O.toString();else if(l&&a&&t(O))this._bodyArrayBuffer=D(O.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!l||!ArrayBuffer.prototype.isPrototypeOf(O)&&!r(O))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=D(O)}else this._bodyText="";this.headers.get("content-type")||(typeof O=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(O)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var O=S(this);if(O)return O;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?S(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(M)}),this.text=function(){var O,G,V,te=S(this);if(te)return te;if(this._bodyBlob)return O=this._bodyBlob,G=new FileReader,V=E(G),G.readAsText(O),V;if(this._bodyArrayBuffer)return Promise.resolve(function(ne){for(var $=new Uint8Array(ne),se=new Array($.length),J=0;J<$.length;J++)se[J]=String.fromCharCode($[J]);return se.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f&&(this.formData=function(){return this.text().then(L)}),this.json=function(){return this.text().then(JSON.parse)},this}function R(O,G){var V,te,ne=(G=G||{}).body;if(O instanceof R){if(O.bodyUsed)throw new TypeError("Already read");this.url=O.url,this.credentials=O.credentials,G.headers||(this.headers=new x(O.headers)),this.method=O.method,this.mode=O.mode,ne||O._bodyInit==null||(ne=O._bodyInit,O.bodyUsed=!0)}else this.url=String(O);if(this.credentials=G.credentials||this.credentials||"omit",!G.headers&&this.headers||(this.headers=new x(G.headers)),this.method=(V=G.method||this.method||"GET",te=V.toUpperCase(),-1<s.indexOf(te)?te:V),this.mode=G.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ne)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ne)}function L(O){var G=new FormData;return O.trim().split("&").forEach(function(V){if(V){var te=V.split("="),ne=te.shift().replace(/\+/g," "),$=te.join("=").replace(/\+/g," ");G.append(decodeURIComponent(ne),decodeURIComponent($))}}),G}function U(O,G){G=G||{},this.type="default",this.status=G.status===void 0?200:G.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in G?G.statusText:"OK",this.headers=new x(G.headers),this.url=G.url||"",this._initBody(O)}})(typeof self<"u"?self:this)},{}],243:[function(e,b,y){e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=a(e("../core/main")),h=a(e("../color/color_conversion"));function a(t){return t&&t.__esModule?t:{default:t}}var f=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],l=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];n.default.prototype._rgbColorName=function(t){var r=h.default._rgbaToHSBA(t);return function(s){var i;if(s[0]!==0){s[0]=Math.round(100*s[0]);var d=s[0].toString().split(""),g=d.length-1;d[g]=parseInt(d[g]),d[g]<2.5?d[g]=0:2.5<=d[g]&&d[g]<7.5&&(d[g]=5),d.length===2?(d[0]=parseInt(d[0]),7.5<=d[g]&&(d[g]=0,d[0]=d[0]+1),s[0]=10*d[0]+d[1]):7.5<=d[g]?s[0]=10:s[0]=d[g]}s[2]=s[2]/255;for(var v=s.length-1;1<=v;v--)s[v]<=.25?s[v]=0:.25<s[v]&&s[v]<.75?s[v]=.5:s[v]=1;if(s[0]===0&&s[1]===0&&s[2]===1){for(var x=2;0<=x;x--)p[x]=Math.round(1e4*p[x])/1e4;for(var S=0;S<f.length;S++){if(f[S].h===p[0]&&f[S].s===p[1]&&f[S].b===p[2]){i=f[S].name;break}i="white"}}else for(var E=0;E<l.length;E++)if(l[E].h===s[0]&&l[E].s===s[1]&&l[E].b===s[2]){i=l[E].name;break}return i}([(p=r)[0],r[1],r[2]])};var o=n.default;y.default=o},{"../color/color_conversion":249,"../core/main":264,"core-js/modules/es.function.name":166,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],244:[function(e,b,y){e("core-js/modules/es.array.concat"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.replace"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p},h="_Description",a="_fallbackDesc",f="_fallbackTable",l="_Label",o="_labelDesc",t="_labelTable";function r(i){if(i==="label"||i==="fallback")throw new Error("description should not be LABEL or FALLBACK");return i.endsWith(".")||i.endsWith(";")||i.endsWith(",")||i.endsWith("?")||i.endsWith("!")||(i+="."),i}n.default.prototype.describe=function(i,d){if(n.default._validateParameters("describe",arguments),typeof i=="string"){var g=this.canvas.id;i=r(i),this.dummyDOM||(this.dummyDOM=document.getElementById(g).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==i&&(this.descriptions.fallback.innerHTML=i):this._describeHTML("fallback",i),d===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==i&&(this.descriptions.label.innerHTML=i):this._describeHTML("label",i))}},n.default.prototype.describeElement=function(i,d,g){if(n.default._validateParameters("describeElement",arguments),typeof d=="string"&&typeof i=="string"){var v=this.canvas.id;d=r(d);var x=function(E){if(E==="label"||E==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return E.endsWith(".")||E.endsWith(";")||E.endsWith(",")?E=E.replace(/.$/,":"):E.endsWith(":")||(E+=":"),E}(i);i=i.replace(/[^a-zA-Z0-9]/g,"");var S='<th scope="row">'.concat(x,"</th><td>").concat(d,"</td>");this.dummyDOM||(this.dummyDOM=document.getElementById(v).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[i]?this.descriptions.fallbackElements[i].innerHTML!==S&&(this.descriptions.fallbackElements[i].innerHTML=S):this._describeElementHTML("fallback",i,S),g===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[i]?this.descriptions.labelElements[i].innerHTML!==S&&(this.descriptions.labelElements[i].innerHTML=S):this._describeElementHTML("label",i,S))}},n.default.prototype._describeHTML=function(i,d){var g=this.canvas.id;if(i==="fallback"){if(this.dummyDOM.querySelector("#".concat(g+h)))this.dummyDOM.querySelector("#"+g+f).insertAdjacentHTML("beforebegin",'<p id="'.concat(g+a,'"></p>'));else{var v='<div id="'.concat(g).concat(h,'" role="region" aria-label="Canvas Description"><p id="').concat(g).concat(a,'"></p></div>');this.dummyDOM.querySelector("#".concat(g,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutput")).insertAdjacentHTML("beforebegin",v):this.dummyDOM.querySelector("#".concat(g)).innerHTML=v}return this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(g).concat(a)),void(this.descriptions.fallback.innerHTML=d)}if(i==="label"){if(this.dummyDOM.querySelector("#".concat(g+l)))this.dummyDOM.querySelector("#".concat(g+t))&&this.dummyDOM.querySelector("#".concat(g+t)).insertAdjacentHTML("beforebegin",'<p id="'.concat(g).concat(o,'"></p>'));else{var x='<div id="'.concat(g).concat(l,'" class="p5Label"><p id="').concat(g).concat(o,'"></p></div>');this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",x):this.dummyDOM.querySelector("#"+g).insertAdjacentHTML("afterend",x)}return this.descriptions.label=this.dummyDOM.querySelector("#"+g+o),void(this.descriptions.label.innerHTML=d)}},n.default.prototype._describeElementHTML=function(i,d,g){var v=this.canvas.id;if(i==="fallback"){if(this.dummyDOM.querySelector("#".concat(v+h)))this.dummyDOM.querySelector("#"+v+f)||this.dummyDOM.querySelector("#"+v+a).insertAdjacentHTML("afterend",'<table id="'.concat(v).concat(f,'"><caption>Canvas elements and their descriptions</caption></table>'));else{var x='<div id="'.concat(v).concat(h,'" role="region" aria-label="Canvas Description"><table id="').concat(v).concat(f,'"><caption>Canvas elements and their descriptions</caption></table></div>');this.dummyDOM.querySelector("#".concat(v,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(v,"accessibleOutput")).insertAdjacentHTML("beforebegin",x):this.dummyDOM.querySelector("#"+v).innerHTML=x}var S=document.createElement("tr");return S.id=v+"_fte_"+d,this.dummyDOM.querySelector("#"+v+f).appendChild(S),this.descriptions.fallbackElements[d]=this.dummyDOM.querySelector("#".concat(v).concat("_fte_").concat(d)),void(this.descriptions.fallbackElements[d].innerHTML=g)}if(i==="label"){if(this.dummyDOM.querySelector("#".concat(v+l)))this.dummyDOM.querySelector("#".concat(v+t))||this.dummyDOM.querySelector("#"+v+o).insertAdjacentHTML("afterend",'<table id="'.concat(v+t,'"></table>'));else{var E='<div id="'.concat(v).concat(l,'" class="p5Label"><table id="').concat(v).concat(t,'"></table></div>');this.dummyDOM.querySelector("#".concat(v,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(v,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",E):this.dummyDOM.querySelector("#"+v).insertAdjacentHTML("afterend",E)}var M=document.createElement("tr");M.id=v+"_lte_"+d,this.dummyDOM.querySelector("#"+v+t).appendChild(M),this.descriptions.labelElements[d]=this.dummyDOM.querySelector("#".concat(v).concat("_lte_").concat(d)),this.descriptions.labelElements[d].innerHTML=g}};var s=n.default;y.default=s},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.replace":189}],245:[function(e,b,y){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.map"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};n.default.prototype._updateGridOutput=function(a){if(this.dummyDOM.querySelector("#".concat(a,"_summary"))){var f=this._accessibleOutputs[a],l=function(r,s){var i="",d="",g=0;for(var v in s){var x=0;for(var S in s[v]){var E='<li id="'.concat(r,"shape").concat(g,'">').concat(s[v][S].color," ").concat(v,",");v==="line"?E+=" location = ".concat(s[v][S].pos,", length = ").concat(s[v][S].length," pixels"):(E+=" location = ".concat(s[v][S].pos),v!=="point"&&(E+=", area = ".concat(s[v][S].area," %")),E+="</li>"),i+=E,x++,g++}d=1<x?"".concat(d," ").concat(x," ").concat(v,"s"):"".concat(d," ").concat(x," ").concat(v)}return{numShapes:[g,d],details:i}}(a,this.ingredients.shapes),o=function(r,s,i,d){var g="".concat(s," canvas, ").concat(i," by ").concat(d," pixels, contains ").concat(r[0]);return g=r[0]===1?"".concat(g," shape: ").concat(r[1]):"".concat(g," shapes: ").concat(r[1]),g}(l.numShapes,this.ingredients.colors.background,this.width,this.height),t=function(r,s){var i=0,d="",g=Array.apply(null,Array(10)).map(function(){});for(var v in g)g[v]=Array.apply(null,Array(10)).map(function(){});for(var x in s)for(var S in s[x]){var E=void 0;E=x!=="line"?'<a href="#'.concat(r,"shape").concat(i,'">').concat(s[x][S].color," ").concat(x,"</a>"):'<a href="#'.concat(r,"shape").concat(i,'">').concat(s[x][S].color," ").concat(x," midpoint</a>"),g[s[x][S].loc.locY][s[x][S].loc.locX]?g[s[x][S].loc.locY][s[x][S].loc.locX]=g[s[x][S].loc.locY][s[x][S].loc.locX]+"  "+E:g[s[x][S].loc.locY][s[x][S].loc.locX]=E,i++}for(var M in g){var D="<tr>";for(var I in g[M])D+="<td>",g[M][I]!==void 0&&(D+=g[M][I]),D+="</td>";d=d+D+"</tr>"}return d}(a,this.ingredients.shapes);o!==f.summary.innerHTML&&(f.summary.innerHTML=o),t!==f.map.innerHTML&&(f.map.innerHTML=t),l.details!==f.shapeDetails.innerHTML&&(f.shapeDetails.innerHTML=l.details),this._accessibleOutputs[a]=f}};var h=n.default;y.default=h},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.map":161}],246:[function(e,b,y){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.to-fixed"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};function h(l,o,t){return l[0]<.4*o?l[1]<.4*t?"top left":l[1]>.6*t?"bottom left":"mid left":l[0]>.6*o?l[1]<.4*t?"top right":l[1]>.6*t?"bottom right":"mid right":l[1]<.4*t?"top middle":l[1]>.6*t?"bottom middle":"middle"}function a(l,o,t){var r=Math.floor(l[0]/o*10),s=Math.floor(l[1]/t*10);return r===10&&--r,s===10&&--s,{locX:r,locY:s}}n.default.prototype.textOutput=function(l){n.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),l===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},n.default.prototype.gridOutput=function(l){n.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),l===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},n.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},n.default.prototype._createOutput=function(l,o){var t,r,s,i=this.canvas.id;this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(i).parentNode);var d="";o==="Fallback"?(t=i+l,r=i+"accessibleOutput",this.dummyDOM.querySelector("#".concat(r))||(this.dummyDOM.querySelector("#".concat(i,"_Description"))?this.dummyDOM.querySelector("#".concat(i,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(r,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(i)).innerHTML='<div id="'.concat(r,'" role="region" aria-label="Canvas Outputs"></div>'))):o==="Label"&&(t=i+l+(d=o),r=i+"accessibleOutput"+o,this.dummyDOM.querySelector("#".concat(r))||(this.dummyDOM.querySelector("#".concat(i,"_Label"))?this.dummyDOM.querySelector("#".concat(i,"_Label")).insertAdjacentHTML("afterend",'<div id="'.concat(r,'"></div>')):this.dummyDOM.querySelector("#".concat(i)).insertAdjacentHTML("afterend",'<div id="'.concat(r,'"></div>')))),this._accessibleOutputs[t]={},l==="textOutput"?(d="#".concat(i,"gridOutput").concat(d),s='<div id="'.concat(t,'">Text Output<div id="').concat(t,'Summary" aria-label="text output summary"><p id="').concat(t,'_summary"></p><ul id="').concat(t,'_list"></ul></div><table id="').concat(t,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(d)?this.dummyDOM.querySelector(d).insertAdjacentHTML("beforebegin",s):this.dummyDOM.querySelector("#".concat(r)).innerHTML=s,this._accessibleOutputs[t].list=this.dummyDOM.querySelector("#".concat(t,"_list"))):l==="gridOutput"&&(d="#".concat(i,"textOutput").concat(d),s='<div id="'.concat(t,'">Grid Output<p id="').concat(t,'_summary" aria-label="grid output summary"><table id="').concat(t,'_map" summary="grid output content"></table><ul id="').concat(t,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(d)?this.dummyDOM.querySelector(d).insertAdjacentHTML("afterend",s):this.dummyDOM.querySelector("#".concat(r)).innerHTML=s,this._accessibleOutputs[t].map=this.dummyDOM.querySelector("#".concat(t,"_map"))),this._accessibleOutputs[t].shapeDetails=this.dummyDOM.querySelector("#".concat(t,"_shapeDetails")),this._accessibleOutputs[t].summary=this.dummyDOM.querySelector("#".concat(t,"_summary"))},n.default.prototype._updateAccsOutput=function(){var l=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(l+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(l+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(l+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(l+"gridOutputLabel"))},n.default.prototype._accsBackground=function(l){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==l&&(this.ingredients.colors.backgroundRGBA=l,this.ingredients.colors.background=this._rgbColorName(l))},n.default.prototype._accsCanvasColors=function(l,o){l==="fill"?this.ingredients.colors.fillRGBA!==o&&(this.ingredients.colors.fillRGBA=o,this.ingredients.colors.fill=this._rgbColorName(o)):l==="stroke"&&this.ingredients.colors.strokeRGBA!==o&&(this.ingredients.colors.strokeRGBA=o,this.ingredients.colors.stroke=this._rgbColorName(o))},n.default.prototype._accsOutput=function(l,o){l==="ellipse"&&o[2]===o[3]?l="circle":l==="rectangle"&&o[2]===o[3]&&(l="square");var t={},r=!0,s=function(v,x){var S,E;return E=v==="rectangle"||v==="ellipse"||v==="arc"||v==="circle"||v==="square"?(S=Math.round(x[0]+x[2]/2),Math.round(x[1]+x[3]/2)):v==="triangle"?(S=(x[0]+x[2]+x[4])/3,(x[1]+x[3]+x[5])/3):v==="quadrilateral"?(S=(x[0]+x[2]+x[4]+x[6])/4,(x[1]+x[3]+x[5]+x[7])/4):v==="line"?(S=(x[0]+x[2])/2,(x[1]+x[3])/2):(S=x[0],x[1]),[S,E]}(l,o);if(l==="line"){t.color=this.ingredients.colors.stroke,t.length=Math.round(this.dist(o[0],o[1],o[2],o[3]));var i=h([o[0],[1]],this.width,this.height),d=h([o[2],[3]],this.width,this.height);t.loc=a(s,this.width,this.height),t.pos=i===d?"at ".concat(i):"from ".concat(i," to ").concat(d)}else l==="point"?t.color=this.ingredients.colors.stroke:(t.color=this.ingredients.colors.fill,t.area=function(v,x,S,E){var M=0;if(v==="arc"){var D=((x[5]-x[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI);if(M=D*x[2]*x[3]/8,x[6]==="open"||x[6]==="chord"){var I=x[0],R=x[1],L=x[0]+x[2]/2*Math.cos(x[4]).toFixed(2),U=x[1]+x[3]/2*Math.sin(x[4]).toFixed(2),O=x[0]+x[2]/2*Math.cos(x[5]).toFixed(2),G=x[1]+x[3]/2*Math.sin(x[5]).toFixed(2),V=Math.abs(I*(U-G)+L*(G-R)+O*(R-U))/2;D>Math.PI?M+=V:M-=V}}else v==="ellipse"||v==="circle"?M=3.14*x[2]/2*x[3]/2:v==="line"||v==="point"?M=0:v==="quadrilateral"?M=Math.abs((x[6]+x[0])*(x[7]-x[1])+(x[0]+x[2])*(x[1]-x[3])+(x[2]+x[4])*(x[3]-x[5])+(x[4]+x[6])*(x[5]-x[7]))/2:v==="rectangle"||v==="square"?M=x[2]*x[3]:v==="triangle"&&(M=Math.abs(x[0]*(x[3]-x[5])+x[2]*(x[5]-x[1])+x[4]*(x[1]-x[3]))/2);return Math.round(100*M/(S*E))}(l,o,this.width,this.height)),t.pos=h(s,this.width,this.height),t.loc=a(s,this.width,this.height);if(this.ingredients.shapes[l]){if(this.ingredients.shapes[l]!==[t]){for(var g in this.ingredients.shapes[l])JSON.stringify(this.ingredients.shapes[l][g])===JSON.stringify(t)&&(r=!1);r===!0&&this.ingredients.shapes[l].push(t)}}else this.ingredients.shapes[l]=[t]};var f=n.default;y.default=f},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.map":161,"core-js/modules/es.number.to-fixed":172}],247:[function(e,b,y){e("core-js/modules/es.array.concat"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};n.default.prototype._updateTextOutput=function(a){if(this.dummyDOM.querySelector("#".concat(a,"_summary"))){var f=this._accessibleOutputs[a],l=function(r,s){var i="",d=0;for(var g in s)for(var v in s[g]){var x='<li><a href="#'.concat(r,"shape").concat(d,'">').concat(s[g][v].color," ").concat(g,"</a>");g==="line"?x+=", ".concat(s[g][v].pos,", ").concat(s[g][v].length," pixels long.</li>"):(x+=", at ".concat(s[g][v].pos),g!=="point"&&(x+=", covering ".concat(s[g][v].area,"% of the canvas")),x+=".</li>"),i+=x,d++}return{numShapes:d,listShapes:i}}(a,this.ingredients.shapes),o=function(r,s,i,d){var g="Your output is a, ".concat(i," by ").concat(d," pixels, ").concat(s," canvas containing the following");return g=r===1?"".concat(g," shape:"):"".concat(g," ").concat(r," shapes:"),g}(l.numShapes,this.ingredients.colors.background,this.width,this.height),t=function(r,s){var i="",d=0;for(var g in s)for(var v in s[g]){var x='<tr id="'.concat(r,"shape").concat(d,'"><th>').concat(s[g][v].color," ").concat(g,"</th>");g==="line"?x+="<td>location = ".concat(s[g][v].pos,"</td><td>length = ").concat(s[g][v].length," pixels</td></tr>"):(x+="<td>location = ".concat(s[g][v].pos,"</td>"),g!=="point"&&(x+="<td> area = ".concat(s[g][v].area,"%</td>")),x+="</tr>"),i+=x,d++}return i}(a,this.ingredients.shapes);o!==f.summary.innerHTML&&(f.summary.innerHTML=o),l.listShapes!==f.list.innerHTML&&(f.list.innerHTML=l.listShapes),t!==f.shapeDetails.innerHTML&&(f.shapeDetails.innerHTML=t),this._accessibleOutputs[a]=f}};var h=n.default;y.default=h},{"../core/main":264,"core-js/modules/es.array.concat":149}],248:[function(e,b,y){var p,n=(p=e("./core/main"))&&p.__esModule?p:{default:p};e("./core/constants"),e("./core/environment"),e("./core/friendly_errors/stacktrace"),e("./core/friendly_errors/validate_params"),e("./core/friendly_errors/file_errors"),e("./core/friendly_errors/fes_core"),e("./core/friendly_errors/sketch_reader"),e("./core/helpers"),e("./core/legacy"),e("./core/preload"),e("./core/p5.Element"),e("./core/p5.Graphics"),e("./core/p5.Renderer"),e("./core/p5.Renderer2D"),e("./core/rendering"),e("./core/shim"),e("./core/structure"),e("./core/transform"),e("./core/shape/2d_primitives"),e("./core/shape/attributes"),e("./core/shape/curves"),e("./core/shape/vertex"),e("./accessibility/outputs"),e("./accessibility/textOutput"),e("./accessibility/gridOutput"),e("./accessibility/color_namer"),e("./color/color_conversion"),e("./color/creating_reading"),e("./color/p5.Color"),e("./color/setting"),e("./data/p5.TypedDict"),e("./data/local_storage.js"),e("./dom/dom"),e("./accessibility/describe"),e("./events/acceleration"),e("./events/keyboard"),e("./events/mouse"),e("./events/touch"),e("./image/filters"),e("./image/image"),e("./image/loading_displaying"),e("./image/p5.Image"),e("./image/pixels"),e("./io/files"),e("./io/p5.Table"),e("./io/p5.TableRow"),e("./io/p5.XML"),e("./math/calculation"),e("./math/math"),e("./math/noise"),e("./math/p5.Vector"),e("./math/random"),e("./math/trigonometry"),e("./typography/attributes"),e("./typography/loading_displaying"),e("./typography/p5.Font"),e("./utilities/array_functions"),e("./utilities/conversion"),e("./utilities/string_functions"),e("./utilities/time_date"),e("./webgl/3d_primitives"),e("./webgl/interaction"),e("./webgl/light"),e("./webgl/loading"),e("./webgl/material"),e("./webgl/p5.Camera"),e("./webgl/p5.Geometry"),e("./webgl/p5.Matrix"),e("./webgl/p5.RendererGL.Immediate"),e("./webgl/p5.RendererGL"),e("./webgl/p5.RendererGL.Retained"),e("./webgl/p5.Shader"),e("./webgl/p5.RenderBuffer"),e("./webgl/p5.Texture"),e("./webgl/text"),e("./core/init"),b.exports=n.default},{"./accessibility/color_namer":243,"./accessibility/describe":244,"./accessibility/gridOutput":245,"./accessibility/outputs":246,"./accessibility/textOutput":247,"./color/color_conversion":249,"./color/creating_reading":250,"./color/p5.Color":251,"./color/setting":252,"./core/constants":253,"./core/environment":254,"./core/friendly_errors/fes_core":255,"./core/friendly_errors/file_errors":256,"./core/friendly_errors/sketch_reader":257,"./core/friendly_errors/stacktrace":258,"./core/friendly_errors/validate_params":259,"./core/helpers":260,"./core/init":261,"./core/legacy":263,"./core/main":264,"./core/p5.Element":265,"./core/p5.Graphics":266,"./core/p5.Renderer":267,"./core/p5.Renderer2D":268,"./core/preload":269,"./core/rendering":270,"./core/shape/2d_primitives":271,"./core/shape/attributes":272,"./core/shape/curves":273,"./core/shape/vertex":274,"./core/shim":275,"./core/structure":276,"./core/transform":277,"./data/local_storage.js":278,"./data/p5.TypedDict":279,"./dom/dom":280,"./events/acceleration":281,"./events/keyboard":282,"./events/mouse":283,"./events/touch":284,"./image/filters":285,"./image/image":286,"./image/loading_displaying":287,"./image/p5.Image":288,"./image/pixels":289,"./io/files":290,"./io/p5.Table":291,"./io/p5.TableRow":292,"./io/p5.XML":293,"./math/calculation":294,"./math/math":295,"./math/noise":296,"./math/p5.Vector":297,"./math/random":298,"./math/trigonometry":299,"./typography/attributes":300,"./typography/loading_displaying":301,"./typography/p5.Font":302,"./utilities/array_functions":303,"./utilities/conversion":304,"./utilities/string_functions":305,"./utilities/time_date":306,"./webgl/3d_primitives":307,"./webgl/interaction":308,"./webgl/light":309,"./webgl/loading":310,"./webgl/material":311,"./webgl/p5.Camera":312,"./webgl/p5.Geometry":313,"./webgl/p5.Matrix":314,"./webgl/p5.RenderBuffer":315,"./webgl/p5.RendererGL":318,"./webgl/p5.RendererGL.Immediate":316,"./webgl/p5.RendererGL.Retained":317,"./webgl/p5.Shader":319,"./webgl/p5.Texture":320,"./webgl/text":321}],249:[function(e,b,y){Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};n.default.ColorConversion={},n.default.ColorConversion._hsbaToHSLA=function(a){var f=a[0],l=a[1],o=a[2],t=(2-l)*o/2;return t!=0&&(t==1?l=0:t<.5?l/=2-l:l=l*o/(2-2*t)),[f,l,t,a[3]]},n.default.ColorConversion._hsbaToRGBA=function(a){var f=6*a[0],l=a[1],o=a[2],t=[];if(l===0)t=[o,o,o,a[3]];else{var r,s,i,d=Math.floor(f),g=o*(1-l),v=o*(1-l*(f-d)),x=o*(1-l*(1+d-f));i=d===1?(r=v,s=o,g):d===2?(r=g,s=o,x):d===3?(r=g,s=v,o):d===4?(r=x,s=g,o):d===5?(r=o,s=g,v):(r=o,s=x,g),t=[r,s,i,a[3]]}return t},n.default.ColorConversion._hslaToHSBA=function(a){var f,l=a[0],o=a[1],t=a[2];return[l,o=2*((f=t<.5?(1+o)*t:t+o-t*o)-t)/f,f,a[3]]},n.default.ColorConversion._hslaToRGBA=function(a){var f=6*a[0],l=a[1],o=a[2],t=[];if(l===0)t=[o,o,o,a[3]];else{var r,s=2*o-(r=o<.5?(1+l)*o:o+l-o*l),i=function(d,g,v){return d<0?d+=6:6<=d&&(d-=6),d<1?g+(v-g)*d:d<3?v:d<4?g+(v-g)*(4-d):g};t=[i(2+f,s,r),i(f,s,r),i(f-2,s,r),a[3]]}return t},n.default.ColorConversion._rgbaToHSBA=function(a){var f,l,o=a[0],t=a[1],r=a[2],s=Math.max(o,t,r),i=s-Math.min(o,t,r);return i==0?l=f=0:(l=i/s,o===s?f=(t-r)/i:t===s?f=2+(r-o)/i:r===s&&(f=4+(o-t)/i),f<0?f+=6:6<=f&&(f-=6)),[f/6,l,s,a[3]]},n.default.ColorConversion._rgbaToHSLA=function(a){var f,l,o=a[0],t=a[1],r=a[2],s=Math.max(o,t,r),i=Math.min(o,t,r),d=s+i,g=s-i;return g==0?l=f=0:(l=d<1?g/d:g/(2-d),o===s?f=(t-r)/g:t===s?f=2+(r-o)/g:r===s&&(f=4+(o-t)/g),f<0?f+=6:6<=f&&(f-=6)),[f/6,l,d/2,a[3]]};var h=n.default.ColorConversion;y.default=h},{"../core/main":264}],250:[function(e,b,y){function p(o){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(o)}e("core-js/modules/es.array.map"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n,h=(n=e("../core/main"))&&n.__esModule?n:{default:n},a=function(o){if(o&&o.__esModule)return o;if(o===null||p(o)!=="object"&&typeof o!="function")return{default:o};var t=f();if(t&&t.has(o))return t.get(o);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in o)if(Object.prototype.hasOwnProperty.call(o,i)){var d=s?Object.getOwnPropertyDescriptor(o,i):null;d&&(d.get||d.set)?Object.defineProperty(r,i,d):r[i]=o[i]}return r.default=o,t&&t.set(o,r),r}(e("../core/constants"));function f(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return f=function(){return o},o}e("./p5.Color"),e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),h.default.prototype.alpha=function(o){return h.default._validateParameters("alpha",arguments),this.color(o)._getAlpha()},h.default.prototype.blue=function(o){return h.default._validateParameters("blue",arguments),this.color(o)._getBlue()},h.default.prototype.brightness=function(o){return h.default._validateParameters("brightness",arguments),this.color(o)._getBrightness()},h.default.prototype.color=function(){if(h.default._validateParameters("color",arguments),arguments[0]instanceof h.default.Color)return arguments[0];var o=arguments[0]instanceof Array?arguments[0]:arguments;return new h.default.Color(this,o)},h.default.prototype.green=function(o){return h.default._validateParameters("green",arguments),this.color(o)._getGreen()},h.default.prototype.hue=function(o){return h.default._validateParameters("hue",arguments),this.color(o)._getHue()},h.default.prototype.lerpColor=function(o,t,r){h.default._validateParameters("lerpColor",arguments);var s,i,d,g,v,x,S=this._colorMode,E=this._colorMaxes;if(S===a.RGB)v=o.levels.map(function(M){return M/255}),x=t.levels.map(function(M){return M/255});else if(S===a.HSB)o._getBrightness(),t._getBrightness(),v=o.hsba,x=t.hsba;else{if(S!==a.HSL)throw new Error("".concat(S,"cannot be used for interpolation."));o._getLightness(),t._getLightness(),v=o.hsla,x=t.hsla}return r=Math.max(Math.min(r,1),0),this.lerp===void 0&&(this.lerp=function(M,D,I){return I*(D-M)+M}),s=this.lerp(v[0],x[0],r),i=this.lerp(v[1],x[1],r),d=this.lerp(v[2],x[2],r),g=this.lerp(v[3],x[3],r),s*=E[S][0],i*=E[S][1],d*=E[S][2],g*=E[S][3],this.color(s,i,d,g)},h.default.prototype.lightness=function(o){return h.default._validateParameters("lightness",arguments),this.color(o)._getLightness()},h.default.prototype.red=function(o){return h.default._validateParameters("red",arguments),this.color(o)._getRed()},h.default.prototype.saturation=function(o){return h.default._validateParameters("saturation",arguments),this.color(o)._getSaturation()};var l=h.default;y.default=l},{"../core/constants":253,"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/main":264,"./p5.Color":251,"core-js/modules/es.array.map":161}],251:[function(e,b,y){function p(v){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(v)}e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.trim"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n=l(e("../core/main")),h=function(v){if(v&&v.__esModule)return v;if(v===null||p(v)!=="object"&&typeof v!="function")return{default:v};var x=f();if(x&&x.has(v))return x.get(v);var S={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in v)if(Object.prototype.hasOwnProperty.call(v,M)){var D=E?Object.getOwnPropertyDescriptor(v,M):null;D&&(D.get||D.set)?Object.defineProperty(S,M,D):S[M]=v[M]}return S.default=v,x&&x.set(v,S),S}(e("../core/constants")),a=l(e("./color_conversion"));function f(){if(typeof WeakMap!="function")return null;var v=new WeakMap;return f=function(){return v},v}function l(v){return v&&v.__esModule?v:{default:v}}n.default.Color=function(v,x){if(this._storeModeAndMaxes(v._colorMode,v._colorMaxes),this.mode!==h.RGB&&this.mode!==h.HSL&&this.mode!==h.HSB)throw new Error("".concat(this.mode," is an invalid colorMode."));return this._array=n.default.Color._parseInputs.apply(this,x),this._calculateLevels(),this},n.default.Color.prototype.toString=function(v){var x=this.levels,S=this._array,E=S[3];switch(v){case"#rrggbb":return"#".concat(x[0]<16?"0".concat(x[0].toString(16)):x[0].toString(16),x[1]<16?"0".concat(x[1].toString(16)):x[1].toString(16),x[2]<16?"0".concat(x[2].toString(16)):x[2].toString(16));case"#rrggbbaa":return"#".concat(x[0]<16?"0".concat(x[0].toString(16)):x[0].toString(16),x[1]<16?"0".concat(x[1].toString(16)):x[1].toString(16),x[2]<16?"0".concat(x[2].toString(16)):x[2].toString(16),x[3]<16?"0".concat(x[3].toString(16)):x[3].toString(16));case"#rgb":return"#".concat(Math.round(15*S[0]).toString(16),Math.round(15*S[1]).toString(16),Math.round(15*S[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*S[0]).toString(16),Math.round(15*S[1]).toString(16),Math.round(15*S[2]).toString(16),Math.round(15*S[3]).toString(16));case"rgb":return"rgb(".concat(x[0],", ",x[1],", ",x[2],")");case"rgb%":return"rgb(".concat((100*S[0]).toPrecision(3),"%, ",(100*S[1]).toPrecision(3),"%, ",(100*S[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*S[0]).toPrecision(3),"%, ",(100*S[1]).toPrecision(3),"%, ",(100*S[2]).toPrecision(3),"%, ",(100*S[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=a.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[h.HSB][0],", ",this.hsba[1]*this.maxes[h.HSB][1],", ",this.hsba[2]*this.maxes[h.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=a.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=a.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[h.HSB][0],", ",this.hsba[1]*this.maxes[h.HSB][1],", ",this.hsba[2]*this.maxes[h.HSB][2],", ",E,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=a.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*E).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=a.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[h.HSL][0],", ",this.hsla[1]*this.maxes[h.HSL][1],", ",this.hsla[2]*this.maxes[h.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=a.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=a.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[h.HSL][0],", ",this.hsla[1]*this.maxes[h.HSL][1],", ",this.hsla[2]*this.maxes[h.HSL][2],", ",E,")");case"hsla%":return this.hsla||(this.hsla=a.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*E).toPrecision(3),"%)");case"rgba":default:return"rgba(".concat(x[0],",",x[1],",",x[2],",",E,")")}},n.default.Color.prototype.setRed=function(v){this._array[0]=v/this.maxes[h.RGB][0],this._calculateLevels()},n.default.Color.prototype.setGreen=function(v){this._array[1]=v/this.maxes[h.RGB][1],this._calculateLevels()},n.default.Color.prototype.setBlue=function(v){this._array[2]=v/this.maxes[h.RGB][2],this._calculateLevels()},n.default.Color.prototype.setAlpha=function(v){this._array[3]=v/this.maxes[this.mode][3],this._calculateLevels()},n.default.Color.prototype._calculateLevels=function(){for(var v=this._array,x=this.levels=new Array(v.length),S=v.length-1;0<=S;--S)x[S]=Math.round(255*v[S]);this.hsla=null,this.hsba=null},n.default.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},n.default.Color.prototype._storeModeAndMaxes=function(v,x){this.mode=v,this.maxes=x},n.default.Color.prototype._getMode=function(){return this.mode},n.default.Color.prototype._getMaxes=function(){return this.maxes},n.default.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[h.RGB][2]},n.default.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=a.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[h.HSB][2]},n.default.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[h.RGB][1]},n.default.Color.prototype._getHue=function(){return this.mode===h.HSB?(this.hsba||(this.hsba=a.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[h.HSB][0]):(this.hsla||(this.hsla=a.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[h.HSL][0])},n.default.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=a.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[h.HSL][2]},n.default.Color.prototype._getRed=function(){return this._array[0]*this.maxes[h.RGB][0]},n.default.Color.prototype._getSaturation=function(){return this.mode===h.HSB?(this.hsba||(this.hsba=a.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[h.HSB][1]):(this.hsla||(this.hsla=a.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[h.HSL][1])};var o={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},t=/\s*/,r=/(\d{1,3})/,s=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,i=new RegExp("".concat(s.source,"%")),d={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",r.source,",",r.source,",",r.source,"\\)$"].join(t.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",i.source,",",i.source,",",i.source,"\\)$"].join(t.source),"i"),RGBA:new RegExp(["^rgba\\(",r.source,",",r.source,",",r.source,",",s.source,"\\)$"].join(t.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",i.source,",",i.source,",",i.source,",",s.source,"\\)$"].join(t.source),"i"),HSL:new RegExp(["^hsl\\(",r.source,",",i.source,",",i.source,"\\)$"].join(t.source),"i"),HSLA:new RegExp(["^hsla\\(",r.source,",",i.source,",",i.source,",",s.source,"\\)$"].join(t.source),"i"),HSB:new RegExp(["^hsb\\(",r.source,",",i.source,",",i.source,"\\)$"].join(t.source),"i"),HSBA:new RegExp(["^hsba\\(",r.source,",",i.source,",",i.source,",",s.source,"\\)$"].join(t.source),"i")};n.default.Color._parseInputs=function(v,x,S,E){var M,D=arguments.length,I=this.mode,R=this.maxes[I],L=[];if(3<=D){for(L[0]=v/R[0],L[1]=x/R[1],L[2]=S/R[2],L[3]=typeof E=="number"?E/R[3]:1,M=L.length-1;0<=M;--M){var U=L[M];U<0?L[M]=0:1<U&&(L[M]=1)}return I===h.HSL?a.default._hslaToRGBA(L):I===h.HSB?a.default._hsbaToRGBA(L):L}if(D===1&&typeof v=="string"){var O=v.trim().toLowerCase();if(o[O])return n.default.Color._parseInputs.call(this,o[O]);if(d.HEX3.test(O))return(L=d.HEX3.exec(O).slice(1).map(function(G){return parseInt(G+G,16)/255}))[3]=1,L;if(d.HEX6.test(O))return(L=d.HEX6.exec(O).slice(1).map(function(G){return parseInt(G,16)/255}))[3]=1,L;if(d.HEX4.test(O))return L=d.HEX4.exec(O).slice(1).map(function(G){return parseInt(G+G,16)/255});if(d.HEX8.test(O))return L=d.HEX8.exec(O).slice(1).map(function(G){return parseInt(G,16)/255});if(d.RGB.test(O))return(L=d.RGB.exec(O).slice(1).map(function(G){return G/255}))[3]=1,L;if(d.RGB_PERCENT.test(O))return(L=d.RGB_PERCENT.exec(O).slice(1).map(function(G){return parseFloat(G)/100}))[3]=1,L;if(d.RGBA.test(O))return L=d.RGBA.exec(O).slice(1).map(function(G,V){return V===3?parseFloat(G):G/255});if(d.RGBA_PERCENT.test(O))return L=d.RGBA_PERCENT.exec(O).slice(1).map(function(G,V){return V===3?parseFloat(G):parseFloat(G)/100});if(d.HSL.test(O)?(L=d.HSL.exec(O).slice(1).map(function(G,V){return V===0?parseInt(G,10)/360:parseInt(G,10)/100}))[3]=1:d.HSLA.test(O)&&(L=d.HSLA.exec(O).slice(1).map(function(G,V){return V===0?parseInt(G,10)/360:V===3?parseFloat(G):parseInt(G,10)/100})),(L=L.map(function(G){return Math.max(Math.min(G,1),0)})).length)return a.default._hslaToRGBA(L);if(d.HSB.test(O)?(L=d.HSB.exec(O).slice(1).map(function(G,V){return V===0?parseInt(G,10)/360:parseInt(G,10)/100}))[3]=1:d.HSBA.test(O)&&(L=d.HSBA.exec(O).slice(1).map(function(G,V){return V===0?parseInt(G,10)/360:V===3?parseFloat(G):parseInt(G,10)/100})),L.length){for(M=L.length-1;0<=M;--M)L[M]=Math.max(Math.min(L[M],1),0);return a.default._hsbaToRGBA(L)}L=[1,1,1,1]}else{if(D!==1&&D!==2||typeof v!="number")throw new Error("".concat(arguments,"is not a valid color representation."));L[0]=v/R[2],L[1]=v/R[2],L[2]=v/R[2],L[3]=typeof x=="number"?x/R[3]:1,L=L.map(function(G){return Math.max(Math.min(G,1),0)})}return L};var g=n.default.Color;y.default=g},{"../core/constants":253,"../core/main":264,"./color_conversion":249,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.trim":193}],252:[function(e,b,y){function p(o){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(o)}e("core-js/modules/es.array.fill"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n,h=(n=e("../core/main"))&&n.__esModule?n:{default:n},a=function(o){if(o&&o.__esModule)return o;if(o===null||p(o)!=="object"&&typeof o!="function")return{default:o};var t=f();if(t&&t.has(o))return t.get(o);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in o)if(Object.prototype.hasOwnProperty.call(o,i)){var d=s?Object.getOwnPropertyDescriptor(o,i):null;d&&(d.get||d.set)?Object.defineProperty(r,i,d):r[i]=o[i]}return r.default=o,t&&t.set(o,r),r}(e("../core/constants"));function f(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return f=function(){return o},o}e("./p5.Color"),h.default.prototype.background=function(){var o;return(o=this._renderer).background.apply(o,arguments),this},h.default.prototype.clear=function(){var o=(arguments.length<=0?void 0:arguments[0])||0,t=(arguments.length<=1?void 0:arguments[1])||0,r=(arguments.length<=2?void 0:arguments[2])||0,s=(arguments.length<=3?void 0:arguments[3])||0;return this._renderer.clear(o,t,r,s),this},h.default.prototype.colorMode=function(o,t,r,s,i){if(h.default._validateParameters("colorMode",arguments),o===a.RGB||o===a.HSB||o===a.HSL){this._colorMode=o;var d=this._colorMaxes[o];arguments.length===2?(d[0]=t,d[1]=t,d[2]=t,d[3]=t):arguments.length===4?(d[0]=t,d[1]=r,d[2]=s):arguments.length===5&&(d[0]=t,d[1]=r,d[2]=s,d[3]=i)}return this},h.default.prototype.fill=function(){var o;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(o=this._renderer).fill.apply(o,arguments),this},h.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},h.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},h.default.prototype.stroke=function(){var o;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(o=this._renderer).stroke.apply(o,arguments),this},h.default.prototype.erase=function(){var o=0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:255;return this._renderer.erase(o,t),this},h.default.prototype.noErase=function(){return this._renderer.noErase(),this};var l=h.default;y.default=l},{"../core/constants":253,"../core/main":264,"./p5.Color":251,"core-js/modules/es.array.fill":151}],253:[function(e,b,y){Object.defineProperty(y,"__esModule",{value:!0}),y.BEZIER=y.QUADRATIC=y.LINEAR=y._CTX_MIDDLE=y._DEFAULT_LEADMULT=y._DEFAULT_TEXT_FILL=y.WORD=y.CHAR=y.BOLDITALIC=y.BOLD=y.ITALIC=y.NORMAL=y.BLUR=y.ERODE=y.DILATE=y.POSTERIZE=y.INVERT=y.OPAQUE=y.GRAY=y.THRESHOLD=y.BURN=y.DODGE=y.SOFT_LIGHT=y.HARD_LIGHT=y.OVERLAY=y.REPLACE=y.SCREEN=y.MULTIPLY=y.EXCLUSION=y.SUBTRACT=y.DIFFERENCE=y.LIGHTEST=y.DARKEST=y.ADD=y.REMOVE=y.BLEND=y.UP_ARROW=y.TAB=y.SHIFT=y.RIGHT_ARROW=y.RETURN=y.OPTION=y.LEFT_ARROW=y.ESCAPE=y.ENTER=y.DOWN_ARROW=y.DELETE=y.CONTROL=y.BACKSPACE=y.ALT=y.AUTO=y.HSL=y.HSB=y.RGB=y.MITER=y.BEVEL=y.ROUND=y.SQUARE=y.PROJECT=y.PIE=y.CHORD=y.OPEN=y.CLOSE=y.TESS=y.QUAD_STRIP=y.QUADS=y.TRIANGLE_STRIP=y.TRIANGLE_FAN=y.TRIANGLES=y.LINE_LOOP=y.LINE_STRIP=y.LINES=y.POINTS=y.BASELINE=y.BOTTOM=y.TOP=y.CENTER=y.LEFT=y.RIGHT=y.RADIUS=y.CORNERS=y.CORNER=y.RAD_TO_DEG=y.DEG_TO_RAD=y.RADIANS=y.DEGREES=y.TWO_PI=y.TAU=y.QUARTER_PI=y.PI=y.HALF_PI=y.WAIT=y.TEXT=y.MOVE=y.HAND=y.CROSS=y.ARROW=y.WEBGL=y.P2D=y.VERSION=void 0,y.FALLBACK=y.LABEL=y.AXES=y.GRID=y._DEFAULT_FILL=y._DEFAULT_STROKE=y.PORTRAIT=y.LANDSCAPE=y.MIRROR=y.CLAMP=y.REPEAT=y.NEAREST=y.IMAGE=y.IMMEDIATE=y.TEXTURE=y.FILL=y.STROKE=y.CURVE=void 0;var p=Math.PI;y.VERSION="1.4.2",y.P2D="p2d",y.WEBGL="webgl",y.ARROW="default",y.CROSS="crosshair",y.HAND="pointer",y.MOVE="move",y.TEXT="text",y.WAIT="wait";var n=p/2;y.HALF_PI=n;var h=p;y.PI=h;var a=p/4;y.QUARTER_PI=a;var f=2*p;y.TAU=f;var l=2*p;y.TWO_PI=l,y.DEGREES="degrees",y.RADIANS="radians";var o=p/180;y.DEG_TO_RAD=o;var t=180/p;y.RAD_TO_DEG=t,y.CORNER="corner",y.CORNERS="corners",y.RADIUS="radius",y.RIGHT="right",y.LEFT="left",y.CENTER="center",y.TOP="top",y.BOTTOM="bottom",y.BASELINE="alphabetic",y.POINTS=0,y.LINES=1,y.LINE_STRIP=3,y.LINE_LOOP=2,y.TRIANGLES=4,y.TRIANGLE_FAN=6,y.TRIANGLE_STRIP=5,y.QUADS="quads",y.QUAD_STRIP="quad_strip",y.TESS="tess",y.CLOSE="close",y.OPEN="open",y.CHORD="chord",y.PIE="pie",y.PROJECT="square",y.SQUARE="butt",y.ROUND="round",y.BEVEL="bevel",y.MITER="miter",y.RGB="rgb",y.HSB="hsb",y.HSL="hsl",y.AUTO="auto",y.ALT=18,y.BACKSPACE=8,y.CONTROL=17,y.DELETE=46,y.DOWN_ARROW=40,y.ENTER=13,y.ESCAPE=27,y.LEFT_ARROW=37,y.OPTION=18,y.RETURN=13,y.RIGHT_ARROW=39,y.SHIFT=16,y.TAB=9,y.UP_ARROW=38,y.BLEND="source-over",y.REMOVE="destination-out",y.ADD="lighter",y.DARKEST="darken",y.LIGHTEST="lighten",y.DIFFERENCE="difference",y.SUBTRACT="subtract",y.EXCLUSION="exclusion",y.MULTIPLY="multiply",y.SCREEN="screen",y.REPLACE="copy",y.OVERLAY="overlay",y.HARD_LIGHT="hard-light",y.SOFT_LIGHT="soft-light",y.DODGE="color-dodge",y.BURN="color-burn",y.THRESHOLD="threshold",y.GRAY="gray",y.OPAQUE="opaque",y.INVERT="invert",y.POSTERIZE="posterize",y.DILATE="dilate",y.ERODE="erode",y.BLUR="blur",y.NORMAL="normal",y.ITALIC="italic",y.BOLD="bold",y.BOLDITALIC="bold italic",y.CHAR="CHAR",y.WORD="WORD",y._DEFAULT_TEXT_FILL="#000000",y._DEFAULT_LEADMULT=1.25,y._CTX_MIDDLE="middle",y.LINEAR="linear",y.QUADRATIC="quadratic",y.BEZIER="bezier",y.CURVE="curve",y.STROKE="stroke",y.FILL="fill",y.TEXTURE="texture",y.IMMEDIATE="immediate",y.IMAGE="image",y.NEAREST="nearest",y.REPEAT="repeat",y.CLAMP="clamp",y.MIRROR="mirror",y.LANDSCAPE="landscape",y.PORTRAIT="portrait",y._DEFAULT_STROKE="#000000",y._DEFAULT_FILL="#FFFFFF",y.GRID="grid",y.AXES="axes",y.LABEL="label",y.FALLBACK="fallback"},{}],254:[function(e,b,y){function p(i){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(i)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n,h=(n=e("./main"))&&n.__esModule?n:{default:n},a=function(i){if(i&&i.__esModule)return i;if(i===null||p(i)!=="object"&&typeof i!="function")return{default:i};var d=f();if(d&&d.has(i))return d.get(i);var g={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in i)if(Object.prototype.hasOwnProperty.call(i,x)){var S=v?Object.getOwnPropertyDescriptor(i,x):null;S&&(S.get||S.set)?Object.defineProperty(g,x,S):g[x]=i[x]}return g.default=i,d&&d.set(i,g),g}(e("./constants"));function f(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return f=function(){return i},i}var l=[a.ARROW,a.CROSS,a.HAND,a.MOVE,a.TEXT,a.WAIT];h.default.prototype._frameRate=0,h.default.prototype._lastFrameTime=window.performance.now(),h.default.prototype._targetFrameRate=60;var o=window.print;function t(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function r(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}h.default.prototype.print=function(){var i;arguments.length?(i=console).log.apply(i,arguments):o()},h.default.prototype.frameCount=0,h.default.prototype.deltaTime=0,h.default.prototype.focused=document.hasFocus(),h.default.prototype.cursor=function(i,d,g){var v="auto",x=this._curElement.elt;if(l.includes(i))v=i;else if(typeof i=="string"){var S="";d&&g&&typeof d=="number"&&typeof g=="number"&&(S="".concat(d," ").concat(g)),v=i.substring(0,7)==="http://"||i.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(i)?"url(".concat(i,") ").concat(S,", auto"):i}x.style.cursor=v},h.default.prototype.frameRate=function(i){return h.default._validateParameters("frameRate",arguments),typeof i!="number"||i<0?this._frameRate:(this._setProperty("_targetFrameRate",i),i===0&&this._setProperty("_frameRate",i),this)},h.default.prototype.getFrameRate=function(){return this.frameRate()},h.default.prototype.setFrameRate=function(i){return this.frameRate(i)},h.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},h.default.prototype.displayWidth=screen.width,h.default.prototype.displayHeight=screen.height,h.default.prototype.windowWidth=t(),h.default.prototype.windowHeight=r(),h.default.prototype._onresize=function(i){this._setProperty("windowWidth",t()),this._setProperty("windowHeight",r());var d,g=this._isGlobal?window:this;typeof g.windowResized=="function"&&((d=g.windowResized(i))===void 0||d||i.preventDefault())},h.default.prototype.width=0,h.default.prototype.height=0,h.default.prototype.fullscreen=function(i){if(h.default._validateParameters("fullscreen",arguments),i===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;i?function(d){if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");d.requestFullscreen?d.requestFullscreen():d.mozRequestFullScreen?d.mozRequestFullScreen():d.webkitRequestFullscreen?d.webkitRequestFullscreen():d.msRequestFullscreen&&d.msRequestFullscreen()}(document.documentElement):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},h.default.prototype.pixelDensity=function(i){var d;return h.default._validateParameters("pixelDensity",arguments),typeof i=="number"?(i!==this._pixelDensity&&(this._pixelDensity=i),(d=this).resizeCanvas(this.width,this.height,!0)):d=this._pixelDensity,d},h.default.prototype.displayDensity=function(){return window.devicePixelRatio},h.default.prototype.getURL=function(){return location.href},h.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(i){return i!==""})},h.default.prototype.getURLParams=function(){for(var i,d=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,g={};(i=d.exec(location.search))!=null;)i.index===d.lastIndex&&d.lastIndex++,g[i[1]]=i[2];return g};var s=h.default;y.default=s},{"./constants":253,"./main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.includes":156,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191}],255:[function(e,b,y){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../main"))&&p.__esModule?p:{default:p};e("../internationalization");var h=null,a=null;n.default._friendlyError=n.default._checkForUserDefinedFunctions=n.default._fesErrorMonitor=function(){},h=null;var f="https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup";a=function(){function t(s){return Object.getOwnPropertyNames(s).filter(function(i){return i[0]!=="_"&&!(i in r)&&(r[i]=!0)}).map(function(i){var d;return d=typeof s[i]=="function"?"function":i===i.toUpperCase()?"constant":"variable",{name:i,type:d}})}var r={};(h=[].concat(t(n.default.prototype),t(e("../constants")))).sort(function(s,i){return i.name.length-s.name.length})};function l(t,r){r=r||console.log.bind(console),h||a(),h.some(function(s){if(t.message&&t.message.match("\\W?".concat(s.name,"\\W"))!==null){var i=s.type==="function"?"".concat(s.name,"()"):s.name;return r("Did you just try to use p5.js's ".concat(i," ").concat(s.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(f)),!0}})}n.default.prototype._helpForMisusedAtTopLevelCode=l,document.readyState!=="complete"&&(window.addEventListener("error",l,!1),window.addEventListener("load",function(){window.removeEventListener("error",l,!1)}));var o=n.default;y.default=o},{"../constants":253,"../internationalization":262,"../main":264,"./browser_errors":void 0,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.function.name":166,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229}],256:[function(e,b,y){Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../main"))&&p.__esModule?p:{default:p};e("../internationalization"),n.default._friendlyFileLoadError=function(){};var h=n.default;y.default=h},{"../internationalization":262,"../main":264}],257:[function(e,b,y){function p(o){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(o)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.flat-map"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.unscopables.flat-map"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n=f(e("../main"));e("../internationalization"),a(e("../constants"));function h(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return h=function(){return o},o}function a(o){if(o&&o.__esModule)return o;if(o===null||p(o)!=="object"&&typeof o!="function")return{default:o};var t=h();if(t&&t.has(o))return t.get(o);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in o)if(Object.prototype.hasOwnProperty.call(o,i)){var d=s?Object.getOwnPropertyDescriptor(o,i):null;d&&(d.get||d.set)?Object.defineProperty(r,i,d):r[i]=o[i]}return r.default=o,t&&t.set(o,r),r}function f(o){return o&&o.__esModule?o:{default:o}}n.default._fesCodeReader=function(){};var l=n.default;y.default=l},{"../constants":253,"../internationalization":262,"../main":264,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.flat-map":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.unscopables.flat-map":165,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229}],258:[function(e,b,y){e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../main"))&&p.__esModule?p:{default:p};function h(){var f=/(^|@)\S+:\d+/,l=/^\s*at .*(\S+:\d+|\(native\))/m,o=/^(eval@)?(\[native code])?$/;return{parse:function(t){return t.stacktrace!==void 0||t["opera#sourceloc"]!==void 0?this.parseOpera(t):t.stack&&t.stack.match(l)?this.parseV8OrIE(t):t.stack?this.parseFFOrSafari(t):void 0},extractLocation:function(t){if(t.indexOf(":")===-1)return[t];var r=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(t.replace(/[()]/g,""));return[r[1],r[2]||void 0,r[3]||void 0]},parseV8OrIE:function(t){return t.stack.split(`
`).filter(function(r){return!!r.match(l)},this).map(function(r){-1<r.indexOf("(eval ")&&(r=r.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var s=r.replace(/^\s+/,"").replace(/\(eval code/g,"("),i=s.match(/ (\((.+):(\d+):(\d+)\)$)/),d=(s=i?s.replace(i[0],""):s).split(/\s+/).slice(1),g=this.extractLocation(i?i[1]:d.pop());return{functionName:d.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(g[0])?void 0:g[0],lineNumber:g[1],columnNumber:g[2],source:r}},this)},parseFFOrSafari:function(t){return t.stack.split(`
`).filter(function(r){return!r.match(o)},this).map(function(r){if(-1<r.indexOf(" > eval")&&(r=r.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),r.indexOf("@")===-1&&r.indexOf(":")===-1)return{functionName:r};var s=/((.*".+"[^@]*)?[^@]*)(?:@)/,i=r.match(s),d=i&&i[1]?i[1]:void 0,g=this.extractLocation(r.replace(s,""));return{functionName:d,fileName:g[0],lineNumber:g[1],columnNumber:g[2],source:r}},this)},parseOpera:function(t){return!t.stacktrace||-1<t.message.indexOf(`
`)&&t.message.split(`
`).length>t.stacktrace.split(`
`).length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,s=t.message.split(`
`),i=[],d=2,g=s.length;d<g;d+=2){var v=r.exec(s[d]);v&&i.push({fileName:v[2],lineNumber:v[1],source:s[d]})}return i},parseOpera10:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,s=t.stacktrace.split(`
`),i=[],d=0,g=s.length;d<g;d+=2){var v=r.exec(s[d]);v&&i.push({functionName:v[3]||void 0,fileName:v[2],lineNumber:v[1],source:s[d]})}return i},parseOpera11:function(t){return t.stack.split(`
`).filter(function(r){return!!r.match(f)&&!r.match(/^Error created at/)},this).map(function(r){var s,i=r.split("@"),d=this.extractLocation(i.pop()),g=i.shift()||"",v=g.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return g.match(/\(([^)]*)\)/)&&(s=g.replace(/^[^(]+\(([^)]*)\)$/,"$1")),{functionName:v,args:s===void 0||s==="[arguments not available]"?void 0:s.split(","),fileName:d[0],lineNumber:d[1],columnNumber:d[2],source:r}},this)}}}n.default._getErrorStackParser=function(){return new h};var a=n.default;y.default=a},{"../main":264,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191}],259:[function(e,b,y){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../main"))&&p.__esModule?p:{default:p};(function(l){if(!(l&&l.__esModule)&&!(l===null||a(l)!=="object"&&typeof l!="function")){var o=h();if(o&&o.has(l))return o.get(l);var t={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in l)if(Object.prototype.hasOwnProperty.call(l,s)){var i=r?Object.getOwnPropertyDescriptor(l,s):null;i&&(i.get||i.set)?Object.defineProperty(t,s,i):t[s]=l[s]}t.default=l,o&&o.set(l,t)}})(e("../constants")),e("../internationalization");function h(){if(typeof WeakMap!="function")return null;var l=new WeakMap;return h=function(){return l},l}function a(l){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(l)}n.default._validateParameters=n.default._clearValidateParamsCache=function(){};var f=n.default;y.default=f},{"../../../docs/parameterData.json":void 0,"../constants":253,"../internationalization":262,"../main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":166,"core-js/modules/es.map":167,"core-js/modules/es.number.constructor":170,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229}],260:[function(e,b,y){function p(f){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(f)}Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n=function(f){if(f&&f.__esModule)return f;if(f===null||p(f)!=="object"&&typeof f!="function")return{default:f};var l=h();if(l&&l.has(f))return l.get(f);var o={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in f)if(Object.prototype.hasOwnProperty.call(f,r)){var s=t?Object.getOwnPropertyDescriptor(f,r):null;s&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=f[r]}return o.default=f,l&&l.set(f,o),o}(e("./constants"));function h(){if(typeof WeakMap!="function")return null;var f=new WeakMap;return h=function(){return f},f}var a={modeAdjust:function(f,l,o,t,r){return r===n.CORNER?{x:f,y:l,w:o,h:t}:r===n.CORNERS?{x:f,y:l,w:o-f,h:t-l}:r===n.RADIUS?{x:f-o,y:l-t,w:2*o,h:2*t}:r===n.CENTER?{x:f-.5*o,y:l-.5*t,w:o,h:t}:void 0}};y.default=a},{"./constants":253}],261:[function(e,b,y){e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};e("./internationalization");var h=Promise.resolve();Promise.all([new Promise(function(a,f){document.readyState==="complete"?a():window.addEventListener("load",a,!1)}),h]).then(function(){window._setupDone===void 0?window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!n.default.instance&&new n.default:console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import")})},{"../core/main":264,"./internationalization":262,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/web.dom-collections.iterator":229}],262:[function(e,b,y){e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(y,"__esModule",{value:!0}),y.setTranslatorLanguage=y.currentTranslatorLanguage=y.availableTranslatorLanguages=y.initialize=y.translator=void 0;var p,n,h=f(e("i18next")),a=f(e("i18next-browser-languagedetector"));function f(r){return r&&r.__esModule?r:{default:r}}function l(r,s){for(var i=0;i<s.length;i++){var d=s[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(r,d.key,d)}}var o=function(){function r(d,g){(function(v,x){if(!(v instanceof x))throw new TypeError("Cannot call a class as a function")})(this,r),this.init(d,g)}var s,i;return s=r,(i=[{key:"fetchWithTimeout",value:function(d,g,v){var x=2<arguments.length&&v!==void 0?v:2e3;return Promise.race([fetch(d,g),new Promise(function(S,E){return setTimeout(function(){return E(new Error("timeout"))},x)})])}},{key:"init",value:function(d,g){var v=1<arguments.length&&g!==void 0?g:{};this.services=d,this.options=v}},{key:"read",value:function(d,g,v){var x=this.options.loadPath;if(d===this.options.fallback)v(null,p[d][g]);else if(n.includes(d)){var S=this.services.interpolator.interpolate(x,{lng:d,ns:g});this.loadUrl(S,v)}else v("Not found",!1)}},{key:"loadUrl",value:function(d,g){this.fetchWithTimeout(d).then(function(v){if(!v.ok)throw new Error("failed loading ".concat(d));return v.json()},function(){throw new Error("failed loading ".concat(d))}).then(function(v){return g(null,v)}).catch(g)}}])&&l(s.prototype,i),r}();o.type="backend";var t=function(r,s){console.debug("p5.js translator called before translations were loaded"),h.default.t(r,s)};y.translator=t,y.initialize=function(){return h.default.use(a.default).use(o).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:p}).then(function(r){y.translator=t=r},function(r){return console.debug("Translations failed to load (".concat(r,")"))})},y.availableTranslatorLanguages=function(){return h.default.languages},y.currentTranslatorLanguage=function(){return h.default.language},y.setTranslatorLanguage=function(r){return h.default.changeLanguage(r||void 0,function(s){return console.debug("Translations failed to load (".concat(s,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/web.dom-collections.iterator":229,i18next:3,"i18next-browser-languagedetector":3}],263:[function(e,b,y){Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("./main"))&&p.__esModule?p:{default:p};n.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},n.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},n.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},n.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")};var h=n.default;y.default=h},{"./main":264}],264:[function(e,b,y){function p(t){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(t)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0,e("./shim");var n=function(t){if(t&&t.__esModule)return t;if(t===null||p(t)!=="object"&&typeof t!="function")return{default:t};var r=h();if(r&&r.has(t))return r.get(t);var s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in t)if(Object.prototype.hasOwnProperty.call(t,d)){var g=i?Object.getOwnPropertyDescriptor(t,d):null;g&&(g.get||g.set)?Object.defineProperty(s,d,g):s[d]=t[d]}return s.default=t,r&&r.set(t,s),s}(e("./constants"));function h(){if(typeof WeakMap!="function")return null;var t=new WeakMap;return h=function(){return t},t}function a(t,r){for(var s=0;s<r.length;s++){var i=r[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f=function(){function t(i,d,g){var v=this;(function(J,ue){if(!(J instanceof ue))throw new TypeError("Cannot call a class as a function")})(this,t),this._setupDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=d,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var x=Object.getOwnPropertyNames(t.prototype._registeredMethods),S=!0,E=!1,M=void 0;try{for(var D,I=x[Symbol.iterator]();!(S=(D=I.next()).done);S=!0){var R=D.value;this._registeredMethods[R]=t.prototype._registeredMethods[R].slice()}}catch(J){E=!0,M=J}finally{try{S||I.return==null||I.return()}finally{if(E)throw M}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){v._userNode&&typeof v._userNode=="string"&&(v._userNode=document.getElementById(v._userNode));var J=v._isGlobal?window:v;if(J.preload){var ue=document.getElementById(v._loadingScreenId);ue||((ue=document.createElement("div")).innerHTML="Loading...",ue.style.position="absolute",ue.id=v._loadingScreenId,(v._userNode||document.body).appendChild(ue));var me=v._preloadMethods;for(var _e in me){me[_e]=me[_e]||t;var he=me[_e];he!==t.prototype&&he!==t||(v._isGlobal&&(window[_e]=v._wrapPreload(v,_e)),he=v),v._registeredPreloadMethods[_e]=he[_e],he[_e]=v._wrapPreload(he,_e)}J.preload(),v._runIfPreloadsAreDone()}else v._setup(),v._draw()},this._runIfPreloadsAreDone=function(){var J=this._isGlobal?window:this;if(J._preloadCount===0){var ue=document.getElementById(J._loadingScreenId);ue&&ue.parentNode.removeChild(ue),this._setupDone||(this._lastFrameTime=window.performance.now(),J._setup(),J._draw())}},this._decrementPreload=function(){var J=this._isGlobal?window:this;typeof J.preload=="function"&&(J._setProperty("_preloadCount",J._preloadCount-1),J._runIfPreloadsAreDone())},this._wrapPreload=function(J,ue){var me=this;return function(){me._incrementPreload();for(var _e=arguments.length,he=new Array(_e),Re=0;Re<_e;Re++)he[Re]=arguments[Re];return me._registeredPreloadMethods[ue].apply(J,he)}},this._incrementPreload=function(){var J=this._isGlobal?window:this;J._setProperty("_preloadCount",J._preloadCount+1)},this._setup=function(){v.createCanvas(v._defaultCanvasSize.width,v._defaultCanvasSize.height,"p2d");var J=v._isGlobal?window:v;if(typeof J.preload=="function")for(var ue in v._preloadMethods)J[ue]=v._preloadMethods[ue][ue],J[ue]&&v&&(J[ue]=J[ue].bind(v));v._millisStart=window.performance.now(),typeof J.setup=="function"&&J.setup();var me=document.getElementsByTagName("canvas"),_e=!0,he=!1,Re=void 0;try{for(var ve,ye=me[Symbol.iterator]();!(_e=(ve=ye.next()).done);_e=!0){var P=ve.value;P.dataset.hidden==="true"&&(P.style.visibility="",delete P.dataset.hidden)}}catch(N){he=!0,Re=N}finally{try{_e||ye.return==null||ye.return()}finally{if(he)throw Re}}v._lastFrameTime=window.performance.now(),v._setupDone=!0,(v._accessibleOutputs.grid||v._accessibleOutputs.text)&&v._updateAccsOutput()},this._draw=function(){var J=window.performance.now(),ue=J-v._lastFrameTime,me=1e3/v._targetFrameRate;(!v._loop||me-5<=ue)&&(v.redraw(),v._frameRate=1e3/(J-v._lastFrameTime),v.deltaTime=J-v._lastFrameTime,v._setProperty("deltaTime",v.deltaTime),v._lastFrameTime=J,v._updateMouseCoords!==void 0&&(v._updateMouseCoords(),v._setProperty("movedX",0),v._setProperty("movedY",0))),v._loop&&(v._requestAnimId=window.requestAnimationFrame(v._draw))},this._setProperty=function(J,ue){v[J]=ue,v._isGlobal&&(window[J]=ue)},this.remove=function(){var J=document.getElementById(v._loadingScreenId);if(J&&(J.parentNode.removeChild(J),v._incrementPreload()),v._curElement){for(var ue in v._loop=!1,v._requestAnimId&&window.cancelAnimationFrame(v._requestAnimId),v._events)window.removeEventListener(ue,v._events[ue]);var me=!0,_e=!1,he=void 0;try{for(var Re,ve=v._elements[Symbol.iterator]();!(me=(Re=ve.next()).done);me=!0){var ye=Re.value;for(var P in ye.elt&&ye.elt.parentNode&&ye.elt.parentNode.removeChild(ye.elt),ye._events)ye.elt.removeEventListener(P,ye._events[P])}}catch(oe){_e=!0,he=oe}finally{try{me||ve.return==null||ve.return()}finally{if(_e)throw he}}var N=v;v._registeredMethods.remove.forEach(function(oe){oe!==void 0&&oe.call(N)})}if(v._isGlobal){for(var z in t.prototype)try{delete window[z]}catch{window[z]=void 0}for(var Q in v)if(v.hasOwnProperty(Q))try{delete window[Q]}catch{window[Q]=void 0}t.instance=null}},this._registeredMethods.init.forEach(function(J){J!==void 0&&J.call(this)},this),this._setupPromisePreloads();var L=this._createFriendlyGlobalFunctionBinder();if(i)i(this),t._checkForUserDefinedFunctions(this);else{for(var U in this._isGlobal=!0,t.instance=this,t.prototype)if(typeof t.prototype[U]=="function"){var O=U.substring(2);this._events.hasOwnProperty(O)||(Math.hasOwnProperty(U)&&Math[U]===t.prototype[U]?L(U,t.prototype[U]):L(U,t.prototype[U].bind(this)))}else L(U,t.prototype[U]);for(var G in this)this.hasOwnProperty(G)&&L(G,this[G])}for(var V in this._events){var te=this["_on".concat(V)];if(te){var ne=te.bind(this);window.addEventListener(V,ne,{passive:!1}),this._events[V]=ne}}function $(){v._setProperty("focused",!0)}function se(){v._setProperty("focused",!1)}window.addEventListener("focus",$),window.addEventListener("blur",se),this.registerMethod("remove",function(){window.removeEventListener("focus",$),window.removeEventListener("blur",se)}),document.readyState==="complete"?this._start():window.addEventListener("load",this._start.bind(this),!1)}var r,s;return r=t,(s=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=n.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(i,d){t.prototype._preloadMethods.hasOwnProperty(i)||(t.prototype._preloadMethods[i]=d)}},{key:"registerMethod",value:function(i,d){var g=this||t.prototype;g._registeredMethods.hasOwnProperty(i)||(g._registeredMethods[i]=[]),g._registeredMethods[i].push(d)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(i){var d=0<arguments.length&&i!==void 0?i:{},g=d.globalObject||window;return d.log||console.log.bind(console),function(v,x){g[v]=x}}}])&&a(r.prototype,s),t}();for(var l in f.instance=null,f.disableFriendlyErrors=!1,n)f.prototype[l]=n[l];f.VERSION=n.VERSION,f.prototype._preloadMethods={loadJSON:f.prototype,loadImage:f.prototype,loadStrings:f.prototype,loadXML:f.prototype,loadBytes:f.prototype,loadTable:f.prototype,loadFont:f.prototype,loadModel:f.prototype,loadShader:f.prototype},f.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},f.prototype._registeredPreloadMethods={};var o=f;y.default=o},{"./constants":253,"./shim":275,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229}],265:[function(e,b,y){Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("./main"))&&p.__esModule?p:{default:p};n.default.Element=function(a,f){this.elt=a,this._pInst=this._pixelsState=f,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},n.default.Element.prototype.parent=function(a){return a===void 0?this.elt.parentNode:(typeof a=="string"?(a[0]==="#"&&(a=a.substring(1)),a=document.getElementById(a)):a instanceof n.default.Element&&(a=a.elt),a.appendChild(this.elt),this)},n.default.Element.prototype.id=function(a){return a===void 0?this.elt.id:(this.elt.id=a,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},n.default.Element.prototype.class=function(a){return a===void 0?this.elt.className:(this.elt.className=a,this)},n.default.Element.prototype.mousePressed=function(a){return n.default.Element._adjustListener("mousedown",function(f){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(f),a.call(this,f)},this),this},n.default.Element.prototype.doubleClicked=function(a){return n.default.Element._adjustListener("dblclick",a,this),this},n.default.Element.prototype.mouseWheel=function(a){return n.default.Element._adjustListener("wheel",a,this),this},n.default.Element.prototype.mouseReleased=function(a){return n.default.Element._adjustListener("mouseup",a,this),this},n.default.Element.prototype.mouseClicked=function(a){return n.default.Element._adjustListener("click",a,this),this},n.default.Element.prototype.mouseMoved=function(a){return n.default.Element._adjustListener("mousemove",a,this),this},n.default.Element.prototype.mouseOver=function(a){return n.default.Element._adjustListener("mouseover",a,this),this},n.default.Element.prototype.mouseOut=function(a){return n.default.Element._adjustListener("mouseout",a,this),this},n.default.Element.prototype.touchStarted=function(a){return n.default.Element._adjustListener("touchstart",a,this),this},n.default.Element.prototype.touchMoved=function(a){return n.default.Element._adjustListener("touchmove",a,this),this},n.default.Element.prototype.touchEnded=function(a){return n.default.Element._adjustListener("touchend",a,this),this},n.default.Element.prototype.dragOver=function(a){return n.default.Element._adjustListener("dragover",a,this),this},n.default.Element.prototype.dragLeave=function(a){return n.default.Element._adjustListener("dragleave",a,this),this},n.default.Element._adjustListener=function(a,f,l){return f===!1?n.default.Element._detachListener(a,l):n.default.Element._attachListener(a,f,l),this},n.default.Element._attachListener=function(a,f,l){l._events[a]&&n.default.Element._detachListener(a,l);var o=f.bind(l);l.elt.addEventListener(a,o,!1),l._events[a]=o},n.default.Element._detachListener=function(a,f){var l=f._events[a];f.elt.removeEventListener(a,l,!1),f._events[a]=null},n.default.Element.prototype._setProperty=function(a,f){this[a]=f};var h=n.default.Element;y.default=h},{"./main":264}],266:[function(e,b,y){function p(o){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(o)}e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.splice"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n,h=(n=e("./main"))&&n.__esModule?n:{default:n},a=function(o){if(o&&o.__esModule)return o;if(o===null||p(o)!=="object"&&typeof o!="function")return{default:o};var t=f();if(t&&t.has(o))return t.get(o);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in o)if(Object.prototype.hasOwnProperty.call(o,i)){var d=s?Object.getOwnPropertyDescriptor(o,i):null;d&&(d.get||d.set)?Object.defineProperty(r,i,d):r[i]=o[i]}return r.default=o,t&&t.set(o,r),r}(e("./constants"));function f(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return f=function(){return o},o}h.default.Graphics=function(o,t,r,s){var i=r||a.P2D;this.canvas=document.createElement("canvas");var d=s._userNode||document.body;for(var g in d.appendChild(this.canvas),h.default.Element.call(this,this.canvas,s),h.default.prototype)this[g]||(typeof h.default.prototype[g]=="function"?this[g]=h.default.prototype[g].bind(this):this[g]=h.default.prototype[g]);return h.default.prototype._initializeInstanceVariables.apply(this),this.width=o,this.height=t,this._pixelDensity=s._pixelDensity,i===a.WEBGL?this._renderer=new h.default.RendererGL(this.canvas,this,!1):this._renderer=new h.default.Renderer2D(this.canvas,this,!1),s._elements.push(this),Object.defineProperty(this,"deltaTime",{get:function(){return this._pInst.deltaTime}}),this._renderer.resize(o,t),this._renderer._applyDefaults(),this},h.default.Graphics.prototype=Object.create(h.default.Element.prototype),h.default.Graphics.prototype.reset=function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()},h.default.Graphics.prototype.remove=function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var o=this._pInst._elements.indexOf(this);for(var t in o!==-1&&this._pInst._elements.splice(o,1),this._events)this.elt.removeEventListener(t,this._events[t])};var l=h.default.Graphics;y.default=l},{"./constants":253,"./main":264,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.splice":164}],267:[function(e,b,y){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("./main"))&&p.__esModule?p:{default:p},h=function(t){if(t&&t.__esModule)return t;if(t===null||f(t)!=="object"&&typeof t!="function")return{default:t};var r=a();if(r&&r.has(t))return r.get(t);var s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in t)if(Object.prototype.hasOwnProperty.call(t,d)){var g=i?Object.getOwnPropertyDescriptor(t,d):null;g&&(g.get||g.set)?Object.defineProperty(s,d,g):s[d]=t[d]}return s.default=t,r&&r.set(t,s),s}(e("../core/constants"));function a(){if(typeof WeakMap!="function")return null;var t=new WeakMap;return a=function(){return t},t}function f(t){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(t)}function l(t){var r=0,s=0;if(t.offsetParent)for(;r+=t.offsetLeft,s+=t.offsetTop,t=t.offsetParent;);else r+=t.offsetLeft,s+=t.offsetTop;return[r,s]}n.default.Renderer=function(t,r,s){n.default.Element.call(this,t,r),this.canvas=t,this._pixelsState=r,s?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=h.NORMAL,this._textAscent=null,this._textDescent=null,this._textAlign=h.LEFT,this._textBaseline=h.BASELINE,this._textWrap=h.WORD,this._rectMode=h.CORNER,this._ellipseMode=h.CENTER,this._curveTightness=0,this._imageMode=h.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._leadingSet=!1},n.default.Renderer.prototype=Object.create(n.default.Element.prototype),n.default.Renderer.prototype.push=function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}},n.default.Renderer.prototype.pop=function(t){t.properties&&Object.assign(this,t.properties)},n.default.Renderer.prototype.resize=function(t,r){this.width=t,this.height=r,this.elt.width=t*this._pInst._pixelDensity,this.elt.height=r*this._pInst._pixelDensity,this.elt.style.width="".concat(t,"px"),this.elt.style.height="".concat(r,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},n.default.Renderer.prototype.get=function(t,r,s,i){var d=this._pixelsState,g=d._pixelDensity,v=this.canvas;if(t===void 0&&r===void 0)t=r=0,s=d.width,i=d.height;else if(t*=g,r*=g,s===void 0&&i===void 0)return t<0||r<0||t>=v.width||r>=v.height?[0,0,0,0]:this._getPixel(t,r);var x=new n.default.Image(s,i);return x.canvas.getContext("2d").drawImage(v,t,r,s*g,i*g,0,0,s,i),x},n.default.Renderer.prototype.textLeading=function(t){return typeof t=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",t),this._pInst):this._textLeading},n.default.Renderer.prototype.textSize=function(t){return typeof t=="number"?(this._setProperty("_textSize",t),this._leadingSet||this._setProperty("_textLeading",t*h._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},n.default.Renderer.prototype.textStyle=function(t){return t?(t!==h.NORMAL&&t!==h.ITALIC&&t!==h.BOLD&&t!==h.BOLDITALIC||this._setProperty("_textStyle",t),this._applyTextProperties()):this._textStyle},n.default.Renderer.prototype.textAscent=function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent},n.default.Renderer.prototype.textDescent=function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent},n.default.Renderer.prototype.textAlign=function(t,r){return t!==void 0?(this._setProperty("_textAlign",t),r!==void 0&&this._setProperty("_textBaseline",r),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}},n.default.Renderer.prototype.textWrap=function(t){return this._setProperty("_textWrap",t),this._textWrap},n.default.Renderer.prototype.text=function(t,r,s,i,d){var g,v,x,S,E,M,D,I=this._pInst,R=this._textWrap,L=Number.MAX_VALUE;if((this._doFill||this._doStroke)&&t!==void 0){if(typeof t!="string"&&(t=t.toString()),g=(t=t.replace(/(\t)/g,"  ")).split(`
`),i!==void 0){switch(this._rectMode===h.CENTER&&(r-=i/2),this._textAlign){case h.CENTER:r+=i/2;break;case h.RIGHT:r+=i}var U=!1;if(d!==void 0){switch(this._rectMode===h.CENTER&&(s-=d/2),this._textBaseline){case h.BOTTOM:D=s+d,s=Math.max(D,s);break;case h.CENTER:D=s+d/2,s=Math.max(D,s);break;case h.BASELINE:U=!0,this._textBaseline=h.TOP}L=s+d-I.textAscent()}if(R===h.WORD){for(var O=[],G=0;G<g.length;G++){v="",E=g[G].split(" ");for(var V=0;V<E.length;V++)x="".concat(v+E[V])+" ",v=i<(S=this.textWidth(x))&&0<v.length?(O.push(v),"".concat(E[V])+" "):x;O.push(v)}var te=0,ne=I.textAlign().vertical;ne===h.CENTER?te=(O.length-1)*I.textLeading()/2:ne===h.BOTTOM&&(te=(O.length-1)*I.textLeading());for(var $=0;$<g.length;$++){v="",E=g[$].split(" ");for(var se=0;se<E.length;se++)x="".concat(v+E[se])+" ",i<(S=this.textWidth(x))&&0<v.length?(this._renderText(I,v.trim(),r,s-te,L),v="".concat(E[se])+" ",s+=I.textLeading()):v=x;this._renderText(I,v.trim(),r,s-te,L),s+=I.textLeading(),U&&(this._textBaseline=h.BASELINE)}}else{for(var J=[],ue=0;ue<g.length;ue++){v="",M=g[ue].split("");for(var me=0;me<M.length;me++)x="".concat(v+M[me]),(S=this.textWidth(x))<=i?v+=M[me]:i<S&&0<v.length&&(J.push(v),v="".concat(M[me]))}J.push(v);var _e=0,he=I.textAlign().vertical;he===h.CENTER?_e=(J.length-1)*I.textLeading()/2:he===h.BOTTOM&&(_e=(J.length-1)*I.textLeading());for(var Re=0;Re<g.length;Re++){v="",M=g[Re].split("");for(var ve=0;ve<M.length;ve++)x="".concat(v+M[ve]),(S=this.textWidth(x))<=i?v+=M[ve]:i<S&&0<v.length&&(this._renderText(I,v.trim(),r,s-_e,L),s+=I.textLeading(),v="".concat(M[ve]))}this._renderText(I,v.trim(),r,s-_e,L),s+=I.textLeading(),U&&(this._textBaseline=h.BASELINE)}}else{var ye=0,P=I.textAlign().vertical;P===h.CENTER?ye=(g.length-1)*I.textLeading()/2:P===h.BOTTOM&&(ye=(g.length-1)*I.textLeading());for(var N=0;N<g.length;N++)this._renderText(I,g[N],r,s-ye,L),s+=I.textLeading()}return I}},n.default.Renderer.prototype._applyDefaults=function(){return this},n.default.Renderer.prototype._isOpenType=function(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return f(t)==="object"&&t.font&&t.font.supported},n.default.Renderer.prototype._updateTextMetrics=function(){if(this._isOpenType())return this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent()),this;var t=document.createElement("span");t.style.fontFamily=this._textFont,t.style.fontSize="".concat(this._textSize,"px"),t.innerHTML="ABCjgq|";var r=document.createElement("div");r.style.display="inline-block",r.style.width="1px",r.style.height="0px";var s=document.createElement("div");s.appendChild(t),s.appendChild(r),s.style.height="0px",s.style.overflow="hidden",document.body.appendChild(s),r.style.verticalAlign="baseline";var i=l(r),d=l(t),g=i[1]-d[1];r.style.verticalAlign="bottom",i=l(r),d=l(t);var v=i[1]-d[1]-g;return document.body.removeChild(s),this._setProperty("_textAscent",g),this._setProperty("_textDescent",v),this};var o=n.default.Renderer;y.default=o},{"../core/constants":253,"./main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":170,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],268:[function(e,b,y){function p(r){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(r)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n=l(e("./main")),h=function(r){if(r&&r.__esModule)return r;if(r===null||p(r)!=="object"&&typeof r!="function")return{default:r};var s=f();if(s&&s.has(r))return s.get(r);var i={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in r)if(Object.prototype.hasOwnProperty.call(r,g)){var v=d?Object.getOwnPropertyDescriptor(r,g):null;v&&(v.get||v.set)?Object.defineProperty(i,g,v):i[g]=r[g]}return i.default=r,s&&s.set(r,i),i}(e("./constants")),a=l(e("../image/filters"));function f(){if(typeof WeakMap!="function")return null;var r=new WeakMap;return f=function(){return r},r}function l(r){return r&&r.__esModule?r:{default:r}}e("./p5.Renderer");var o="rgba(0,0,0,0)";n.default.Renderer2D=function(r,s,i){return n.default.Renderer.call(this,r,s,i),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},n.default.Renderer2D.prototype=Object.create(n.default.Renderer.prototype),n.default.Renderer2D.prototype._applyDefaults=function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=h.BLEND,this._setFill(h._DEFAULT_FILL),this._setStroke(h._DEFAULT_STROKE),this.drawingContext.lineCap=h.ROUND,this.drawingContext.font="normal 12px sans-serif"},n.default.Renderer2D.prototype.resize=function(r,s){n.default.Renderer.prototype.resize.call(this,r,s),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},n.default.Renderer2D.prototype.background=function(){if(this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof n.default.Image)if(0<=(arguments.length<=1?void 0:arguments[1])){var r=arguments.length<=0?void 0:arguments[0];this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(r,0,0,this.width,this.height)}else this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height);else{var s,i=this._getFill(),d=(s=this._pInst).color.apply(s,arguments);this._pInst._addAccsOutput()&&this._pInst._accsBackground(d.levels);var g=d.toString();this._setFill(g),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(i),this._isErasing&&this._pInst.erase()}this.drawingContext.restore()},n.default.Renderer2D.prototype.clear=function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()},n.default.Renderer2D.prototype.fill=function(){var r,s=(r=this._pInst).color.apply(r,arguments);this._setFill(s.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",s.levels)},n.default.Renderer2D.prototype.stroke=function(){var r,s=(r=this._pInst).color.apply(r,arguments);this._setStroke(s.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",s.levels)},n.default.Renderer2D.prototype.erase=function(r,s){if(!this._isErasing){this._cachedFillStyle=this.drawingContext.fillStyle;var i=this._pInst.color(255,r).toString();this.drawingContext.fillStyle=i,this._cachedStrokeStyle=this.drawingContext.strokeStyle;var d=this._pInst.color(255,s).toString();this.drawingContext.strokeStyle=d;var g=this._cachedBlendMode;this.blendMode(h.REMOVE),this._cachedBlendMode=g,this._isErasing=!0}},n.default.Renderer2D.prototype.noErase=function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)},n.default.Renderer2D.prototype.image=function(r,s,i,d,g,v,x,S,E){var M;r.gifProperties&&r._animateGif(this._pInst);try{this._tint&&(n.default.MediaElement&&r instanceof n.default.MediaElement&&r.loadPixels(),r.canvas&&(M=this._getTintedImageCanvas(r))),M=M||r.canvas||r.elt;var D=1;r.width&&0<r.width&&(D=M.width/r.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(M,D*s,D*i,D*d,D*g,v,x,S,E),this._isErasing&&this._pInst.erase()}catch(I){if(I.name!=="NS_ERROR_NOT_AVAILABLE")throw I}},n.default.Renderer2D.prototype._getTintedImageCanvas=function(r){if(!r.canvas)return r;var s=a.default._toPixels(r.canvas),i=document.createElement("canvas");i.width=r.canvas.width,i.height=r.canvas.height;for(var d=i.getContext("2d"),g=d.createImageData(r.canvas.width,r.canvas.height),v=g.data,x=0;x<s.length;x+=4){var S=s[x],E=s[x+1],M=s[x+2],D=s[x+3];v[x]=S*this._tint[0]/255,v[x+1]=E*this._tint[1]/255,v[x+2]=M*this._tint[2]/255,v[x+3]=D*this._tint[3]/255}return d.putImageData(g,0,0),i},n.default.Renderer2D.prototype.blendMode=function(r){if(r===h.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(r!==h.BLEND&&r!==h.REMOVE&&r!==h.DARKEST&&r!==h.LIGHTEST&&r!==h.DIFFERENCE&&r!==h.MULTIPLY&&r!==h.EXCLUSION&&r!==h.SCREEN&&r!==h.REPLACE&&r!==h.OVERLAY&&r!==h.HARD_LIGHT&&r!==h.SOFT_LIGHT&&r!==h.DODGE&&r!==h.BURN&&r!==h.ADD)throw new Error("Mode ".concat(r," not recognized."));this._cachedBlendMode=r,this.drawingContext.globalCompositeOperation=r}},n.default.Renderer2D.prototype.blend=function(){for(var r=this.drawingContext.globalCompositeOperation,s=arguments.length,i=new Array(s),d=0;d<s;d++)i[d]=arguments[d];var g=i[i.length-1],v=Array.prototype.slice.call(i,0,i.length-1);this.drawingContext.globalCompositeOperation=g,n.default.prototype.copy.apply(this,v),this.drawingContext.globalCompositeOperation=r},n.default.Renderer2D.prototype._getPixel=function(r,s){var i;return[(i=this.drawingContext.getImageData(r,s,1,1).data)[0],i[1],i[2],i[3]]},n.default.Renderer2D.prototype.loadPixels=function(){var r=this._pixelsState,s=r._pixelDensity,i=this.width*s,d=this.height*s,g=this.drawingContext.getImageData(0,0,i,d);r._setProperty("imageData",g),r._setProperty("pixels",g.data)},n.default.Renderer2D.prototype.set=function(r,s,i){r=Math.floor(r),s=Math.floor(s);var d=this._pixelsState;if(i instanceof n.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(d._pixelDensity,d._pixelDensity),this.drawingContext.clearRect(r,s,i.width,i.height),this.drawingContext.drawImage(i.canvas,r,s),this.drawingContext.restore();else{var g=0,v=0,x=0,S=0,E=4*(s*d._pixelDensity*(this.width*d._pixelDensity)+r*d._pixelDensity);if(d.imageData||d.loadPixels.call(d),typeof i=="number")E<d.pixels.length&&(x=v=g=i,S=255);else if(i instanceof Array){if(i.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");E<d.pixels.length&&(g=i[0],v=i[1],x=i[2],S=i[3])}else i instanceof n.default.Color&&E<d.pixels.length&&(g=i.levels[0],v=i.levels[1],x=i.levels[2],S=i.levels[3]);for(var M=0;M<d._pixelDensity;M++)for(var D=0;D<d._pixelDensity;D++)E=4*((s*d._pixelDensity+D)*this.width*d._pixelDensity+(r*d._pixelDensity+M)),d.pixels[E]=g,d.pixels[E+1]=v,d.pixels[E+2]=x,d.pixels[E+3]=S}},n.default.Renderer2D.prototype.updatePixels=function(r,s,i,d){var g=this._pixelsState,v=g._pixelDensity;r===void 0&&s===void 0&&i===void 0&&d===void 0&&(s=r=0,i=this.width,d=this.height),r*=v,s*=v,i*=v,d*=v,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=g.imageData),this.drawingContext.putImageData(g.imageData,r,s,0,0,i,d)},n.default.Renderer2D.prototype._acuteArcToBezier=function(r,s){var i=s/2,d=Math.cos(i),g=Math.sin(i),v=1/Math.tan(i),x=r+i,S=Math.cos(x),E=Math.sin(x),M=(4-d)/3,D=g+(d-M)*v;return{ax:Math.cos(r).toFixed(7),ay:Math.sin(r).toFixed(7),bx:(M*S+D*E).toFixed(7),by:(M*E-D*S).toFixed(7),cx:(M*S-D*E).toFixed(7),cy:(M*E+D*S).toFixed(7),dx:Math.cos(r+s).toFixed(7),dy:Math.sin(r+s).toFixed(7)}},n.default.Renderer2D.prototype.arc=function(r,s,i,d,g,v,x){var S=this.drawingContext,E=i/2,M=d/2,D=0,I=[];for(r+=E,s+=M;1e-5<=v-g;)D=Math.min(v-g,h.HALF_PI),I.push(this._acuteArcToBezier(g,D)),g+=D;return this._doFill&&(S.beginPath(),I.forEach(function(R,L){L===0&&S.moveTo(r+R.ax*E,s+R.ay*M),S.bezierCurveTo(r+R.bx*E,s+R.by*M,r+R.cx*E,s+R.cy*M,r+R.dx*E,s+R.dy*M)}),x!==h.PIE&&x!=null||S.lineTo(r,s),S.closePath(),S.fill()),this._doStroke&&(S.beginPath(),I.forEach(function(R,L){L===0&&S.moveTo(r+R.ax*E,s+R.ay*M),S.bezierCurveTo(r+R.bx*E,s+R.by*M,r+R.cx*E,s+R.cy*M,r+R.dx*E,s+R.dy*M)}),x===h.PIE?(S.lineTo(r,s),S.closePath()):x===h.CHORD&&S.closePath(),S.stroke()),this},n.default.Renderer2D.prototype.ellipse=function(r){var s=this.drawingContext,i=this._doFill,d=this._doStroke,g=parseFloat(r[0]),v=parseFloat(r[1]),x=parseFloat(r[2]),S=parseFloat(r[3]);if(i&&!d){if(this._getFill()===o)return this}else if(!i&&d&&this._getStroke()===o)return this;var E=x/2*.5522847498,M=S/2*.5522847498,D=g+x,I=v+S,R=g+x/2,L=v+S/2;s.beginPath(),s.moveTo(g,L),s.bezierCurveTo(g,L-M,R-E,v,R,v),s.bezierCurveTo(R+E,v,D,L-M,D,L),s.bezierCurveTo(D,L+M,R+E,I,R,I),s.bezierCurveTo(R-E,I,g,L+M,g,L),i&&s.fill(),d&&s.stroke()},n.default.Renderer2D.prototype.line=function(r,s,i,d){var g=this.drawingContext;return this._doStroke&&(this._getStroke()===o||(g.beginPath(),g.moveTo(r,s),g.lineTo(i,d),g.stroke())),this},n.default.Renderer2D.prototype.point=function(r,s){var i=this.drawingContext;if(!this._doStroke)return this;if(this._getStroke()===o)return this;var d=this._getStroke(),g=this._getFill();this._setFill(d),i.beginPath(),i.arc(r,s,i.lineWidth/2,0,h.TWO_PI,!1),i.fill(),this._setFill(g)},n.default.Renderer2D.prototype.quad=function(r,s,i,d,g,v,x,S){var E=this.drawingContext,M=this._doFill,D=this._doStroke;if(M&&!D){if(this._getFill()===o)return this}else if(!M&&D&&this._getStroke()===o)return this;return E.beginPath(),E.moveTo(r,s),E.lineTo(i,d),E.lineTo(g,v),E.lineTo(x,S),E.closePath(),M&&E.fill(),D&&E.stroke(),this},n.default.Renderer2D.prototype.rect=function(r){var s=r[0],i=r[1],d=r[2],g=r[3],v=r[4],x=r[5],S=r[6],E=r[7],M=this.drawingContext,D=this._doFill,I=this._doStroke;if(D&&!I){if(this._getFill()===o)return this}else if(!D&&I&&this._getStroke()===o)return this;if(M.beginPath(),v===void 0)M.rect(s,i,d,g);else{x===void 0&&(x=v),S===void 0&&(S=x),E===void 0&&(E=S);var R=Math.abs(d),L=Math.abs(g),U=R/2,O=L/2;R<2*v&&(v=U),L<2*v&&(v=O),R<2*x&&(x=U),L<2*x&&(x=O),R<2*S&&(S=U),L<2*S&&(S=O),R<2*E&&(E=U),L<2*E&&(E=O),M.beginPath(),M.moveTo(s+v,i),M.arcTo(s+d,i,s+d,i+g,x),M.arcTo(s+d,i+g,s,i+g,S),M.arcTo(s,i+g,s,i,E),M.arcTo(s,i,s+d,i,v),M.closePath()}return this._doFill&&M.fill(),this._doStroke&&M.stroke(),this},n.default.Renderer2D.prototype.triangle=function(r){var s=this.drawingContext,i=this._doFill,d=this._doStroke,g=r[0],v=r[1],x=r[2],S=r[3],E=r[4],M=r[5];if(i&&!d){if(this._getFill()===o)return this}else if(!i&&d&&this._getStroke()===o)return this;s.beginPath(),s.moveTo(g,v),s.lineTo(x,S),s.lineTo(E,M),s.closePath(),i&&s.fill(),d&&s.stroke()},n.default.Renderer2D.prototype.endShape=function(r,s,i,d,g,v,x){if(s.length===0)return this;if(!this._doStroke&&!this._doFill)return this;var S,E,M,D=r===h.CLOSE;D&&!v&&s.push(s[0]);var I=s.length;if(!i||x!==h.POLYGON&&x!==null)if(!d||x!==h.POLYGON&&x!==null)if(!g||x!==h.POLYGON&&x!==null)if(x===h.POINTS)for(E=0;E<I;E++)S=s[E],this._doStroke&&this._pInst.stroke(S[6]),this._pInst.point(S[0],S[1]);else if(x===h.LINES)for(E=0;E+1<I;E+=2)S=s[E],this._doStroke&&this._pInst.stroke(s[E+1][6]),this._pInst.line(S[0],S[1],s[E+1][0],s[E+1][1]);else if(x===h.TRIANGLES)for(E=0;E+2<I;E+=3)S=s[E],this.drawingContext.beginPath(),this.drawingContext.moveTo(S[0],S[1]),this.drawingContext.lineTo(s[E+1][0],s[E+1][1]),this.drawingContext.lineTo(s[E+2][0],s[E+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(s[E+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(s[E+2][6]),this.drawingContext.stroke());else if(x===h.TRIANGLE_STRIP)for(E=0;E+1<I;E++)S=s[E],this.drawingContext.beginPath(),this.drawingContext.moveTo(s[E+1][0],s[E+1][1]),this.drawingContext.lineTo(S[0],S[1]),this._doStroke&&this._pInst.stroke(s[E+1][6]),this._doFill&&this._pInst.fill(s[E+1][5]),E+2<I&&(this.drawingContext.lineTo(s[E+2][0],s[E+2][1]),this._doStroke&&this._pInst.stroke(s[E+2][6]),this._doFill&&this._pInst.fill(s[E+2][5])),this._doFillStrokeClose(D);else if(x===h.TRIANGLE_FAN){if(2<I){for(this.drawingContext.beginPath(),E=2;E<I;E++)S=s[E],this.drawingContext.moveTo(s[0][0],s[0][1]),this.drawingContext.lineTo(s[E-1][0],s[E-1][1]),this.drawingContext.lineTo(S[0],S[1]),this.drawingContext.lineTo(s[0][0],s[0][1]),E<I-1&&(this._doFill&&S[5]!==s[E+1][5]||this._doStroke&&S[6]!==s[E+1][6])&&(this._doFill&&(this._pInst.fill(S[5]),this.drawingContext.fill(),this._pInst.fill(s[E+1][5])),this._doStroke&&(this._pInst.stroke(S[6]),this.drawingContext.stroke(),this._pInst.stroke(s[E+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(D)}}else if(x===h.QUADS)for(E=0;E+3<I;E+=4){for(S=s[E],this.drawingContext.beginPath(),this.drawingContext.moveTo(S[0],S[1]),M=1;M<4;M++)this.drawingContext.lineTo(s[E+M][0],s[E+M][1]);this.drawingContext.lineTo(S[0],S[1]),this._doFill&&this._pInst.fill(s[E+3][5]),this._doStroke&&this._pInst.stroke(s[E+3][6]),this._doFillStrokeClose(D)}else if(x===h.QUAD_STRIP){if(3<I)for(E=0;E+1<I;E+=2)S=s[E],this.drawingContext.beginPath(),E+3<I?(this.drawingContext.moveTo(s[E+2][0],s[E+2][1]),this.drawingContext.lineTo(S[0],S[1]),this.drawingContext.lineTo(s[E+1][0],s[E+1][1]),this.drawingContext.lineTo(s[E+3][0],s[E+3][1]),this._doFill&&this._pInst.fill(s[E+3][5]),this._doStroke&&this._pInst.stroke(s[E+3][6])):(this.drawingContext.moveTo(S[0],S[1]),this.drawingContext.lineTo(s[E+1][0],s[E+1][1])),this._doFillStrokeClose(D)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(s[0][0],s[0][1]),E=1;E<I;E++)(S=s[E]).isVert&&(S.moveTo?this.drawingContext.moveTo(S[0],S[1]):this.drawingContext.lineTo(S[0],S[1]));this._doFillStrokeClose(D)}else{for(this.drawingContext.beginPath(),E=0;E<I;E++)s[E].isVert?s[E].moveTo?this.drawingContext.moveTo(s[E][0],s[E][1]):this.drawingContext.lineTo(s[E][0],s[E][1]):this.drawingContext.quadraticCurveTo(s[E][0],s[E][1],s[E][2],s[E][3]);this._doFillStrokeClose(D)}else{for(this.drawingContext.beginPath(),E=0;E<I;E++)s[E].isVert?s[E].moveTo?this.drawingContext.moveTo(s[E][0],s[E][1]):this.drawingContext.lineTo(s[E][0],s[E][1]):this.drawingContext.bezierCurveTo(s[E][0],s[E][1],s[E][2],s[E][3],s[E][4],s[E][5]);this._doFillStrokeClose(D)}else if(3<I){var R=[],L=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(s[1][0],s[1][1]),E=1;E+2<I;E++)S=s[E],R[0]=[S[0],S[1]],R[1]=[S[0]+(L*s[E+1][0]-L*s[E-1][0])/6,S[1]+(L*s[E+1][1]-L*s[E-1][1])/6],R[2]=[s[E+1][0]+(L*s[E][0]-L*s[E+2][0])/6,s[E+1][1]+(L*s[E][1]-L*s[E+2][1])/6],R[3]=[s[E+1][0],s[E+1][1]],this.drawingContext.bezierCurveTo(R[1][0],R[1][1],R[2][0],R[2][1],R[3][0],R[3][1]);D&&this.drawingContext.lineTo(s[E+1][0],s[E+1][1]),this._doFillStrokeClose(D)}return v=g=d=i=!1,D&&s.pop(),this},n.default.Renderer2D.prototype.strokeCap=function(r){return r!==h.ROUND&&r!==h.SQUARE&&r!==h.PROJECT||(this.drawingContext.lineCap=r),this},n.default.Renderer2D.prototype.strokeJoin=function(r){return r!==h.ROUND&&r!==h.BEVEL&&r!==h.MITER||(this.drawingContext.lineJoin=r),this},n.default.Renderer2D.prototype.strokeWeight=function(r){return this.drawingContext.lineWidth=r===void 0||r===0?1e-4:r,this},n.default.Renderer2D.prototype._getFill=function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle},n.default.Renderer2D.prototype._setFill=function(r){r!==this._cachedFillStyle&&(this.drawingContext.fillStyle=r,this._cachedFillStyle=r)},n.default.Renderer2D.prototype._getStroke=function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle},n.default.Renderer2D.prototype._setStroke=function(r){r!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=r,this._cachedStrokeStyle=r)},n.default.Renderer2D.prototype.bezier=function(r,s,i,d,g,v,x,S){return this._pInst.beginShape(),this._pInst.vertex(r,s),this._pInst.bezierVertex(i,d,g,v,x,S),this._pInst.endShape(),this},n.default.Renderer2D.prototype.curve=function(r,s,i,d,g,v,x,S){return this._pInst.beginShape(),this._pInst.curveVertex(r,s),this._pInst.curveVertex(i,d),this._pInst.curveVertex(g,v),this._pInst.curveVertex(x,S),this._pInst.endShape(),this},n.default.Renderer2D.prototype._doFillStrokeClose=function(r){r&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()},n.default.Renderer2D.prototype.applyMatrix=function(r,s,i,d,g,v){this.drawingContext.transform(r,s,i,d,g,v)},n.default.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},n.default.Renderer2D.prototype.rotate=function(r){this.drawingContext.rotate(r)},n.default.Renderer2D.prototype.scale=function(r,s){return this.drawingContext.scale(r,s),this},n.default.Renderer2D.prototype.translate=function(r,s){return r instanceof n.default.Vector&&(s=r.y,r=r.x),this.drawingContext.translate(r,s),this},n.default.Renderer2D.prototype.text=function(r,s,i,d,g){var v;d!==void 0&&this.drawingContext.textBaseline===h.BASELINE&&(v=!0,this.drawingContext.textBaseline=h.TOP);var x=n.default.Renderer.prototype.text.apply(this,arguments);return v&&(this.drawingContext.textBaseline=h.BASELINE),x},n.default.Renderer2D.prototype._renderText=function(r,s,i,d,g){if(!(g<=d))return r.push(),this._isOpenType()?this._textFont._renderPath(s,i,d,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(s,i,d),this._doFill&&(this._fillSet||this._setFill(h._DEFAULT_TEXT_FILL),this.drawingContext.fillText(s,i,d))),r.pop(),r},n.default.Renderer2D.prototype.textWidth=function(r){return this._isOpenType()?this._textFont._textWidth(r,this._textSize):this.drawingContext.measureText(r).width},n.default.Renderer2D.prototype._applyTextProperties=function(){var r,s=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),r=this._textFont,this._isOpenType()&&(r=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(r||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===h.CENTER?this.drawingContext.textBaseline=h._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,s},n.default.Renderer2D.prototype.push=function(){return this.drawingContext.save(),n.default.Renderer.prototype.push.apply(this)},n.default.Renderer2D.prototype.pop=function(r){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,n.default.Renderer.prototype.pop.call(this,r)};var t=n.default.Renderer2D;y.default=t},{"../image/filters":285,"./constants":253,"./main":264,"./p5.Renderer":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":166,"core-js/modules/es.number.to-fixed":172,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182}],269:[function(e,b,y){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var p,n=(p=e("./main"))&&p.__esModule?p:{default:p};n.default.prototype._promisePreloads=[];var h=!(n.default.prototype.registerPromisePreload=function(f){n.default.prototype._promisePreloads.push(f)});n.default.prototype._setupPromisePreloads=function(){var f=!0,l=!1,o=void 0;try{for(var t,r=this._promisePreloads[Symbol.iterator]();!(f=(t=r.next()).done);f=!0){var s=t.value,i=this,d=s.method,g=s.addCallbacks,v=s.legacyPreloadSetup,x=s.target||this,S=x[d].bind(x);if(x===n.default.prototype){if(h)continue;i=null,S=x[d]}x[d]=this._wrapPromisePreload(i,S,g),v&&(x[v.method]=this._legacyPreloadGenerator(i,v,x[d]))}}catch(E){l=!0,o=E}finally{try{f||r.return==null||r.return()}finally{if(l)throw o}}h=!0},n.default.prototype._wrapPromisePreload=function(f,l,o){var t=function(){var r=this;this._incrementPreload();for(var s=null,i=null,d=arguments.length,g=new Array(d),v=0;v<d;v++)g[v]=arguments[v];if(o)for(var x=g.length-1;0<=x&&!i&&typeof g[x]=="function";x--)i=s,s=g.pop();var S=Promise.resolve(l.apply(this,g));return s&&S.then(s),i&&S.catch(i),S.then(function(){return r._decrementPreload()}),S};return f&&(t=t.bind(f)),t};function a(){return{}}n.default.prototype._legacyPreloadGenerator=function(f,l,o){var t=l.createBaseObject||a,r=function(){var s=this;this._incrementPreload();var i=t.apply(this,arguments);return o.apply(this,arguments).then(function(d){Object.assign(i,d),s._decrementPreload()}),i};return f&&(r=r.bind(f)),r}},{"./main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],270:[function(e,b,y){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("./main"))&&p.__esModule?p:{default:p},h=function(t){if(t&&t.__esModule)return t;if(t===null||f(t)!=="object"&&typeof t!="function")return{default:t};var r=a();if(r&&r.has(t))return r.get(t);var s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in t)if(Object.prototype.hasOwnProperty.call(t,d)){var g=i?Object.getOwnPropertyDescriptor(t,d):null;g&&(g.get||g.set)?Object.defineProperty(s,d,g):s[d]=t[d]}return s.default=t,r&&r.set(t,s),s}(e("./constants"));function a(){if(typeof WeakMap!="function")return null;var t=new WeakMap;return a=function(){return t},t}function f(t){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(t)}e("./p5.Graphics"),e("./p5.Renderer2D"),e("../webgl/p5.RendererGL");var l="defaultCanvas0";n.default.prototype.createCanvas=function(t,r,s){n.default._validateParameters("createCanvas",arguments);var i,d=s||h.P2D;if(d===h.WEBGL){if(i=document.getElementById(l)){i.parentNode.removeChild(i);var g=this._renderer;this._elements=this._elements.filter(function(S){return S!==g})}(i=document.createElement("canvas")).id=l,i.classList.add("p5Canvas")}else if(this._defaultGraphicsCreated)i=this.canvas;else{i=document.createElement("canvas");for(var v=0;document.getElementById("defaultCanvas".concat(v));)v++;l="defaultCanvas".concat(v),i.id=l,i.classList.add("p5Canvas")}if(this._setupDone||(i.dataset.hidden=!0,i.style.visibility="hidden"),this._userNode)this._userNode.appendChild(i);else{if(document.getElementsByTagName("main").length===0){var x=document.createElement("main");document.body.appendChild(x)}document.getElementsByTagName("main")[0].appendChild(i)}return d===h.WEBGL?(this._setProperty("_renderer",new n.default.RendererGL(i,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new n.default.Renderer2D(i,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(t,r),this._renderer._applyDefaults(),this._renderer},n.default.prototype.resizeCanvas=function(t,r,s){if(n.default._validateParameters("resizeCanvas",arguments),this._renderer){var i={};for(var d in this.drawingContext){var g=this.drawingContext[d];f(g)!=="object"&&typeof g!="function"&&(i[d]=g)}for(var v in this._renderer.resize(t,r),this.width=t,this.height=r,i)try{this.drawingContext[v]=i[v]}catch{}s||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},n.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},n.default.prototype.createGraphics=function(t,r,s){return n.default._validateParameters("createGraphics",arguments),new n.default.Graphics(t,r,s,this)},n.default.prototype.blendMode=function(t){n.default._validateParameters("blendMode",arguments),t===h.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),t=h.BLEND),this._renderer.blendMode(t)};var o=n.default;y.default=o},{"../webgl/p5.RendererGL":318,"./constants":253,"./main":264,"./p5.Graphics":266,"./p5.Renderer2D":268,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],271:[function(e,b,y){function p(t){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(t)}e("core-js/modules/es.array.slice"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n=l(e("../main")),h=function(t){if(t&&t.__esModule)return t;if(t===null||p(t)!=="object"&&typeof t!="function")return{default:t};var r=f();if(r&&r.has(t))return r.get(t);var s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in t)if(Object.prototype.hasOwnProperty.call(t,d)){var g=i?Object.getOwnPropertyDescriptor(t,d):null;g&&(g.get||g.set)?Object.defineProperty(s,d,g):s[d]=t[d]}return s.default=t,r&&r.set(t,s),s}(e("../constants")),a=l(e("../helpers"));function f(){if(typeof WeakMap!="function")return null;var t=new WeakMap;return f=function(){return t},t}function l(t){return t&&t.__esModule?t:{default:t}}e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),n.default.prototype._normalizeArcAngles=function(t,r,s,i,d){var g;return t-=h.TWO_PI*Math.floor(t/h.TWO_PI),r-=h.TWO_PI*Math.floor(r/h.TWO_PI),g=Math.min(Math.abs(t-r),h.TWO_PI-Math.abs(t-r)),d&&(t=t<=h.HALF_PI?Math.atan(s/i*Math.tan(t)):t>h.HALF_PI&&t<=3*h.HALF_PI?Math.atan(s/i*Math.tan(t))+h.PI:Math.atan(s/i*Math.tan(t))+h.TWO_PI,r=r<=h.HALF_PI?Math.atan(s/i*Math.tan(r)):r>h.HALF_PI&&r<=3*h.HALF_PI?Math.atan(s/i*Math.tan(r))+h.PI:Math.atan(s/i*Math.tan(r))+h.TWO_PI),r<t&&(r+=h.TWO_PI),{start:t,stop:r,correspondToSamePoint:g<1e-5}},n.default.prototype.arc=function(t,r,s,i,d,g,v,x){if(n.default._validateParameters("arc",arguments),!this._renderer._doStroke&&!this._renderer._doFill)return this;if(d===g)return this;d=this._toRadians(d),g=this._toRadians(g),s=Math.abs(s),i=Math.abs(i);var S=a.default.modeAdjust(t,r,s,i,this._renderer._ellipseMode),E=this._normalizeArcAngles(d,g,S.w,S.h,!0);return E.correspondToSamePoint?this._renderer.ellipse([S.x,S.y,S.w,S.h,x]):(this._renderer.arc(S.x,S.y,S.w,S.h,E.start,E.stop,v,x),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[S.x,S.y,S.w,S.h,E.start,E.stop,v])),this},n.default.prototype.ellipse=function(t,r,s,i,d){return n.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},n.default.prototype.circle=function(){n.default._validateParameters("circle",arguments);var t=Array.prototype.slice.call(arguments,0,2);return t.push(arguments[2]),t.push(arguments[2]),this._renderEllipse.apply(this,t)},n.default.prototype._renderEllipse=function(t,r,s,i,d){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;s<0&&(s=Math.abs(s)),i===void 0?i=s:i<0&&(i=Math.abs(i));var g=a.default.modeAdjust(t,r,s,i,this._renderer._ellipseMode);return this._renderer.ellipse([g.x,g.y,g.w,g.h,d]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[g.x,g.y,g.w,g.h]),this},n.default.prototype.line=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var i;return n.default._validateParameters("line",r),this._renderer._doStroke&&(i=this._renderer).line.apply(i,r),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",r),this},n.default.prototype.point=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var i;return n.default._validateParameters("point",r),this._renderer._doStroke&&(r.length===1&&r[0]instanceof n.default.Vector?this._renderer.point.call(this._renderer,r[0].x,r[0].y,r[0].z):((i=this._renderer).point.apply(i,r),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",r))),this},n.default.prototype.quad=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var i;return n.default._validateParameters("quad",r),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&r.length<=12?this._renderer.quad.call(this._renderer,r[0],r[1],0,r[2],r[3],0,r[4],r[5],0,r[6],r[7],0,r[8],r[9]):((i=this._renderer).quad.apply(i,r),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",r))),this},n.default.prototype.rect=function(){return n.default._validateParameters("rect",arguments),this._renderRect.apply(this,arguments)},n.default.prototype.square=function(t,r,s,i,d,g,v){return n.default._validateParameters("square",arguments),this._renderRect.call(this,t,r,s,s,i,d,g,v)},n.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var t=a.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),r=[t.x,t.y,t.w,t.h],s=4;s<arguments.length;s++)r[s]=arguments[s];this._renderer.rect(r),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[t.x,t.y,t.w,t.h])}return this},n.default.prototype.triangle=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return n.default._validateParameters("triangle",r),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(r),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",r),this};var o=n.default;y.default=o},{"../constants":253,"../friendly_errors/fes_core":255,"../friendly_errors/file_errors":256,"../friendly_errors/validate_params":259,"../helpers":260,"../main":264,"core-js/modules/es.array.slice":162}],272:[function(e,b,y){function p(o){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(o)}Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n,h=(n=e("../main"))&&n.__esModule?n:{default:n},a=function(o){if(o&&o.__esModule)return o;if(o===null||p(o)!=="object"&&typeof o!="function")return{default:o};var t=f();if(t&&t.has(o))return t.get(o);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in o)if(Object.prototype.hasOwnProperty.call(o,i)){var d=s?Object.getOwnPropertyDescriptor(o,i):null;d&&(d.get||d.set)?Object.defineProperty(r,i,d):r[i]=o[i]}return r.default=o,t&&t.set(o,r),r}(e("../constants"));function f(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return f=function(){return o},o}h.default.prototype.ellipseMode=function(o){return h.default._validateParameters("ellipseMode",arguments),o!==a.CORNER&&o!==a.CORNERS&&o!==a.RADIUS&&o!==a.CENTER||(this._renderer._ellipseMode=o),this},h.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},h.default.prototype.rectMode=function(o){return h.default._validateParameters("rectMode",arguments),o!==a.CORNER&&o!==a.CORNERS&&o!==a.RADIUS&&o!==a.CENTER||(this._renderer._rectMode=o),this},h.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},h.default.prototype.strokeCap=function(o){return h.default._validateParameters("strokeCap",arguments),o!==a.ROUND&&o!==a.SQUARE&&o!==a.PROJECT||this._renderer.strokeCap(o),this},h.default.prototype.strokeJoin=function(o){return h.default._validateParameters("strokeJoin",arguments),o!==a.ROUND&&o!==a.BEVEL&&o!==a.MITER||this._renderer.strokeJoin(o),this},h.default.prototype.strokeWeight=function(o){return h.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(o),this};var l=h.default;y.default=l},{"../constants":253,"../main":264}],273:[function(e,b,y){Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../main"))&&p.__esModule?p:{default:p};e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),n.default.prototype.bezier=function(){for(var a,f=arguments.length,l=new Array(f),o=0;o<f;o++)l[o]=arguments[o];return n.default._validateParameters("bezier",l),(this._renderer._doStroke||this._renderer._doFill)&&(a=this._renderer).bezier.apply(a,l),this},n.default.prototype.bezierDetail=function(a){return n.default._validateParameters("bezierDetail",arguments),this._bezierDetail=a,this},n.default.prototype.bezierPoint=function(a,f,l,o,t){n.default._validateParameters("bezierPoint",arguments);var r=1-t;return Math.pow(r,3)*a+3*Math.pow(r,2)*t*f+3*r*Math.pow(t,2)*l+Math.pow(t,3)*o},n.default.prototype.bezierTangent=function(a,f,l,o,t){n.default._validateParameters("bezierTangent",arguments);var r=1-t;return 3*o*Math.pow(t,2)-3*l*Math.pow(t,2)+6*l*r*t-6*f*r*t+3*f*Math.pow(r,2)-3*a*Math.pow(r,2)},n.default.prototype.curve=function(){for(var a=arguments.length,f=new Array(a),l=0;l<a;l++)f[l]=arguments[l];var o;return n.default._validateParameters("curve",f),this._renderer._doStroke&&(o=this._renderer).curve.apply(o,f),this},n.default.prototype.curveDetail=function(a){return n.default._validateParameters("curveDetail",arguments),this._curveDetail=a<3?3:a,this},n.default.prototype.curveTightness=function(a){return n.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=a,this},n.default.prototype.curvePoint=function(a,f,l,o,t){n.default._validateParameters("curvePoint",arguments);var r=t*t*t,s=t*t;return a*(-.5*r+s-.5*t)+f*(1.5*r-2.5*s+1)+l*(-1.5*r+2*s+.5*t)+o*(.5*r-.5*s)},n.default.prototype.curveTangent=function(a,f,l,o,t){n.default._validateParameters("curveTangent",arguments);var r=t*t;return a*(-3*r/2+2*t-.5)+f*(9*r/2-5*t)+l*(-9*r/2+4*t+.5)+o*(3*r/2-t)};var h=n.default;y.default=h},{"../friendly_errors/fes_core":255,"../friendly_errors/file_errors":256,"../friendly_errors/validate_params":259,"../main":264}],274:[function(e,b,y){function p(x){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(x)}e("core-js/modules/es.array.slice"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n,h=(n=e("../main"))&&n.__esModule?n:{default:n},a=function(x){if(x&&x.__esModule)return x;if(x===null||p(x)!=="object"&&typeof x!="function")return{default:x};var S=f();if(S&&S.has(x))return S.get(x);var E={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var D in x)if(Object.prototype.hasOwnProperty.call(x,D)){var I=M?Object.getOwnPropertyDescriptor(x,D):null;I&&(I.get||I.set)?Object.defineProperty(E,D,I):E[D]=x[D]}return E.default=x,S&&S.set(x,E),E}(e("../constants"));function f(){if(typeof WeakMap!="function")return null;var x=new WeakMap;return f=function(){return x},x}var l=null,o=[],t=[],r=!1,s=!1,i=!1,d=!1,g=!0;h.default.prototype.beginContour=function(){return t=[],d=!0,this},h.default.prototype.beginShape=function(x){var S;return h.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(S=this._renderer).beginShape.apply(S,arguments):(l=x===a.POINTS||x===a.LINES||x===a.TRIANGLES||x===a.TRIANGLE_FAN||x===a.TRIANGLE_STRIP||x===a.QUADS||x===a.QUAD_STRIP?x:null,o=[],t=[]),this},h.default.prototype.bezierVertex=function(){for(var x=arguments.length,S=new Array(x),E=0;E<x;E++)S[E]=arguments[E];var M;if(h.default._validateParameters("bezierVertex",S),this._renderer.isP3D)(M=this._renderer).bezierVertex.apply(M,S);else if(o.length===0)h.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{r=!0;for(var D=[],I=0;I<S.length;I++)D[I]=S[I];D.isVert=!1,d?t.push(D):o.push(D)}return this},h.default.prototype.curveVertex=function(){for(var x=arguments.length,S=new Array(x),E=0;E<x;E++)S[E]=arguments[E];var M;return h.default._validateParameters("curveVertex",S),this._renderer.isP3D?(M=this._renderer).curveVertex.apply(M,S):(s=!0,this.vertex(S[0],S[1])),this},h.default.prototype.endContour=function(){var x=t[0].slice();x.isVert=t[0].isVert,x.moveTo=!1,t.push(x),g&&(o.push(o[0]),g=!1);for(var S=0;S<t.length;S++)o.push(t[S]);return this},h.default.prototype.endShape=function(x){if(h.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(x,s,r,i,d,l);else{if(o.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var S=x===a.CLOSE;S&&!d&&o.push(o[0]),this._renderer.endShape(x,o,s,r,i,d,l),g=!(d=i=r=s=!1),S&&o.pop()}return this},h.default.prototype.quadraticVertex=function(){for(var x=arguments.length,S=new Array(x),E=0;E<x;E++)S[E]=arguments[E];if(h.default._validateParameters("quadraticVertex",S),this._renderer.isP3D){var M;(M=this._renderer).quadraticVertex.apply(M,S)}else{if(this._contourInited){var D={};return D.x=S[0],D.y=S[1],D.x3=S[2],D.y3=S[3],D.type=a.QUADRATIC,this._contourVertices.push(D),this}if(0<o.length){i=!0;for(var I=[],R=0;R<S.length;R++)I[R]=S[R];I.isVert=!1,d?t.push(I):o.push(I)}else h.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},h.default.prototype.vertex=function(x,S,E,M,D){if(this._renderer.isP3D){var I;(I=this._renderer).vertex.apply(I,arguments)}else{var R=[];R.isVert=!0,R[0]=x,R[1]=S,R[2]=0,R[3]=0,R[4]=0,R[5]=this._renderer._getFill(),R[6]=this._renderer._getStroke(),E&&(R.moveTo=E),d?(t.length===0&&(R.moveTo=!0),t.push(R)):o.push(R)}return this},h.default.prototype.normal=function(x,S,E){var M;return this._assert3d("normal"),h.default._validateParameters("normal",arguments),(M=this._renderer).normal.apply(M,arguments),this};var v=h.default;y.default=v},{"../constants":253,"../main":264,"core-js/modules/es.array.slice":162}],275:[function(e,b,y){function p(n){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(n)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n,h){window.setTimeout(n,1e3/60)},typeof Uint8ClampedArray>"u"||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),function(){if(!Object.assign){var n=Object.keys,h=Object.defineProperty,a=typeof Symbol=="function"&&p(Symbol())==="symbol",f=Object.prototype.propertyIsEnumerable,l=function(o){return function(t){return f.call(o,t)}};h(Object,"assign",{value:function(o,t){if(o==null)throw new TypeError("target must be an object");var r,s,i,d,g=Object(o);for(r=1;r<arguments.length;++r)for(s=Object(arguments[r]),d=n(s),a&&Object.getOwnPropertySymbols&&d.push.apply(d,Object.getOwnPropertySymbols(s).filter(l(s))),i=0;i<d.length;++i)g[d[i]]=s[d[i]];return g},configurable:!0,enumerable:!1,writable:!0})}}()},{"core-js/modules/es.array.filter":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-clamped-array":227,"core-js/modules/web.dom-collections.iterator":229}],276:[function(e,b,y){e("core-js/modules/es.array.for-each"),e("core-js/modules/es.object.assign"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("./main"))&&p.__esModule?p:{default:p};n.default.prototype.noLoop=function(){this._loop=!1},n.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},n.default.prototype.isLooping=function(){return this._loop},n.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},n.default.prototype.pop=function(){var a=this._styles.pop();a?(this._renderer.pop(a.renderer),Object.assign(this,a.props)):console.warn("pop() was called without matching push()")},n.default.prototype.redraw=function(a){if(!this._inUserDraw&&this._setupDone){var f=parseInt(a);(isNaN(f)||f<1)&&(f=1);var l=this._isGlobal?window:this;if(typeof l.draw=="function"){l.setup===void 0&&l.scale(l._pixelDensity,l._pixelDensity);for(var o=function(r){r.call(l)},t=0;t<f;t++){l.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),l._renderer.isP3D&&l._renderer._update(),l._setProperty("frameCount",l.frameCount+1),l._registeredMethods.pre.forEach(o),this._inUserDraw=!0;try{l.draw()}finally{this._inUserDraw=!1}l._registeredMethods.post.forEach(o)}}}};var h=n.default;y.default=h},{"./main":264,"core-js/modules/es.array.for-each":154,"core-js/modules/es.object.assign":173,"core-js/modules/web.dom-collections.for-each":228}],277:[function(e,b,y){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("./main"))&&p.__esModule?p:{default:p};function h(f){return function(l){if(Array.isArray(l)){for(var o=0,t=new Array(l.length);o<l.length;o++)t[o]=l[o];return t}}(f)||function(l){if(Symbol.iterator in Object(l)||Object.prototype.toString.call(l)==="[object Arguments]")return Array.from(l)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.default.prototype.applyMatrix=function(){var f,l,o=arguments[0]instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments[0])||o?(f=this._renderer).applyMatrix.apply(f,h(arguments[0])):(l=this._renderer).applyMatrix.apply(l,arguments),this},n.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},n.default.prototype.rotate=function(f,l){return n.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(f),l),this},n.default.prototype.rotateX=function(f){return this._assert3d("rotateX"),n.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(f)),this},n.default.prototype.rotateY=function(f){return this._assert3d("rotateY"),n.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(f)),this},n.default.prototype.rotateZ=function(f){return this._assert3d("rotateZ"),n.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(f)),this},n.default.prototype.scale=function(f,l,o){if(n.default._validateParameters("scale",arguments),f instanceof n.default.Vector){var t=f;f=t.x,l=t.y,o=t.z}else if(f instanceof Array){var r=f;f=r[0],l=r[1],o=r[2]||1}return isNaN(l)?l=o=f:isNaN(o)&&(o=1),this._renderer.scale.call(this._renderer,f,l,o),this},n.default.prototype.shearX=function(f){n.default._validateParameters("shearX",arguments);var l=this._toRadians(f);return this._renderer.applyMatrix(1,0,Math.tan(l),1,0,0),this},n.default.prototype.shearY=function(f){n.default._validateParameters("shearY",arguments);var l=this._toRadians(f);return this._renderer.applyMatrix(1,Math.tan(l),0,1,0,0),this},n.default.prototype.translate=function(f,l,o){return n.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(f,l,o):this._renderer.translate(f,l),this};var a=n.default;y.default=a},{"./main":264,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":229}],278:[function(e,b,y){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};function h(f){return function(l){if(Array.isArray(l)){for(var o=0,t=new Array(l.length);o<l.length;o++)t[o]=l[o];return t}}(f)||function(l){if(Symbol.iterator in Object(l)||Object.prototype.toString.call(l)==="[object Arguments]")return Array.from(l)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(f)}n.default.prototype.storeItem=function(f,l){typeof f!="string"&&console.log("The argument that you passed to storeItem() - ".concat(f," is not a string.")),f.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(f," must not end with 'p5TypeID'.")),l===void 0&&console.log("You cannot store undefined variables using storeItem().");var o=a(l);switch(o){case"number":case"boolean":l=l.toString();break;case"object":l instanceof n.default.Color?o="p5.Color":l instanceof n.default.Vector&&(o="p5.Vector",l=[l.x,l.y,l.z]),l=JSON.stringify(l)}localStorage.setItem(f,l);var t="".concat(f,"p5TypeID");localStorage.setItem(t,o)},n.default.prototype.getItem=function(f){var l=localStorage.getItem(f),o=localStorage.getItem("".concat(f,"p5TypeID"));if(o===void 0)console.log("Unable to determine type of item stored under ".concat(f,"in local storage. Did you save the item with something other than setItem()?"));else if(l!==null)switch(o){case"number":l=parseFloat(l);break;case"boolean":l=l==="true";break;case"object":l=JSON.parse(l);break;case"p5.Color":l=JSON.parse(l),l=this.color.apply(this,h(l.levels));break;case"p5.Vector":l=JSON.parse(l),l=this.createVector.apply(this,h(l))}return l},n.default.prototype.clearStorage=function(){localStorage.clear()},n.default.prototype.removeItem=function(f){typeof f!="string"&&console.log("The argument that you passed to removeItem() - ".concat(f," is not a string.")),localStorage.removeItem(f),localStorage.removeItem("".concat(f,"p5TypeID"))}},{"../core/main":264,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],279:[function(e,b,y){e("core-js/modules/es.array.concat"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.string.sub"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};n.default.prototype.createStringDict=function(a,f){return n.default._validateParameters("createStringDict",arguments),new n.default.StringDict(a,f)},n.default.prototype.createNumberDict=function(a,f){return n.default._validateParameters("createNumberDict",arguments),new n.default.NumberDict(a,f)},n.default.TypedDict=function(a,f){return a instanceof Object?this.data=a:(this.data={},this.data[a]=f),this},n.default.TypedDict.prototype.size=function(){return Object.keys(this.data).length},n.default.TypedDict.prototype.hasKey=function(a){return this.data.hasOwnProperty(a)},n.default.TypedDict.prototype.get=function(a){if(this.data.hasOwnProperty(a))return this.data[a];console.log("".concat(a," does not exist in this Dictionary"))},n.default.TypedDict.prototype.set=function(a,f){this._validate(f)?this.data[a]=f:console.log("Those values dont work for this dictionary type.")},n.default.TypedDict.prototype._addObj=function(a){for(var f in a)this.set(f,a[f])},n.default.TypedDict.prototype.create=function(a,f){a instanceof Object&&f===void 0?this._addObj(a):a!==void 0?this.set(a,f):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")},n.default.TypedDict.prototype.clear=function(){this.data={}},n.default.TypedDict.prototype.remove=function(a){if(!this.data.hasOwnProperty(a))throw new Error("".concat(a," does not exist in this Dictionary"));delete this.data[a]},n.default.TypedDict.prototype.print=function(){for(var a in this.data)console.log("key:".concat(a," value:").concat(this.data[a]))},n.default.TypedDict.prototype.saveTable=function(a){var f="";for(var l in this.data)f+="".concat(l,",").concat(this.data[l],`
`);var o=new Blob([f],{type:"text/csv"});n.default.prototype.downloadFile(o,a||"mycsv","csv")},n.default.TypedDict.prototype.saveJSON=function(a,f){n.default.prototype.saveJSON(this.data,a,f)},n.default.TypedDict.prototype._validate=function(a){return!0},n.default.StringDict=function(){for(var a=arguments.length,f=new Array(a),l=0;l<a;l++)f[l]=arguments[l];n.default.TypedDict.apply(this,f)},n.default.StringDict.prototype=Object.create(n.default.TypedDict.prototype),n.default.StringDict.prototype._validate=function(a){return typeof a=="string"},n.default.NumberDict=function(){for(var a=arguments.length,f=new Array(a),l=0;l<a;l++)f[l]=arguments[l];n.default.TypedDict.apply(this,f)},n.default.NumberDict.prototype=Object.create(n.default.TypedDict.prototype),n.default.NumberDict.prototype._validate=function(a){return typeof a=="number"},n.default.NumberDict.prototype.add=function(a,f){this.data.hasOwnProperty(a)?this.data[a]+=f:console.log("The key - ".concat(a," does not exist in this dictionary."))},n.default.NumberDict.prototype.sub=function(a,f){this.add(a,-f)},n.default.NumberDict.prototype.mult=function(a,f){this.data.hasOwnProperty(a)?this.data[a]*=f:console.log("The key - ".concat(a," does not exist in this dictionary."))},n.default.NumberDict.prototype.div=function(a,f){this.data.hasOwnProperty(a)?this.data[a]/=f:console.log("The key - ".concat(a," does not exist in this dictionary."))},n.default.NumberDict.prototype._valueTest=function(a){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var f=this.data[Object.keys(this.data)[0]];for(var l in this.data)this.data[l]*a<f*a&&(f=this.data[l]);return f},n.default.NumberDict.prototype.minValue=function(){return this._valueTest(1)},n.default.NumberDict.prototype.maxValue=function(){return this._valueTest(-1)},n.default.NumberDict.prototype._keyTest=function(a){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var f=Object.keys(this.data)[0],l=1;l<Object.keys(this.data).length;l++)Object.keys(this.data)[l]*a<f*a&&(f=Object.keys(this.data)[l]);return f},n.default.NumberDict.prototype.minKey=function(){return this._keyTest(1)},n.default.NumberDict.prototype.maxKey=function(){return this._keyTest(-1)};var h=n.default.TypedDict;y.default=h},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.object.keys":176,"core-js/modules/es.string.sub":192}],280:[function(e,b,y){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};function h(t){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(t)}function a(t,r,s){(r._userNode?r._userNode:document.body).appendChild(t);var i=s?new n.default.MediaElement(t,r):new n.default.Element(t,r);return r._elements.push(i),i}function f(t,r,s,i){var d=document.createElement(r);typeof(s=s||"")=="string"&&(s=[s]);var g=!0,v=!1,x=void 0;try{for(var S,E=s[Symbol.iterator]();!(g=(S=E.next()).done);g=!0){var M=S.value,D=document.createElement("source");D.setAttribute("src",M),d.appendChild(D)}}catch(R){v=!0,x=R}finally{try{g||E.return==null||E.return()}finally{if(v)throw x}}typeof i=="function"&&d.addEventListener("canplaythrough",function R(){i(),d.removeEventListener("canplaythrough",R)});var I=a(d,t,!0);return I.loadedmetadata=!1,d.addEventListener("loadedmetadata",function(){I.width=d.videoWidth,I.height=d.videoHeight,I.elt.width===0&&(I.elt.width=d.videoWidth),I.elt.height===0&&(I.elt.height=d.videoHeight),I.presetPlaybackRate&&(I.elt.playbackRate=I.presetPlaybackRate,delete I.presetPlaybackRate),I.loadedmetadata=!0}),I}n.default.prototype.select=function(t,r){n.default._validateParameters("select",arguments);var s=this._getContainer(r).querySelector(t);return s?this._wrapElement(s):null},n.default.prototype.selectAll=function(t,r){n.default._validateParameters("selectAll",arguments);var s=[],i=this._getContainer(r).querySelectorAll(t);if(i)for(var d=0;d<i.length;d++){var g=this._wrapElement(i[d]);s.push(g)}return s},n.default.prototype._getContainer=function(t){var r=document;return typeof t=="string"?r=document.querySelector(t)||document:t instanceof n.default.Element?r=t.elt:t instanceof HTMLElement&&(r=t),r},n.default.prototype._wrapElement=function(t){var r=Array.prototype.slice.call(t.children);if(t.tagName!=="INPUT"||t.type!=="checkbox")return t.tagName==="VIDEO"||t.tagName==="AUDIO"?new n.default.MediaElement(t,this):t.tagName==="SELECT"?this.createSelect(new n.default.Element(t,this)):0<r.length&&r.every(function(i){return i.tagName==="INPUT"||i.tagName==="LABEL"})?this.createRadio(new n.default.Element(t,this)):new n.default.Element(t,this);var s=new n.default.Element(t,this);return s.checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!!arguments[0],this)},s},n.default.prototype.removeElements=function(t){n.default._validateParameters("removeElements",arguments),this._elements.filter(function(r){return!(r.elt instanceof HTMLCanvasElement)}).map(function(r){return r.remove()})},n.default.Element.prototype.changed=function(t){return n.default.Element._adjustListener("change",t,this),this},n.default.Element.prototype.input=function(t){return n.default.Element._adjustListener("input",t,this),this},n.default.prototype.createDiv=function(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",r=document.createElement("div");return r.innerHTML=t,a(r,this)},n.default.prototype.createP=function(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",r=document.createElement("p");return r.innerHTML=t,a(r,this)},n.default.prototype.createSpan=function(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",r=document.createElement("span");return r.innerHTML=t,a(r,this)},n.default.prototype.createImg=function(){n.default._validateParameters("createImg",arguments);var t,r=document.createElement("img"),s=arguments;return 1<s.length&&typeof s[1]=="string"&&(r.alt=s[1]),2<s.length&&typeof s[2]=="string"&&(r.crossOrigin=s[2]),r.src=s[0],t=a(r,this),r.addEventListener("load",function(){t.width=r.offsetWidth||r.width,t.height=r.offsetHeight||r.height;var i=s[s.length-1];typeof i=="function"&&i(t)}),t},n.default.prototype.createA=function(t,r,s){n.default._validateParameters("createA",arguments);var i=document.createElement("a");return i.href=t,i.innerHTML=r,s&&(i.target=s),a(i,this)},n.default.prototype.createSlider=function(t,r,s,i){n.default._validateParameters("createSlider",arguments);var d=document.createElement("input");return d.type="range",d.min=t,d.max=r,i===0?d.step=1e-18:i&&(d.step=i),typeof s=="number"&&(d.value=s),a(d,this)},n.default.prototype.createButton=function(t,r){n.default._validateParameters("createButton",arguments);var s=document.createElement("button");return s.innerHTML=t,r&&(s.value=r),a(s,this)},n.default.prototype.createCheckbox=function(){n.default._validateParameters("createCheckbox",arguments);var t=document.createElement("div"),r=document.createElement("input");r.type="checkbox";var s=document.createElement("label");s.appendChild(r),t.appendChild(s);var i=a(t,this);if(i.checked=function(){var g=i.elt.firstElementChild.getElementsByTagName("input")[0];if(g){if(arguments.length===0)return g.checked;g.checked=!!arguments[0]}return i},this.value=function(g){return i.value=g,this},arguments[0]){i.value(arguments[0]);var d=document.createElement("span");d.innerHTML=arguments[0],s.appendChild(d)}return arguments[1]&&(r.checked=!0),i},n.default.prototype.createSelect=function(){var t;n.default._validateParameters("createSelect",arguments);var r=arguments[0];if(r instanceof n.default.Element&&r.elt instanceof HTMLSelectElement)t=r,this.elt=r.elt;else if(r instanceof HTMLSelectElement)t=a(r,this),this.elt=r;else{var s=document.createElement("select");r&&typeof r=="boolean"&&s.setAttribute("multiple","true"),t=a(s,this),this.elt=s}return t.option=function(i,d){var g;if(i!==void 0){for(var v=0;v<this.elt.length;v+=1)if(this.elt[v].innerHTML===i){g=v;break}if(g!==void 0)d===!1?this.elt.remove(g):this.elt[g].value=d;else{var x=document.createElement("option");x.innerHTML=i,x.value=d===void 0?i:d,this.elt.appendChild(x),this._pInst._elements.push(x)}}},t.selected=function(i){if(i!==void 0){for(var d=0;d<this.elt.length;d+=1)this.elt[d].value.toString()===i.toString()&&(this.elt.selectedIndex=d);return this}if(this.elt.getAttribute("multiple")){var g=[],v=!0,x=!1,S=void 0;try{for(var E,M=this.elt.selectedOptions[Symbol.iterator]();!(v=(E=M.next()).done);v=!0){var D=E.value;g.push(D.value)}}catch(I){x=!0,S=I}finally{try{v||M.return==null||M.return()}finally{if(x)throw S}}return g}return this.elt.value},t.disable=function(i){if(typeof i=="string")for(var d=0;d<this.elt.length;d++)this.elt[d].value.toString()===i&&(this.elt[d].disabled=!0,this.elt[d].selected=!1);else this.elt.disabled=!0;return this},t},n.default.prototype.createRadio=function(){var t,r,s=arguments[0];s instanceof HTMLDivElement||s instanceof HTMLSpanElement?(t=s,typeof arguments[1]=="string"&&(r=arguments[1])):(typeof s=="string"&&(r=s),t=document.createElement("div"));var i=a(this.elt=t,this);i._name=r||"radioOption";function d(v){return v instanceof HTMLInputElement&&v.type==="radio"}function g(v){return v instanceof HTMLLabelElement}return i._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(v){return d(v)||g(v)&&d(v.firstElementChild)}).map(function(v){return d(v)?v:v.firstElementChild})},i.option=function(v,x){var S,E,M,D=!0,I=!1,R=void 0;try{for(var L,U=i._getOptionsArray()[Symbol.iterator]();!(D=(L=U.next()).done);D=!0){var O=L.value;if(O.value===v){S=O;break}}}catch(G){I=!0,R=G}finally{try{D||U.return==null||U.return()}finally{if(I)throw R}}return S===void 0&&((S=document.createElement("input")).setAttribute("type","radio"),S.setAttribute("value",v)),S.setAttribute("name",i._name),g(S.parentElement)?E=S.parentElement:(E=document.createElement("label")).insertAdjacentElement("afterbegin",S),E.lastElementChild instanceof HTMLSpanElement?M=E.lastElementChild:(M=document.createElement("span"),S.insertAdjacentElement("afterend",M)),M.innerHTML=x===void 0?v:x,this.elt.appendChild(E),S},i.remove=function(v){var x=!0,S=!1,E=void 0;try{for(var M,D=i._getOptionsArray()[Symbol.iterator]();!(x=(M=D.next()).done);x=!0){var I=M.value;if(I.value===v)return void(g(I.parentElement)?I.parentElement.remove():I.remove())}}catch(R){S=!0,E=R}finally{try{x||D.return==null||D.return()}finally{if(S)throw E}}},i.value=function(){var v="",x=!0,S=!1,E=void 0;try{for(var M,D=i._getOptionsArray()[Symbol.iterator]();!(x=(M=D.next()).done);x=!0){var I=M.value;if(I.checked){v=I.value;break}}}catch(R){S=!0,E=R}finally{try{x||D.return==null||D.return()}finally{if(S)throw E}}return v},i.selected=function(v){var x=null;if(v===void 0){var S=!0,E=!1,M=void 0;try{for(var D,I=i._getOptionsArray()[Symbol.iterator]();!(S=(D=I.next()).done);S=!0){var R=D.value;if(R.checked){x=R;break}}}catch(ne){E=!0,M=ne}finally{try{S||I.return==null||I.return()}finally{if(E)throw M}}}else{i._getOptionsArray().forEach(function(ne){ne.checked=!1,ne.removeAttribute("checked")});var L=!0,U=!1,O=void 0;try{for(var G,V=i._getOptionsArray()[Symbol.iterator]();!(L=(G=V.next()).done);L=!0){var te=G.value;te.value===v&&(te.setAttribute("checked",!0),te.checked=!0,x=te)}}catch(ne){U=!0,O=ne}finally{try{L||V.return==null||V.return()}finally{if(U)throw O}}}return x},i.disable=function(){var v=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],x=!0,S=!1,E=void 0;try{for(var M,D=i._getOptionsArray()[Symbol.iterator]();!(x=(M=D.next()).done);x=!0)M.value.setAttribute("disabled",v)}catch(I){S=!0,E=I}finally{try{x||D.return==null||D.return()}finally{if(S)throw E}}},i},n.default.prototype.createColorPicker=function(t){n.default._validateParameters("createColorPicker",arguments);var r,s=document.createElement("input");return s.type="color",t?t instanceof n.default.Color?s.value=t.toString("#rrggbb"):(n.default.prototype._colorMode="rgb",n.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},s.value=n.default.prototype.color(t).toString("#rrggbb")):s.value="#000000",(r=a(s,this)).color=function(){return t&&(t.mode&&(n.default.prototype._colorMode=t.mode),t.maxes&&(n.default.prototype._colorMaxes=t.maxes)),n.default.prototype.color(this.elt.value)},r},n.default.prototype.createInput=function(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text";n.default._validateParameters("createInput",arguments);var s=document.createElement("input");return s.setAttribute("value",t),s.setAttribute("type",r),a(s,this)},n.default.prototype.createFileInput=function(t){var r=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(n.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob){var s=document.createElement("input");return s.setAttribute("type","file"),r&&s.setAttribute("multiple",!0),s.addEventListener("change",function(i){var d=!0,g=!1,v=void 0;try{for(var x,S=i.target.files[Symbol.iterator]();!(d=(x=S.next()).done);d=!0){var E=x.value;n.default.File._load(E,t)}}catch(M){g=!0,v=M}finally{try{d||S.return==null||S.return()}finally{if(g)throw v}}},!1),a(s,this)}console.log("The File APIs are not fully supported in this browser. Cannot create element.")},n.default.prototype.createVideo=function(t,r){return n.default._validateParameters("createVideo",arguments),f(this,"video",t,r)},n.default.prototype.createAudio=function(t,r){return n.default._validateParameters("createAudio",arguments),f(this,"audio",t,r)},n.default.prototype.VIDEO="video",n.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(t){var r=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return r?new Promise(function(s,i){r.call(navigator,t,s,i)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),n.default.prototype.createCapture=function(){if(n.default._validateParameters("createCapture",arguments),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");var t,r,s=!0,i=!0,d=!0,g=!1,v=void 0;try{for(var x,S=arguments[Symbol.iterator]();!(d=(x=S.next()).done);d=!0){var E=x.value;E===n.default.prototype.VIDEO?i=!1:E===n.default.prototype.AUDIO?s=!1:h(E)==="object"?t=E:typeof E=="function"&&(r=E)}}catch(I){g=!0,v=I}finally{try{d||S.return==null||S.return()}finally{if(g)throw v}}t=t||{video:s,audio:i};var M=document.createElement("video");M.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(t).then(function(I){try{"srcObject"in M?M.srcObject=I:M.src=window.URL.createObjectURL(I)}catch{M.src=I}},console.log);var D=a(M,this,!0);return D.loadedmetadata=!1,M.addEventListener("loadedmetadata",function(){M.play(),M.width?(D.width=M.width,D.height=M.height):(D.width=D.elt.width=M.videoWidth,D.height=D.elt.height=M.videoHeight),D.loadedmetadata=!0,r&&r(M.srcObject)}),D},n.default.prototype.createElement=function(t,r){n.default._validateParameters("createElement",arguments);var s=document.createElement(t);return r!==void 0&&(s.innerHTML=r),a(s,this)},n.default.Element.prototype.addClass=function(t){return this.elt.className?this.hasClass(t)||(this.elt.className=this.elt.className+" "+t):this.elt.className=t,this},n.default.Element.prototype.removeClass=function(t){return this.elt.classList.remove(t),this},n.default.Element.prototype.hasClass=function(t){return this.elt.classList.contains(t)},n.default.Element.prototype.toggleClass=function(t){return this.elt.classList.contains(t)?this.elt.classList.remove(t):this.elt.classList.add(t),this},n.default.Element.prototype.child=function(t){return t===void 0?this.elt.childNodes:(typeof t=="string"?(t[0]==="#"&&(t=t.substring(1)),t=document.getElementById(t)):t instanceof n.default.Element&&(t=t.elt),t instanceof HTMLElement&&this.elt.appendChild(t),this)},n.default.Element.prototype.center=function(t){var r=this.elt.style.display,s=this.elt.style.display==="none",i=this.parent().style.display==="none",d={x:this.elt.offsetLeft,y:this.elt.offsetTop};s&&this.show(),i&&this.parent().show(),this.elt.style.display="block",this.position(0,0);var g=Math.abs(this.parent().offsetWidth-this.elt.offsetWidth),v=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return t==="both"||t===void 0?this.position(g/2+this.parent().offsetLeft,v/2+this.parent().offsetTop):t==="horizontal"?this.position(g/2+this.parent().offsetLeft,d.y):t==="vertical"&&this.position(d.x,v/2+this.parent().offsetTop),this.style("display",r),s&&this.hide(),i&&this.parent().hide(),this},n.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments[1]?this.elt.insertAdjacentHTML("beforeend",arguments[0]):this.elt.innerHTML=arguments[0],this)},n.default.Element.prototype.position=function(){if(arguments.length===0)return{x:this.elt.offsetLeft,y:this.elt.offsetTop};var t="absolute";return arguments[2]!=="static"&&arguments[2]!=="fixed"&&arguments[2]!=="relative"&&arguments[2]!=="sticky"&&arguments[2]!=="initial"&&arguments[2]!=="inherit"||(t=arguments[2]),this.elt.style.position=t,this.elt.style.left=arguments[0]+"px",this.elt.style.top=arguments[1]+"px",this.x=arguments[0],this.y=arguments[1],this},n.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var t="";return this.elt.style.transform&&(t=(t=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":arguments[3]+"px"),this.elt.style.transform+=t,this},n.default.Element.prototype._rotate=function(){var t="";return this.elt.style.transform&&(t=(t=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+arguments[0]+"deg)":arguments.length===2?this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)"),this.elt.style.transform+=t,this},n.default.Element.prototype.style=function(t,r){if(r instanceof n.default.Color&&(r="rgba("+r.levels[0]+","+r.levels[1]+","+r.levels[2]+","+r.levels[3]/255+")"),r===void 0){if(t.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(t);for(var s=t.split(";"),i=0;i<s.length;i++){var d=s[i].split(":");d[0]&&d[1]&&(this.elt.style[d[0].trim()]=d[1].trim())}}else if(this.elt.style[t]=r,t==="width"||t==="height"||t==="left"||t==="top"){var g=window.getComputedStyle(this.elt).getPropertyValue(t).replace(/\D+/g,"");this[t]=parseInt(g,10)}return this},n.default.Element.prototype.attribute=function(t,r){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return r===void 0?this.elt.getAttribute(t):(this.elt.setAttribute(t,r),this);if(r===void 0)return this.elt.firstChild.getAttribute(t);for(var s=0;s<this.elt.childNodes.length;s++)this.elt.childNodes[s].setAttribute(t,r)},n.default.Element.prototype.removeAttribute=function(t){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var r=0;r<this.elt.childNodes.length;r++)this.elt.childNodes[r].removeAttribute(t);return this.elt.removeAttribute(t),this},n.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},n.default.Element.prototype.show=function(){return this.elt.style.display="block",this},n.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},n.default.Element.prototype.size=function(t,r){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var s=t,i=r,d=n.default.prototype.AUTO;if(s!==d||i!==d){if(s===d?s=r*this.width/this.height:i===d&&(i=t*this.height/this.width),this.elt instanceof HTMLCanvasElement){var g,v={},x=this.elt.getContext("2d");for(g in x)v[g]=x[g];for(g in this.elt.setAttribute("width",s*this._pInst._pixelDensity),this.elt.setAttribute("height",i*this._pInst._pixelDensity),this.elt.style.width=s+"px",this.elt.style.height=i+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),v)this.elt.getContext("2d")[g]=v[g]}else this.elt.style.width=s+"px",this.elt.style.height=i+"px",this.elt.width=s,this.elt.height=i;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},n.default.Element.prototype.remove=function(){if(this instanceof n.default.MediaElement){this.stop();var t=this.elt.srcObject;t!==null&&t.getTracks().forEach(function(i){i.stop()})}var r=this._pInst._elements.indexOf(this);for(var s in r!==-1&&this._pInst._elements.splice(r,1),this._events)this.elt.removeEventListener(s,this._events[s]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},n.default.Element.prototype.drop=function(t,r){if(window.File&&window.FileReader&&window.FileList&&window.Blob){if(!this._dragDisabled){this._dragDisabled=!0;var s=function(i){i.preventDefault()};this.elt.addEventListener("dragover",s),this.elt.addEventListener("dragleave",s)}n.default.Element._attachListener("drop",function(i){i.preventDefault(),typeof r=="function"&&r.call(this,i);for(var d=i.dataTransfer.files,g=0;g<d.length;g++){var v=d[g];n.default.File._load(v,t)}},this)}else console.log("The File APIs are not fully supported in this browser.");return this},n.default.MediaElement=function(t,r){n.default.Element.call(this,t,r);var s=this;this.elt.crossOrigin="anonymous",this._prevTime=0,this._cueIDCounter=0,this._cues=[],(this._pixelsState=this)._pixelDensity=1,this._modified=!1,Object.defineProperty(s,"src",{get:function(){var i=s.elt.children[0].src,d=s.elt.src===window.location.href?"":s.elt.src;return i===window.location.href?d:i},set:function(i){for(var d=0;d<s.elt.children.length;d++)s.elt.removeChild(s.elt.children[d]);var g=document.createElement("source");g.src=i,t.appendChild(g),s.elt.src=i,s.modified=!0}}),s._onended=function(){},s.elt.onended=function(){s._onended(s)}},n.default.MediaElement.prototype=Object.create(n.default.Element.prototype),n.default.MediaElement.prototype.play=function(){var t,r=this;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),(t=(1<this.elt.readyState||this.elt.load(),this.elt.play()))&&t.catch&&t.catch(function(s){s.name==="NotAllowedError"?n.default._friendlyAutoplayError(r.src):console.error("Media play method encountered an unexpected error",s)}),this},n.default.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},n.default.MediaElement.prototype.pause=function(){return this.elt.pause(),this},n.default.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},n.default.MediaElement.prototype.noLoop=function(){return this.elt.removeAttribute("loop"),this},n.default.MediaElement.prototype._setupAutoplayFailDetection=function(){var t=this,r=setTimeout(function(){return n.default._friendlyAutoplayError(t.src)},500);this.elt.addEventListener("play",function(){return clearTimeout(r)},{passive:!0,once:!0})},n.default.MediaElement.prototype.autoplay=function(t){var r=this,s=this.elt.getAttribute("autoplay");if(this.elt.setAttribute("autoplay",t),t&&!s){var i=function(){return r._setupAutoplayFailDetection()};this.elt.readyState===4?i():this.elt.addEventListener("canplay",i,{passive:!0,once:!0})}return this},n.default.MediaElement.prototype.volume=function(t){if(t===void 0)return this.elt.volume;this.elt.volume=t},n.default.MediaElement.prototype.speed=function(t){if(t===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=t:this.presetPlaybackRate=t},n.default.MediaElement.prototype.time=function(t){return t===void 0?this.elt.currentTime:(this.elt.currentTime=t,this)},n.default.MediaElement.prototype.duration=function(){return this.elt.duration},n.default.MediaElement.prototype.pixels=[],n.default.MediaElement.prototype._ensureCanvas=function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0))},n.default.MediaElement.prototype.loadPixels=function(){return this._ensureCanvas(),n.default.Renderer2D.prototype.loadPixels.apply(this,arguments)},n.default.MediaElement.prototype.updatePixels=function(t,r,s,i){return this.loadedmetadata&&(this._ensureCanvas(),n.default.Renderer2D.prototype.updatePixels.call(this,t,r,s,i)),this.setModified(!0),this},n.default.MediaElement.prototype.get=function(){return this._ensureCanvas(),n.default.Renderer2D.prototype.get.apply(this,arguments)},n.default.MediaElement.prototype._getPixel=function(){return this.loadPixels(),n.default.Renderer2D.prototype._getPixel.apply(this,arguments)},n.default.MediaElement.prototype.set=function(t,r,s){this.loadedmetadata&&(this._ensureCanvas(),n.default.Renderer2D.prototype.set.call(this,t,r,s),this.setModified(!0))},n.default.MediaElement.prototype.copy=function(){this._ensureCanvas(),n.default.prototype.copy.apply(this,arguments)},n.default.MediaElement.prototype.mask=function(){this.loadPixels(),this.setModified(!0),n.default.Image.prototype.mask.apply(this,arguments)},n.default.MediaElement.prototype.isModified=function(){return this._modified},n.default.MediaElement.prototype.setModified=function(t){this._modified=t},n.default.MediaElement.prototype.onended=function(t){return this._onended=t,this},n.default.MediaElement.prototype.connect=function(t){var r,s;if(typeof n.default.prototype.getAudioContext=="function")r=n.default.prototype.getAudioContext(),s=n.default.soundOut.input;else try{s=(r=t.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=r.createMediaElementSource(this.elt),this.audioSourceNode.connect(s)),t?t.input?this.audioSourceNode.connect(t.input):this.audioSourceNode.connect(t):this.audioSourceNode.connect(s)},n.default.MediaElement.prototype.disconnect=function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()},n.default.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0},n.default.MediaElement.prototype.hideControls=function(){this.elt.controls=!1};function l(t,r,s,i){this.callback=t,this.time=r,this.id=s,this.val=i}n.default.MediaElement.prototype.addCue=function(t,r,s){var i=this._cueIDCounter++,d=new l(r,t,i,s);return this._cues.push(d),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),i},n.default.MediaElement.prototype.removeCue=function(t){for(var r=0;r<this._cues.length;r++)this._cues[r].id===t&&(console.log(t),this._cues.splice(r,1));this._cues.length===0&&(this.elt.ontimeupdate=null)},n.default.MediaElement.prototype.clearCues=function(){this._cues=[],this.elt.ontimeupdate=null},n.default.MediaElement.prototype._onTimeUpdate=function(){for(var t=this.time(),r=0;r<this._cues.length;r++){var s=this._cues[r].time,i=this._cues[r].val;this._prevTime<s&&s<=t&&this._cues[r].callback(i)}this._prevTime=t},n.default.File=function(t,r){this.file=t,this._pInst=r;var s=t.type.split("/");this.type=s[0],this.subtype=s[1],this.name=t.name,this.size=t.size,this.data=void 0},n.default.File._createLoader=function(t,r){var s=new FileReader;return s.onload=function(i){var d=new n.default.File(t);if(d.file.type==="application/json")d.data=JSON.parse(i.target.result);else if(d.file.type==="text/xml"){var g=new DOMParser().parseFromString(i.target.result,"text/xml");d.data=new n.default.XML(g.documentElement)}else d.data=i.target.result;r(d)},s},n.default.File._load=function(t,r){if(/^text\//.test(t.type)||t.type==="application/json")n.default.File._createLoader(t,r).readAsText(t);else if(/^(video|audio)\//.test(t.type)){var s=new n.default.File(t);s.data=URL.createObjectURL(t),r(s)}else n.default.File._createLoader(t,r).readAsDataURL(t)};var o=n.default;y.default=o},{"../core/main":264,"core-js/modules/es.array.every":150,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":166,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229,"core-js/modules/web.url":231}],281:[function(e,b,y){function p(x){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(x)}Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n,h=(n=e("../core/main"))&&n.__esModule?n:{default:n},a=function(x){if(x&&x.__esModule)return x;if(x===null||p(x)!=="object"&&typeof x!="function")return{default:x};var S=f();if(S&&S.has(x))return S.get(x);var E={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var D in x)if(Object.prototype.hasOwnProperty.call(x,D)){var I=M?Object.getOwnPropertyDescriptor(x,D):null;I&&(I.get||I.set)?Object.defineProperty(E,D,I):E[D]=x[D]}return E.default=x,S&&S.set(x,E),E}(e("../core/constants"));function f(){if(typeof WeakMap!="function")return null;var x=new WeakMap;return f=function(){return x},x}h.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",h.default.prototype.accelerationX=0,h.default.prototype.accelerationY=0,h.default.prototype.accelerationZ=0,h.default.prototype.pAccelerationX=0,h.default.prototype.pAccelerationY=0,h.default.prototype.pAccelerationZ=0,h.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},h.default.prototype.rotationX=0,h.default.prototype.rotationY=0,h.default.prototype.rotationZ=0,h.default.prototype.pRotationX=0,h.default.prototype.pRotationY=0;var l=h.default.prototype.pRotationZ=0,o=0,t=0,r="clockwise",s="clockwise",i="clockwise";h.default.prototype.pRotateDirectionX=void 0,h.default.prototype.pRotateDirectionY=void 0,h.default.prototype.pRotateDirectionZ=void 0,h.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},h.default.prototype.turnAxis=void 0;var d=.5,g=30;h.default.prototype.setMoveThreshold=function(x){h.default._validateParameters("setMoveThreshold",arguments),d=x},h.default.prototype.setShakeThreshold=function(x){h.default._validateParameters("setShakeThreshold",arguments),g=x},h.default.prototype._ondeviceorientation=function(x){this._updatePRotations(),this._angleMode===a.radians&&(x.beta=x.beta*(_PI/180),x.gamma=x.gamma*(_PI/180),x.alpha=x.alpha*(_PI/180)),this._setProperty("rotationX",x.beta),this._setProperty("rotationY",x.gamma),this._setProperty("rotationZ",x.alpha),this._handleMotion()},h.default.prototype._ondevicemotion=function(x){this._updatePAccelerations(),this._setProperty("accelerationX",2*x.acceleration.x),this._setProperty("accelerationY",2*x.acceleration.y),this._setProperty("accelerationZ",2*x.acceleration.z),this._handleMotion()},h.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var x,S,E=this._isGlobal?window:this;if(typeof E.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>d||Math.abs(this.accelerationY-this.pAccelerationY)>d||Math.abs(this.accelerationZ-this.pAccelerationZ)>d)&&E.deviceMoved(),typeof E.deviceTurned=="function"){var M=this.rotationX+180,D=this.pRotationX+180,I=l+180;0<M-D&&M-D<270||M-D<-270?r="clockwise":(M-D<0||270<M-D)&&(r="counter-clockwise"),r!==this.pRotateDirectionX&&(I=M),90<Math.abs(M-I)&&Math.abs(M-I)<270&&(I=M,this._setProperty("turnAxis","X"),E.deviceTurned()),this.pRotateDirectionX=r,l=I-180;var R=this.rotationY+180,L=this.pRotationY+180,U=o+180;0<R-L&&R-L<270||R-L<-270?s="clockwise":(R-L<0||270<R-this.pRotationY)&&(s="counter-clockwise"),s!==this.pRotateDirectionY&&(U=R),90<Math.abs(R-U)&&Math.abs(R-U)<270&&(U=R,this._setProperty("turnAxis","Y"),E.deviceTurned()),this.pRotateDirectionY=s,o=U-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?i="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(i="counter-clockwise"),i!==this.pRotateDirectionZ&&(t=this.rotationZ),90<Math.abs(this.rotationZ-t)&&Math.abs(this.rotationZ-t)<270&&(t=this.rotationZ,this._setProperty("turnAxis","Z"),E.deviceTurned()),this.pRotateDirectionZ=i,this._setProperty("turnAxis",void 0)}typeof E.deviceShaken=="function"&&(this.pAccelerationX!==null&&(x=Math.abs(this.accelerationX-this.pAccelerationX),S=Math.abs(this.accelerationY-this.pAccelerationY)),g<x+S&&E.deviceShaken())};var v=h.default;y.default=v},{"../core/constants":253,"../core/main":264}],282:[function(e,b,y){Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};n.default.prototype.isKeyPressed=!1,n.default.prototype.keyIsPressed=!1,n.default.prototype.key="",n.default.prototype.keyCode=0,n.default.prototype._onkeydown=function(a){if(!this._downKeys[a.which]){this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",a.which),this._downKeys[a.which]=!0,this._setProperty("key",a.key||String.fromCharCode(a.which)||a.which);var f=this._isGlobal?window:this;typeof f.keyPressed=="function"&&!a.charCode&&f.keyPressed(a)===!1&&a.preventDefault()}},n.default.prototype._onkeyup=function(a){this._downKeys[a.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",a.key||String.fromCharCode(a.which)||a.which),this._setProperty("keyCode",a.which);var f=this._isGlobal?window:this;typeof f.keyReleased=="function"&&f.keyReleased(a)===!1&&a.preventDefault()},n.default.prototype._onkeypress=function(a){if(a.which!==this._lastKeyCodeTyped){this._setProperty("_lastKeyCodeTyped",a.which),this._setProperty("key",a.key||String.fromCharCode(a.which)||a.which);var f=this._isGlobal?window:this;typeof f.keyTyped=="function"&&f.keyTyped(a)===!1&&a.preventDefault()}},n.default.prototype._onblur=function(a){this._downKeys={}},n.default.prototype.keyIsDown=function(a){return n.default._validateParameters("keyIsDown",arguments),this._downKeys[a]||!1},n.default.prototype._areDownKeys=function(){for(var a in this._downKeys)if(this._downKeys.hasOwnProperty(a)&&this._downKeys[a]===!0)return!0;return!1};var h=n.default;y.default=h},{"../core/main":264}],283:[function(e,b,y){function p(o){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(o)}e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n,h=(n=e("../core/main"))&&n.__esModule?n:{default:n},a=function(o){if(o&&o.__esModule)return o;if(o===null||p(o)!=="object"&&typeof o!="function")return{default:o};var t=f();if(t&&t.has(o))return t.get(o);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in o)if(Object.prototype.hasOwnProperty.call(o,i)){var d=s?Object.getOwnPropertyDescriptor(o,i):null;d&&(d.get||d.set)?Object.defineProperty(r,i,d):r[i]=o[i]}return r.default=o,t&&t.set(o,r),r}(e("../core/constants"));function f(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return f=function(){return o},o}h.default.prototype.movedX=0,h.default.prototype.movedY=0,h.default.prototype._hasMouseInteracted=!1,h.default.prototype.mouseX=0,h.default.prototype.mouseY=0,h.default.prototype.pmouseX=0,h.default.prototype.pmouseY=0,h.default.prototype.winMouseX=0,h.default.prototype.winMouseY=0,h.default.prototype.pwinMouseX=0,h.default.prototype.pwinMouseY=0,h.default.prototype.mouseButton=0,h.default.prototype.mouseIsPressed=!1,h.default.prototype._updateNextMouseCoords=function(o){if(this._curElement!==null&&(!o.touches||0<o.touches.length)){var t=function(r,s,i,d){d&&!d.clientX&&(d.touches?d=d.touches[0]:d.changedTouches&&(d=d.changedTouches[0]));var g=r.getBoundingClientRect(),v=r.scrollWidth/s||1,x=r.scrollHeight/i||1;return{x:(d.clientX-g.left)/v,y:(d.clientY-g.top)/x,winX:d.clientX,winY:d.clientY,id:d.identifier}}(this._curElement.elt,this.width,this.height,o);this._setProperty("movedX",o.movementX),this._setProperty("movedY",o.movementY),this._setProperty("mouseX",t.x),this._setProperty("mouseY",t.y),this._setProperty("winMouseX",t.winX),this._setProperty("winMouseY",t.winY)}this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},h.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},h.default.prototype._setMouseButton=function(o){o.button===1?this._setProperty("mouseButton",a.CENTER):o.button===2?this._setProperty("mouseButton",a.RIGHT):this._setProperty("mouseButton",a.LEFT)},h.default.prototype._onmousemove=function(o){var t=this._isGlobal?window:this;this._updateNextMouseCoords(o),this.mouseIsPressed?typeof t.mouseDragged=="function"?t.mouseDragged(o)===!1&&o.preventDefault():typeof t.touchMoved=="function"&&t.touchMoved(o)===!1&&o.preventDefault():typeof t.mouseMoved=="function"&&t.mouseMoved(o)===!1&&o.preventDefault()},h.default.prototype._onmousedown=function(o){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(o),this._updateNextMouseCoords(o),typeof t.mousePressed=="function"?t.mousePressed(o)===!1&&o.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof t.touchStarted=="function"&&t.touchStarted(o)===!1&&o.preventDefault()},h.default.prototype._onmouseup=function(o){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),typeof t.mouseReleased=="function"?t.mouseReleased(o)===!1&&o.preventDefault():typeof t.touchEnded=="function"&&t.touchEnded(o)===!1&&o.preventDefault()},h.default.prototype._ondragend=h.default.prototype._onmouseup,h.default.prototype._ondragover=h.default.prototype._onmousemove,h.default.prototype._onclick=function(o){var t=this._isGlobal?window:this;typeof t.mouseClicked=="function"&&t.mouseClicked(o)===!1&&o.preventDefault()},h.default.prototype._ondblclick=function(o){var t=this._isGlobal?window:this;typeof t.doubleClicked=="function"&&t.doubleClicked(o)===!1&&o.preventDefault()},h.default.prototype._mouseWheelDeltaY=0,h.default.prototype._pmouseWheelDeltaY=0,h.default.prototype._onwheel=function(o){var t=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",o.deltaY),typeof t.mouseWheel=="function"&&(o.delta=o.deltaY,t.mouseWheel(o)===!1&&o.preventDefault())},h.default.prototype.requestPointerLock=function(){var o=this._curElement.elt;return o.requestPointerLock=o.requestPointerLock||o.mozRequestPointerLock,o.requestPointerLock?(o.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},h.default.prototype.exitPointerLock=function(){document.exitPointerLock()};var l=h.default;y.default=l},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.includes":156,"core-js/modules/es.string.includes":185}],284:[function(e,b,y){e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};function h(f,l,o,t,r){var s=4<arguments.length&&r!==void 0?r:0,i=f.getBoundingClientRect(),d=f.scrollWidth/l||1,g=f.scrollHeight/o||1,v=t.touches[s]||t.changedTouches[s];return{x:(v.clientX-i.left)/d,y:(v.clientY-i.top)/g,winX:v.clientX,winY:v.clientY,id:v.identifier}}n.default.prototype.touches=[],n.default.prototype._updateTouchCoords=function(f){if(this._curElement!==null){for(var l=[],o=0;o<f.touches.length;o++)l[o]=h(this._curElement.elt,this.width,this.height,f,o);this._setProperty("touches",l)}},n.default.prototype._ontouchstart=function(f){var l=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(f),this._updateNextMouseCoords(f),this._updateMouseCoords(),typeof l.touchStarted=="function"?l.touchStarted(f)===!1&&f.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof l.mousePressed=="function"&&l.mousePressed(f)===!1&&f.preventDefault()},n.default.prototype._ontouchmove=function(f){var l=this._isGlobal?window:this;this._updateTouchCoords(f),this._updateNextMouseCoords(f),typeof l.touchMoved=="function"?l.touchMoved(f)===!1&&f.preventDefault():typeof l.mouseDragged=="function"&&l.mouseDragged(f)===!1&&f.preventDefault()},n.default.prototype._ontouchend=function(f){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(f),this._updateNextMouseCoords(f);var l=this._isGlobal?window:this;typeof l.touchEnded=="function"?l.touchEnded(f)===!1&&f.preventDefault():typeof l.mouseReleased=="function"&&l.mouseReleased(f)===!1&&f.preventDefault()};var a=n.default;y.default=a},{"../core/main":264,"core-js/modules/es.array.includes":156,"core-js/modules/es.string.includes":185}],285:[function(e,b,y){e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.int32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n,h,a,f={};function l(t,r){for(var s,i,d,g,v,x,S,E,M,D,I=f._toPixels(t),R=t.width,L=t.height,U=R*L,O=new Int32Array(U),G=0;G<U;G++)O[G]=f._getARGB(I,G);var V,te,ne,$,se=new Int32Array(U),J=new Int32Array(U),ue=new Int32Array(U),me=new Int32Array(U),_e=0;for(function(Re){var ve=3.5*Re|0;if(p!==(ve=ve<1?1:ve<248?ve:248)){n=1+(p=ve)<<1,h=new Int32Array(n),a=new Array(n);for(var ye=0;ye<n;ye++)a[ye]=new Int32Array(256);for(var P,N,z,Q,oe=1,K=ve-1;oe<ve;oe++){h[ve+oe]=h[K]=N=K*K,z=a[ve+oe],Q=a[K--];for(var xe=0;xe<256;xe++)z[xe]=Q[xe]=N*xe}P=h[ve]=ve*ve,z=a[ve];for(var ee=0;ee<256;ee++)z[ee]=P*ee}}(r),te=0;te<L;te++){for(V=0;V<R;V++){if(g=d=i=v=s=0,(x=V-p)<0)D=-x,x=0;else{if(R<=x)break;D=0}for(ne=D;ne<n&&!(R<=x);ne++){var he=O[x+_e];v+=($=a[ne])[(-16777216&he)>>>24],i+=$[(16711680&he)>>16],d+=$[(65280&he)>>8],g+=$[255&he],s+=h[ne],x++}se[S=_e+V]=v/s,J[S]=i/s,ue[S]=d/s,me[S]=g/s}_e+=R}for(M=(E=-p)*R,te=_e=0;te<L;te++){for(V=0;V<R;V++){if(g=d=i=v=s=0,E<0)D=S=-E,x=V;else{if(L<=E)break;D=0,S=E,x=V+M}for(ne=D;ne<n&&!(L<=S);ne++)v+=($=a[ne])[se[x]],i+=$[J[x]],d+=$[ue[x]],g+=$[me[x]],s+=h[ne],S++,x+=R;O[V+_e]=v/s<<24|i/s<<16|d/s<<8|g/s}_e+=R,M+=R,E++}f._setPixels(I,O)}f._toPixels=function(t){if(t instanceof ImageData)return t.data;if(t.getContext("2d"))return t.getContext("2d").getImageData(0,0,t.width,t.height).data;if(t.getContext("webgl")){var r=t.getContext("webgl"),s=r.drawingBufferWidth*r.drawingBufferHeight*4,i=new Uint8Array(s);return r.readPixels(0,0,t.width,t.height,r.RGBA,r.UNSIGNED_BYTE,i),i}},f._getARGB=function(t,r){var s=4*r;return t[3+s]<<24&4278190080|t[s]<<16&16711680|t[1+s]<<8&65280|255&t[2+s]},f._setPixels=function(t,r){for(var s=0,i=0,d=t.length;i<d;i++)t[(s=4*i)+0]=(16711680&r[i])>>>16,t[s+1]=(65280&r[i])>>>8,t[s+2]=255&r[i],t[s+3]=(4278190080&r[i])>>>24},f._toImageData=function(t){return t instanceof ImageData?t:t.getContext("2d").getImageData(0,0,t.width,t.height)},f._createImageData=function(t,r){return f._tmpCanvas=document.createElement("canvas"),f._tmpCtx=f._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(t,r)},f.apply=function(t,r,s){var i=t.getContext("2d"),d=i.getImageData(0,0,t.width,t.height),g=r(d,s);g instanceof ImageData?i.putImageData(g,0,0,0,0,t.width,t.height):i.putImageData(d,0,0,0,0,t.width,t.height)},f.threshold=function(t,r){var s=f._toPixels(t);r===void 0&&(r=.5);for(var i=Math.floor(255*r),d=0;d<s.length;d+=4){var g=void 0;g=i<=.2126*s[d]+.7152*s[d+1]+.0722*s[d+2]?255:0,s[d]=s[d+1]=s[d+2]=g}},f.gray=function(t){for(var r=f._toPixels(t),s=0;s<r.length;s+=4){var i=.2126*r[s]+.7152*r[s+1]+.0722*r[s+2];r[s]=r[s+1]=r[s+2]=i}},f.opaque=function(t){for(var r=f._toPixels(t),s=0;s<r.length;s+=4)r[s+3]=255;return r},f.invert=function(t){for(var r=f._toPixels(t),s=0;s<r.length;s+=4)r[s]=255-r[s],r[s+1]=255-r[s+1],r[s+2]=255-r[s+2]},f.posterize=function(t,r){var s=f._toPixels(t);if(r<2||255<r)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var i=r-1,d=0;d<s.length;d+=4){var g=s[d],v=s[d+1],x=s[d+2];s[d]=255*(g*r>>8)/i,s[d+1]=255*(v*r>>8)/i,s[d+2]=255*(x*r>>8)/i}},f.dilate=function(t){for(var r,s,i,d,g,v,x,S,E,M,D,I,R,L,U,O,G,V=f._toPixels(t),te=0,ne=V.length?V.length/4:0,$=new Int32Array(ne);te<ne;)for(s=(r=te)+t.width;te<s;)i=d=f._getARGB(V,te),(x=te-1)<r&&(x=te),s<=(v=te+1)&&(v=te),(S=te-t.width)<0&&(S=0),ne<=(E=te+t.width)&&(E=te),I=f._getARGB(V,S),D=f._getARGB(V,x),R=f._getARGB(V,E),(g=77*(i>>16&255)+151*(i>>8&255)+28*(255&i))<(U=77*(D>>16&255)+151*(D>>8&255)+28*(255&D))&&(d=D,g=U),g<(L=77*((M=f._getARGB(V,v))>>16&255)+151*(M>>8&255)+28*(255&M))&&(d=M,g=L),g<(O=77*(I>>16&255)+151*(I>>8&255)+28*(255&I))&&(d=I,g=O),g<(G=77*(R>>16&255)+151*(R>>8&255)+28*(255&R))&&(d=R,g=G),$[te++]=d;f._setPixels(V,$)},f.erode=function(t){for(var r,s,i,d,g,v,x,S,E,M,D,I,R,L,U,O,G,V=f._toPixels(t),te=0,ne=V.length?V.length/4:0,$=new Int32Array(ne);te<ne;)for(s=(r=te)+t.width;te<s;)i=d=f._getARGB(V,te),(x=te-1)<r&&(x=te),s<=(v=te+1)&&(v=te),(S=te-t.width)<0&&(S=0),ne<=(E=te+t.width)&&(E=te),I=f._getARGB(V,S),D=f._getARGB(V,x),R=f._getARGB(V,E),(U=77*(D>>16&255)+151*(D>>8&255)+28*(255&D))<(g=77*(i>>16&255)+151*(i>>8&255)+28*(255&i))&&(d=D,g=U),(L=77*((M=f._getARGB(V,v))>>16&255)+151*(M>>8&255)+28*(255&M))<g&&(d=M,g=L),(O=77*(I>>16&255)+151*(I>>8&255)+28*(255&I))<g&&(d=I,g=O),(G=77*(R>>16&255)+151*(R>>8&255)+28*(255&R))<g&&(d=R,g=G),$[te++]=d;f._setPixels(V,$)},f.blur=function(t,r){l(t,r)};var o=f;y.default=o},{"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int32-array":209,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226}],286:[function(e,b,y){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p=h(e("../core/main")),n=h(e("omggif"));function h(l){return l&&l.__esModule?l:{default:l}}function a(l){return function(o){if(Array.isArray(o)){for(var t=0,r=new Array(o.length);t<o.length;t++)r[t]=o[t];return r}}(l)||function(o){if(Symbol.iterator in Object(o)||Object.prototype.toString.call(o)==="[object Arguments]")return Array.from(o)}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}p.default.prototype.createImage=function(l,o){return p.default._validateParameters("createImage",arguments),new p.default.Image(l,o)},p.default.prototype.saveCanvas=function(){p.default._validateParameters("saveCanvas",arguments);var l,o,t,r,s=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(l=arguments[0],s.shift()):arguments[0]instanceof p.default.Element?(l=arguments[0].elt,s.shift()):l=this._curElement&&this._curElement.elt,1<=s.length&&(o=s[0]),2<=s.length&&(t=s[1]),t=t||p.default.prototype._checkFileExtension(o,t)[1]||"png"){default:r="image/png";break;case"jpeg":case"jpg":r="image/jpeg"}l.toBlob(function(i){p.default.prototype.downloadFile(i,o,t)},r)},p.default.prototype.saveGif=function(l,o){var t=l.gifProperties,r=t.loopLimit;r===1?r=null:r===null&&(r=0);for(var s=new Uint8Array(l.width*l.height*t.numFrames),i=[],d={},g=0;g<t.numFrames;g++){for(var v=new Set,x=t.frames[g].image.data,S=x.length,E=new Uint32Array(l.width*l.height),M=0,D=0;M<S;M+=4,D++){var I=x[M+0]<<16|x[M+1]<<8|x[M+2]<<0;v.add(I),E[D]=I}var R=a(v).sort().toString();d[R]===void 0?d[R]={freq:1,frames:[g]}:(d[R].freq+=1,d[R].frames.push(g)),i.push(E)}var L=[],U=Object.keys(d).sort(function(ye,P){return d[P].freq-d[ye].freq}),O=U[0].split(",").map(function(ye){return parseInt(ye)});L=L.concat(d[O].frames);for(var G=new Set(O),V=1;V<U.length;V++){var te=U[V].split(",").map(function(ye){return parseInt(ye)}).filter(function(ye){return!G.has(ye)});if(O.length+te.length<=256){for(var ne=0;ne<te.length;ne++)O.push(te[ne]),G.add(te[ne]);L=L.concat(d[U[V]].frames)}}L=new Set(L);for(var $={},se=0;se<O.length;se++)$[O[se]]||($[O[se]]=se);for(var J=1;J<O.length;)J<<=1;O.length=J;for(var ue={loop:r,palette:new Uint32Array(O)},me=new n.default.GifWriter(s,l.width,l.height,ue),_e={},he=function(ye){for(var P=!L.has(ye),N=P?[]:O,z=new Uint8Array(l.width*l.height),Q={},oe=new Set,K=0;K<i[ye].length;K++){var xe=i[ye][K];P?(Q[xe]===void 0&&(Q[xe]=N.length,N.push(xe)),z[K]=Q[xe]):z[K]=$[xe],0<ye&&i[ye-1][K]!==xe&&oe.add(xe)}var ee={},ge=N.filter(function(Te){return!oe.has(Te)});if(0<ge.length){var fe=ge[0],le=P?Q[fe]:$[fe];if(0<ye){for(var Ee=0;Ee<i[ye].length;Ee++)i[ye-1][Ee]===i[ye][Ee]&&(z[Ee]=le);ee.transparent=le,_e.frameOpts.disposal=1}}if(ee.delay=t.frames[ye].delay/10,P){for(var Ae=1;Ae<N.length;)Ae<<=1;N.length=Ae,ee.palette=new Uint32Array(N)}0<ye&&me.addFrame(0,0,l.width,l.height,_e.pixelPaletteIndex,_e.frameOpts),_e={pixelPaletteIndex:z,frameOpts:ee}},Re=0;Re<t.numFrames;Re++)he(Re);_e.frameOpts.disposal=1,me.addFrame(0,0,l.width,l.height,_e.pixelPaletteIndex,_e.frameOpts);var ve=new Blob([s.slice(0,me.end())],{type:"image/gif"});p.default.prototype.downloadFile(ve,o,"gif")},p.default.prototype.saveFrames=function(l,o,t,r,s){p.default._validateParameters("saveFrames",arguments);var i=t||3;i=p.default.prototype.constrain(i,0,15),i*=1e3;var d=r||15;d=p.default.prototype.constrain(d,0,22);var g=0,v=p.default.prototype._makeFrame,x=this._curElement.elt,S=[],E=setInterval(function(){S.push(v(l+g,o,x)),g++},1e3/d);setTimeout(function(){if(clearInterval(E),s)s(S);else{var M=!0,D=!1,I=void 0;try{for(var R,L=S[Symbol.iterator]();!(M=(R=L.next()).done);M=!0){var U=R.value;p.default.prototype.downloadFile(U.imageData,U.filename,U.ext)}}catch(O){D=!0,I=O}finally{try{M||L.return==null||L.return()}finally{if(D)throw I}}}S=[]},i+.01)},p.default.prototype._makeFrame=function(l,o,t){var r,s;if(r=this?this._curElement.elt:t,o)switch(o.toLowerCase()){case"png":s="image/png";break;case"jpeg":case"jpg":s="image/jpeg";break;default:s="image/png"}else o="png",s="image/png";var i=r.toDataURL(s);i=i.replace(s,"image/octet-stream");var d={};return d.imageData=i,d.filename=l,d.ext=o,d};var f=p.default;y.default=f},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":229,omggif:238}],287:[function(e,b,y){function p(i){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(i)}e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n=t(e("../core/main")),h=t(e("./filters")),a=t(e("../core/helpers")),f=function(i){if(i&&i.__esModule)return i;if(i===null||p(i)!=="object"&&typeof i!="function")return{default:i};var d=o();if(d&&d.has(i))return d.get(i);var g={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in i)if(Object.prototype.hasOwnProperty.call(i,x)){var S=v?Object.getOwnPropertyDescriptor(i,x):null;S&&(S.get||S.set)?Object.defineProperty(g,x,S):g[x]=i[x]}return g.default=i,d&&d.set(i,g),g}(e("../core/constants")),l=t(e("omggif"));function o(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return o=function(){return i},i}function t(i){return i&&i.__esModule?i:{default:i}}function r(i,d){return 0<i&&i<d?i:d}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),n.default.prototype.loadImage=function(i,d,g){n.default._validateParameters("loadImage",arguments);var v=new n.default.Image(1,1,this),x=this,S=new Request(i,{method:"GET",mode:"cors"});return fetch(i,S).then(function(E){var M=E.headers.get("content-type");if(M===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),M&&M.includes("image/gif"))E.arrayBuffer().then(function(I){I&&function(R,L,U,O,G){var V=new l.default.GifReader(R);L.width=L.canvas.width=V.width,L.height=L.canvas.height=V.height;var te=[],ne=V.numFrames(),$=new Uint8ClampedArray(L.width*L.height*4);if(1<ne){for(var se=function(ve,ye){try{ye.decodeAndBlitFrameRGBA(ve,$)}catch(P){n.default._friendlyFileLoadError(8,L.src),typeof O=="function"?O(P):console.error(P)}},J=0;J<ne;J++){var ue=V.frameInfo(J),me=L.drawingContext.getImageData(0,0,L.width,L.height);$=me.data.slice(),se(J,V);var _e=new ImageData($,L.width,L.height);L.drawingContext.putImageData(_e,0,0);var he=ue.delay;he===0&&(he=10),te.push({image:L.drawingContext.getImageData(0,0,L.width,L.height),delay:10*he}),ue.disposal===2?L.drawingContext.clearRect(ue.x,ue.y,ue.width,ue.height):ue.disposal===3&&L.drawingContext.putImageData(me,0,0,ue.x,ue.y,ue.width,ue.height)}var Re=V.loopCount();Re===null?Re=1:Re===0&&(Re=null),L.drawingContext.putImageData(te[0].image,0,0),L.gifProperties={displayIndex:0,loopLimit:Re,loopCount:0,frames:te,numFrames:ne,playing:!0,timeDisplayed:0,lastChangeTime:0}}typeof U=="function"&&U(L),G()}(new Uint8Array(I),v,d,g,function(R){x._decrementPreload()}.bind(x))},function(I){typeof g=="function"?g(I):console.error(I)});else{var D=new Image;D.onload=function(){v.width=v.canvas.width=D.width,v.height=v.canvas.height=D.height,v.drawingContext.drawImage(D,0,0),v.modified=!0,typeof d=="function"&&d(v),x._decrementPreload()},D.onerror=function(I){n.default._friendlyFileLoadError(0,D.src),typeof g=="function"?g(I):console.error(I)},i.indexOf("data:image/")!==0&&(D.crossOrigin="Anonymous"),D.src=i}v.modified=!0}).catch(function(E){n.default._friendlyFileLoadError(0,i),typeof g=="function"?g(E):console.error(E)}),v},n.default.prototype.image=function(i,d,g,v,x,S,E,M,D){n.default._validateParameters("image",arguments);var I=i.width,R=i.height;i.elt&&i.elt.videoWidth&&!i.canvas&&(I=i.elt.videoWidth,R=i.elt.videoHeight);var L=d,U=g,O=v||I,G=x||R,V=S||0,te=E||0,ne=M||I,$=D||R;ne=r(ne,I),$=r($,R);var se=1;i.elt&&!i.canvas&&i.elt.style.width&&(se=i.elt.videoWidth&&!v?i.elt.videoWidth:i.elt.width,se/=parseInt(i.elt.style.width,10)),V*=se,te*=se,$*=se,ne*=se;var J=a.default.modeAdjust(L,U,O,G,this._renderer._imageMode);this._renderer.image(i,V,te,ne,$,J.x,J.y,J.w,J.h)},n.default.prototype.tint=function(){for(var i=arguments.length,d=new Array(i),g=0;g<i;g++)d[g]=arguments[g];n.default._validateParameters("tint",d);var v=this.color.apply(this,d);this._renderer._tint=v.levels},n.default.prototype.noTint=function(){this._renderer._tint=null},n.default.prototype._getTintedImageCanvas=function(i){if(!i.canvas)return i;var d=h.default._toPixels(i.canvas),g=document.createElement("canvas");g.width=i.canvas.width,g.height=i.canvas.height;for(var v=g.getContext("2d"),x=v.createImageData(i.canvas.width,i.canvas.height),S=x.data,E=0;E<d.length;E+=4){var M=d[E],D=d[E+1],I=d[E+2],R=d[E+3];S[E]=M*this._renderer._tint[0]/255,S[E+1]=D*this._renderer._tint[1]/255,S[E+2]=I*this._renderer._tint[2]/255,S[E+3]=R*this._renderer._tint[3]/255}return v.putImageData(x,0,0),g},n.default.prototype.imageMode=function(i){n.default._validateParameters("imageMode",arguments),i!==f.CORNER&&i!==f.CORNERS&&i!==f.CENTER||(this._renderer._imageMode=i)};var s=n.default;y.default=s},{"../core/constants":253,"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/helpers":260,"../core/main":264,"./filters":285,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.includes":185,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.typed-array.uint8-clamped-array":227,omggif:238}],288:[function(e,b,y){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p=h(e("../core/main")),n=h(e("./filters"));function h(f){return f&&f.__esModule?f:{default:f}}p.default.Image=function(f,l){this.width=f,this.height=l,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]},p.default.Image.prototype._animateGif=function(f){var l=this.gifProperties,o=f._lastFrameTime;if(l.lastChangeTime===0&&(l.lastChangeTime=o),l.playing){l.timeDisplayed=o-l.lastChangeTime;var t=l.frames[l.displayIndex].delay;if(l.timeDisplayed>=t){var r=Math.floor(l.timeDisplayed/t);if(l.timeDisplayed=0,l.lastChangeTime=o,l.displayIndex+=r,l.loopCount=Math.floor(l.displayIndex/l.numFrames),l.loopLimit!==null&&l.loopCount>=l.loopLimit)l.playing=!1;else{var s=l.displayIndex%l.numFrames;this.drawingContext.putImageData(l.frames[s].image,0,0),l.displayIndex=s,this.setModified(!0)}}}},p.default.Image.prototype._setProperty=function(f,l){this[f]=l,this.setModified(!0)},p.default.Image.prototype.loadPixels=function(){p.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)},p.default.Image.prototype.updatePixels=function(f,l,o,t){p.default.Renderer2D.prototype.updatePixels.call(this,f,l,o,t),this.setModified(!0)},p.default.Image.prototype.get=function(f,l,o,t){return p.default._validateParameters("p5.Image.get",arguments),p.default.Renderer2D.prototype.get.apply(this,arguments)},p.default.Image.prototype._getPixel=p.default.Renderer2D.prototype._getPixel,p.default.Image.prototype.set=function(f,l,o){p.default.Renderer2D.prototype.set.call(this,f,l,o),this.setModified(!0)},p.default.Image.prototype.resize=function(f,l){f===0&&l===0?(f=this.canvas.width,l=this.canvas.height):f===0?f=this.canvas.width*l/this.canvas.height:l===0&&(l=this.canvas.height*f/this.canvas.width),f=Math.floor(f),l=Math.floor(l);var o=document.createElement("canvas");if(o.width=f,o.height=l,this.gifProperties)for(var t=this.gifProperties,r=function(d,g){for(var v=0,x=0;x<g.height;x++)for(var S=0;S<g.width;S++){var E=Math.floor(S*d.width/g.width),M=4*(Math.floor(x*d.height/g.height)*d.width+E);g.data[v++]=d.data[M++],g.data[v++]=d.data[M++],g.data[v++]=d.data[M++],g.data[v++]=d.data[M++]}},s=0;s<t.numFrames;s++){var i=this.drawingContext.createImageData(f,l);r(t.frames[s].image,i),t.frames[s].image=i}o.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,o.width,o.height),this.canvas.width=this.width=f,this.canvas.height=this.height=l,this.drawingContext.drawImage(o,0,0,f,l,0,0,f,l),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)},p.default.Image.prototype.copy=function(){for(var f=arguments.length,l=new Array(f),o=0;o<f;o++)l[o]=arguments[o];p.default.prototype.copy.apply(this,l)},p.default.Image.prototype.mask=function(f){f===void 0&&(f=this);var l=this.drawingContext.globalCompositeOperation,o=1;f instanceof p.default.Renderer&&(o=f._pInst._pixelDensity);var t=[f,0,0,o*f.width,o*f.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-in",p.default.Image.prototype.copy.apply(this,t),this.drawingContext.globalCompositeOperation=l,this.setModified(!0)},p.default.Image.prototype.filter=function(f,l){n.default.apply(this.canvas,n.default[f],l),this.setModified(!0)},p.default.Image.prototype.blend=function(){for(var f=arguments.length,l=new Array(f),o=0;o<f;o++)l[o]=arguments[o];p.default._validateParameters("p5.Image.blend",arguments),p.default.prototype.blend.apply(this,l),this.setModified(!0)},p.default.Image.prototype.setModified=function(f){this._modified=f},p.default.Image.prototype.isModified=function(){return this._modified},p.default.Image.prototype.save=function(f,l){this.gifProperties?p.default.prototype.saveGif(this,f):p.default.prototype.saveCanvas(this.canvas,f,l)},p.default.Image.prototype.reset=function(){if(this.gifProperties){var f=this.gifProperties;f.playing=!0,f.timeSinceStart=0,f.timeDisplayed=0,f.lastChangeTime=0,f.loopCount=0,f.displayIndex=0,this.drawingContext.putImageData(f.frames[0].image,0,0)}},p.default.Image.prototype.getCurrentFrame=function(){if(this.gifProperties){var f=this.gifProperties;return f.displayIndex%f.numFrames}},p.default.Image.prototype.setFrame=function(f){if(this.gifProperties){var l=this.gifProperties;f<l.numFrames&&0<=f?(l.timeDisplayed=0,l.lastChangeTime=0,l.displayIndex=f,this.drawingContext.putImageData(l.frames[f].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero.")}},p.default.Image.prototype.numFrames=function(){if(this.gifProperties)return this.gifProperties.numFrames},p.default.Image.prototype.play=function(){this.gifProperties&&(this.gifProperties.playing=!0)},p.default.Image.prototype.pause=function(){this.gifProperties&&(this.gifProperties.playing=!1)},p.default.Image.prototype.delay=function(f,l){if(this.gifProperties){var o=this.gifProperties;if(l<o.numFrames&&0<=l)o.frames[l].delay=f;else{var t=!0,r=!1,s=void 0;try{for(var i,d=o.frames[Symbol.iterator]();!(t=(i=d.next()).done);t=!0)i.value.delay=f}catch(g){r=!0,s=g}finally{try{t||d.return==null||d.return()}finally{if(r)throw s}}}}};var a=p.default.Image;y.default=a},{"../core/main":264,"./filters":285,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],289:[function(e,b,y){e("core-js/modules/es.array.filter"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p=h(e("../core/main")),n=h(e("./filters"));function h(f){return f&&f.__esModule?f:{default:f}}e("../color/p5.Color"),p.default.prototype.pixels=[],p.default.prototype.blend=function(){for(var f=arguments.length,l=new Array(f),o=0;o<f;o++)l[o]=arguments[o];var t;p.default._validateParameters("blend",l),this._renderer?(t=this._renderer).blend.apply(t,l):p.default.Renderer2D.prototype.blend.apply(this,l)},p.default.prototype.copy=function(){for(var f=arguments.length,l=new Array(f),o=0;o<f;o++)l[o]=arguments[o];var t,r,s,i,d,g,v,x,S;if(p.default._validateParameters("copy",l),l.length===9)t=l[0],r=l[1],s=l[2],i=l[3],d=l[4],g=l[5],v=l[6],x=l[7],S=l[8];else{if(l.length!==8)throw new Error("Signature not supported");t=this,r=l[0],s=l[1],i=l[2],d=l[3],g=l[4],v=l[5],x=l[6],S=l[7]}p.default.prototype._copyHelper(this,t,r,s,i,d,g,v,x,S)},p.default.prototype._copyHelper=function(f,l,o,t,r,s,i,d,g,v){l.loadPixels();var x=l.canvas.width/l.width,S=0,E=0;l._renderer&&l._renderer.isP3D&&(S=l.width/2,E=l.height/2),f._renderer&&f._renderer.isP3D?p.default.RendererGL.prototype.image.call(f._renderer,l,o+S,t+E,r,s,i,d,g,v):f.drawingContext.drawImage(l.canvas,x*(o+S),x*(t+E),x*r,x*s,i,d,g,v)},p.default.prototype.filter=function(f,l){p.default._validateParameters("filter",arguments),this.canvas!==void 0?n.default.apply(this.canvas,n.default[f],l):n.default.apply(this.elt,n.default[f],l)},p.default.prototype.get=function(f,l,o,t){var r;return p.default._validateParameters("get",arguments),(r=this._renderer).get.apply(r,arguments)},p.default.prototype.loadPixels=function(){for(var f=arguments.length,l=new Array(f),o=0;o<f;o++)l[o]=arguments[o];p.default._validateParameters("loadPixels",l),this._renderer.loadPixels()},p.default.prototype.set=function(f,l,o){this._renderer.set(f,l,o)},p.default.prototype.updatePixels=function(f,l,o,t){p.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(f,l,o,t)};var a=p.default;y.default=a},{"../color/p5.Color":251,"../core/main":264,"./filters":285,"core-js/modules/es.array.filter":152}],290:[function(e,b,y){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p=a(e("../core/main"));e("whatwg-fetch"),e("es6-promise/auto");var n=a(e("fetch-jsonp")),h=a(e("file-saver"));function a(s){return s&&s.__esModule?s:{default:s}}function f(s){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(s)}function l(s,i){var d={};if((i=i||[])===void 0)for(var g=0;g<s.length;g++)i[g.toString()]=g;for(var v=0;v<i.length;v++){var x=i[v],S=s[v];d[x]=S}return d}function o(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function t(s,i){i&&i!==!0&&i!=="true"||(i="");var d="";return(s=s||"untitled")&&s.includes(".")&&(d=s.split(".").pop()),i&&d!==i&&(d=i,s="".concat(s,".").concat(d)),[s,d]}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),p.default.prototype.loadJSON=function(){for(var s=arguments.length,i=new Array(s),d=0;d<s;d++)i[d]=arguments[d];p.default._validateParameters("loadJSON",i);for(var g,v,x,S=i[0],E={},M="json",D=1;D<i.length;D++){var I=i[D];typeof I=="string"?I!=="jsonp"&&I!=="json"||(M=I):typeof I=="function"?g?v=I:g=I:f(I)==="object"&&(I.hasOwnProperty("jsonpCallback")||I.hasOwnProperty("jsonpCallbackFunction"))&&(M="jsonp",x=I)}var R=this;return this.httpDo(S,"GET",x,M,function(L){for(var U in L)E[U]=L[U];g!==void 0&&g(L),R._decrementPreload()},function(L){if(p.default._friendlyFileLoadError(5,S),!v)throw L;v(L)}),E},p.default.prototype.loadStrings=function(){for(var s=arguments.length,i=new Array(s),d=0;d<s;d++)i[d]=arguments[d];p.default._validateParameters("loadStrings",i);for(var g,v,x=[],S=1;S<i.length;S++){var E=i[S];typeof E=="function"&&(g===void 0?g=E:v===void 0&&(v=E))}var M=this;return p.default.prototype.httpDo.call(this,i[0],"GET","text",function(D){for(var I=D.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),R=0,L=I.length;R<L;R+=32768)Array.prototype.push.apply(x,I.slice(R,Math.min(R+32768,L)));g!==void 0&&g(x),M._decrementPreload()},function(D){if(p.default._friendlyFileLoadError(3,D),!v)throw D;v(D)}),x},p.default.prototype.loadTable=function(s){var i,d,g,v=!1,x=s.substring(s.lastIndexOf(".")+1,s.length);x==="csv"?g=",":x==="ssv"?g=";":x==="tsv"&&(g="	");for(var S=1;S<arguments.length;S++)typeof arguments[S]=="function"?i===void 0?i=arguments[S]:d===void 0&&(d=arguments[S]):typeof arguments[S]=="string"&&(arguments[S]==="header"&&(v=!0),arguments[S]==="csv"?g=",":arguments[S]==="ssv"?g=";":arguments[S]==="tsv"&&(g="	"));var E=new p.default.Table,M=this;return this.httpDo(s,"GET","table",function(D){for(var I,R,L={},U=[],O=0,G=null,V=function(){L.currentState=0,L.token=""},te=function(){G.push(L.token),V()},ne=function(){L.currentState=4,U.push(G),G=null};;){if((I=D[O++])==null){if(L.escaped)throw new Error("Unclosed quote in file.");if(G){te(),ne();break}}if(G===null&&(L.escaped=!1,G=[],V()),L.currentState===0){if(I==='"'){L.escaped=!0,L.currentState=1;continue}L.currentState=1}if(L.currentState===1&&L.escaped)if(I==='"')D[O]==='"'?(L.token+='"',O++):(L.escaped=!1,L.currentState=2);else{if(I==="\r")continue;L.token+=I}else I==="\r"?(D[O]===`
`&&O++,te(),ne()):I===`
`?(te(),ne()):I===g?te():L.currentState===1&&(L.token+=I)}if(v)E.columns=U.shift();else for(var $=0;$<U[0].length;$++)E.columns[$]="null";for(var se=0;se<U.length;se++)(U[se].length!==1||U[se][0]!=="undefined"&&U[se][0]!=="")&&((R=new p.default.TableRow).arr=U[se],R.obj=l(U[se],E.columns),E.addRow(R));typeof i=="function"&&i(E),M._decrementPreload()},function(D){p.default._friendlyFileLoadError(2,s),d?d(D):console.error(D)}),E},p.default.prototype.loadXML=function(){for(var s=arguments.length,i=new Array(s),d=0;d<s;d++)i[d]=arguments[d];for(var g,v,x=new p.default.XML,S=1;S<i.length;S++){var E=i[S];typeof E=="function"&&(g===void 0?g=E:v===void 0&&(v=E))}var M=this;return this.httpDo(i[0],"GET","xml",function(D){for(var I in D)x[I]=D[I];g!==void 0&&g(x),M._decrementPreload()},function(D){if(p.default._friendlyFileLoadError(1,D),!v)throw D;v(D)}),x},p.default.prototype.loadBytes=function(s,i,d){var g={},v=this;return this.httpDo(s,"GET","arrayBuffer",function(x){g.bytes=new Uint8Array(x),typeof i=="function"&&i(g),v._decrementPreload()},function(x){if(p.default._friendlyFileLoadError(6,s),!d)throw x;d(x)}),g},p.default.prototype.httpGet=function(){p.default._validateParameters("httpGet",arguments);var s=Array.prototype.slice.call(arguments);return s.splice(1,0,"GET"),p.default.prototype.httpDo.apply(this,s)},p.default.prototype.httpPost=function(){p.default._validateParameters("httpPost",arguments);var s=Array.prototype.slice.call(arguments);return s.splice(1,0,"POST"),p.default.prototype.httpDo.apply(this,s)},p.default.prototype.httpDo=function(){for(var s,i,d,g,v,x={},S=0,E="text/plain",M=arguments.length-1;0<M&&typeof(M<0||arguments.length<=M?void 0:arguments[M])=="function";M--)S++;var D=arguments.length<=0?void 0:arguments[0];if(arguments.length-S==2&&typeof D=="string"&&f(arguments.length<=1?void 0:arguments[1])==="object")g=new Request(D,arguments.length<=1?void 0:arguments[1]),i=arguments.length<=2?void 0:arguments[2],d=arguments.length<=3?void 0:arguments[3];else{for(var I,R="GET",L=1;L<arguments.length;L++){var U=L<0||arguments.length<=L?void 0:arguments[L];if(typeof U=="string")U==="GET"||U==="POST"||U==="PUT"||U==="DELETE"?R=U:U==="json"||U==="jsonp"||U==="binary"||U==="arrayBuffer"||U==="xml"||U==="text"||U==="table"?s=U:I=U;else if(typeof U=="number")I=U.toString();else if(f(U)==="object")if(U.hasOwnProperty("jsonpCallback")||U.hasOwnProperty("jsonpCallbackFunction"))for(var O in U)x[O]=U[O];else E=U instanceof p.default.XML?(I=U.serialize(),"application/xml"):(I=JSON.stringify(U),"application/json");else typeof U=="function"&&(i?d=U:i=U)}var G=R==="GET"?new Headers:new Headers({"Content-Type":E});g=new Request(D,{method:R,mode:"cors",body:I,headers:G})}return(v=(v=(s=s||(D.includes("json")?"json":D.includes("xml")?"xml":"text"))==="jsonp"?(0,n.default)(D,x):fetch(g)).then(function(V){if(!V.ok){var te=new Error(V.body);throw te.status=V.status,te.ok=!1,te}var ne=0;switch(s!=="jsonp"&&(ne=V.headers.get("content-length")),ne&&64e6<ne&&p.default._friendlyFileLoadError(7,D),s){case"json":case"jsonp":return V.json();case"binary":return V.blob();case"arrayBuffer":return V.arrayBuffer();case"xml":return V.text().then(function($){var se=new DOMParser().parseFromString($,"text/xml");return new p.default.XML(se.documentElement)});default:return V.text()}})).then(i||function(){}),v.catch(d||console.error),v},window.URL=window.URL||window.webkitURL,p.default.prototype._pWriters=[],p.default.prototype.createWriter=function(s,i){var d;for(var g in p.default.prototype._pWriters)if(p.default.prototype._pWriters[g].name===s)return d=new p.default.PrintWriter(s+this.millis(),i),p.default.prototype._pWriters.push(d),d;return d=new p.default.PrintWriter(s,i),p.default.prototype._pWriters.push(d),d},p.default.PrintWriter=function(s,i){var d=this;this.name=s,this.content="",this.write=function(g){this.content+=g},this.print=function(g){this.content+="".concat(g,`
`)},this.clear=function(){this.content=""},this.close=function(){var g=[];for(var v in g.push(this.content),p.default.prototype.writeFile(g,s,i),p.default.prototype._pWriters)p.default.prototype._pWriters[v].name===this.name&&p.default.prototype._pWriters.splice(v,1);d.clear(),d={}}},p.default.prototype.save=function(s,i,d){var g=arguments,v=this._curElement?this._curElement.elt:this.elt;if(g.length!==0)if(g[0]instanceof p.default.Renderer||g[0]instanceof p.default.Graphics)p.default.prototype.saveCanvas(g[0].elt,g[1],g[2]);else if(g.length===1&&typeof g[0]=="string")p.default.prototype.saveCanvas(v,g[0]);else switch(t(g[1],g[2])[1]){case"json":return void p.default.prototype.saveJSON(g[0],g[1],g[2]);case"txt":return void p.default.prototype.saveStrings(g[0],g[1],g[2]);default:g[0]instanceof Array?p.default.prototype.saveStrings(g[0],g[1],g[2]):g[0]instanceof p.default.Table?p.default.prototype.saveTable(g[0],g[1],g[2]):g[0]instanceof p.default.Image?p.default.prototype.saveCanvas(g[0].canvas,g[1]):g[0]instanceof p.default.SoundFile&&p.default.prototype.saveSound(g[0],g[1],g[2],g[3])}else p.default.prototype.saveCanvas(v)},p.default.prototype.saveJSON=function(s,i,d){var g;p.default._validateParameters("saveJSON",arguments),g=d?JSON.stringify(s):JSON.stringify(s,void 0,2),this.saveStrings(g.split(`
`),i,"json")},p.default.prototype.saveJSONObject=p.default.prototype.saveJSON,p.default.prototype.saveJSONArray=p.default.prototype.saveJSON,p.default.prototype.saveStrings=function(s,i,d,g){p.default._validateParameters("saveStrings",arguments);for(var v=d||"txt",x=this.createWriter(i,v),S=0;S<s.length;S++)g?x.write(s[S]+`\r
`):x.write(s[S]+`
`);x.close(),x.clear()},p.default.prototype.saveTable=function(s,i,d){var g;p.default._validateParameters("saveTable",arguments),g=d===void 0?i.substring(i.lastIndexOf(".")+1,i.length):d;var v=this.createWriter(i,g),x=s.columns,S=",";if(g==="tsv"&&(S="	"),g!=="html"){if(x[0]!=="0"){for(var E=0;E<x.length;E++)E<x.length-1?v.write(x[E]+S):v.write(x[E]);v.write(`
`)}for(var M=0;M<s.rows.length;M++){var D=void 0;for(D=0;D<s.rows[M].arr.length;D++)D<s.rows[M].arr.length-1?g==="csv"&&String(s.rows[M].arr[D]).includes(",")?v.write('"'+s.rows[M].arr[D]+'"'+S):v.write(s.rows[M].arr[D]+S):g==="csv"&&String(s.rows[M].arr[D]).includes(",")?v.write('"'+s.rows[M].arr[D]+'"'):v.write(s.rows[M].arr[D]);v.write(`
`)}}else{if(v.print("<html>"),v.print("<head>"),v.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),v.print("</head>"),v.print("<body>"),v.print("  <table>"),x[0]!=="0"){v.print("    <tr>");for(var I=0;I<x.length;I++){var R=o(x[I]);v.print("      <td>".concat(R)),v.print("      </td>")}v.print("    </tr>")}for(var L=0;L<s.rows.length;L++){v.print("    <tr>");for(var U=0;U<s.columns.length;U++){var O=o(s.rows[L].getString(U));v.print("      <td>".concat(O)),v.print("      </td>")}v.print("    </tr>")}v.print("  </table>"),v.print("</body>"),v.print("</html>")}v.close(),v.clear()},p.default.prototype.writeFile=function(s,i,d){var g="application/octet-stream";p.default.prototype._isSafari()&&(g="text/plain");var v=new Blob(s,{type:g});p.default.prototype.downloadFile(v,i,d)},p.default.prototype.downloadFile=function(s,i,d){var g=t(i,d),v=g[0];if(s instanceof Blob)h.default.saveAs(s,v);else{var x=document.createElement("a");if(x.href=s,x.download=v,x.onclick=function(E){var M;M=E,document.body.removeChild(M.target),E.stopPropagation()},x.style.display="none",document.body.appendChild(x),p.default.prototype._isSafari()){var S=`Hello, Safari user! To download this file...
`;S+=`1. Go to File --> Save As.
`,S+=`2. Choose "Page Source" as the Format.
`,S+='3. Name it with this extension: ."'.concat(g[1],'"'),alert(S)}x.click()}},p.default.prototype._checkFileExtension=t,p.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")};var r=p.default;y.default=r},{"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":166,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":229,"core-js/modules/web.url":231,"es6-promise/auto":232,"fetch-jsonp":234,"file-saver":235,"whatwg-fetch":242}],291:[function(e,b,y){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.trim"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};n.default.Table=function(a){this.columns=[],this.rows=[]},n.default.Table.prototype.addRow=function(a){var f=a||new n.default.TableRow;if(f.arr===void 0||f.obj===void 0)throw new Error("invalid TableRow: ".concat(f));return(f.table=this).rows.push(f),f},n.default.Table.prototype.removeRow=function(a){this.rows[a].table=null;var f=this.rows.splice(a+1,this.rows.length);this.rows.pop(),this.rows=this.rows.concat(f)},n.default.Table.prototype.getRow=function(a){return this.rows[a]},n.default.Table.prototype.getRows=function(){return this.rows},n.default.Table.prototype.findRow=function(a,f){if(typeof f=="string"){for(var l=0;l<this.rows.length;l++)if(this.rows[l].obj[f]===a)return this.rows[l]}else for(var o=0;o<this.rows.length;o++)if(this.rows[o].arr[f]===a)return this.rows[o];return null},n.default.Table.prototype.findRows=function(a,f){var l=[];if(typeof f=="string")for(var o=0;o<this.rows.length;o++)this.rows[o].obj[f]===a&&l.push(this.rows[o]);else for(var t=0;t<this.rows.length;t++)this.rows[t].arr[f]===a&&l.push(this.rows[t]);return l},n.default.Table.prototype.matchRow=function(a,f){if(typeof f=="number"){for(var l=0;l<this.rows.length;l++)if(this.rows[l].arr[f].match(a))return this.rows[l]}else for(var o=0;o<this.rows.length;o++)if(this.rows[o].obj[f].match(a))return this.rows[o];return null},n.default.Table.prototype.matchRows=function(a,f){var l=[];if(typeof f=="number")for(var o=0;o<this.rows.length;o++)this.rows[o].arr[f].match(a)&&l.push(this.rows[o]);else for(var t=0;t<this.rows.length;t++)this.rows[t].obj[f].match(a)&&l.push(this.rows[t]);return l},n.default.Table.prototype.getColumn=function(a){var f=[];if(typeof a=="string")for(var l=0;l<this.rows.length;l++)f.push(this.rows[l].obj[a]);else for(var o=0;o<this.rows.length;o++)f.push(this.rows[o].arr[a]);return f},n.default.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},n.default.Table.prototype.addColumn=function(a){var f=a||null;this.columns.push(f)},n.default.Table.prototype.getColumnCount=function(){return this.columns.length},n.default.Table.prototype.getRowCount=function(){return this.rows.length},n.default.Table.prototype.removeTokens=function(a,f){for(var l=[],o=0;o<a.length;o++)l.push(a.charAt(o).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var t=new RegExp(l.join("|"),"g");if(f===void 0)for(var r=0;r<this.columns.length;r++)for(var s=0;s<this.rows.length;s++){var i=this.rows[s].arr[r];i=i.replace(t,""),this.rows[s].arr[r]=i,this.rows[s].obj[this.columns[r]]=i}else if(typeof f=="string")for(var d=0;d<this.rows.length;d++){var g=this.rows[d].obj[f];g=g.replace(t,""),this.rows[d].obj[f]=g;var v=this.columns.indexOf(f);this.rows[d].arr[v]=g}else for(var x=0;x<this.rows.length;x++){var S=this.rows[x].arr[f];S=S.replace(t,""),this.rows[x].arr[f]=S,this.rows[x].obj[this.columns[f]]=S}},n.default.Table.prototype.trim=function(a){var f=new RegExp(" ","g");if(a===void 0)for(var l=0;l<this.columns.length;l++)for(var o=0;o<this.rows.length;o++){var t=this.rows[o].arr[l];t=t.replace(f,""),this.rows[o].arr[l]=t,this.rows[o].obj[this.columns[l]]=t}else if(typeof a=="string")for(var r=0;r<this.rows.length;r++){var s=this.rows[r].obj[a];s=s.replace(f,""),this.rows[r].obj[a]=s;var i=this.columns.indexOf(a);this.rows[r].arr[i]=s}else for(var d=0;d<this.rows.length;d++){var g=this.rows[d].arr[a];g=g.replace(f,""),this.rows[d].arr[a]=g,this.rows[d].obj[this.columns[a]]=g}},n.default.Table.prototype.removeColumn=function(a){var f,l;typeof a=="string"?(f=a,l=this.columns.indexOf(a)):(l=a,f=this.columns[a]);var o=this.columns.splice(l+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(o);for(var t=0;t<this.rows.length;t++){var r=this.rows[t].arr,s=r.splice(l+1,r.length);r.pop(),this.rows[t].arr=r.concat(s),delete this.rows[t].obj[f]}},n.default.Table.prototype.set=function(a,f,l){this.rows[a].set(f,l)},n.default.Table.prototype.setNum=function(a,f,l){this.rows[a].setNum(f,l)},n.default.Table.prototype.setString=function(a,f,l){this.rows[a].setString(f,l)},n.default.Table.prototype.get=function(a,f){return this.rows[a].get(f)},n.default.Table.prototype.getNum=function(a,f){return this.rows[a].getNum(f)},n.default.Table.prototype.getString=function(a,f){return this.rows[a].getString(f)},n.default.Table.prototype.getObject=function(a){for(var f,l={},o=0;o<this.rows.length;o++)if(f=this.rows[o].obj,typeof a=="string"){if(!(0<=this.columns.indexOf(a)))throw new Error('This table has no column named "'.concat(a,'"'));l[f[a]]=f}else l[o]=this.rows[o].obj;return l},n.default.Table.prototype.getArray=function(){for(var a=[],f=0;f<this.rows.length;f++)a.push(this.rows[f].arr);return a};var h=n.default;y.default=h},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.splice":164,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.trim":193}],292:[function(e,b,y){e("core-js/modules/es.array.index-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};n.default.TableRow=function(a,f){var l=[],o={};a&&(f=f||",",l=a.split(f));for(var t=0;t<l.length;t++){var r=t,s=l[t];o[r]=s}this.arr=l,this.obj=o,this.table=null},n.default.TableRow.prototype.set=function(a,f){if(typeof a=="string"){var l=this.table.columns.indexOf(a);if(!(0<=l))throw new Error('This table has no column named "'.concat(a,'"'));this.obj[a]=f,this.arr[l]=f}else{if(!(a<this.table.columns.length))throw new Error("Column #".concat(a," is out of the range of this table"));this.arr[a]=f;var o=this.table.columns[a];this.obj[o]=f}},n.default.TableRow.prototype.setNum=function(a,f){var l=parseFloat(f);this.set(a,l)},n.default.TableRow.prototype.setString=function(a,f){var l=f.toString();this.set(a,l)},n.default.TableRow.prototype.get=function(a){return typeof a=="string"?this.obj[a]:this.arr[a]},n.default.TableRow.prototype.getNum=function(a){var f;if((f=parseFloat(typeof a=="string"?this.obj[a]:this.arr[a])).toString()==="NaN")throw"Error: ".concat(this.obj[a]," is NaN (Not a Number)");return f},n.default.TableRow.prototype.getString=function(a){return typeof a=="string"?this.obj[a].toString():this.arr[a].toString()};var h=n.default;y.default=h},{"../core/main":264,"core-js/modules/es.array.index-of":157,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],293:[function(e,b,y){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};function h(f){for(var l=[],o=0;o<f.length;o++)l.push(new n.default.XML(f[o]));return l}n.default.XML=function(f){if(f)this.DOM=f;else{var l=document.implementation.createDocument(null,"doc");this.DOM=l.createElement("root")}},n.default.XML.prototype.getParent=function(){return new n.default.XML(this.DOM.parentElement)},n.default.XML.prototype.getName=function(){return this.DOM.tagName},n.default.XML.prototype.setName=function(f){var l=this.DOM.innerHTML,o=this.DOM.attributes,t=document.implementation.createDocument(null,"default").createElement(f);t.innerHTML=l;for(var r=0;r<o.length;r++)t.setAttribute(o[r].nodeName,o.nodeValue);this.DOM=t},n.default.XML.prototype.hasChildren=function(){return 0<this.DOM.children.length},n.default.XML.prototype.listChildren=function(){for(var f=[],l=0;l<this.DOM.childNodes.length;l++)f.push(this.DOM.childNodes[l].nodeName);return f},n.default.XML.prototype.getChildren=function(f){return h(f?this.DOM.getElementsByTagName(f):this.DOM.children)},n.default.XML.prototype.getChild=function(f){if(typeof f!="string")return new n.default.XML(this.DOM.children[f]);var l=!0,o=!1,t=void 0;try{for(var r,s=this.DOM.children[Symbol.iterator]();!(l=(r=s.next()).done);l=!0){var i=r.value;if(i.tagName===f)return new n.default.XML(i)}}catch(d){o=!0,t=d}finally{try{l||s.return==null||s.return()}finally{if(o)throw t}}},n.default.XML.prototype.addChild=function(f){f instanceof n.default.XML&&this.DOM.appendChild(f.DOM)},n.default.XML.prototype.removeChild=function(f){var l=-1;if(typeof f=="string"){for(var o=0;o<this.DOM.children.length;o++)if(this.DOM.children[o].tagName===f){l=o;break}}else l=f;l!==-1&&this.DOM.removeChild(this.DOM.children[l])},n.default.XML.prototype.getAttributeCount=function(){return this.DOM.attributes.length},n.default.XML.prototype.listAttributes=function(){var f=[],l=!0,o=!1,t=void 0;try{for(var r,s=this.DOM.attributes[Symbol.iterator]();!(l=(r=s.next()).done);l=!0){var i=r.value;f.push(i.nodeName)}}catch(d){o=!0,t=d}finally{try{l||s.return==null||s.return()}finally{if(o)throw t}}return f},n.default.XML.prototype.hasAttribute=function(f){var l={},o=!0,t=!1,r=void 0;try{for(var s,i=this.DOM.attributes[Symbol.iterator]();!(o=(s=i.next()).done);o=!0){var d=s.value;l[d.nodeName]=d.nodeValue}}catch(g){t=!0,r=g}finally{try{o||i.return==null||i.return()}finally{if(t)throw r}}return!!l[f]},n.default.XML.prototype.getNum=function(f,l){var o={},t=!0,r=!1,s=void 0;try{for(var i,d=this.DOM.attributes[Symbol.iterator]();!(t=(i=d.next()).done);t=!0){var g=i.value;o[g.nodeName]=g.nodeValue}}catch(v){r=!0,s=v}finally{try{t||d.return==null||d.return()}finally{if(r)throw s}}return Number(o[f])||l||0},n.default.XML.prototype.getString=function(f,l){var o={},t=!0,r=!1,s=void 0;try{for(var i,d=this.DOM.attributes[Symbol.iterator]();!(t=(i=d.next()).done);t=!0){var g=i.value;o[g.nodeName]=g.nodeValue}}catch(v){r=!0,s=v}finally{try{t||d.return==null||d.return()}finally{if(r)throw s}}return o[f]?String(o[f]):l||null},n.default.XML.prototype.setAttribute=function(f,l){this.DOM.setAttribute(f,l)},n.default.XML.prototype.getContent=function(f){return this.DOM.textContent.replace(/\s\s+/g,",")||f||null},n.default.XML.prototype.setContent=function(f){this.DOM.children.length||(this.DOM.textContent=f)},n.default.XML.prototype.serialize=function(){return new XMLSerializer().serializeToString(this.DOM)};var a=n.default;y.default=a},{"../core/main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":170,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],294:[function(e,b,y){e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.string.includes"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};function h(){if(typeof Math.hypot=="function")return Math.hypot.apply(null,arguments);for(var f=arguments.length,l=[],o=0,t=0;t<f;t++){var r=arguments[t];if((r=+r)===1/0||r===-1/0)return 1/0;o<(r=Math.abs(r))&&(o=r),l[t]=r}o===0&&(o=1);for(var s=0,i=0,d=0;d<f;d++){var g=l[d]/o,v=g*g-i,x=s+v;i=x-s-v,s=x}return Math.sqrt(s)*o}n.default.prototype.abs=Math.abs,n.default.prototype.ceil=Math.ceil,n.default.prototype.constrain=function(f,l,o){return n.default._validateParameters("constrain",arguments),Math.max(Math.min(f,o),l)},n.default.prototype.dist=function(){for(var f=arguments.length,l=new Array(f),o=0;o<f;o++)l[o]=arguments[o];return n.default._validateParameters("dist",l),l.length===4?h(l[2]-l[0],l[3]-l[1]):l.length===6?h(l[3]-l[0],l[4]-l[1],l[5]-l[2]):void 0},n.default.prototype.exp=Math.exp,n.default.prototype.floor=Math.floor,n.default.prototype.lerp=function(f,l,o){return n.default._validateParameters("lerp",arguments),o*(l-f)+f},n.default.prototype.log=Math.log,n.default.prototype.mag=function(f,l){return n.default._validateParameters("mag",arguments),h(f,l)},n.default.prototype.map=function(f,l,o,t,r,s){n.default._validateParameters("map",arguments);var i=(f-l)/(o-l)*(r-t)+t;return s?t<r?this.constrain(i,t,r):this.constrain(i,r,t):i},n.default.prototype.max=function(){for(var f=arguments.length,l=new Array(f),o=0;o<f;o++)l[o]=arguments[o];return l[0]instanceof Array?Math.max.apply(null,l[0]):Math.max.apply(null,l)},n.default.prototype.min=function(){for(var f=arguments.length,l=new Array(f),o=0;o<f;o++)l[o]=arguments[o];return l[0]instanceof Array?Math.min.apply(null,l[0]):Math.min.apply(null,l)},n.default.prototype.norm=function(f,l,o){return n.default._validateParameters("norm",arguments),this.map(f,l,o,0,1)},n.default.prototype.pow=Math.pow,n.default.prototype.round=function(f,l){if(!l)return Math.round(f);var o=Math.pow(10,l);return Math.round(f*o)/o},n.default.prototype.sq=function(f){return f*f},n.default.prototype.sqrt=Math.sqrt,n.default.prototype.fract=function(f){n.default._validateParameters("fract",arguments);var l=0,o=Number(f);if(isNaN(o)||Math.abs(o)===1/0)return o;if(o<0&&(o=-o,l=1),!String(o).includes(".")||String(o).includes("e"))return o<1?Math.abs(l-o):0;var t=String(o);return t=Number("0"+t.slice(t.indexOf("."))),Math.abs(l-t)};var a=n.default;y.default=a},{"../core/main":264,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.math.hypot":168,"core-js/modules/es.number.constructor":170,"core-js/modules/es.string.includes":185}],295:[function(e,b,y){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};function h(l,o,t){return(h=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(r,s,i){var d=[null];d.push.apply(d,s);var g=new(Function.bind.apply(r,d));return i&&a(g,i.prototype),g}).apply(null,arguments)}function a(l,o){return(a=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(l,o)}n.default.prototype.createVector=function(l,o,t){return this instanceof n.default?h(n.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new n.default.Vector(l,o,t)};var f=n.default;y.default=f},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.to-string":182}],296:[function(e,b,y){Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};function h(r){return .5*(1-Math.cos(r*Math.PI))}var a,f=4095,l=4,o=.5;n.default.prototype.noise=function(r){var s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(a==null){a=new Array(4096);for(var d=0;d<4096;d++)a[d]=Math.random()}r<0&&(r=-r),s<0&&(s=-s),i<0&&(i=-i);for(var g,v,x,S,E,M=Math.floor(r),D=Math.floor(s),I=Math.floor(i),R=r-M,L=s-D,U=i-I,O=0,G=.5,V=0;V<l;V++){var te=M+(D<<4)+(I<<8);g=h(R),v=h(L),x=a[te&f],x+=g*(a[te+1&f]-x),S=a[te+16&f],x+=v*((S+=g*(a[te+16+1&f]-S))-x),S=a[(te+=256)&f],S+=g*(a[te+1&f]-S),E=a[te+16&f],S+=v*((E+=g*(a[te+16+1&f]-E))-S),O+=(x+=h(U)*(S-x))*G,G*=o,M<<=1,D<<=1,I<<=1,1<=(R*=2)&&(M++,R--),1<=(L*=2)&&(D++,L--),1<=(U*=2)&&(I++,U--)}return O},n.default.prototype.noiseDetail=function(r,s){0<r&&(l=r),0<s&&(o=s)},n.default.prototype.noiseSeed=function(r){var s,i,d,g=(d=4294967296,{setSeed:function(x){i=s=(x==null?Math.random()*d:x)>>>0},getSeed:function(){return s},rand:function(){return(i=(1664525*i+1013904223)%d)/d}});g.setSeed(r),a=new Array(4096);for(var v=0;v<4096;v++)a[v]=g.rand()};var t=n.default;y.default=t},{"../core/main":264}],297:[function(e,b,y){function p(r){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(r)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.number.is-finite"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.sub"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n,h=(n=e("../core/main"))&&n.__esModule?n:{default:n},a=function(r){if(r&&r.__esModule)return r;if(r===null||p(r)!=="object"&&typeof r!="function")return{default:r};var s=f();if(s&&s.has(r))return s.get(r);var i={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in r)if(Object.prototype.hasOwnProperty.call(r,g)){var v=d?Object.getOwnPropertyDescriptor(r,g):null;v&&(v.get||v.set)?Object.defineProperty(i,g,v):i[g]=r[g]}return i.default=r,s&&s.set(r,i),i}(e("../core/constants"));function f(){if(typeof WeakMap!="function")return null;var r=new WeakMap;return f=function(){return r},r}h.default.Vector=function(r,s,i,d,g){var v,x,S;S={}.toString.call(r)==="[object Function]"?(this.isPInst=!0,this._fromRadians=r,this._toRadians=s,v=i||0,x=d||0,g||0):(v=r||0,x=s||0,i||0),this.x=v,this.y=x,this.z=S},h.default.Vector.prototype.toString=function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")},h.default.Vector.prototype.set=function(r,s,i){return r instanceof h.default.Vector?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0):r instanceof Array?(this.x=r[0]||0,this.y=r[1]||0,this.z=r[2]||0):(this.x=r||0,this.y=s||0,this.z=i||0),this},h.default.Vector.prototype.copy=function(){return this.isPInst?new h.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new h.default.Vector(this.x,this.y,this.z)},h.default.Vector.prototype.add=function(r,s,i){return r instanceof h.default.Vector?(this.x+=r.x||0,this.y+=r.y||0,this.z+=r.z||0):r instanceof Array?(this.x+=r[0]||0,this.y+=r[1]||0,this.z+=r[2]||0):(this.x+=r||0,this.y+=s||0,this.z+=i||0),this};function l(r,s){return r!==0&&(this.x=this.x%r),s!==0&&(this.y=this.y%s),this}function o(r,s,i){return r!==0&&(this.x=this.x%r),s!==0&&(this.y=this.y%s),i!==0&&(this.z=this.z%i),this}h.default.Vector.prototype.rem=function(r,s,i){if(r instanceof h.default.Vector){if(Number.isFinite(r.x)&&Number.isFinite(r.y)&&Number.isFinite(r.z)){var d=parseFloat(r.x),g=parseFloat(r.y),v=parseFloat(r.z);return o.call(this,d,g,v)}}else if(r instanceof Array){if(r.every(function(E){return Number.isFinite(E)})){if(r.length===2)return l.call(this,r[0],r[1]);if(r.length===3)return o.call(this,r[0],r[1],r[2])}}else if(arguments.length===1){if(Number.isFinite(r)&&r!==0)return this.x=this.x%r,this.y=this.y%r,this.z=this.z%r,this}else if(arguments.length===2){var x=Array.prototype.slice.call(arguments);if(x.every(function(E){return Number.isFinite(E)})&&x.length===2)return l.call(this,x[0],x[1])}else if(arguments.length===3){var S=Array.prototype.slice.call(arguments);if(S.every(function(E){return Number.isFinite(E)})&&S.length===3)return o.call(this,S[0],S[1],S[2])}},h.default.Vector.prototype.sub=function(r,s,i){return r instanceof h.default.Vector?(this.x-=r.x||0,this.y-=r.y||0,this.z-=r.z||0):r instanceof Array?(this.x-=r[0]||0,this.y-=r[1]||0,this.z-=r[2]||0):(this.x-=r||0,this.y-=s||0,this.z-=i||0),this},h.default.Vector.prototype.mult=function(r,s,i){if(r instanceof h.default.Vector)return Number.isFinite(r.x)&&Number.isFinite(r.y)&&Number.isFinite(r.z)&&typeof r.x=="number"&&typeof r.y=="number"&&typeof r.z=="number"?(this.x*=r.x,this.y*=r.y,this.z*=r.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"),this;if(r instanceof Array)return r.every(function(g){return Number.isFinite(g)})&&r.every(function(g){return typeof g=="number"})?r.length===1?(this.x*=r[0],this.y*=r[0],this.z*=r[0]):r.length===2?(this.x*=r[0],this.y*=r[1]):r.length===3&&(this.x*=r[0],this.y*=r[1],this.z*=r[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"),this;var d=Array.prototype.slice.call(arguments);return d.every(function(g){return Number.isFinite(g)})&&d.every(function(g){return typeof g=="number"})?(arguments.length===1&&(this.x*=r,this.y*=r,this.z*=r),arguments.length===2&&(this.x*=r,this.y*=s),arguments.length===3&&(this.x*=r,this.y*=s,this.z*=i)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this},h.default.Vector.prototype.div=function(r,s,i){if(r instanceof h.default.Vector){if(Number.isFinite(r.x)&&Number.isFinite(r.y)&&Number.isFinite(r.z)&&typeof r.x=="number"&&typeof r.y=="number"&&typeof r.z=="number"){if(r.x===0||r.y===0||r.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=r.x,this.y/=r.y,this.z/=r.z}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");return this}if(r instanceof Array){if(r.every(function(g){return Number.isFinite(g)})&&r.every(function(g){return typeof g=="number"})){if(r.some(function(g){return g===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;r.length===1?(this.x/=r[0],this.y/=r[0],this.z/=r[0]):r.length===2?(this.x/=r[0],this.y/=r[1]):r.length===3&&(this.x/=r[0],this.y/=r[1],this.z/=r[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");return this}var d=Array.prototype.slice.call(arguments);if(d.every(function(g){return Number.isFinite(g)})&&d.every(function(g){return typeof g=="number"})){if(d.some(function(g){return g===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;arguments.length===1&&(this.x/=r,this.y/=r,this.z/=r),arguments.length===2&&(this.x/=r,this.y/=s),arguments.length===3&&(this.x/=r,this.y/=s,this.z/=i)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this},h.default.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},h.default.Vector.prototype.magSq=function(){var r=this.x,s=this.y,i=this.z;return r*r+s*s+i*i},h.default.Vector.prototype.dot=function(r,s,i){return r instanceof h.default.Vector?this.dot(r.x,r.y,r.z):this.x*(r||0)+this.y*(s||0)+this.z*(i||0)},h.default.Vector.prototype.cross=function(r){var s=this.y*r.z-this.z*r.y,i=this.z*r.x-this.x*r.z,d=this.x*r.y-this.y*r.x;return this.isPInst?new h.default.Vector(this._fromRadians,this._toRadians,s,i,d):new h.default.Vector(s,i,d)},h.default.Vector.prototype.dist=function(r){return r.copy().sub(this).mag()},h.default.Vector.prototype.normalize=function(){var r=this.mag();return r!==0&&this.mult(1/r),this},h.default.Vector.prototype.limit=function(r){var s=this.magSq();return r*r<s&&this.div(Math.sqrt(s)).mult(r),this},h.default.Vector.prototype.setMag=function(r){return this.normalize().mult(r)},h.default.Vector.prototype.heading=function(){var r=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(r):r},h.default.Vector.prototype.setHeading=function(r){var s=this.mag();return this.x=s*Math.cos(r),this.y=s*Math.sin(r),this},h.default.Vector.prototype.rotate=function(r){var s=this.heading()+r;this.isPInst&&(s=this._toRadians(s));var i=this.mag();return this.x=Math.cos(s)*i,this.y=Math.sin(s)*i,this},h.default.Vector.prototype.angleBetween=function(r){var s,i=this.dot(r)/(this.mag()*r.mag());return s=Math.acos(Math.min(1,Math.max(-1,i))),s*=Math.sign(this.cross(r).z||1),this.isPInst&&(s=this._fromRadians(s)),s},h.default.Vector.prototype.lerp=function(r,s,i,d){return r instanceof h.default.Vector?this.lerp(r.x,r.y,r.z,s):(this.x+=(r-this.x)*d||0,this.y+=(s-this.y)*d||0,this.z+=(i-this.z)*d||0,this)},h.default.Vector.prototype.reflect=function(r){return r.normalize(),this.sub(r.mult(2*this.dot(r)))},h.default.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},h.default.Vector.prototype.equals=function(r,s,i){var d,g,v;return v=r instanceof h.default.Vector?(d=r.x||0,g=r.y||0,r.z||0):r instanceof Array?(d=r[0]||0,g=r[1]||0,r[2]||0):(d=r||0,g=s||0,i||0),this.x===d&&this.y===g&&this.z===v},h.default.Vector.fromAngle=function(r,s){return s===void 0&&(s=1),new h.default.Vector(s*Math.cos(r),s*Math.sin(r),0)},h.default.Vector.fromAngles=function(r,s,i){i===void 0&&(i=1);var d=Math.cos(s),g=Math.sin(s),v=Math.cos(r),x=Math.sin(r);return new h.default.Vector(i*x*g,-i*v,i*x*d)},h.default.Vector.random2D=function(){return this.fromAngle(Math.random()*a.TWO_PI)},h.default.Vector.random3D=function(){var r=Math.random()*a.TWO_PI,s=2*Math.random()-1,i=Math.sqrt(1-s*s),d=i*Math.cos(r),g=i*Math.sin(r);return new h.default.Vector(d,g,s)},h.default.Vector.add=function(r,s,i){return i?i.set(r):(i=r.copy(),arguments.length===3&&h.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),i.add(s),i},h.default.Vector.rem=function(r,s){if(r instanceof h.default.Vector&&s instanceof h.default.Vector){var i=r.copy();return i.rem(s),i}},h.default.Vector.sub=function(r,s,i){return i?i.set(r):(i=r.copy(),arguments.length===3&&h.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),i.sub(s),i},h.default.Vector.mult=function(r,s,i){return i?i.set(r):(i=r.copy(),arguments.length===3&&h.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),i.mult(s),i},h.default.Vector.rotate=function(r,s,i){return arguments.length===2?i=r.copy():(i instanceof h.default.Vector||h.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),i.set(r)),i.rotate(s),i},h.default.Vector.div=function(r,s,i){return i?i.set(r):(i=r.copy(),arguments.length===3&&h.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),i.div(s),i},h.default.Vector.dot=function(r,s){return r.dot(s)},h.default.Vector.cross=function(r,s){return r.cross(s)},h.default.Vector.dist=function(r,s){return r.dist(s)},h.default.Vector.lerp=function(r,s,i,d){return d?d.set(r):(d=r.copy(),arguments.length===4&&h.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),d.lerp(s,i),d},h.default.Vector.mag=function(r){var s=r.x,i=r.y,d=r.z,g=s*s+i*i+d*d;return Math.sqrt(g)},h.default.Vector.normalize=function(r,s){return arguments.length<2?s=r.copy():(s instanceof h.default.Vector||h.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),s.set(r)),s.normalize()};var t=h.default.Vector;y.default=t},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.every":150,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.math.sign":169,"core-js/modules/es.number.constructor":170,"core-js/modules/es.number.is-finite":171,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.sub":192}],298:[function(e,b,y){Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p},h="_lcg_random_state",a=4294967296,f=0;n.default.prototype._lcg=function(o){return this[o]=(1664525*this[o]+1013904223)%a,this[o]/a},n.default.prototype._lcgSetSeed=function(o,t){this[o]=(t==null?Math.random()*a:t)>>>0},n.default.prototype.randomSeed=function(o){this._lcgSetSeed(h,o),this._gaussian_previous=!1},n.default.prototype.random=function(o,t){var r;if(n.default._validateParameters("random",arguments),r=this[h]!=null?this._lcg(h):Math.random(),o===void 0)return r;if(t===void 0)return o instanceof Array?o[Math.floor(r*o.length)]:r*o;if(t<o){var s=o;o=t,t=s}return r*(t-o)+o},n.default.prototype.randomGaussian=function(o){var t,r,s,i,d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)t=f,this._gaussian_previous=!1;else{for(;1<=(i=(r=this.random(2)-1)*r+(s=this.random(2)-1)*s););t=r*(i=Math.sqrt(-2*Math.log(i)/i)),f=s*i,this._gaussian_previous=!0}return t*d+(o||0)};var l=n.default;y.default=l},{"../core/main":264}],299:[function(e,b,y){function p(o){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(o)}Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n,h=(n=e("../core/main"))&&n.__esModule?n:{default:n},a=function(o){if(o&&o.__esModule)return o;if(o===null||p(o)!=="object"&&typeof o!="function")return{default:o};var t=f();if(t&&t.has(o))return t.get(o);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in o)if(Object.prototype.hasOwnProperty.call(o,i)){var d=s?Object.getOwnPropertyDescriptor(o,i):null;d&&(d.get||d.set)?Object.defineProperty(r,i,d):r[i]=o[i]}return r.default=o,t&&t.set(o,r),r}(e("../core/constants"));function f(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return f=function(){return o},o}h.default.prototype._angleMode=a.RADIANS,h.default.prototype.acos=function(o){return this._fromRadians(Math.acos(o))},h.default.prototype.asin=function(o){return this._fromRadians(Math.asin(o))},h.default.prototype.atan=function(o){return this._fromRadians(Math.atan(o))},h.default.prototype.atan2=function(o,t){return this._fromRadians(Math.atan2(o,t))},h.default.prototype.cos=function(o){return Math.cos(this._toRadians(o))},h.default.prototype.sin=function(o){return Math.sin(this._toRadians(o))},h.default.prototype.tan=function(o){return Math.tan(this._toRadians(o))},h.default.prototype.degrees=function(o){return o*a.RAD_TO_DEG},h.default.prototype.radians=function(o){return o*a.DEG_TO_RAD},h.default.prototype.angleMode=function(o){if(h.default._validateParameters("angleMode",arguments),o===void 0)return this._angleMode;o!==a.DEGREES&&o!==a.RADIANS||(this._angleMode=o)},h.default.prototype._toRadians=function(o){return this._angleMode===a.DEGREES?o*a.DEG_TO_RAD:o},h.default.prototype._toDegrees=function(o){return this._angleMode===a.RADIANS?o*a.RAD_TO_DEG:o},h.default.prototype._fromRadians=function(o){return this._angleMode===a.DEGREES?o*a.RAD_TO_DEG:o};var l=h.default;y.default=l},{"../core/constants":253,"../core/main":264}],300:[function(e,b,y){Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};n.default.prototype.textAlign=function(a,f){var l;return n.default._validateParameters("textAlign",arguments),(l=this._renderer).textAlign.apply(l,arguments)},n.default.prototype.textLeading=function(a){var f;return n.default._validateParameters("textLeading",arguments),(f=this._renderer).textLeading.apply(f,arguments)},n.default.prototype.textSize=function(a){var f;return n.default._validateParameters("textSize",arguments),(f=this._renderer).textSize.apply(f,arguments)},n.default.prototype.textStyle=function(a){var f;return n.default._validateParameters("textStyle",arguments),(f=this._renderer).textStyle.apply(f,arguments)},n.default.prototype.textWidth=function(){for(var a,f=arguments.length,l=new Array(f),o=0;o<f;o++)l[o]=arguments[o];return l[0]+="",n.default._validateParameters("textWidth",l),l[0].length===0?0:(a=this._renderer).textWidth.apply(a,l)},n.default.prototype.textAscent=function(){for(var a=arguments.length,f=new Array(a),l=0;l<a;l++)f[l]=arguments[l];return n.default._validateParameters("textAscent",f),this._renderer.textAscent()},n.default.prototype.textDescent=function(){for(var a=arguments.length,f=new Array(a),l=0;l<a;l++)f[l]=arguments[l];return n.default._validateParameters("textDescent",f),this._renderer.textDescent()},n.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},n.default.prototype.textWrap=function(a){if(a!=="WORD"&&a!=="CHAR")throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(a)};var h=n.default;y.default=h},{"../core/main":264}],301:[function(e,b,y){function p(r){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(r)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.split"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n,h=(n=e("../core/main"))&&n.__esModule?n:{default:n},a=o(e("../core/constants")),f=o(e("opentype.js"));function l(){if(typeof WeakMap!="function")return null;var r=new WeakMap;return l=function(){return r},r}function o(r){if(r&&r.__esModule)return r;if(r===null||p(r)!=="object"&&typeof r!="function")return{default:r};var s=l();if(s&&s.has(r))return s.get(r);var i={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in r)if(Object.prototype.hasOwnProperty.call(r,g)){var v=d?Object.getOwnPropertyDescriptor(r,g):null;v&&(v.get||v.set)?Object.defineProperty(i,g,v):i[g]=r[g]}return i.default=r,s&&s.set(r,i),i}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),h.default.prototype.loadFont=function(r,s,i){h.default._validateParameters("loadFont",arguments);var d=new h.default.Font(this),g=this;return f.load(r,function(v,x){if(v)return h.default._friendlyFileLoadError(4,r),i!==void 0?i(v):void console.error(v,r);d.font=x,s!==void 0&&s(d),g._decrementPreload();var S,E,M=r.split("\\").pop().split("/").pop(),D=M.lastIndexOf("."),I=D<1?null:M.slice(D+1);["ttf","otf","woff","woff2"].includes(I)&&(S=M.slice(0,D!==-1?D:0),(E=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(S,`;
src: url(`).concat(r,`);
}
`))),document.head.appendChild(E))}),d},h.default.prototype.text=function(r,s,i,d,g){var v;return h.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(v=this._renderer).text.apply(v,arguments):this},h.default.prototype.textFont=function(r,s){if(h.default._validateParameters("textFont",arguments),arguments.length){if(!r)throw new Error("null font passed to textFont");return this._renderer._setProperty("_textFont",r),s&&(this._renderer._setProperty("_textSize",s),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",s*a._DEFAULT_LEADMULT)),this._renderer._applyTextProperties()}return this._renderer._textFont};var t=h.default;y.default=t},{"../core/constants":253,"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.slice":162,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.split":191,"opentype.js":239}],302:[function(e,b,y){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p},h=function(R){if(R&&R.__esModule)return R;if(R===null||f(R)!=="object"&&typeof R!="function")return{default:R};var L=a();if(L&&L.has(R))return L.get(R);var U={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var G in R)if(Object.prototype.hasOwnProperty.call(R,G)){var V=O?Object.getOwnPropertyDescriptor(R,G):null;V&&(V.get||V.set)?Object.defineProperty(U,G,V):U[G]=R[G]}return U.default=R,L&&L.set(R,U),U}(e("../core/constants"));function a(){if(typeof WeakMap!="function")return null;var R=new WeakMap;return a=function(){return R},R}function f(R){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(R)}function l(R,L){for(var U=function(ne,$){if(f(ne)!=="object")ne=$;else for(var se in $)ne[se]===void 0&&(ne[se]=$[se]);return ne}(L,{sampleFactor:.1,simplifyThreshold:0}),O=g(R,0,1),G=O/(O*U.sampleFactor),V=[],te=0;te<O;te+=G)V.push(g(R,te));return U.simplifyThreshold&&function(ne){for(var $=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,se=0,J=ne.length-1;3<ne.length&&0<=J;--J)s(r(ne,J-1),r(ne,J),r(ne,J+1),$)&&(ne.splice(J%ne.length,1),se++)}(V,U.simplifyThreshold),V}function o(R){for(var L,U=[],O=0;O<R.length;O++)R[O].type==="M"&&(L&&U.push(L),L=[]),L.push(t(R[O]));return U.push(L),U}function t(R){var L=[R.type];return R.type==="M"||R.type==="L"?L.push(R.x,R.y):R.type==="C"?L.push(R.x1,R.y1,R.x2,R.y2,R.x,R.y):R.type==="Q"&&L.push(R.x1,R.y1,R.x,R.y),L}function r(R,L){var U=R.length;return R[L<0?L%U+U:L%U]}function s(R,L,U,O){if(!O)return G=R,te=U,((V=L)[0]-G[0])*(te[1]-G[1])-(te[0]-G[0])*(V[1]-G[1])==0;var G,V,te;s.tmpPoint1===void 0&&(s.tmpPoint1=[],s.tmpPoint2=[]);var ne=s.tmpPoint1,$=s.tmpPoint2;ne.x=L.x-R.x,ne.y=L.y-R.y,$.x=U.x-L.x,$.y=U.y-L.y;var se=ne.x*$.x+ne.y*$.y,J=Math.sqrt(ne.x*ne.x+ne.y*ne.y),ue=Math.sqrt($.x*$.x+$.y*$.y);return Math.acos(se/(J*ue))<O}function i(R,L,U,O,G,V,te,ne,$){var se=1-$,J=Math.pow(se,3),ue=Math.pow(se,2),me=$*$,_e=me*$,he=J*R+3*ue*$*U+3*se*$*$*G+_e*te,Re=J*L+3*ue*$*O+3*se*$*$*V+_e*ne,ve=R+2*$*(U-R)+me*(G-2*U+R),ye=L+2*$*(O-L)+me*(V-2*O+L),P=U+2*$*(G-U)+me*(te-2*G+U),N=O+2*$*(V-O)+me*(ne-2*V+O),z=se*R+$*U,Q=se*L+$*O,oe=se*G+$*te,K=se*V+$*ne,xe=90-180*Math.atan2(ve-P,ye-N)/Math.PI;return(P<ve||ye<N)&&(xe+=180),{x:he,y:Re,m:{x:ve,y:ye},n:{x:P,y:N},start:{x:z,y:Q},end:{x:oe,y:K},alpha:xe}}function d(R,L,U,O,G,V,te,ne,$){return $==null?M(R,L,U,O,G,V,te,ne):i(R,L,U,O,G,V,te,ne,function(se,J,ue,me,_e,he,Re,ve,ye){if(!(ye<0||M(se,J,ue,me,_e,he,Re,ve)<ye)){var P,N=.5,z=1-N;for(P=M(se,J,ue,me,_e,he,Re,ve,z);.01<Math.abs(P-ye);)P=M(se,J,ue,me,_e,he,Re,ve,z+=(P<ye?1:-1)*(N/=2));return z}}(R,L,U,O,G,V,te,ne,$))}function g(R,L,U){for(var O,G,V,te,ne,$=0,se=0,J=(R=function(ue,me){function _e(Ae,Te,Ge){var Ze,Ye;if(!Ae)return["C",Te.x,Te.y,Te.x,Te.y,Te.x,Te.y];switch(Ae[0]in{T:1,Q:1}||(Te.qx=Te.qy=null),Ae[0]){case"M":Te.X=Ae[1],Te.Y=Ae[2];break;case"A":Ae=["C"].concat(function Fe(dt,Le,Oe,ze,Xe,pe,et,F,q,W){var X=Math.PI,ie=120*X/180,we,Me,Be,de,We=X/180*(+Xe||0),rt=[],lt,ft=function(Et,mt,Qe){var Dt=Et*Math.cos(Qe)-mt*Math.sin(Qe),st=Et*Math.sin(Qe)+mt*Math.cos(Qe);return{x:Dt,y:st}};if(W)we=W[0],Me=W[1],Be=W[2],de=W[3];else{lt=ft(dt,Le,-We),dt=lt.x,Le=lt.y,lt=ft(F,q,-We),F=lt.x,q=lt.y;var ut=(dt-F)/2,ht=(Le-q)/2,xt=ut*ut/(Oe*Oe)+ht*ht/(ze*ze);1<xt&&(xt=Math.sqrt(xt),Oe*=xt,ze*=xt);var pr=Oe*Oe,Yt=ze*ze,Hr=(pe===et?-1:1)*Math.sqrt(Math.abs((pr*Yt-pr*ht*ht-Yt*ut*ut)/(pr*ht*ht+Yt*ut*ut)));Be=Hr*Oe*ht/ze+(dt+F)/2,de=Hr*-ze*ut/Oe+(Le+q)/2,we=Math.asin(((Le-de)/ze).toFixed(9)),Me=Math.asin(((q-de)/ze).toFixed(9)),(we=dt<Be?X-we:we)<0&&(we=2*X+we),(Me=F<Be?X-Me:Me)<0&&(Me=2*X+Me),et&&Me<we&&(we-=2*X),!et&&we<Me&&(Me-=2*X)}var xr=Me-we;if(Math.abs(xr)>ie){var mr=Me,zr=F,qr=q;Me=we+ie*(et&&we<Me?1:-1),F=Be+Oe*Math.cos(Me),q=de+ze*Math.sin(Me),rt=Fe(F,q,Oe,ze,Xe,0,et,zr,qr,[Me,mr,Be,de])}xr=Me-we;var Xr=Math.cos(we),Yr=Math.sin(we),Qr=Math.cos(Me),on=Math.sin(Me),kr=Math.tan(xr/4),Pr=4/3*Oe*kr,ae=4/3*ze*kr,Ie=[dt,Le],He=[dt+Pr*Yr,Le-ae*Xr],Ue=[F+Pr*on,q-ae*Qr],$e=[F,q];He[0]=2*Ie[0]-He[0],He[1]=2*Ie[1]-He[1];{if(W)return[He,Ue,$e].concat(rt);rt=[He,Ue,$e].concat(rt).join().split(",");for(var De=[],vt=0,St=rt.length;vt<St;vt++)De[vt]=vt%2?ft(rt[vt-1],rt[vt],We).y:ft(rt[vt],rt[vt+1],We).x;return De}}.apply(0,[Te.x,Te.y].concat(Ae.slice(1))));break;case"S":Ye=Ge==="C"||Ge==="S"?(Ze=2*Te.x-Te.bx,2*Te.y-Te.by):(Ze=Te.x,Te.y),Ae=["C",Ze,Ye].concat(Ae.slice(1));break;case"T":Ge==="Q"||Ge==="T"?(Te.qx=2*Te.x-Te.qx,Te.qy=2*Te.y-Te.qy):(Te.qx=Te.x,Te.qy=Te.y),Ae=["C"].concat(E(Te.x,Te.y,Te.qx,Te.qy,Ae[1],Ae[2]));break;case"Q":Te.qx=Ae[1],Te.qy=Ae[2],Ae=["C"].concat(E(Te.x,Te.y,Ae[1],Ae[2],Ae[3],Ae[4]));break;case"L":Ae=["C"].concat(S(Te.x,Te.y,Ae[1],Ae[2]));break;case"H":Ae=["C"].concat(S(Te.x,Te.y,Ae[1],Te.y));break;case"V":Ae=["C"].concat(S(Te.x,Te.y,Te.x,Ae[1]));break;case"Z":Ae=["C"].concat(S(Te.x,Te.y,Te.X,Te.Y))}return Ae}function he(Ae,Te){if(7<Ae[Te].length){Ae[Te].shift();for(var Ge=Ae[Te];Ge.length;)Q[Te]="A",P&&(oe[Te]="A"),Ae.splice(Te++,0,["C"].concat(Ge.splice(0,6)));Ae.splice(Te,1),ve=Math.max(ye.length,P&&P.length||0)}}function Re(Ae,Te,Ge,Ze,Ye){Ae&&Te&&Ae[Ye][0]==="M"&&Te[Ye][0]!=="M"&&(Te.splice(Ye,0,["M",Ze.x,Ze.y]),Ge.bx=0,Ge.by=0,Ge.x=Ae[Ye][1],Ge.y=Ae[Ye][2],ve=Math.max(ye.length,P&&P.length||0))}var ve,ye=v(ue),P=me&&v(me),N={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},z={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Q=[],oe=[],K="",xe="";ve=Math.max(ye.length,P&&P.length||0);for(var ee=0;ee<ve;ee++){ye[ee]&&(K=ye[ee][0]),K!=="C"&&(Q[ee]=K,ee&&(xe=Q[ee-1])),ye[ee]=_e(ye[ee],N,xe),Q[ee]!=="A"&&K==="C"&&(Q[ee]="C"),he(ye,ee),P&&(P[ee]&&(K=P[ee][0]),K!=="C"&&(oe[ee]=K,ee&&(xe=oe[ee-1])),P[ee]=_e(P[ee],z,xe),oe[ee]!=="A"&&K==="C"&&(oe[ee]="C"),he(P,ee)),Re(ye,P,N,z,ee),Re(P,ye,z,N,ee);var ge=ye[ee],fe=P&&P[ee],le=ge.length,Ee=P&&fe.length;N.x=ge[le-2],N.y=ge[le-1],N.bx=parseFloat(ge[le-4])||N.x,N.by=parseFloat(ge[le-3])||N.y,z.bx=P&&(parseFloat(fe[Ee-4])||z.x),z.by=P&&(parseFloat(fe[Ee-3])||z.y),z.x=P&&fe[Ee-2],z.y=P&&fe[Ee-1]}return P?[ye,P]:ye}(R)).length;se<J;se++){if((V=R[se])[0]==="M")O=+V[1],G=+V[2];else{if(L<$+(te=d(O,G,V[1],V[2],V[3],V[4],V[5],V[6]))&&!U)return{x:(ne=d(O,G,V[1],V[2],V[3],V[4],V[5],V[6],L-$)).x,y:ne.y,alpha:ne.alpha};$+=te,O=+V[5],G=+V[6]}V.shift()+V}return(ne=U?$:i(O,G,V[0],V[1],V[2],V[3],V[4],V[5],1)).alpha&&(ne={x:ne.x,y:ne.y,alpha:ne.alpha}),ne}function v(R){var L,U=[],O=0,G=0,V=0,te=0,ne=0;if(!R)return U;R[0][0]==="M"&&(V=O=+R[0][1],te=G=+R[0][2],ne++,U[0]=["M",O,G]);for(var $,se,J=R.length===3&&R[0][0]==="M"&&R[1][0].toUpperCase()==="R"&&R[2][0].toUpperCase()==="Z",ue=ne,me=R.length;ue<me;ue++){if(U.push($=[]),(se=R[ue])[0]!==String.prototype.toUpperCase.call(se[0]))switch($[0]=String.prototype.toUpperCase.call(se[0]),$[0]){case"A":$[1]=se[1],$[2]=se[2],$[3]=se[3],$[4]=se[4],$[5]=se[5],$[6]=+(se[6]+O),$[7]=+(se[7]+G);break;case"V":$[1]=+se[1]+G;break;case"H":$[1]=+se[1]+O;break;case"R":for(var _e=2,he=(L=[O,G].concat(se.slice(1))).length;_e<he;_e++)L[_e]=+L[_e]+O,L[++_e]=+L[_e]+G;U.pop(),U=U.concat(x(L,J));break;case"M":V=+se[1]+O,te=+se[2]+G;break;default:for(var Re=1,ve=se.length;Re<ve;Re++)$[Re]=+se[Re]+(Re%2?O:G)}else if(se[0]==="R")L=[O,G].concat(se.slice(1)),U.pop(),U=U.concat(x(L,J)),$=["R"].concat(se.slice(-2));else for(var ye=0,P=se.length;ye<P;ye++)$[ye]=se[ye];switch($[0]){case"Z":O=V,G=te;break;case"H":O=$[1];break;case"V":G=$[1];break;case"M":V=$[$.length-2],te=$[$.length-1];break;default:O=$[$.length-2],G=$[$.length-1]}}return U}function x(R,L){for(var U=[],O=0,G=R.length;O<G-2*!L;O+=2){var V=[{x:+R[O-2],y:+R[O-1]},{x:+R[O],y:+R[O+1]},{x:+R[O+2],y:+R[O+3]},{x:+R[O+4],y:+R[O+5]}];L?O?G-4===O?V[3]={x:+R[0],y:+R[1]}:G-2===O&&(V[2]={x:+R[0],y:+R[1]},V[3]={x:+R[2],y:+R[3]}):V[0]={x:+R[G-2],y:+R[G-1]}:G-4===O?V[3]=V[2]:O||(V[0]={x:+R[O],y:+R[O+1]}),U.push(["C",(-V[0].x+6*V[1].x+V[2].x)/6,(-V[0].y+6*V[1].y+V[2].y)/6,(V[1].x+6*V[2].x-V[3].x)/6,(V[1].y+6*V[2].y-V[3].y)/6,V[2].x,V[2].y])}return U}function S(R,L,U,O){return[R,L,U,O,U,O]}function E(R,L,U,O,G,V){return[1/3*R+2/3*U,1/3*L+2/3*O,1/3*G+2/3*U,1/3*V+2/3*O,G,V]}function M(R,L,U,O,G,V,te,ne,$){$==null&&($=1);for(var se=($=1<$?1:$<0?0:$)/2,J=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],ue=0,me=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],_e=0;_e<12;_e++){var he=se*J[_e]+se,Re=D(he,R,U,G,te),ve=D(he,L,O,V,ne),ye=Re*Re+ve*ve;ue+=me[_e]*Math.sqrt(ye)}return se*ue}function D(R,L,U,O,G){return R*(R*(-3*L+9*U-9*O+3*G)+6*L-12*U+6*O)-3*L+3*U}n.default.Font=function(R){this.parent=R,this.cache={},this.font=void 0},n.default.Font.prototype.textBounds=function(R){var L,U=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,O=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,G=3<arguments.length?arguments[3]:void 0,V=4<arguments.length?arguments[4]:void 0,te=V&&V.renderer&&V.renderer._pInst||this.parent,ne=te._renderer.drawingContext;if(ne.textAlign||h.LEFT,ne.textBaseline||h.BASELINE,G=G||te._renderer._textSize,!L){var $,se,J=[],ue=[],me=[];me[0]=[];var _e=[],he=this._scale(G),Re=te._renderer.textLeading(),ve=0;this.font.forEachGlyph(R,U,O,G,V,function(Q,oe,K,xe){var ee=Q.getMetrics();Q.index===0||Q.index===10?me[ve+=1]=[]:(me[ve].push(oe+ee.xMin*he),me[ve].push(oe+ee.xMax*he),_e.push(K+ve*Re+-ee.yMin*he),_e.push(K+ve*Re+-ee.yMax*he))}),0<me[ve].length&&(J[ve]=Math.min.apply(null,me[ve]),ue[ve]=Math.max.apply(null,me[ve]));for(var ye=0,P=0;P<=ve;P++){J[P]=Math.min.apply(null,me[P]),ue[P]=Math.max.apply(null,me[P]);var N=ue[P]-J[P];ye<N&&(ye=N)}var z=Math.min.apply(null,J);L={x:z,y:$=Math.min.apply(null,_e),h:Math.max.apply(null,_e)-$,w:ye,advance:z-U},se=this._handleAlignment(te._renderer,R,L.x,L.y,L.w+L.advance),L.x=se.x,L.y=se.y}return L},n.default.Font.prototype.textToPoints=function(R,L,U,O,G){var V,te=0,ne=[],$=this._getGlyphs(R);O=O||this.parent._renderer._textSize;for(var se=0;se<$.length;se++){if(!($[V=se].name&&$[V].name==="space"||R.length===$.length&&R[V]===" "))for(var J=o($[se].getPath(L,U,O).commands),ue=0;ue<J.length;ue++)for(var me=l(J[ue],G),_e=0;_e<me.length;_e++)me[_e].x+=te,ne.push(me[_e]);te+=$[se].advanceWidth*this._scale(O)}return ne},n.default.Font.prototype._getGlyphs=function(R){return this.font.stringToGlyphs(R)},n.default.Font.prototype._getPath=function(R,L,U,O){var G=(O&&O.renderer&&O.renderer._pInst||this.parent)._renderer,V=this._handleAlignment(G,R,L,U);return this.font.getPath(R,V.x,V.y,G._textSize,O)},n.default.Font.prototype._getPathData=function(R,L,U,O){var G=3;return typeof R=="string"&&2<arguments.length?R=this._getPath(R,L,U,O):f(L)==="object"&&(O=L),O&&typeof O.decimals=="number"&&(G=O.decimals),R.toPathData(G)},n.default.Font.prototype._getSVG=function(R,L,U,O){var G=3;return typeof R=="string"&&2<arguments.length?R=this._getPath(R,L,U,O):f(L)==="object"&&(O=L),O&&(typeof O.decimals=="number"&&(G=O.decimals),typeof O.strokeWidth=="number"&&(R.strokeWidth=O.strokeWidth),O.fill!==void 0&&(R.fill=O.fill),O.stroke!==void 0&&(R.stroke=O.stroke)),R.toSVG(G)},n.default.Font.prototype._renderPath=function(R,L,U,O){var G,V=O&&O.renderer||this.parent._renderer,te=V.drawingContext;G=f(R)==="object"&&R.commands?R.commands:this._getPath(R,L,U,O).commands,te.beginPath();var ne=!0,$=!1,se=void 0;try{for(var J,ue=G[Symbol.iterator]();!(ne=(J=ue.next()).done);ne=!0){var me=J.value;me.type==="M"?te.moveTo(me.x,me.y):me.type==="L"?te.lineTo(me.x,me.y):me.type==="C"?te.bezierCurveTo(me.x1,me.y1,me.x2,me.y2,me.x,me.y):me.type==="Q"?te.quadraticCurveTo(me.x1,me.y1,me.x,me.y):me.type==="Z"&&te.closePath()}}catch(_e){$=!0,se=_e}finally{try{ne||ue.return==null||ue.return()}finally{if($)throw se}}return V._doStroke&&V._strokeSet&&te.stroke(),V._doFill&&(V._fillSet||V._setFill(h._DEFAULT_TEXT_FILL),te.fill()),this},n.default.Font.prototype._textWidth=function(R,L){return this.font.getAdvanceWidth(R,L)},n.default.Font.prototype._textAscent=function(R){return this.font.ascender*this._scale(R)},n.default.Font.prototype._textDescent=function(R){return-this.font.descender*this._scale(R)},n.default.Font.prototype._scale=function(R){return 1/this.font.unitsPerEm*(R||this.parent._renderer._textSize)},n.default.Font.prototype._handleAlignment=function(R,L,U,O,G){var V=R._textSize;switch(G===void 0&&(G=this._textWidth(L,V)),R._textAlign){case h.CENTER:U-=G/2;break;case h.RIGHT:U-=G}switch(R._textBaseline){case h.TOP:O+=this._textAscent(V);break;case h.CENTER:O+=this._textAscent(V)/2;break;case h.BOTTOM:O-=this._textDescent(V)}return{x:U,y:O}};var I=n.default;y.default=I},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":166,"core-js/modules/es.number.to-fixed":172,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],303:[function(e,b,y){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.object.to-string"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};n.default.prototype.append=function(a,f){return a.push(f),a},n.default.prototype.arrayCopy=function(a,f,l,o,t){var r,s;a=t!==void 0?(s=Math.min(t,a.length),r=o,a.slice(f,s+f)):(s=l!==void 0?(s=l,Math.min(s,a.length)):a.length,r=0,l=f,a.slice(0,s)),Array.prototype.splice.apply(l,[r,s].concat(a))},n.default.prototype.concat=function(a,f){return a.concat(f)},n.default.prototype.reverse=function(a){return a.reverse()},n.default.prototype.shorten=function(a){return a.pop(),a},n.default.prototype.shuffle=function(a,f){for(var l,o,t=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a),r=(a=f||t?a:a.slice()).length;1<r;)l=this.random(0,1)*r|0,o=a[--r],a[r]=a[l],a[l]=o;return a},n.default.prototype.sort=function(a,f){var l=f?a.slice(0,Math.min(f,a.length)):a,o=f?a.slice(Math.min(f,a.length)):[];return(l=typeof l[0]=="string"?l.sort():l.sort(function(t,r){return t-r})).concat(o)},n.default.prototype.splice=function(a,f,l){return Array.prototype.splice.apply(a,[l,0].concat(f)),a},n.default.prototype.subset=function(a,f,l){return l!==void 0?a.slice(f,f+l):a.slice(f,a.length)};var h=n.default;y.default=h},{"../core/main":264,"core-js/modules/es.array-buffer.constructor":148,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177}],304:[function(e,b,y){e("core-js/modules/es.array.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.repeat"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};n.default.prototype.float=function(a){return a instanceof Array?a.map(parseFloat):parseFloat(a)},n.default.prototype.int=function(a){var f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return a===1/0||a==="Infinity"?1/0:a===-1/0||a==="-Infinity"?-1/0:typeof a=="string"?parseInt(a,f):typeof a=="number"?0|a:typeof a=="boolean"?a?1:0:a instanceof Array?a.map(function(l){return n.default.prototype.int(l,f)}):void 0},n.default.prototype.str=function(a){return a instanceof Array?a.map(n.default.prototype.str):String(a)},n.default.prototype.boolean=function(a){return typeof a=="number"?a!==0:typeof a=="string"?a.toLowerCase()==="true":typeof a=="boolean"?a:a instanceof Array?a.map(n.default.prototype.boolean):void 0},n.default.prototype.byte=function(a){var f=n.default.prototype.int(a,10);return typeof f=="number"?(f+128)%256-128:f instanceof Array?f.map(n.default.prototype.byte):void 0},n.default.prototype.char=function(a){return typeof a!="number"||isNaN(a)?a instanceof Array?a.map(n.default.prototype.char):typeof a=="string"?n.default.prototype.char(parseInt(a,10)):void 0:String.fromCharCode(a)},n.default.prototype.unchar=function(a){return typeof a=="string"&&a.length===1?a.charCodeAt(0):a instanceof Array?a.map(n.default.prototype.unchar):void 0},n.default.prototype.hex=function(a,f){if(f=f==null?f=8:f,a instanceof Array)return a.map(function(o){return n.default.prototype.hex(o,f)});if(a===1/0||a===-1/0)return(a===1/0?"F":"0").repeat(f);if(typeof a=="number"){a<0&&(a=4294967295+a+1);for(var l=Number(a).toString(16).toUpperCase();l.length<f;)l="0".concat(l);return l.length>=f&&(l=l.substring(l.length-f,l.length)),l}},n.default.prototype.unhex=function(a){return a instanceof Array?a.map(n.default.prototype.unhex):parseInt("0x".concat(a),16)};var h=n.default;y.default=h},{"../core/main":264,"core-js/modules/es.array.map":161,"core-js/modules/es.number.constructor":170,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.repeat":188}],305:[function(e,b,y){e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};function h(t,r,s){var i=t<0,d=i?t.toString().substring(1):t.toString(),g=d.indexOf("."),v=g!==-1?d.substring(0,g):d,x=g!==-1?d.substring(g+1):"",S=i?"-":"";if(s!==void 0){var E="";(g!==-1||0<s-x.length)&&(E="."),x.length>s&&(x=x.substring(0,s));for(var M=0;M<r-v.length;M++)S+="0";S+=v,S+=E,S+=x;for(var D=0;D<s-x.length;D++)S+="0";return S}for(var I=0;I<Math.max(r-v.length,0);I++)S+="0";return S+=d}function a(t,r){var s=(t=t.toString()).indexOf("."),i=s!==-1?t.substring(s):"",d=s!==-1?t.substring(0,s):t;if(d=d.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),r===0)i="";else if(r!==void 0)if(r>i.length)for(var g=r-(i+=s===-1?".":"").length+1,v=0;v<g;v++)i+="0";else i=i.substring(0,r+1);return d+i}function f(t){return 0<parseFloat(t)?"+".concat(t.toString()):t.toString()}function l(t){return 0<=parseFloat(t)?" ".concat(t.toString()):t.toString()}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),n.default.prototype.join=function(t,r){return n.default._validateParameters("join",arguments),t.join(r)},n.default.prototype.match=function(t,r){return n.default._validateParameters("match",arguments),t.match(r)},n.default.prototype.matchAll=function(t,r){n.default._validateParameters("matchAll",arguments);for(var s=new RegExp(r,"g"),i=s.exec(t),d=[];i!==null;)d.push(i),i=s.exec(t);return d},n.default.prototype.nf=function(t,r,s){return n.default._validateParameters("nf",arguments),t instanceof Array?t.map(function(i){return h(i,r,s)}):Object.prototype.toString.call(t)==="[object Arguments]"?t.length===3?this.nf(t[0],t[1],t[2]):t.length===2?this.nf(t[0],t[1]):this.nf(t[0]):h(t,r,s)},n.default.prototype.nfc=function(t,r){return n.default._validateParameters("nfc",arguments),t instanceof Array?t.map(function(s){return a(s,r)}):a(t,r)},n.default.prototype.nfp=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];n.default._validateParameters("nfp",r);var i=n.default.prototype.nf.apply(this,r);return i instanceof Array?i.map(f):f(i)},n.default.prototype.nfs=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];n.default._validateParameters("nfs",r);var i=n.default.prototype.nf.apply(this,r);return i instanceof Array?i.map(l):l(i)},n.default.prototype.split=function(t,r){return n.default._validateParameters("split",arguments),t.split(r)},n.default.prototype.splitTokens=function(t,r){var s;if(n.default._validateParameters("splitTokens",arguments),r!==void 0){var i=r,d=/\]/g.exec(i),g=/\[/g.exec(i);s=g&&d?(i=i.slice(0,d.index)+i.slice(d.index+1),g=/\[/g.exec(i),i=i.slice(0,g.index)+i.slice(g.index+1),new RegExp("[\\[".concat(i,"\\]]"),"g")):d?(i=i.slice(0,d.index)+i.slice(d.index+1),new RegExp("[".concat(i,"\\]]"),"g")):g?(i=i.slice(0,g.index)+i.slice(g.index+1),new RegExp("[".concat(i,"\\[]"),"g")):new RegExp("[".concat(i,"]"),"g")}else s=/\s/g;return t.split(s).filter(function(v){return v})},n.default.prototype.trim=function(t){return n.default._validateParameters("trim",arguments),t instanceof Array?t.map(this.trim):t.trim()};var o=n.default;y.default=o},{"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/main":264,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],306:[function(e,b,y){Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};n.default.prototype.day=function(){return new Date().getDate()},n.default.prototype.hour=function(){return new Date().getHours()},n.default.prototype.minute=function(){return new Date().getMinutes()},n.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},n.default.prototype.month=function(){return new Date().getMonth()+1},n.default.prototype.second=function(){return new Date().getSeconds()},n.default.prototype.year=function(){return new Date().getFullYear()};var h=n.default;y.default=h},{"../core/main":264}],307:[function(e,b,y){function p(t){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(t)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.number.to-fixed"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n,h=(n=e("../core/main"))&&n.__esModule?n:{default:n};e("./p5.Geometry");var a=function(t){if(t&&t.__esModule)return t;if(t===null||p(t)!=="object"&&typeof t!="function")return{default:t};var r=f();if(r&&r.has(t))return r.get(t);var s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in t)if(Object.prototype.hasOwnProperty.call(t,d)){var g=i?Object.getOwnPropertyDescriptor(t,d):null;g&&(g.get||g.set)?Object.defineProperty(s,d,g):s[d]=t[d]}return s.default=t,r&&r.set(t,s),s}(e("../core/constants"));function f(){if(typeof WeakMap!="function")return null;var t=new WeakMap;return f=function(){return t},t}h.default.prototype.plane=function(t,r,s,i){this._assert3d("plane"),h.default._validateParameters("plane",arguments),t===void 0&&(t=50),r===void 0&&(r=t),s===void 0&&(s=1),i===void 0&&(i=1);var d="plane|".concat(s,"|").concat(i);if(!this._renderer.geometryInHash(d)){var g=new h.default.Geometry(s,i,function(){for(var v,x,S,E=0;E<=this.detailY;E++){x=E/this.detailY;for(var M=0;M<=this.detailX;M++)v=M/this.detailX,S=new h.default.Vector(v-.5,x-.5,0),this.vertices.push(S),this.uvs.push(v,x)}});g.computeFaces().computeNormals(),s<=1&&i<=1?g._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(d,g)}return this._renderer.drawBuffersScaled(d,t,r,1),this},h.default.prototype.box=function(t,r,s,i,d){this._assert3d("box"),h.default._validateParameters("box",arguments),t===void 0&&(t=50),r===void 0&&(r=t),s===void 0&&(s=r);var g=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;i===void 0&&(i=g?1:4),d===void 0&&(d=g?1:4);var v="box|".concat(i,"|").concat(d);if(!this._renderer.geometryInHash(v)){var x=new h.default.Geometry(i,d,function(){var S=[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]];this.strokeIndices=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]];for(var E=0;E<S.length;E++){for(var M=S[E],D=4*E,I=0;I<4;I++){var R=M[I],L=new h.default.Vector((2*(1&R)-1)/2,((2&R)-1)/2,((4&R)/2-1)/2);this.vertices.push(L),this.uvs.push(1&I,(2&I)/2)}this.faces.push([D,1+D,2+D]),this.faces.push([2+D,1+D,3+D])}});x.computeNormals(),i<=4&&d<=4?x._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(v,x)}return this._renderer.drawBuffersScaled(v,t,r,s),this},h.default.prototype.sphere=function(t,r,s){return this._assert3d("sphere"),h.default._validateParameters("sphere",arguments),t===void 0&&(t=50),r===void 0&&(r=24),s===void 0&&(s=16),this.ellipsoid(t,t,t,r,s),this};function l(t,r,s,i,d,g,v){t=t<=0?1:t,r=r<0?0:r,s=s<=0?t:s,i=i<3?3:i;var x,S,E,M=(g=g===void 0||g)?-2:0,D=(d=d<1?1:d)+((v=v===void 0?r!==0:v)?2:0),I=Math.atan2(t-r,s),R=Math.sin(I),L=Math.cos(I);for(x=M;x<=D;++x){var U=x/d,O=s*U,G=void 0;for(G=x<0?(U=O=0,t):d<x?(O=s,U=1,r):t+(r-t)*U,x!==-2&&x!==d+2||(G=0),O-=s/2,S=0;S<i;++S){var V=S/(i-1),te=2*Math.PI*V,ne=Math.sin(te),$=Math.cos(te);this.vertices.push(new h.default.Vector(ne*G,O,$*G));var se=void 0;se=x<0?new h.default.Vector(0,-1,0):d<x&&r?new h.default.Vector(0,1,0):new h.default.Vector(ne*L,R,$*L),this.vertexNormals.push(se),this.uvs.push(V,U)}}var J=0;if(g){for(E=0;E<i;++E){var ue=(E+1)%i;this.faces.push([J+E,J+i+ue,J+i+E])}J+=2*i}for(x=0;x<d;++x){for(S=0;S<i;++S){var me=(S+1)%i;this.faces.push([J+S,J+me,J+i+me]),this.faces.push([J+S,J+i+me,J+i+S])}J+=i}if(v)for(J+=i,S=0;S<i;++S)this.faces.push([J+S,J+(S+1)%i,J+i])}h.default.prototype.cylinder=function(t,r,s,i,d,g){this._assert3d("cylinder"),h.default._validateParameters("cylinder",arguments),t===void 0&&(t=50),r===void 0&&(r=t),s===void 0&&(s=24),i===void 0&&(i=1),g===void 0&&(g=!0),d===void 0&&(d=!0);var v="cylinder|".concat(s,"|").concat(i,"|").concat(d,"|").concat(g);if(!this._renderer.geometryInHash(v)){var x=new h.default.Geometry(s,i);l.call(x,1,1,1,s,i,d,g),s<=24&&i<=16?x._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(v,x)}return this._renderer.drawBuffersScaled(v,t,r,t),this},h.default.prototype.cone=function(t,r,s,i,d){this._assert3d("cone"),h.default._validateParameters("cone",arguments),t===void 0&&(t=50),r===void 0&&(r=t),s===void 0&&(s=24),i===void 0&&(i=1),d===void 0&&(d=!0);var g="cone|".concat(s,"|").concat(i,"|").concat(d);if(!this._renderer.geometryInHash(g)){var v=new h.default.Geometry(s,i);l.call(v,1,0,1,s,i,d,!1),s<=24&&i<=16?v._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(g,v)}return this._renderer.drawBuffersScaled(g,t,r,t),this},h.default.prototype.ellipsoid=function(t,r,s,i,d){this._assert3d("ellipsoid"),h.default._validateParameters("ellipsoid",arguments),t===void 0&&(t=50),r===void 0&&(r=t),s===void 0&&(s=t),i===void 0&&(i=24),d===void 0&&(d=16);var g="ellipsoid|".concat(i,"|").concat(d);if(!this._renderer.geometryInHash(g)){var v=new h.default.Geometry(i,d,function(){for(var x=0;x<=this.detailY;x++)for(var S=x/this.detailY,E=Math.PI*S-Math.PI/2,M=Math.cos(E),D=Math.sin(E),I=0;I<=this.detailX;I++){var R=I/this.detailX,L=2*Math.PI*R,U=Math.cos(L),O=Math.sin(L),G=new h.default.Vector(M*O,D,M*U);this.vertices.push(G),this.vertexNormals.push(G),this.uvs.push(R,S)}});v.computeFaces(),i<=24&&d<=24?v._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(g,v)}return this._renderer.drawBuffersScaled(g,t,r,s),this},h.default.prototype.torus=function(t,r,s,i){if(this._assert3d("torus"),h.default._validateParameters("torus",arguments),t===void 0)t=50;else if(!t)return;if(r===void 0)r=10;else if(!r)return;s===void 0&&(s=24),i===void 0&&(i=16);var d=(r/t).toPrecision(4),g="torus|".concat(d,"|").concat(s,"|").concat(i);if(!this._renderer.geometryInHash(g)){var v=new h.default.Geometry(s,i,function(){for(var x=0;x<=this.detailY;x++)for(var S=x/this.detailY,E=2*Math.PI*S,M=Math.cos(E),D=Math.sin(E),I=1+d*M,R=0;R<=this.detailX;R++){var L=R/this.detailX,U=2*Math.PI*L,O=Math.cos(U),G=Math.sin(U),V=new h.default.Vector(I*O,I*G,d*D),te=new h.default.Vector(M*O,M*G,D);this.vertices.push(V),this.vertexNormals.push(te),this.uvs.push(L,S)}});v.computeFaces(),s<=24&&i<=16?v._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(g,v)}return this._renderer.drawBuffersScaled(g,t,t,t),this},h.default.RendererGL.prototype.point=function(t,r,s){s===void 0&&(s=0);var i=[];return i.push(new h.default.Vector(t,r,s)),this._drawPoints(i,this.immediateMode.buffers.point),this},h.default.RendererGL.prototype.triangle=function(t){var r=t[0],s=t[1],i=t[2],d=t[3],g=t[4],v=t[5];if(!this.geometryInHash("tri")){var x=new h.default.Geometry(1,1,function(){var M=[];M.push(new h.default.Vector(0,0,0)),M.push(new h.default.Vector(0,1,0)),M.push(new h.default.Vector(1,0,0)),this.strokeIndices=[[0,1],[1,2],[2,0]],this.vertices=M,this.faces=[[0,1,2]],this.uvs=[0,0,0,1,1,1]});x._makeTriangleEdges()._edgesToVertices(),x.computeNormals(),this.createBuffers("tri",x)}var S=this.uMVMatrix.copy();try{var E=new h.default.Matrix([i-r,d-s,0,0,g-r,v-s,0,0,0,0,1,0,r,s,0,1]).mult(this.uMVMatrix);this.uMVMatrix=E,this.drawBuffers("tri")}finally{this.uMVMatrix=S}return this},h.default.RendererGL.prototype.ellipse=function(t){this.arc(t[0],t[1],t[2],t[3],0,a.TWO_PI,a.OPEN,t[4])},h.default.RendererGL.prototype.arc=function(t){var r,s,i=t,d=arguments[1],g=arguments[2],v=arguments[3],x=arguments[4],S=arguments[5],E=arguments[6],M=arguments[7]||25;if(s=Math.abs(S-x)>=a.TWO_PI?"".concat(r="ellipse","|").concat(M,"|"):"".concat(r="arc","|").concat(x,"|").concat(S,"|").concat(E,"|").concat(M,"|"),!this.geometryInHash(s)){var D=new h.default.Geometry(M,1,function(){if(this.strokeIndices=[],x.toFixed(10)!==S.toFixed(10)){E!==a.PIE&&E!==void 0||(this.vertices.push(new h.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var R=0;R<=M;R++){var L=(S-x)*(R/M)+x,U=.5+Math.cos(L)/2,O=.5+Math.sin(L)/2;this.vertices.push(new h.default.Vector(U,O,0)),this.uvs.push([U,O]),R<M-1&&(this.faces.push([0,R+1,R+2]),this.strokeIndices.push([R+1,R+2]))}switch(E){case a.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case a.CHORD:this.strokeIndices.push([0,1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case a.OPEN:this.strokeIndices.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1])}}});D.computeNormals(),M<=50?D._makeTriangleEdges()._edgesToVertices(D):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(r," with more than 50 detail")),this.createBuffers(s,D)}var I=this.uMVMatrix.copy();try{this.uMVMatrix.translate([i,d,0]),this.uMVMatrix.scale(g,v,1),this.drawBuffers(s)}finally{this.uMVMatrix=I}return this},h.default.RendererGL.prototype.rect=function(t){var r=this._pInst._glAttributes.perPixelLighting,s=t[0],i=t[1],d=t[2],g=t[3],v=t[4]||(r?1:24),x=t[5]||(r?1:16),S="rect|".concat(v,"|").concat(x);if(!this.geometryInHash(S)){var E=new h.default.Geometry(v,x,function(){for(var D=0;D<=this.detailY;D++)for(var I=D/this.detailY,R=0;R<=this.detailX;R++){var L=R/this.detailX,U=new h.default.Vector(L,I,0);this.vertices.push(U),this.uvs.push(L,I)}0<v&&0<x&&(this.strokeIndices=[[0,v],[v,(v+1)*(x+1)-1],[(v+1)*(x+1)-1,(v+1)*x],[(v+1)*x,0]])});E.computeFaces().computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(S,E)}var M=this.uMVMatrix.copy();try{this.uMVMatrix.translate([s,i,0]),this.uMVMatrix.scale(d,g,1),this.drawBuffers(S)}finally{this.uMVMatrix=M}return this},h.default.RendererGL.prototype.quad=function(t,r,s,i,d,g,v,x,S,E,M,D,I,R){I===void 0&&(I=2),R===void 0&&(R=2);var L="quad|".concat(t,"|").concat(r,"|").concat(s,"|").concat(i,"|").concat(d,"|").concat(g,"|").concat(v,"|").concat(x,"|").concat(S,"|").concat(E,"|").concat(M,"|").concat(D,"|").concat(I,"|").concat(R);if(!this.geometryInHash(L)){var U=new h.default.Geometry(I,R,function(){for(var se=1/(this.detailX-1),J=1/(this.detailY-1),ue=0;ue<this.detailY;ue++)for(var me=0;me<this.detailX;me++){var _e=me*se,he=ue*J,Re=(1-_e)*((1-he)*t+he*E)+_e*((1-he)*i+he*v),ve=(1-_e)*((1-he)*r+he*M)+_e*((1-he)*d+he*x),ye=(1-_e)*((1-he)*s+he*D)+_e*((1-he)*g+he*S);this.vertices.push(new h.default.Vector(Re,ve,ye)),this.uvs.push([_e,he])}});U.faces=[];for(var O=0;O<R-1;O++)for(var G=0;G<I-1;G++){var V=G+O*I,te=G+1+O*I,ne=G+1+(O+1)*I,$=G+(O+1)*I;U.faces.push([V,te,ne]),U.faces.push([V,ne,$])}U.computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(L,U)}return this.drawBuffers(L),this},h.default.RendererGL.prototype.bezier=function(t,r,s,i,d,g,v,x,S,E,M,D){arguments.length===8&&(M=x,E=v,x=g,v=d,d=i,i=s,s=g=S=D=0);var I=this._pInst._bezierDetail||20;this.beginShape();for(var R=0;R<=I;R++){var L=Math.pow(1-R/I,3),U=R/I*3*Math.pow(1-R/I,2),O=3*Math.pow(R/I,2)*(1-R/I),G=Math.pow(R/I,3);this.vertex(t*L+i*U+v*O+E*G,r*L+d*U+x*O+M*G,s*L+g*U+S*O+D*G)}return this.endShape(),this},h.default.RendererGL.prototype.curve=function(t,r,s,i,d,g,v,x,S,E,M,D){arguments.length===8&&(E=v,M=x,v=d,x=i,d=i=s,s=g=S=D=0);var I=this._pInst._curveDetail;this.beginShape();for(var R=0;R<=I;R++){var L=.5*Math.pow(R/I,3),U=.5*Math.pow(R/I,2),O=R/I*.5,G=L*(3*i-t-3*v+E)+U*(2*t-5*i+4*v-E)+O*(-t+v)+2*i*.5,V=L*(3*d-r-3*x+M)+U*(2*r-5*d+4*x-M)+O*(-r+x)+2*d*.5,te=L*(3*g-s-3*S+D)+U*(2*s-5*g+4*S-D)+O*(-s+S)+2*g*.5;this.vertex(G,V,te)}return this.endShape(),this},h.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(a.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(a.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},h.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var t,r,s,i,d,g=[],v=[],x=[],S=arguments.length;if((t=0)===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var E=1/this._lutBezierDetail,M=0,D=1,I=0;M<1;){if(t=parseFloat(M.toFixed(6)),this._lookUpTableBezier[I]=this._bezierCoefficients(t),D.toFixed(6)===E.toFixed(6)){t=parseFloat(D.toFixed(6))+parseFloat(M.toFixed(6)),++I,this._lookUpTableBezier[I]=this._bezierCoefficients(t);break}M+=E,D-=E,++I}}var R=this._lookUpTableBezier.length;if(S===6){for(this.isBezier=!0,g=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],v=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],d=0;d<R;d++)r=g[0]*this._lookUpTableBezier[d][0]+g[1]*this._lookUpTableBezier[d][1]+g[2]*this._lookUpTableBezier[d][2]+g[3]*this._lookUpTableBezier[d][3],s=v[0]*this._lookUpTableBezier[d][0]+v[1]*this._lookUpTableBezier[d][1]+v[2]*this._lookUpTableBezier[d][2]+v[3]*this._lookUpTableBezier[d][3],this.vertex(r,s);this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(S===9){for(this.isBezier=!0,g=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],v=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]],x=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],d=0;d<R;d++)r=g[0]*this._lookUpTableBezier[d][0]+g[1]*this._lookUpTableBezier[d][1]+g[2]*this._lookUpTableBezier[d][2]+g[3]*this._lookUpTableBezier[d][3],s=v[0]*this._lookUpTableBezier[d][0]+v[1]*this._lookUpTableBezier[d][1]+v[2]*this._lookUpTableBezier[d][2]+v[3]*this._lookUpTableBezier[d][3],i=x[0]*this._lookUpTableBezier[d][0]+x[1]*this._lookUpTableBezier[d][1]+x[2]*this._lookUpTableBezier[d][2]+x[3]*this._lookUpTableBezier[d][3],this.vertex(r,s,i);this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},h.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var t,r,s,i,d,g=[],v=[],x=[],S=arguments.length;if((t=0)===this._lookUpTableQuadratic.length||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var E=1/this._lutQuadraticDetail,M=0,D=1,I=0;M<1;){if(t=parseFloat(M.toFixed(6)),this._lookUpTableQuadratic[I]=this._quadraticCoefficients(t),D.toFixed(6)===E.toFixed(6)){t=parseFloat(D.toFixed(6))+parseFloat(M.toFixed(6)),++I,this._lookUpTableQuadratic[I]=this._quadraticCoefficients(t);break}M+=E,D-=E,++I}}var R=this._lookUpTableQuadratic.length;if(S===4){for(this.isQuadratic=!0,g=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],v=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],d=0;d<R;d++)r=g[0]*this._lookUpTableQuadratic[d][0]+g[1]*this._lookUpTableQuadratic[d][1]+g[2]*this._lookUpTableQuadratic[d][2],s=v[0]*this._lookUpTableQuadratic[d][0]+v[1]*this._lookUpTableQuadratic[d][1]+v[2]*this._lookUpTableQuadratic[d][2],this.vertex(r,s);this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(S===6){for(this.isQuadratic=!0,g=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],v=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]],x=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],d=0;d<R;d++)r=g[0]*this._lookUpTableQuadratic[d][0]+g[1]*this._lookUpTableQuadratic[d][1]+g[2]*this._lookUpTableQuadratic[d][2],s=v[0]*this._lookUpTableQuadratic[d][0]+v[1]*this._lookUpTableQuadratic[d][1]+v[2]*this._lookUpTableQuadratic[d][2],i=x[0]*this._lookUpTableQuadratic[d][0]+x[1]*this._lookUpTableQuadratic[d][1]+x[2]*this._lookUpTableQuadratic[d][2],this.vertex(r,s,i);this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},h.default.RendererGL.prototype.curveVertex=function(){var t,r,s,i,d,g=[],v=[],x=[],S=arguments.length;if((t=0)===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var E=1/this._lutBezierDetail,M=0,D=1,I=0;M<1;){if(t=parseFloat(M.toFixed(6)),this._lookUpTableBezier[I]=this._bezierCoefficients(t),D.toFixed(6)===E.toFixed(6)){t=parseFloat(D.toFixed(6))+parseFloat(M.toFixed(6)),++I,this._lookUpTableBezier[I]=this._bezierCoefficients(t);break}M+=E,D-=E,++I}}var R=this._lookUpTableBezier.length;if(S===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,g=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),v=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),d=0;d<R;d++)r=g[0]*this._lookUpTableBezier[d][0]+g[1]*this._lookUpTableBezier[d][1]+g[2]*this._lookUpTableBezier[d][2]+g[3]*this._lookUpTableBezier[d][3],s=v[0]*this._lookUpTableBezier[d][0]+v[1]*this._lookUpTableBezier[d][1]+v[2]*this._lookUpTableBezier[d][2]+v[3]*this._lookUpTableBezier[d][3],this.vertex(r,s);for(d=0;d<S;d++)this.immediateMode._curveVertex.shift()}}else if(S===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,g=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),v=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),x=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),d=0;d<R;d++)r=g[0]*this._lookUpTableBezier[d][0]+g[1]*this._lookUpTableBezier[d][1]+g[2]*this._lookUpTableBezier[d][2]+g[3]*this._lookUpTableBezier[d][3],s=v[0]*this._lookUpTableBezier[d][0]+v[1]*this._lookUpTableBezier[d][1]+v[2]*this._lookUpTableBezier[d][2]+v[3]*this._lookUpTableBezier[d][3],i=x[0]*this._lookUpTableBezier[d][0]+x[1]*this._lookUpTableBezier[d][1]+x[2]*this._lookUpTableBezier[d][2]+x[3]*this._lookUpTableBezier[d][3],this.vertex(r,s,i);for(d=0;d<S;d++)this.immediateMode._curveVertex.shift()}},h.default.RendererGL.prototype.image=function(t,r,s,i,d,g,v,x,S){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.texture(t),this._pInst.textureMode(a.NORMAL);var E=0;r<=t.width&&(E=r/t.width);var M=1;r+i<=t.width&&(M=(r+i)/t.width);var D=0;s<=t.height&&(D=s/t.height);var I=1;s+d<=t.height&&(I=(s+d)/t.height),this.beginShape(),this.vertex(g,v,0,E,D),this.vertex(g+x,v,0,M,D),this.vertex(g+x,v+S,0,M,I),this.vertex(g,v+S,0,E,I),this.endShape(a.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(a.REMOVE)};var o=h.default;y.default=o},{"../core/constants":253,"../core/main":264,"./p5.Geometry":313,"core-js/modules/es.array.concat":149,"core-js/modules/es.number.to-fixed":172}],308:[function(e,b,y){function p(o){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(o)}e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n,h=(n=e("../core/main"))&&n.__esModule?n:{default:n},a=function(o){if(o&&o.__esModule)return o;if(o===null||p(o)!=="object"&&typeof o!="function")return{default:o};var t=f();if(t&&t.has(o))return t.get(o);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in o)if(Object.prototype.hasOwnProperty.call(o,i)){var d=s?Object.getOwnPropertyDescriptor(o,i):null;d&&(d.get||d.set)?Object.defineProperty(r,i,d):r[i]=o[i]}return r.default=o,t&&t.set(o,r),r}(e("../core/constants"));function f(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return f=function(){return o},o}h.default.prototype.orbitControl=function(o,t,r){if(this._assert3d("orbitControl"),h.default._validateParameters("orbitControl",arguments),this.mouseX<this.width&&0<this.mouseX&&this.mouseY<this.height&&0<this.mouseY){var s=this._renderer._curCamera;o===void 0&&(o=1),t===void 0&&(t=o),r===void 0&&(r=.5),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var i=this.height<this.width?this.height:this.width;if(this._mouseWheelDeltaY!==this._pmouseWheelDeltaY&&(0<this._mouseWheelDeltaY?this._renderer._curCamera._orbit(0,0,r*i):this._renderer._curCamera._orbit(0,0,-r*i)),this.mouseIsPressed){if(this.mouseButton===this.LEFT){var d=-o*(this.mouseX-this.pmouseX)/i,g=t*(this.mouseY-this.pmouseY)/i;this._renderer._curCamera._orbit(d,g,0)}else if(this.mouseButton===this.RIGHT){var v=s._getLocalAxes(),x=Math.sqrt(v.x[0]*v.x[0]+v.x[2]*v.x[2]);x!==0&&(v.x[0]/=x,v.x[2]/=x);var S=Math.sqrt(v.y[0]*v.y[0]+v.y[2]*v.y[2]);S!==0&&(v.y[0]/=S,v.y[2]/=S);var E=-1*o*(this.mouseX-this.pmouseX),M=-1*t*(this.mouseY-this.pmouseY);s.setPosition(s.eyeX+E*v.x[0]+M*v.z[0],s.eyeY,s.eyeZ+E*v.x[2]+M*v.z[2])}}return this}},h.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var o=arguments.length,t=new Array(o),r=0;r<o;r++)t[r]=arguments[r];h.default._validateParameters("debugMode",t);for(var s=this._registeredMethods.post.length-1;0<=s;s--)this._registeredMethods.post[s].toString()!==this._grid().toString()&&this._registeredMethods.post[s].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(s,1);t[0]===a.GRID?this.registerMethod("post",this._grid.call(this,t[1],t[2],t[3],t[4],t[5])):t[0]===a.AXES?this.registerMethod("post",this._axesIcon.call(this,t[1],t[2],t[3],t[4])):(this.registerMethod("post",this._grid.call(this,t[0],t[1],t[2],t[3],t[4])),this.registerMethod("post",this._axesIcon.call(this,t[5],t[6],t[7],t[8])))},h.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var o=this._registeredMethods.post.length-1;0<=o;o--)this._registeredMethods.post[o].toString()!==this._grid().toString()&&this._registeredMethods.post[o].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(o,1)},h.default.prototype._grid=function(o,t,r,s,i){o===void 0&&(o=this.width/2),t===void 0&&(t=Math.round(o/30)<4?4:Math.round(o/30)),r===void 0&&(r=0),s===void 0&&(s=0),i===void 0&&(i=0);var d=o/t,g=o/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var v=0;v<=t;v++)this.beginShape(this.LINES),this.vertex(-g+r,s,v*d-g+i),this.vertex(+g+r,s,v*d-g+i),this.endShape();for(var x=0;x<=t;x++)this.beginShape(this.LINES),this.vertex(x*d-g+r,s,-g+i),this.vertex(x*d-g+r,s,+g+i),this.endShape();this.pop()}},h.default.prototype._axesIcon=function(o,t,r,s){return o===void 0&&(o=40<this.width/20?this.width/20:40),t===void 0&&(t=-this.width/4),r===void 0&&(r=t),s===void 0&&(s=t),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(t,r,s),this.vertex(t+o,r,s),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(t,r,s),this.vertex(t,r+o,s),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(t,r,s),this.vertex(t,r,s+o),this.endShape(),this.pop()}};var l=h.default;y.default=l},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182}],309:[function(e,b,y){function p(o){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(o)}Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n,h=(n=e("../core/main"))&&n.__esModule?n:{default:n},a=function(o){if(o&&o.__esModule)return o;if(o===null||p(o)!=="object"&&typeof o!="function")return{default:o};var t=f();if(t&&t.has(o))return t.get(o);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in o)if(Object.prototype.hasOwnProperty.call(o,i)){var d=s?Object.getOwnPropertyDescriptor(o,i):null;d&&(d.get||d.set)?Object.defineProperty(r,i,d):r[i]=o[i]}return r.default=o,t&&t.set(o,r),r}(e("../core/constants"));function f(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return f=function(){return o},o}h.default.prototype.ambientLight=function(o,t,r,s){this._assert3d("ambientLight"),h.default._validateParameters("ambientLight",arguments);var i=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(i._array[0],i._array[1],i._array[2]),this._renderer._enableLighting=!0,this},h.default.prototype.specularColor=function(o,t,r){this._assert3d("specularColor"),h.default._validateParameters("specularColor",arguments);var s=this.color.apply(this,arguments);return this._renderer.specularColors=[s._array[0],s._array[1],s._array[2]],this},h.default.prototype.directionalLight=function(o,t,r,s,i,d){var g,v,x,S;this._assert3d("directionalLight"),h.default._validateParameters("directionalLight",arguments),g=o instanceof h.default.Color?o:this.color(o,t,r);var E=arguments[arguments.length-1];S=typeof E=="number"?(v=arguments[arguments.length-3],x=arguments[arguments.length-2],arguments[arguments.length-1]):(v=E.x,x=E.y,E.z);var M=Math.sqrt(v*v+x*x+S*S);return this._renderer.directionalLightDirections.push(v/M,x/M,S/M),this._renderer.directionalLightDiffuseColors.push(g._array[0],g._array[1],g._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},h.default.prototype.pointLight=function(o,t,r,s,i,d){var g,v,x,S;this._assert3d("pointLight"),h.default._validateParameters("pointLight",arguments),g=o instanceof h.default.Color?o:this.color(o,t,r);var E=arguments[arguments.length-1];return S=typeof E=="number"?(v=arguments[arguments.length-3],x=arguments[arguments.length-2],arguments[arguments.length-1]):(v=E.x,x=E.y,E.z),this._renderer.pointLightPositions.push(v,x,S),this._renderer.pointLightDiffuseColors.push(g._array[0],g._array[1],g._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},h.default.prototype.lights=function(){if(this._assert3d("lights"),this._colorMode===a.RGB)this.ambientLight(128,128,128),this.directionalLight(128,128,128,0,0,-1);else{var o=this._colorMaxes[this._colorMode][2];this.ambientLight(0,0,o),this.directionalLight(0,0,o,0,0,-1)}return this},h.default.prototype.lightFalloff=function(o,t,r){return this._assert3d("lightFalloff"),h.default._validateParameters("lightFalloff",arguments),o<0&&(o=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),t<0&&(t=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),r<0&&(r=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),o===0&&t===0&&r===0&&(o=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=o,this._renderer.linearAttenuation=t,this._renderer.quadraticAttenuation=r,this},h.default.prototype.spotLight=function(o,t,r,s,i,d,g,v,x,S,E){var M,D,I;this._assert3d("spotLight"),h.default._validateParameters("spotLight",arguments);var R=arguments.length;switch(R){case 11:case 10:M=this.color(o,t,r),D=new h.default.Vector(s,i,d),I=new h.default.Vector(g,v,x);break;case 9:o instanceof h.default.Color?(M=o,D=new h.default.Vector(t,r,s),I=new h.default.Vector(i,d,g),S=v,E=x):s instanceof h.default.Vector?(M=this.color(o,t,r),D=s,I=new h.default.Vector(i,d,g),S=v,E=x):g instanceof h.default.Vector?(M=this.color(o,t,r),D=new h.default.Vector(s,i,d),I=g,S=v,E=x):(M=this.color(o,t,r),D=new h.default.Vector(s,i,d),I=new h.default.Vector(g,v,x));break;case 8:S=(I=o instanceof h.default.Color?(M=o,D=new h.default.Vector(t,r,s),new h.default.Vector(i,d,g)):s instanceof h.default.Vector?(M=this.color(o,t,r),D=s,new h.default.Vector(i,d,g)):(M=this.color(o,t,r),D=new h.default.Vector(s,i,d),g),v);break;case 7:o instanceof h.default.Color&&t instanceof h.default.Vector?(M=o,D=t,I=new h.default.Vector(r,s,i),S=d,E=g):o instanceof h.default.Color&&i instanceof h.default.Vector?(M=o,D=new h.default.Vector(t,r,s),I=i,S=d,E=g):s instanceof h.default.Vector&&i instanceof h.default.Vector?(M=this.color(o,t,r),D=s,I=i,S=d,E=g):I=o instanceof h.default.Color?(M=o,D=new h.default.Vector(t,r,s),new h.default.Vector(i,d,g)):s instanceof h.default.Vector?(M=this.color(o,t,r),D=s,new h.default.Vector(i,d,g)):(M=this.color(o,t,r),D=new h.default.Vector(s,i,d),g);break;case 6:s instanceof h.default.Vector&&i instanceof h.default.Vector?(M=this.color(o,t,r),D=s,I=i,S=d):o instanceof h.default.Color&&i instanceof h.default.Vector?(M=o,D=new h.default.Vector(t,r,s),I=i,S=d):o instanceof h.default.Color&&t instanceof h.default.Vector&&(M=o,D=t,I=new h.default.Vector(r,s,i),S=d);break;case 5:o instanceof h.default.Color&&t instanceof h.default.Vector&&r instanceof h.default.Vector?(M=o,D=t,I=r,S=s,E=i):s instanceof h.default.Vector&&i instanceof h.default.Vector?(M=this.color(o,t,r),D=s,I=i):o instanceof h.default.Color&&i instanceof h.default.Vector?(M=o,D=new h.default.Vector(t,r,s),I=i):o instanceof h.default.Color&&t instanceof h.default.Vector&&(M=o,D=t,I=new h.default.Vector(r,s,i));break;case 4:M=o,D=t,I=r,S=s;break;case 3:M=o,D=t,I=r;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(R<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(M._array[0],M._array[1],M._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(D.x,D.y,D.z),I.normalize(),this._renderer.spotLightDirections.push(I.x,I.y,I.z),S===void 0&&(S=Math.PI/3),E!==void 0&&E<1?(E=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):E===void 0&&(E=100),S=this._renderer._pInst._toRadians(S),this._renderer.spotLightAngle.push(Math.cos(S)),this._renderer.spotLightConc.push(E),this._renderer._enableLighting=!0,this},h.default.prototype.noLights=function(){return this._assert3d("noLights"),h.default._validateParameters("noLights",arguments),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this};var l=h.default;y.default=l},{"../core/constants":253,"../core/main":264}],310:[function(e,b,y){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};function h(f,l,o){for(var t=0,r=f.length;t<r;t++)if(f[t]!==l.getUint8(o+t,!1))return!1;return!0}e("./p5.Geometry"),n.default.prototype.loadModel=function(f){var l,o,t;n.default._validateParameters("loadModel",arguments);var r=f.slice(-4);typeof arguments[1]=="boolean"?(l=arguments[1],o=arguments[2],t=arguments[3],arguments[4]!==void 0&&(r=arguments[4])):(l=!1,o=arguments[1],t=arguments[2],arguments[3]!==void 0&&(r=arguments[3]));var s=new n.default.Geometry;s.gid="".concat(f,"|").concat(l);var i=this;return r.match(/\.stl$/i)?this.httpDo(f,"GET","arrayBuffer",function(d){(function(g,v){if(function(E){for(var M=new DataView(E),D=[115,111,108,105,100],I=0;I<5;I++)if(h(D,M,I))return!1;return!0}(v))(function(E,M){for(var D,I,R,L,U,O,G,V=new DataView(M),te=V.getUint32(80,!0),ne=!1,$=0;$<70;$++)V.getUint32($,!1)===1129270351&&V.getUint8($+4)===82&&V.getUint8($+5)===61&&(ne=!0,L=[],U=V.getUint8($+6)/255,O=V.getUint8($+7)/255,G=V.getUint8($+8)/255);for(var se=0;se<te;se++){var J=84+50*se,ue=V.getFloat32(J,!0),me=V.getFloat32(4+J,!0),_e=V.getFloat32(8+J,!0);if(ne){var he=V.getUint16(48+J,!0);R=(32768&he)==0?(D=(31&he)/31,I=(he>>5&31)/31,(he>>10&31)/31):(D=U,I=O,G)}for(var Re=new n.default.Vector(ue,me,_e),ve=1;ve<=3;ve++){var ye=J+12*ve,P=new n.default.Vector(V.getFloat32(ye,!0),V.getFloat32(4+ye,!0),V.getFloat32(8+ye,!0));E.vertices.push(P),E.vertexNormals.push(Re),ne&&L.push(D,I,R)}E.faces.push([3*se,3*se+1,3*se+2]),E.uvs.push([0,0],[0,0],[0,0])}})(g,v);else{var x=new DataView(v);if(!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");var S=new TextDecoder("utf-8").decode(x).split(`
`);(function(E,M){for(var D,I,R="",L=[],U=0;U<M.length;++U){for(var O=M[U].trim(),G=O.split(" "),V=0;V<G.length;++V)G[V]===""&&G.splice(V,1);if(G.length!==0)switch(R){case"":if(G[0]!=="solid")return console.error(O),console.error('Invalid state "'.concat(G[0],'", should be "solid"'));R="solid";break;case"solid":if(G[0]!=="facet"||G[1]!=="normal")return console.error(O),console.error('Invalid state "'.concat(G[0],'", should be "facet normal"'));D=new n.default.Vector(parseFloat(G[2]),parseFloat(G[3]),parseFloat(G[4])),E.vertexNormals.push(D,D,D),R="facet normal";break;case"facet normal":if(G[0]!=="outer"||G[1]!=="loop")return console.error(O),console.error('Invalid state "'.concat(G[0],'", should be "outer loop"'));R="vertex";break;case"vertex":if(G[0]==="vertex")I=new n.default.Vector(parseFloat(G[1]),parseFloat(G[2]),parseFloat(G[3])),E.vertices.push(I),E.uvs.push([0,0]),L.push(E.vertices.indexOf(I));else{if(G[0]!=="endloop")return console.error(O),console.error('Invalid state "'.concat(G[0],'", should be "vertex" or "endloop"'));E.faces.push(L),L=[],R="endloop"}break;case"endloop":if(G[0]!=="endfacet")return console.error(O),console.error('Invalid state "'.concat(G[0],'", should be "endfacet"'));R="endfacet";break;case"endfacet":if(G[0]!=="endsolid"){if(G[0]!=="facet"||G[1]!=="normal")return console.error(O),console.error('Invalid state "'.concat(G[0],'", should be "endsolid" or "facet normal"'));D=new n.default.Vector(parseFloat(G[2]),parseFloat(G[3]),parseFloat(G[4])),E.vertexNormals.push(D,D,D),R="facet normal"}break;default:console.error('Invalid state "'.concat(R,'"'))}}})(g,S)}})(s,d),l&&s.normalize(),i._decrementPreload(),typeof o=="function"&&o(s)},t):r.match(/\.obj$/i)?this.loadStrings(f,function(d){(function(g,v){for(var x={v:[],vt:[],vn:[]},S={},E=0;E<v.length;++E){var M=v[E].trim().split(/\b\s+/);if(0<M.length){if(M[0]==="v"||M[0]==="vn"){var D=new n.default.Vector(parseFloat(M[1]),parseFloat(M[2]),parseFloat(M[3]));x[M[0]].push(D)}else if(M[0]==="vt"){var I=[parseFloat(M[1]),1-parseFloat(M[2])];x[M[0]].push(I)}else if(M[0]==="f")for(var R=3;R<M.length;++R){for(var L=[],U=[1,R-1,R],O=0;O<U.length;++O){var G=M[U[O]],V=0;if(S[G]!==void 0)V=S[G];else{for(var te=G.split("/"),ne=0;ne<te.length;ne++)te[ne]=parseInt(te[ne])-1;V=S[G]=g.vertices.length,g.vertices.push(x.v[te[0]].copy()),x.vt[te[1]]?g.uvs.push(x.vt[te[1]].slice()):g.uvs.push([0,0]),x.vn[te[2]]&&g.vertexNormals.push(x.vn[te[2]].copy())}L.push(V)}L[0]!==L[1]&&L[0]!==L[2]&&L[1]!==L[2]&&g.faces.push(L)}}}g.vertexNormals.length===0&&g.computeNormals()})(s,d),l&&s.normalize(),i._decrementPreload(),typeof o=="function"&&o(s)},t):(n.default._friendlyFileLoadError(3,f),t?t():console.error("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),s},n.default.prototype.model=function(f){this._assert3d("model"),n.default._validateParameters("model",arguments),0<f.vertices.length&&(this._renderer.geometryInHash(f.gid)||(f._makeTriangleEdges()._edgesToVertices(),this._renderer.createBuffers(f.gid,f)),this._renderer.drawBuffers(f.gid))};var a=n.default;y.default=a},{"../core/main":264,"./p5.Geometry":313,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],311:[function(e,b,y){function p(o){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(o)}e("core-js/modules/es.array.join"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n,h=(n=e("../core/main"))&&n.__esModule?n:{default:n},a=function(o){if(o&&o.__esModule)return o;if(o===null||p(o)!=="object"&&typeof o!="function")return{default:o};var t=f();if(t&&t.has(o))return t.get(o);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in o)if(Object.prototype.hasOwnProperty.call(o,i)){var d=s?Object.getOwnPropertyDescriptor(o,i):null;d&&(d.get||d.set)?Object.defineProperty(r,i,d):r[i]=o[i]}return r.default=o,t&&t.set(o,r),r}(e("../core/constants"));function f(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return f=function(){return o},o}e("./p5.Texture"),h.default.prototype.loadShader=function(o,t,r,s){h.default._validateParameters("loadShader",arguments),s=s||console.error;function i(){g._decrementPreload(),r&&r(d)}var d=new h.default.Shader,g=this,v=!1,x=!1;return this.loadStrings(o,function(S){d._vertSrc=S.join(`
`),x=!0,v&&i()},s),this.loadStrings(t,function(S){d._fragSrc=S.join(`
`),v=!0,x&&i()},s),d},h.default.prototype.createShader=function(o,t){return this._assert3d("createShader"),h.default._validateParameters("createShader",arguments),new h.default.Shader(this._renderer,o,t)},h.default.prototype.shader=function(o){return this._assert3d("shader"),h.default._validateParameters("shader",arguments),o._renderer===void 0&&(o._renderer=this._renderer),o.init(),o.isStrokeShader()?this._renderer.userStrokeShader=o:(this._renderer.userFillShader=o,this._renderer._useNormalMaterial=!1),this},h.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},h.default.prototype.texture=function(o){return this._assert3d("texture"),h.default._validateParameters("texture",arguments),o.gifProperties&&o._animateGif(this),this._renderer.drawMode=a.TEXTURE,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._tex=o,this._renderer._setProperty("_doFill",!0),this},h.default.prototype.textureMode=function(o){o!==a.IMAGE&&o!==a.NORMAL?console.warn("You tried to set ".concat(o," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=o},h.default.prototype.textureWrap=function(o){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:o;this._renderer.textureWrapX=o,this._renderer.textureWrapY=t;for(var r=this._renderer.textures,s=0;s<r.length;s++)r[s].setWrapMode(o,t)},h.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var o=arguments.length,t=new Array(o),r=0;r<o;r++)t[r]=arguments[r];return h.default._validateParameters("normalMaterial",t),this._renderer.drawMode=a.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},h.default.prototype.ambientMaterial=function(o,t,r){this._assert3d("ambientMaterial"),h.default._validateParameters("ambientMaterial",arguments);var s=h.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=s._array,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this._renderer._setProperty("_doFill",!0),this},h.default.prototype.emissiveMaterial=function(o,t,r,s){this._assert3d("emissiveMaterial"),h.default._validateParameters("emissiveMaterial",arguments);var i=h.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=i._array,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},h.default.prototype.specularMaterial=function(o,t,r,s){this._assert3d("specularMaterial"),h.default._validateParameters("specularMaterial",arguments);var i=h.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=i._array,this._renderer._useSpecularMaterial=!0,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},h.default.prototype.shininess=function(o){return this._assert3d("shininess"),h.default._validateParameters("shininess",arguments),o<1&&(o=1),this._renderer._useShininess=o,this},h.default.RendererGL.prototype._applyColorBlend=function(o){var t=this.GL,r=this.drawMode===a.TEXTURE||o[o.length-1]<1||this._isErasing;return r!==this._isBlending&&(r||this.curBlendMode!==a.BLEND&&this.curBlendMode!==a.ADD?t.enable(t.BLEND):t.disable(t.BLEND),t.depthMask(!0),this._isBlending=r),this._applyBlendMode(),o},h.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var o=this.GL;switch(this.curBlendMode){case a.BLEND:case a.ADD:o.blendEquation(o.FUNC_ADD),o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA);break;case a.REMOVE:o.blendEquation(o.FUNC_REVERSE_SUBTRACT),o.blendFunc(o.SRC_ALPHA,o.DST_ALPHA);break;case a.MULTIPLY:o.blendEquationSeparate(o.FUNC_ADD,o.FUNC_ADD),o.blendFuncSeparate(o.ZERO,o.SRC_COLOR,o.ONE,o.ONE);break;case a.SCREEN:o.blendEquationSeparate(o.FUNC_ADD,o.FUNC_ADD),o.blendFuncSeparate(o.ONE_MINUS_DST_COLOR,o.ONE,o.ONE,o.ONE);break;case a.EXCLUSION:o.blendEquationSeparate(o.FUNC_ADD,o.FUNC_ADD),o.blendFuncSeparate(o.ONE_MINUS_DST_COLOR,o.ONE_MINUS_SRC_COLOR,o.ONE,o.ONE);break;case a.REPLACE:o.blendEquation(o.FUNC_ADD),o.blendFunc(o.ONE,o.ZERO);break;case a.SUBTRACT:o.blendEquationSeparate(o.FUNC_REVERSE_SUBTRACT,o.FUNC_ADD),o.blendFuncSeparate(o.SRC_ALPHA,o.ONE,o.ONE,o.ONE);break;case a.DARKEST:this.blendExt?(o.blendEquationSeparate(this.blendExt.MIN_EXT,o.FUNC_ADD),o.blendFuncSeparate(o.ONE,o.ONE,o.ONE,o.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case a.LIGHTEST:this.blendExt?(o.blendEquationSeparate(this.blendExt.MAX_EXT,o.FUNC_ADD),o.blendFuncSeparate(o.ONE,o.ONE,o.ONE,o.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var l=h.default;y.default=l},{"../core/constants":253,"../core/main":264,"./p5.Texture":320,"core-js/modules/es.array.join":159}],312:[function(e,b,y){Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};n.default.prototype.camera=function(){var a;this._assert3d("camera");for(var f=arguments.length,l=new Array(f),o=0;o<f;o++)l[o]=arguments[o];return n.default._validateParameters("camera",l),(a=this._renderer._curCamera).camera.apply(a,l),this},n.default.prototype.perspective=function(){var a;this._assert3d("perspective");for(var f=arguments.length,l=new Array(f),o=0;o<f;o++)l[o]=arguments[o];return n.default._validateParameters("perspective",l),(a=this._renderer._curCamera).perspective.apply(a,l),this},n.default.prototype.ortho=function(){var a;this._assert3d("ortho");for(var f=arguments.length,l=new Array(f),o=0;o<f;o++)l[o]=arguments[o];return n.default._validateParameters("ortho",l),(a=this._renderer._curCamera).ortho.apply(a,l),this},n.default.prototype.frustum=function(){var a;this._assert3d("frustum");for(var f=arguments.length,l=new Array(f),o=0;o<f;o++)l[o]=arguments[o];return n.default._validateParameters("frustum",l),(a=this._renderer._curCamera).frustum.apply(a,l),this},n.default.prototype.createCamera=function(){this._assert3d("createCamera");var a=new n.default.Camera(this._renderer);return a._computeCameraDefaultSettings(),a._setDefaultCamera(),this._renderer._curCamera=a},n.default.Camera=function(a){this._renderer=a,this.cameraType="default",this.cameraMatrix=new n.default.Matrix,this.projMatrix=new n.default.Matrix},n.default.Camera.prototype.perspective=function(a,f,l,o){this.cameraType=0<arguments.length?"custom":"default",a===void 0?(a=this.defaultCameraFOV,this.cameraFOV=a):this.cameraFOV=this._renderer._pInst._toRadians(a),f===void 0&&(f=this.defaultAspectRatio),l===void 0&&(l=this.defaultCameraNear),o===void 0&&(o=this.defaultCameraFar),l<=1e-4&&(l=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),o<l&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=f,this.cameraNear=l,this.cameraFar=o,this.projMatrix=n.default.Matrix.identity();var t=1/Math.tan(this.cameraFOV/2),r=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(t/f,0,0,0,0,-t,0,0,0,0,(o+l)*r,-1,0,0,2*o*l*r,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])},n.default.Camera.prototype.ortho=function(a,f,l,o,t,r){a===void 0&&(a=-this._renderer.width/2),f===void 0&&(f=this._renderer.width/2),l===void 0&&(l=-this._renderer.height/2),o===void 0&&(o=this._renderer.height/2),t===void 0&&(t=0),r===void 0&&(r=Math.max(this._renderer.width,this._renderer.height));var s=f-a,i=o-l,d=r-t,g=2/s,v=2/i,x=-2/d,S=-(f+a)/s,E=-(o+l)/i,M=-(r+t)/d;this.projMatrix=n.default.Matrix.identity(),this.projMatrix.set(g,0,0,0,0,-v,0,0,0,0,x,0,S,E,M,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},n.default.Camera.prototype.frustum=function(a,f,l,o,t,r){a===void 0&&(a=-this._renderer.width/2),f===void 0&&(f=this._renderer.width/2),l===void 0&&(l=-this._renderer.height/2),o===void 0&&(o=this._renderer.height/2),t===void 0&&(t=0),r===void 0&&(r=Math.max(this._renderer.width,this._renderer.height));var s=f-a,i=o-l,d=r-t,g=2*t/s,v=2*t/i,x=-2*r*t/d,S=(f+a)/s,E=(o+l)/i,M=-(r+t)/d;this.projMatrix=n.default.Matrix.identity(),this.projMatrix.set(g,0,0,0,0,v,0,0,S,E,M,-1,0,0,x,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},n.default.Camera.prototype._rotateView=function(a,f,l,o){var t=this.centerX,r=this.centerY,s=this.centerZ;t-=this.eyeX,r-=this.eyeY,s-=this.eyeZ;var i=n.default.Matrix.identity(this._renderer._pInst);i.rotate(this._renderer._pInst._toRadians(a),f,l,o);var d=[t*i.mat4[0]+r*i.mat4[4]+s*i.mat4[8],t*i.mat4[1]+r*i.mat4[5]+s*i.mat4[9],t*i.mat4[2]+r*i.mat4[6]+s*i.mat4[10]];d[0]+=this.eyeX,d[1]+=this.eyeY,d[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,d[0],d[1],d[2],this.upX,this.upY,this.upZ)},n.default.Camera.prototype.pan=function(a){var f=this._getLocalAxes();this._rotateView(a,f.y[0],f.y[1],f.y[2])},n.default.Camera.prototype.tilt=function(a){var f=this._getLocalAxes();this._rotateView(a,f.x[0],f.x[1],f.x[2])},n.default.Camera.prototype.lookAt=function(a,f,l){this.camera(this.eyeX,this.eyeY,this.eyeZ,a,f,l,this.upX,this.upY,this.upZ)},n.default.Camera.prototype.camera=function(a,f,l,o,t,r,s,i,d){a===void 0&&(a=this.defaultEyeX,f=this.defaultEyeY,l=this.defaultEyeZ,o=a,t=f,i=1,d=s=r=0),this.eyeX=a,this.eyeY=f,this.eyeZ=l,o!==void 0&&(this.centerX=o,this.centerY=t,this.centerZ=r),s!==void 0&&(this.upX=s,this.upY=i,this.upZ=d);var g=this._getLocalAxes();this.cameraMatrix.set(g.x[0],g.y[0],g.z[0],0,g.x[1],g.y[1],g.z[1],0,g.x[2],g.y[2],g.z[2],0,0,0,0,1);var v=-a,x=-f,S=-l;return this.cameraMatrix.translate([v,x,S]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this},n.default.Camera.prototype.move=function(a,f,l){var o=this._getLocalAxes(),t=[o.x[0]*a,o.x[1]*a,o.x[2]*a],r=[o.y[0]*f,o.y[1]*f,o.y[2]*f],s=[o.z[0]*l,o.z[1]*l,o.z[2]*l];this.camera(this.eyeX+t[0]+r[0]+s[0],this.eyeY+t[1]+r[1]+s[1],this.eyeZ+t[2]+r[2]+s[2],this.centerX+t[0]+r[0]+s[0],this.centerY+t[1]+r[1]+s[1],this.centerZ+t[2]+r[2]+s[2],0,1,0)},n.default.Camera.prototype.setPosition=function(a,f,l){var o=a-this.eyeX,t=f-this.eyeY,r=l-this.eyeZ;this.camera(a,f,l,this.centerX+o,this.centerY+t,this.centerZ+r,0,1,0)},n.default.Camera.prototype._computeCameraDefaultSettings=function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ},n.default.Camera.prototype._setDefaultCamera=function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"},n.default.Camera.prototype._resize=function(){this.cameraType==="default"?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)},n.default.Camera.prototype.copy=function(){var a=new n.default.Camera(this._renderer);return a.cameraFOV=this.cameraFOV,a.aspectRatio=this.aspectRatio,a.eyeX=this.eyeX,a.eyeY=this.eyeY,a.eyeZ=this.eyeZ,a.centerX=this.centerX,a.centerY=this.centerY,a.centerZ=this.centerZ,a.cameraNear=this.cameraNear,a.cameraFar=this.cameraFar,a.cameraType=this.cameraType,a.cameraMatrix=this.cameraMatrix.copy(),a.projMatrix=this.projMatrix.copy(),a},n.default.Camera.prototype._getLocalAxes=function(){var a=this.eyeX-this.centerX,f=this.eyeY-this.centerY,l=this.eyeZ-this.centerZ,o=Math.sqrt(a*a+f*f+l*l);o!==0&&(a/=o,f/=o,l/=o);var t=this.upX,r=this.upY,s=this.upZ,i=r*l-s*f,d=-t*l+s*a,g=t*f-r*a;t=f*g-l*d,r=-a*g+l*i,s=a*d-f*i;var v=Math.sqrt(i*i+d*d+g*g);v!==0&&(i/=v,d/=v,g/=v);var x=Math.sqrt(t*t+r*r+s*s);return x!==0&&(t/=x,r/=x,s/=x),{x:[i,d,g],y:[t,r,s],z:[a,f,l]}},n.default.Camera.prototype._orbit=function(a,f,l){var o=this.eyeX-this.centerX,t=this.eyeY-this.centerY,r=this.eyeZ-this.centerZ,s=Math.sqrt(o*o+t*t+r*r),i=Math.atan2(o,r),d=Math.acos(Math.max(-1,Math.min(1,t/s)));i+=a,(s+=l)<0&&(s=.1),(d+=f)>Math.PI?d=Math.PI:d<=0&&(d=.001);var g=Math.sin(d)*s*Math.sin(i),v=Math.cos(d)*s,x=Math.sin(d)*s*Math.cos(i);this.camera(g+this.centerX,v+this.centerY,x+this.centerZ,this.centerX,this.centerY,this.centerZ,0,1,0)},n.default.Camera.prototype._isActive=function(){return this===this._renderer._curCamera},n.default.prototype.setCamera=function(a){this._renderer._curCamera=a,this._renderer.uPMatrix.set(a.projMatrix.mat4[0],a.projMatrix.mat4[1],a.projMatrix.mat4[2],a.projMatrix.mat4[3],a.projMatrix.mat4[4],a.projMatrix.mat4[5],a.projMatrix.mat4[6],a.projMatrix.mat4[7],a.projMatrix.mat4[8],a.projMatrix.mat4[9],a.projMatrix.mat4[10],a.projMatrix.mat4[11],a.projMatrix.mat4[12],a.projMatrix.mat4[13],a.projMatrix.mat4[14],a.projMatrix.mat4[15])};var h=n.default.Camera;y.default=h},{"../core/main":264}],313:[function(e,b,y){e("core-js/modules/es.string.sub"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};n.default.Geometry=function(a,f,l){return this.vertices=[],this.lineVertices=[],this.lineNormals=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.detailX=a!==void 0?a:1,this.detailY=f!==void 0?f:1,this.dirtyFlags={},l instanceof Function&&l.call(this),this},n.default.Geometry.prototype.reset=function(){this.lineVertices.length=0,this.lineNormals.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}},n.default.Geometry.prototype.computeFaces=function(){this.faces.length=0;for(var a,f,l,o,t=this.detailX+1,r=0;r<this.detailY;r++)for(var s=0;s<this.detailX;s++)f=(a=r*t+s)+1,l=(r+1)*t+s+1,o=(r+1)*t+s,this.faces.push([a,f,o]),this.faces.push([o,f,l]);return this},n.default.Geometry.prototype._getFaceNormal=function(a){var f=this.faces[a],l=this.vertices[f[0]],o=this.vertices[f[1]],t=this.vertices[f[2]],r=n.default.Vector.sub(o,l),s=n.default.Vector.sub(t,l),i=n.default.Vector.cross(r,s),d=n.default.Vector.mag(i),g=d/(n.default.Vector.mag(r)*n.default.Vector.mag(s));return g===0||isNaN(g)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),i):(1<g&&(g=1),i.mult(Math.asin(g)/d))},n.default.Geometry.prototype.computeNormals=function(){var a,f=this.vertexNormals,l=this.vertices,o=this.faces;for(a=f.length=0;a<l.length;++a)f.push(new n.default.Vector);for(var t=0;t<o.length;++t)for(var r=o[t],s=this._getFaceNormal(t),i=0;i<3;++i)f[r[i]].add(s);for(a=0;a<l.length;++a)f[a].normalize();return this},n.default.Geometry.prototype.averageNormals=function(){for(var a=0;a<=this.detailY;a++){var f=this.detailX+1,l=n.default.Vector.add(this.vertexNormals[a*f],this.vertexNormals[a*f+this.detailX]);l=n.default.Vector.div(l,2),this.vertexNormals[a*f]=l,this.vertexNormals[a*f+this.detailX]=l}return this},n.default.Geometry.prototype.averagePoleNormals=function(){for(var a=new n.default.Vector(0,0,0),f=0;f<this.detailX;f++)a.add(this.vertexNormals[f]);a=n.default.Vector.div(a,this.detailX);for(var l=0;l<this.detailX;l++)this.vertexNormals[l]=a;a=new n.default.Vector(0,0,0);for(var o=this.vertices.length-1;o>this.vertices.length-1-this.detailX;o--)a.add(this.vertexNormals[o]);a=n.default.Vector.div(a,this.detailX);for(var t=this.vertices.length-1;t>this.vertices.length-1-this.detailX;t--)this.vertexNormals[t]=a;return this},n.default.Geometry.prototype._makeTriangleEdges=function(){if(this.edges.length=0,Array.isArray(this.strokeIndices))for(var a=0,f=this.strokeIndices.length;a<f;a++)this.edges.push(this.strokeIndices[a]);else for(var l=0;l<this.faces.length;l++)this.edges.push([this.faces[l][0],this.faces[l][1]]),this.edges.push([this.faces[l][1],this.faces[l][2]]),this.edges.push([this.faces[l][2],this.faces[l][0]]);return this},n.default.Geometry.prototype._edgesToVertices=function(){this.lineVertices.length=0;for(var a=this.lineNormals.length=0;a<this.edges.length;a++){var f=this.vertices[this.edges[a][0]],l=this.vertices[this.edges[a][1]],o=l.copy().sub(f).normalize(),t=f.array(),r=f.array(),s=l.array(),i=l.array(),d=o.array(),g=o.array();d.push(1),g.push(-1),this.lineNormals.push(d,g,d,d,g,g),this.lineVertices.push(t,r,s,s,r,i)}return this},n.default.Geometry.prototype.normalize=function(){if(0<this.vertices.length){for(var a=this.vertices[0].copy(),f=this.vertices[0].copy(),l=0;l<this.vertices.length;l++)a.x=Math.max(a.x,this.vertices[l].x),f.x=Math.min(f.x,this.vertices[l].x),a.y=Math.max(a.y,this.vertices[l].y),f.y=Math.min(f.y,this.vertices[l].y),a.z=Math.max(a.z,this.vertices[l].z),f.z=Math.min(f.z,this.vertices[l].z);for(var o=n.default.Vector.lerp(a,f,.5),t=n.default.Vector.sub(a,f),r=200/Math.max(Math.max(t.x,t.y),t.z),s=0;s<this.vertices.length;s++)this.vertices[s].sub(o),this.vertices[s].mult(r)}return this};var h=n.default.Geometry;y.default=h},{"../core/main":264,"core-js/modules/es.string.sub":192}],314:[function(e,b,y){e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p},h=Array,a=function(l){return l instanceof Array};typeof Float32Array<"u"&&(h=Float32Array,a=function(l){return l instanceof Array||l instanceof Float32Array}),n.default.Matrix=function(){for(var l=new Array(arguments.length),o=0;o<l.length;++o)l[o]=arguments[o];return l.length&&l[l.length-1]instanceof n.default&&(this.p5=l[l.length-1]),l[0]==="mat3"?this.mat3=Array.isArray(l[1])?l[1]:new h([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(l[0])?l[0]:new h([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},n.default.Matrix.prototype.set=function(l){return l instanceof n.default.Matrix?this.mat4=l.mat4:a(l)?this.mat4=l:arguments.length===16&&(this.mat4[0]=l,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this},n.default.Matrix.prototype.get=function(){return new n.default.Matrix(this.mat4,this.p5)},n.default.Matrix.prototype.copy=function(){var l=new n.default.Matrix(this.p5);return l.mat4[0]=this.mat4[0],l.mat4[1]=this.mat4[1],l.mat4[2]=this.mat4[2],l.mat4[3]=this.mat4[3],l.mat4[4]=this.mat4[4],l.mat4[5]=this.mat4[5],l.mat4[6]=this.mat4[6],l.mat4[7]=this.mat4[7],l.mat4[8]=this.mat4[8],l.mat4[9]=this.mat4[9],l.mat4[10]=this.mat4[10],l.mat4[11]=this.mat4[11],l.mat4[12]=this.mat4[12],l.mat4[13]=this.mat4[13],l.mat4[14]=this.mat4[14],l.mat4[15]=this.mat4[15],l},n.default.Matrix.identity=function(l){return new n.default.Matrix(l)},n.default.Matrix.prototype.transpose=function(l){var o,t,r,s,i,d;return l instanceof n.default.Matrix?(o=l.mat4[1],t=l.mat4[2],r=l.mat4[3],s=l.mat4[6],i=l.mat4[7],d=l.mat4[11],this.mat4[0]=l.mat4[0],this.mat4[1]=l.mat4[4],this.mat4[2]=l.mat4[8],this.mat4[3]=l.mat4[12],this.mat4[4]=o,this.mat4[5]=l.mat4[5],this.mat4[6]=l.mat4[9],this.mat4[7]=l.mat4[13],this.mat4[8]=t,this.mat4[9]=s,this.mat4[10]=l.mat4[10],this.mat4[11]=l.mat4[14],this.mat4[12]=r,this.mat4[13]=i,this.mat4[14]=d,this.mat4[15]=l.mat4[15]):a(l)&&(o=l[1],t=l[2],r=l[3],s=l[6],i=l[7],d=l[11],this.mat4[0]=l[0],this.mat4[1]=l[4],this.mat4[2]=l[8],this.mat4[3]=l[12],this.mat4[4]=o,this.mat4[5]=l[5],this.mat4[6]=l[9],this.mat4[7]=l[13],this.mat4[8]=t,this.mat4[9]=s,this.mat4[10]=l[10],this.mat4[11]=l[14],this.mat4[12]=r,this.mat4[13]=i,this.mat4[14]=d,this.mat4[15]=l[15]),this},n.default.Matrix.prototype.invert=function(l){var o,t,r,s,i,d,g,v,x,S,E,M,D,I,R,L;l instanceof n.default.Matrix?(o=l.mat4[0],t=l.mat4[1],r=l.mat4[2],s=l.mat4[3],i=l.mat4[4],d=l.mat4[5],g=l.mat4[6],v=l.mat4[7],x=l.mat4[8],S=l.mat4[9],E=l.mat4[10],M=l.mat4[11],D=l.mat4[12],I=l.mat4[13],R=l.mat4[14],L=l.mat4[15]):a(l)&&(o=l[0],t=l[1],r=l[2],s=l[3],i=l[4],d=l[5],g=l[6],v=l[7],x=l[8],S=l[9],E=l[10],M=l[11],D=l[12],I=l[13],R=l[14],L=l[15]);var U=o*d-t*i,O=o*g-r*i,G=o*v-s*i,V=t*g-r*d,te=t*v-s*d,ne=r*v-s*g,$=x*I-S*D,se=x*R-E*D,J=x*L-M*D,ue=S*R-E*I,me=S*L-M*I,_e=E*L-M*R,he=U*_e-O*me+G*ue+V*J-te*se+ne*$;return he?(he=1/he,this.mat4[0]=(d*_e-g*me+v*ue)*he,this.mat4[1]=(r*me-t*_e-s*ue)*he,this.mat4[2]=(I*ne-R*te+L*V)*he,this.mat4[3]=(E*te-S*ne-M*V)*he,this.mat4[4]=(g*J-i*_e-v*se)*he,this.mat4[5]=(o*_e-r*J+s*se)*he,this.mat4[6]=(R*G-D*ne-L*O)*he,this.mat4[7]=(x*ne-E*G+M*O)*he,this.mat4[8]=(i*me-d*J+v*$)*he,this.mat4[9]=(t*J-o*me-s*$)*he,this.mat4[10]=(D*te-I*G+L*U)*he,this.mat4[11]=(S*G-x*te-M*U)*he,this.mat4[12]=(d*se-i*ue-g*$)*he,this.mat4[13]=(o*ue-t*se+r*$)*he,this.mat4[14]=(I*O-D*V-R*U)*he,this.mat4[15]=(x*V-S*O+E*U)*he,this):null},n.default.Matrix.prototype.invert3x3=function(){var l=this.mat3[0],o=this.mat3[1],t=this.mat3[2],r=this.mat3[3],s=this.mat3[4],i=this.mat3[5],d=this.mat3[6],g=this.mat3[7],v=this.mat3[8],x=v*s-i*g,S=-v*r+i*d,E=g*r-s*d,M=l*x+o*S+t*E;return M?(M=1/M,this.mat3[0]=x*M,this.mat3[1]=(-v*o+t*g)*M,this.mat3[2]=(i*o-t*s)*M,this.mat3[3]=S*M,this.mat3[4]=(v*l-t*d)*M,this.mat3[5]=(-i*l+t*r)*M,this.mat3[6]=E*M,this.mat3[7]=(-g*l+o*d)*M,this.mat3[8]=(s*l-o*r)*M,this):null},n.default.Matrix.prototype.transpose3x3=function(l){var o=l[1],t=l[2],r=l[5];return this.mat3[1]=l[3],this.mat3[2]=l[6],this.mat3[3]=o,this.mat3[5]=l[7],this.mat3[6]=t,this.mat3[7]=r,this},n.default.Matrix.prototype.inverseTranspose=function(l){this.mat3===void 0?console.error("sorry, this function only works with mat3"):(this.mat3[0]=l.mat4[0],this.mat3[1]=l.mat4[1],this.mat3[2]=l.mat4[2],this.mat3[3]=l.mat4[4],this.mat3[4]=l.mat4[5],this.mat3[5]=l.mat4[6],this.mat3[6]=l.mat4[8],this.mat3[7]=l.mat4[9],this.mat3[8]=l.mat4[10]);var o=this.invert3x3();if(o)o.transpose3x3(this.mat3);else for(var t=0;t<9;t++)this.mat3[t]=0;return this},n.default.Matrix.prototype.determinant=function(){var l=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],o=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],t=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],r=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],s=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],i=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],d=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],g=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],v=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],x=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],S=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return l*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-o*S+t*x+r*v-s*g+i*d},n.default.Matrix.prototype.mult=function(l){var o;if(l===this||l===this.mat4)o=this.copy().mat4;else if(l instanceof n.default.Matrix)o=l.mat4;else if(a(l))o=l;else{if(arguments.length!==16)return;o=arguments}var t=this.mat4[0],r=this.mat4[1],s=this.mat4[2],i=this.mat4[3];return this.mat4[0]=t*o[0]+r*o[4]+s*o[8]+i*o[12],this.mat4[1]=t*o[1]+r*o[5]+s*o[9]+i*o[13],this.mat4[2]=t*o[2]+r*o[6]+s*o[10]+i*o[14],this.mat4[3]=t*o[3]+r*o[7]+s*o[11]+i*o[15],t=this.mat4[4],r=this.mat4[5],s=this.mat4[6],i=this.mat4[7],this.mat4[4]=t*o[0]+r*o[4]+s*o[8]+i*o[12],this.mat4[5]=t*o[1]+r*o[5]+s*o[9]+i*o[13],this.mat4[6]=t*o[2]+r*o[6]+s*o[10]+i*o[14],this.mat4[7]=t*o[3]+r*o[7]+s*o[11]+i*o[15],t=this.mat4[8],r=this.mat4[9],s=this.mat4[10],i=this.mat4[11],this.mat4[8]=t*o[0]+r*o[4]+s*o[8]+i*o[12],this.mat4[9]=t*o[1]+r*o[5]+s*o[9]+i*o[13],this.mat4[10]=t*o[2]+r*o[6]+s*o[10]+i*o[14],this.mat4[11]=t*o[3]+r*o[7]+s*o[11]+i*o[15],t=this.mat4[12],r=this.mat4[13],s=this.mat4[14],i=this.mat4[15],this.mat4[12]=t*o[0]+r*o[4]+s*o[8]+i*o[12],this.mat4[13]=t*o[1]+r*o[5]+s*o[9]+i*o[13],this.mat4[14]=t*o[2]+r*o[6]+s*o[10]+i*o[14],this.mat4[15]=t*o[3]+r*o[7]+s*o[11]+i*o[15],this},n.default.Matrix.prototype.apply=function(l){var o;if(l===this||l===this.mat4)o=this.copy().mat4;else if(l instanceof n.default.Matrix)o=l.mat4;else if(a(l))o=l;else{if(arguments.length!==16)return;o=arguments}var t=this.mat4,r=t[0],s=t[4],i=t[8],d=t[12];t[0]=o[0]*r+o[1]*s+o[2]*i+o[3]*d,t[4]=o[4]*r+o[5]*s+o[6]*i+o[7]*d,t[8]=o[8]*r+o[9]*s+o[10]*i+o[11]*d,t[12]=o[12]*r+o[13]*s+o[14]*i+o[15]*d;var g=t[1],v=t[5],x=t[9],S=t[13];t[1]=o[0]*g+o[1]*v+o[2]*x+o[3]*S,t[5]=o[4]*g+o[5]*v+o[6]*x+o[7]*S,t[9]=o[8]*g+o[9]*v+o[10]*x+o[11]*S,t[13]=o[12]*g+o[13]*v+o[14]*x+o[15]*S;var E=t[2],M=t[6],D=t[10],I=t[14];t[2]=o[0]*E+o[1]*M+o[2]*D+o[3]*I,t[6]=o[4]*E+o[5]*M+o[6]*D+o[7]*I,t[10]=o[8]*E+o[9]*M+o[10]*D+o[11]*I,t[14]=o[12]*E+o[13]*M+o[14]*D+o[15]*I;var R=t[3],L=t[7],U=t[11],O=t[15];return t[3]=o[0]*R+o[1]*L+o[2]*U+o[3]*O,t[7]=o[4]*R+o[5]*L+o[6]*U+o[7]*O,t[11]=o[8]*R+o[9]*L+o[10]*U+o[11]*O,t[15]=o[12]*R+o[13]*L+o[14]*U+o[15]*O,this},n.default.Matrix.prototype.scale=function(l,o,t){return l instanceof n.default.Vector?(o=l.y,t=l.z,l=l.x):l instanceof Array&&(o=l[1],t=l[2],l=l[0]),this.mat4[0]*=l,this.mat4[1]*=l,this.mat4[2]*=l,this.mat4[3]*=l,this.mat4[4]*=o,this.mat4[5]*=o,this.mat4[6]*=o,this.mat4[7]*=o,this.mat4[8]*=t,this.mat4[9]*=t,this.mat4[10]*=t,this.mat4[11]*=t,this},n.default.Matrix.prototype.rotate=function(l,o,t,r){o instanceof n.default.Vector?(t=o.y,r=o.z,o=o.x):o instanceof Array&&(t=o[1],r=o[2],o=o[0]);var s=Math.sqrt(o*o+t*t+r*r);o*=1/s,t*=1/s,r*=1/s;var i=this.mat4[0],d=this.mat4[1],g=this.mat4[2],v=this.mat4[3],x=this.mat4[4],S=this.mat4[5],E=this.mat4[6],M=this.mat4[7],D=this.mat4[8],I=this.mat4[9],R=this.mat4[10],L=this.mat4[11],U=Math.sin(l),O=Math.cos(l),G=1-O,V=o*o*G+O,te=t*o*G+r*U,ne=r*o*G-t*U,$=o*t*G-r*U,se=t*t*G+O,J=r*t*G+o*U,ue=o*r*G+t*U,me=t*r*G-o*U,_e=r*r*G+O;return this.mat4[0]=i*V+x*te+D*ne,this.mat4[1]=d*V+S*te+I*ne,this.mat4[2]=g*V+E*te+R*ne,this.mat4[3]=v*V+M*te+L*ne,this.mat4[4]=i*$+x*se+D*J,this.mat4[5]=d*$+S*se+I*J,this.mat4[6]=g*$+E*se+R*J,this.mat4[7]=v*$+M*se+L*J,this.mat4[8]=i*ue+x*me+D*_e,this.mat4[9]=d*ue+S*me+I*_e,this.mat4[10]=g*ue+E*me+R*_e,this.mat4[11]=v*ue+M*me+L*_e,this},n.default.Matrix.prototype.translate=function(l){var o=l[0],t=l[1],r=l[2]||0;this.mat4[12]+=this.mat4[0]*o+this.mat4[4]*t+this.mat4[8]*r,this.mat4[13]+=this.mat4[1]*o+this.mat4[5]*t+this.mat4[9]*r,this.mat4[14]+=this.mat4[2]*o+this.mat4[6]*t+this.mat4[10]*r,this.mat4[15]+=this.mat4[3]*o+this.mat4[7]*t+this.mat4[11]*r},n.default.Matrix.prototype.rotateX=function(l){this.rotate(l,1,0,0)},n.default.Matrix.prototype.rotateY=function(l){this.rotate(l,0,1,0)},n.default.Matrix.prototype.rotateZ=function(l){this.rotate(l,0,0,1)},n.default.Matrix.prototype.perspective=function(l,o,t,r){var s=1/Math.tan(l/2),i=1/(t-r);return this.mat4[0]=s/o,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=s,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(r+t)*i,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*r*t*i,this.mat4[15]=0,this},n.default.Matrix.prototype.ortho=function(l,o,t,r,s,i){var d=1/(l-o),g=1/(t-r),v=1/(s-i);return this.mat4[0]=-2*d,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*g,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*v,this.mat4[11]=0,this.mat4[12]=(l+o)*d,this.mat4[13]=(r+t)*g,this.mat4[14]=(i+s)*v,this.mat4[15]=1,this};var f=n.default.Matrix;y.default=f},{"../core/main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223}],315:[function(e,b,y){e("core-js/modules/es.array.map"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};n.default.RenderBuffer=function(a,f,l,o,t,r){this.size=a,this.src=f,this.dst=l,this.attr=o,this._renderer=t,this.map=r},n.default.RenderBuffer.prototype._prepareBuffer=function(a,f){var l,o=f.attributes,t=this._renderer.GL;l=a.model?a.model:a;var r=o[this.attr];if(r){var s=a[this.dst],i=l[this.src];if(0<i.length){var d=!s;if(d&&(a[this.dst]=s=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,s),d||l.dirtyFlags[this.src]!==!1){var g=this.map,v=g?g(i):i;this._renderer._bindBuffer(s,t.ARRAY_BUFFER,v),l.dirtyFlags[this.src]=!1}f.enableAttrib(r,this.size)}}};var h=n.default.RenderBuffer;y.default=h},{"../core/main":264,"core-js/modules/es.array.map":161}],316:[function(e,b,y){function p(o){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(o)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n,h=(n=e("../core/main"))&&n.__esModule?n:{default:n},a=function(o){if(o&&o.__esModule)return o;if(o===null||p(o)!=="object"&&typeof o!="function")return{default:o};var t=f();if(t&&t.has(o))return t.get(o);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in o)if(Object.prototype.hasOwnProperty.call(o,i)){var d=s?Object.getOwnPropertyDescriptor(o,i):null;d&&(d.get||d.set)?Object.defineProperty(r,i,d):r[i]=o[i]}return r.default=o,t&&t.set(o,r),r}(e("../core/constants"));function f(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return f=function(){return o},o}e("./p5.RenderBuffer"),h.default.RendererGL.prototype.beginShape=function(o){return this.immediateMode.shapeMode=o!==void 0?o:a.TRIANGLE_FAN,this.immediateMode.geometry.reset(),this},h.default.RendererGL.prototype.vertex=function(o,t){var r,s,i;r=s=i=0,arguments.length===3?r=arguments[2]:arguments.length===4?(s=arguments[2],i=arguments[3]):arguments.length===5&&(r=arguments[2],s=arguments[3],i=arguments[4]);var d=new h.default.Vector(o,t,r);this.immediateMode.geometry.vertices.push(d),this.immediateMode.geometry.vertexNormals.push(this._currentNormal);var g=this.curFillColor||[.5,.5,.5,1];return this.immediateMode.geometry.vertexColors.push(g[0],g[1],g[2],g[3]),this.textureMode===a.IMAGE&&(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(s/=this._tex.width,i/=this._tex.height):this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(s,i),this.immediateMode._bezierVertex[0]=o,this.immediateMode._bezierVertex[1]=t,this.immediateMode._bezierVertex[2]=r,this.immediateMode._quadraticVertex[0]=o,this.immediateMode._quadraticVertex[1]=t,this.immediateMode._quadraticVertex[2]=r,this},h.default.RendererGL.prototype.normal=function(o,t,r){return o instanceof h.default.Vector?this._currentNormal=o:this._currentNormal=new h.default.Vector(o,t,r),this},h.default.RendererGL.prototype.endShape=function(o,t,r,s,i,d){return this.immediateMode.shapeMode===a.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this._processVertices.apply(this,arguments),this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},h.default.RendererGL.prototype._processVertices=function(o){if(this.immediateMode.geometry.vertices.length!==0){var t=this._doStroke&&this.drawMode!==a.TEXTURE,r=o===a.CLOSE;t&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,r),this.immediateMode.geometry._edgesToVertices());var s=this.immediateMode.shapeMode===a.TESS;(this.isBezier||this.isQuadratic||this.isCurve||s)&&this.immediateMode.shapeMode!==a.LINES&&this._tesselateShape()}},h.default.RendererGL.prototype._calculateEdges=function(o,t,r){var s=[],i=0;switch(o){case a.TRIANGLE_STRIP:for(i=0;i<t.length-2;i++)s.push([i,i+1]),s.push([i,i+2]);s.push([i,i+1]);break;case a.TRIANGLES:for(i=0;i<t.length-2;i+=3)s.push([i,i+1]),s.push([i+1,i+2]),s.push([i+2,i]);break;case a.LINES:for(i=0;i<t.length-1;i+=2)s.push([i,i+1]);break;default:for(i=0;i<t.length-1;i++)s.push([i,i+1])}return r&&s.push([t.length-1,0]),s},h.default.RendererGL.prototype._tesselateShape=function(){this.immediateMode.shapeMode=a.TRIANGLES;var o=[new Float32Array(this._vToNArray(this.immediateMode.geometry.vertices))],t=this._triangulate(o);this.immediateMode.geometry.vertices=[];for(var r=0,s=t.length;r<s;r+=3)this.vertex(t[r],t[r+1],t[r+2])},h.default.RendererGL.prototype._drawImmediateFill=function(){var o=this.GL,t=this._getImmediateFillShader();this._setFillUniforms(t);var r=!0,s=!1,i=void 0;try{for(var d,g=this.immediateMode.buffers.fill[Symbol.iterator]();!(r=(d=g.next()).done);r=!0)d.value._prepareBuffer(this.immediateMode.geometry,t)}catch(v){s=!0,i=v}finally{try{r||g.return==null||g.return()}finally{if(s)throw i}}this.immediateMode.shapeMode!==a.LINE_STRIP&&this.immediateMode.shapeMode!==a.LINES||(this.immediateMode.shapeMode=a.TRIANGLE_FAN),this._applyColorBlend(this.curFillColor),o.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),t.unbindShader()},h.default.RendererGL.prototype._drawImmediateStroke=function(){var o=this.GL,t=this._getImmediateStrokeShader();this._setStrokeUniforms(t);var r=!0,s=!1,i=void 0;try{for(var d,g=this.immediateMode.buffers.stroke[Symbol.iterator]();!(r=(d=g.next()).done);r=!0)d.value._prepareBuffer(this.immediateMode.geometry,t)}catch(v){s=!0,i=v}finally{try{r||g.return==null||g.return()}finally{if(s)throw i}}this._applyColorBlend(this.curStrokeColor),o.drawArrays(o.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),t.unbindShader()};var l=h.default.RendererGL;y.default=l},{"../core/constants":253,"../core/main":264,"./p5.RenderBuffer":315,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/web.dom-collections.iterator":229}],317:[function(e,b,y){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.some"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};e("./p5.RendererGL"),e("./p5.RenderBuffer");var h=0;n.default.RendererGL.prototype._initBufferDefaults=function(f){if(this._freeBuffers(f),1e3<++h){var l=Object.keys(this.retainedMode.geometry)[0];delete this.retainedMode.geometry[l],h--}return this.retainedMode.geometry[f]={}},n.default.RendererGL.prototype._freeBuffers=function(f){var l=this.retainedMode.geometry[f];if(l){delete this.retainedMode.geometry[f],h--;var o=this.GL;l.indexBuffer&&o.deleteBuffer(l.indexBuffer),t(this.retainedMode.buffers.stroke),t(this.retainedMode.buffers.fill)}function t(r){var s=!0,i=!1,d=void 0;try{for(var g,v=r[Symbol.iterator]();!(s=(g=v.next()).done);s=!0){var x=g.value;l[x.dst]&&(o.deleteBuffer(l[x.dst]),l[x.dst]=null)}}catch(S){i=!0,d=S}finally{try{s||v.return==null||v.return()}finally{if(i)throw d}}}},n.default.RendererGL.prototype.createBuffers=function(f,l){var o=this.GL,t=this._initBufferDefaults(f);t.model=l;var r=t.indexBuffer;if(l.faces.length){r=r||(t.indexBuffer=o.createBuffer());var s=n.default.RendererGL.prototype._flatten(l.faces),i=s.some(function(g){return 65535<g}),d=i?Uint32Array:Uint16Array;this._bindBuffer(r,o.ELEMENT_ARRAY_BUFFER,s,d),t.indexBufferType=i?o.UNSIGNED_INT:o.UNSIGNED_SHORT,t.vertexCount=3*l.faces.length}else r&&(o.deleteBuffer(r),t.indexBuffer=null),t.vertexCount=l.vertices?l.vertices.length:0;return t.lineVertexCount=l.lineVertices?l.lineVertices.length:0,t},n.default.RendererGL.prototype.drawBuffers=function(f){var l=this.GL,o=this.retainedMode.geometry[f];if(this._doStroke&&0<o.lineVertexCount){var t=this._getRetainedStrokeShader();this._setStrokeUniforms(t);var r=!0,s=!1,i=void 0;try{for(var d,g=this.retainedMode.buffers.stroke[Symbol.iterator]();!(r=(d=g.next()).done);r=!0)d.value._prepareBuffer(o,t)}catch(I){s=!0,i=I}finally{try{r||g.return==null||g.return()}finally{if(s)throw i}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(l.TRIANGLES,f),t.unbindShader()}if(this._doFill){var v=this._getRetainedFillShader();this._setFillUniforms(v);var x=!0,S=!1,E=void 0;try{for(var M,D=this.retainedMode.buffers.fill[Symbol.iterator]();!(x=(M=D.next()).done);x=!0)M.value._prepareBuffer(o,v)}catch(I){S=!0,E=I}finally{try{x||D.return==null||D.return()}finally{if(S)throw E}}o.indexBuffer&&this._bindBuffer(o.indexBuffer,l.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(l.TRIANGLES,f),v.unbindShader()}return this},n.default.RendererGL.prototype.drawBuffersScaled=function(f,l,o,t){var r=this.uMVMatrix.copy();try{this.uMVMatrix.scale(l,o,t),this.drawBuffers(f)}finally{this.uMVMatrix=r}},n.default.RendererGL.prototype._drawArrays=function(f,l){return this.GL.drawArrays(f,0,this.retainedMode.geometry[l].lineVertexCount),this},n.default.RendererGL.prototype._drawElements=function(f,l){var o=this.retainedMode.geometry[l],t=this.GL;if(o.indexBuffer){if(o.indexBufferType===t.UNSIGNED_INT&&!t.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");t.drawElements(t.TRIANGLES,o.vertexCount,o.indexBufferType,0)}else t.drawArrays(f||t.TRIANGLES,0,o.vertexCount)},n.default.RendererGL.prototype._drawPoints=function(f,l){var o=this.GL,t=this._getImmediatePointShader();this._setPointUniforms(t),this._bindBuffer(l,o.ARRAY_BUFFER,this._vToNArray(f),Float32Array,o.STATIC_DRAW),t.enableAttrib(t.attributes.aPosition,3),o.drawArrays(o.Points,0,f.length),t.unbindShader()};var a=n.default.RendererGL;y.default=a},{"../core/main":264,"./p5.RenderBuffer":315,"./p5.RendererGL":318,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.some":163,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/web.dom-collections.iterator":229}],318:[function(e,b,y){function p(i){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(i)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.float64-array"),e("core-js/modules/es.typed-array.int16-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n=l(e("../core/main")),h=function(i){if(i&&i.__esModule)return i;if(i===null||p(i)!=="object"&&typeof i!="function")return{default:i};var d=f();if(d&&d.has(i))return d.get(i);var g={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in i)if(Object.prototype.hasOwnProperty.call(i,x)){var S=v?Object.getOwnPropertyDescriptor(i,x):null;S&&(S.get||S.set)?Object.defineProperty(g,x,S):g[x]=i[x]}return g.default=i,d&&d.set(i,g),g}(e("../core/constants")),a=l(e("libtess"));e("./p5.Shader"),e("./p5.Camera"),e("../core/p5.Renderer"),e("./p5.Matrix"),e("path");function f(){if(typeof WeakMap!="function")return null;var i=new WeakMap;return f=function(){return i},i}function l(i){return i&&i.__esModule?i:{default:i}}function o(i){return function(d){if(Array.isArray(d)){for(var g=0,v=new Array(d.length);g<d.length;g++)v[g]=d[g];return v}}(i)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var t=`precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];

uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  if (uSpecular)
    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);
  lr.diffuse = _lambertDiffuse(lightDir, normal);
  return lr;
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`,r={immediateVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

varying vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

varying vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vColor;
}`,normalVert:`attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

varying vec3 vVertexNormal;
varying highp vec2 vVertTexCoord;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
}
`,normalFrag:`precision mediump float;
varying vec3 vVertexNormal;
void main(void) {
  gl_FragColor = vec4(vVertexNormal, 1.0);
}`,basicFrag:`precision mediump float;
uniform vec4 uMaterialColor;
void main(void) {
  gl_FragColor = uMaterialColor;
}`,lightVert:t+`// include lighting.glgl

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
}
`,lightTextureFrag:`precision highp float;

uniform vec4 uMaterialColor;
uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;

void main(void) {
  if(uEmissive && !isTexture) {
    gl_FragColor = uMaterialColor;
  }
  else {
    gl_FragColor = isTexture ? texture2D(uSampler, vVertTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;
    gl_FragColor.rgb = gl_FragColor.rgb * vDiffuseColor + vSpecularColor;
  }
}`,phongVert:`precision highp float;
precision highp int;

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
}
`,phongFrag:t+`// include lighting.glsl
precision highp float;
precision highp int;

uniform vec4 uMaterialColor;
uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  if(uEmissive && !isTexture) {
    gl_FragColor = uMaterialColor;
  }
  else {
    gl_FragColor = isTexture ? texture2D(uSampler, vTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;
    gl_FragColor.rgb = gl_FragColor.rgb * (diffuse + vAmbientColor) + specular;
  }
}`,fontVert:`precision mediump float;

attribute vec3 aPosition;
attribute vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

varying vec2 vTexCoord;
varying float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord;
  w = gl_Position.w;
}
`,fontFrag:`#extension GL_OES_standard_derivatives : enable
precision mediump float;

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

varying vec2 vTexCoord;

// some helper functions
int round(float v) { return ifloor(v + 0.5); }
ivec2 round(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = round(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return texture2D(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  gl_FragColor = uMaterialColor;
  gl_FragColor.a *= saturate(max(antialias, cover));
}`,lineVert:`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform vec4 uViewport;
uniform int uPerspective;

attribute vec4 aPosition;
attribute vec4 aDirection;
  
void main() {
  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  vec3 scale = vec3(0.9995);

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posq = uModelViewMatrix * (aPosition + vec4(aDirection.xyz, 0));

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posq.xyz = posq.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 q = uProjectionMatrix * posq;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangent = normalize((q.xy*p.w - p.xy*q.w) * uViewport.zw);

  // flip tangent to normal (it's already normalized)
  vec2 normal = vec2(-tangent.y, tangent.x);

  float thickness = aDirection.w * uStrokeWeight;
  vec2 offset = normal * thickness / 2.0;

  vec2 curPerspScale;

  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)
    // invert Y, projections in Processing invert Y
    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
}
`,lineFrag:`precision mediump float;
precision mediump int;

uniform vec4 uMaterialColor;

void main() {
  gl_FragColor = uMaterialColor;
}`,pointVert:`attribute vec3 aPosition;
uniform float uPointSize;
varying float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}`,pointFrag:`precision mediump float;
precision mediump int;
uniform vec4 uMaterialColor;
varying float vStrokeWeight;

void main(){
	float mask = 0.0;

	// make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
    // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

	mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

	// if strokeWeight is 1 or less lets just draw a square
	// this prevents weird artifacting from carving circles when our points are really small
	// if strokeWeight is larger than 1, we just use it as is

	mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

	// throw away the borders of the mask
    // otherwise we get weird alpha blending issues

	if(mask > 0.98){
      discard;
  	}

  	gl_FragColor = vec4(uMaterialColor.rgb * (1.0 - mask), uMaterialColor.a) ;
}`};n.default.RendererGL=function(i,d,g,v){return n.default.Renderer.call(this,i,d,g),this._setAttributeDefaults(d),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this._pInst._setProperty("drawingContext",this.drawingContext),this._isErasing=!1,this._enableLighting=!1,this.ambientLightColors=[],this.specularColors=[1,1,1],this.directionalLightDirections=[],this.directionalLightDiffuseColors=[],this.directionalLightSpecularColors=[],this.pointLightPositions=[],this.pointLightDiffuseColors=[],this.pointLightSpecularColors=[],this.spotLightPositions=[],this.spotLightDirections=[],this.spotLightDiffuseColors=[],this.spotLightSpecularColors=[],this.spotLightAngle=[],this.spotLightConc=[],this.drawMode=h.FILL,this.curFillColor=this._cachedFillStyle=[1,1,1,1],this.curStrokeColor=this._cachedStrokeStyle=[0,0,0,1],this.curBlendMode=h.BLEND,this._cachedBlendMode=void 0,this.blendExt=this.GL.getExtension("EXT_blend_minmax"),this._isBlending=!1,this._useSpecularMaterial=!1,this._useEmissiveMaterial=!1,this._useNormalMaterial=!1,this._useShininess=1,this._tint=[255,255,255,255],this.constantAttenuation=1,this.linearAttenuation=0,this.quadraticAttenuation=0,this.uMVMatrix=new n.default.Matrix,this.uPMatrix=new n.default.Matrix,this.uNMatrix=new n.default.Matrix("mat3"),this._currentNormal=new n.default.Vector(0,0,1),this._curCamera=new n.default.Camera(this),this._curCamera._computeCameraDefaultSettings(),this._curCamera._setDefaultCamera(),this._defaultLightShader=void 0,this._defaultImmediateModeShader=void 0,this._defaultNormalShader=void 0,this._defaultColorShader=void 0,this._defaultPointShader=void 0,this.userFillShader=void 0,this.userStrokeShader=void 0,this.userPointShader=void 0,this.retainedMode={geometry:{},buffers:{stroke:[new n.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new n.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],fill:[new n.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new n.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new n.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new n.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new n.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],text:[new n.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new n.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)]}},this.immediateMode={geometry:new n.default.Geometry,shapeMode:h.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new n.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new n.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new n.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new n.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new n.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],stroke:[new n.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new n.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],point:this.GL.createBuffer()}},this.pointSize=5,this.curStrokeWeight=1,this.textures=[],this.textureMode=h.IMAGE,this.textureWrapX=h.CLAMP,this.textureWrapY=h.CLAMP,this._tex=null,this._curveTightness=6,this._lookUpTableBezier=[],this._lookUpTableQuadratic=[],this._lutBezierDetail=0,this._lutQuadraticDetail=0,this._tessy=this._initTessy(),this.fontInfos={},this._curShader=void 0,this},n.default.RendererGL.prototype=Object.create(n.default.Renderer.prototype),n.default.RendererGL.prototype._setAttributeDefaults=function(i){var d={alpha:!1,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!1,preserveDrawingBuffer:!0,perPixelLighting:!0};i._glAttributes===null?i._glAttributes=d:i._glAttributes=Object.assign(d,i._glAttributes)},n.default.RendererGL.prototype._initContext=function(){try{if(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes),this.drawingContext===null)throw new Error("Error creating webgl context");var i=this.drawingContext;i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}catch(d){throw d}},n.default.RendererGL.prototype._resetContext=function(i,d){var g=this.width,v=this.height,x=this.canvas.id,S=this._pInst instanceof n.default.Graphics;if(S){var E=this._pInst;E.canvas.parentNode.removeChild(E.canvas),E.canvas=document.createElement("canvas"),(E._pInst._userNode||document.body).appendChild(E.canvas),n.default.Element.call(E,E.canvas,E._pInst),E.width=g,E.height=v}else{var M=this.canvas;M&&M.parentNode.removeChild(M),(M=document.createElement("canvas")).id=x,this._pInst._userNode?this._pInst._userNode.appendChild(M):document.body.appendChild(M),this._pInst.canvas=M}var D=new n.default.RendererGL(this._pInst.canvas,this._pInst,!S);this._pInst._setProperty("_renderer",D),D.resize(g,v),D._applyDefaults(),S||this._pInst._elements.push(D),typeof d=="function"&&setTimeout(function(){d.apply(window._renderer,i)},0)},n.default.prototype.setAttributes=function(i,d){if(this._glAttributes!==void 0){var g=!0;if(d!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[i]!==d&&(this._glAttributes[i]=d,g=!1)):i instanceof Object&&this._glAttributes!==i&&(this._glAttributes=i,g=!1),this._renderer.isP3D&&!g){if(!this._setupDone){for(var v in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(v))return void console.error("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}else console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.")},n.default.RendererGL.prototype._update=function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)},n.default.RendererGL.prototype.background=function(){var i,d=(i=this._pInst).color.apply(i,arguments),g=d.levels[0]/255,v=d.levels[1]/255,x=d.levels[2]/255,S=d.levels[3]/255;this.GL.clearColor(g,v,x,S),this.GL.clear(this.GL.COLOR_BUFFER_BIT)},n.default.RendererGL.prototype.fill=function(i,d,g,v){var x=n.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=x._array,this.drawMode=h.FILL,this._useNormalMaterial=!1,this._tex=null},n.default.RendererGL.prototype.stroke=function(i,d,g,v){arguments[3]=255;var x=n.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=x._array},n.default.RendererGL.prototype.strokeCap=function(i){console.error("Sorry, strokeCap() is not yet implemented in WEBGL mode")},n.default.RendererGL.prototype.strokeJoin=function(i){console.error("Sorry, strokeJoin() is not yet implemented in WEBGL mode")},n.default.RendererGL.prototype.filter=function(i){console.error("filter() does not work in WEBGL mode")},n.default.RendererGL.prototype.blendMode=function(i){i===h.DARKEST||i===h.LIGHTEST||i===h.ADD||i===h.BLEND||i===h.SUBTRACT||i===h.SCREEN||i===h.EXCLUSION||i===h.REPLACE||i===h.MULTIPLY||i===h.REMOVE?this.curBlendMode=i:i!==h.BURN&&i!==h.OVERLAY&&i!==h.HARD_LIGHT&&i!==h.SOFT_LIGHT&&i!==h.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")},n.default.RendererGL.prototype.erase=function(i,d){this._isErasing||(this._applyBlendMode(h.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,i/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,d/255])},n.default.RendererGL.prototype.noErase=function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))},n.default.RendererGL.prototype.strokeWeight=function(i){this.curStrokeWeight!==i&&(this.pointSize=i,this.curStrokeWeight=i)},n.default.RendererGL.prototype._getPixel=function(i,d){var g;return g=new Uint8Array(4),this.drawingContext.readPixels(i,d,1,1,this.drawingContext.RGBA,this.drawingContext.UNSIGNED_BYTE,g),[g[0],g[1],g[2],g[3]]},n.default.RendererGL.prototype.loadPixels=function(){var i=this._pixelsState;if(this._pInst._glAttributes.preserveDrawingBuffer===!0){var d=i.pixels,g=this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4;d instanceof Uint8Array&&d.length===g||(d=new Uint8Array(g),this._pixelsState._setProperty("pixels",d));var v=this._pInst._pixelDensity;this.GL.readPixels(0,0,this.width*v,this.height*v,this.GL.RGBA,this.GL.UNSIGNED_BYTE,d)}else console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true.")},n.default.RendererGL.prototype.geometryInHash=function(i){return this.retainedMode.geometry[i]!==void 0},n.default.RendererGL.prototype.resize=function(i,d){n.default.Renderer.prototype.resize.call(this,i,d),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize();var g=this._pixelsState;g.pixels!==void 0&&g._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4))},n.default.RendererGL.prototype.clear=function(){var i=(arguments.length<=0?void 0:arguments[0])||0,d=(arguments.length<=1?void 0:arguments[1])||0,g=(arguments.length<=2?void 0:arguments[2])||0,v=(arguments.length<=3?void 0:arguments[3])||0;this.GL.clearColor(i,d,g,v),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)},n.default.RendererGL.prototype.applyMatrix=function(i,d,g,v,x,S){arguments.length===16?n.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([i,d,0,0,g,v,0,0,0,0,1,0,x,S,0,1])},n.default.RendererGL.prototype.translate=function(i,d,g){return i instanceof n.default.Vector&&(g=i.z,d=i.y,i=i.x),this.uMVMatrix.translate([i,d,g]),this},n.default.RendererGL.prototype.scale=function(i,d,g){return this.uMVMatrix.scale(i,d,g),this},n.default.RendererGL.prototype.rotate=function(i,d){return d===void 0?this.rotateZ(i):(n.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)},n.default.RendererGL.prototype.rotateX=function(i){return this.rotate(i,1,0,0),this},n.default.RendererGL.prototype.rotateY=function(i){return this.rotate(i,0,1,0),this},n.default.RendererGL.prototype.rotateZ=function(i){return this.rotate(i,0,0,1),this},n.default.RendererGL.prototype.push=function(){var i=n.default.Renderer.prototype.push.apply(this),d=i.properties;return d.uMVMatrix=this.uMVMatrix.copy(),d.uPMatrix=this.uPMatrix.copy(),d._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),d.ambientLightColors=this.ambientLightColors.slice(),d.specularColors=this.specularColors.slice(),d.directionalLightDirections=this.directionalLightDirections.slice(),d.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),d.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),d.pointLightPositions=this.pointLightPositions.slice(),d.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),d.pointLightSpecularColors=this.pointLightSpecularColors.slice(),d.spotLightPositions=this.spotLightPositions.slice(),d.spotLightDirections=this.spotLightDirections.slice(),d.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),d.spotLightSpecularColors=this.spotLightSpecularColors.slice(),d.spotLightAngle=this.spotLightAngle.slice(),d.spotLightConc=this.spotLightConc.slice(),d.userFillShader=this.userFillShader,d.userStrokeShader=this.userStrokeShader,d.userPointShader=this.userPointShader,d.pointSize=this.pointSize,d.curStrokeWeight=this.curStrokeWeight,d.curStrokeColor=this.curStrokeColor,d.curFillColor=this.curFillColor,d._useSpecularMaterial=this._useSpecularMaterial,d._useEmissiveMaterial=this._useEmissiveMaterial,d._useShininess=this._useShininess,d.constantAttenuation=this.constantAttenuation,d.linearAttenuation=this.linearAttenuation,d.quadraticAttenuation=this.quadraticAttenuation,d._enableLighting=this._enableLighting,d._useNormalMaterial=this._useNormalMaterial,d._tex=this._tex,d.drawMode=this.drawMode,d._currentNormal=this._currentNormal,i},n.default.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix=n.default.Matrix.identity(this._pInst),this},n.default.RendererGL.prototype._getImmediateStrokeShader=function(){var i=this.userStrokeShader;return i&&i.isStrokeShader()?i:this._getLineShader()},n.default.RendererGL.prototype._getRetainedStrokeShader=n.default.RendererGL.prototype._getImmediateStrokeShader,n.default.RendererGL.prototype._getImmediateFillShader=function(){var i=this.userFillShader;if(this._useNormalMaterial&&(!i||!i.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!i||!i.isLightShader())return this._getLightShader()}else if(this._tex){if(!i||!i.isTextureShader())return this._getLightShader()}else if(!i)return this._getImmediateModeShader();return i},n.default.RendererGL.prototype._getRetainedFillShader=function(){if(this._useNormalMaterial)return this._getNormalShader();var i=this.userFillShader;if(this._enableLighting){if(!i||!i.isLightShader())return this._getLightShader()}else if(this._tex){if(!i||!i.isTextureShader())return this._getLightShader()}else if(!i)return this._getColorShader();return i},n.default.RendererGL.prototype._getImmediatePointShader=function(){var i=this.userPointShader;return i&&i.isPointShader()?i:this._getPointShader()},n.default.RendererGL.prototype._getRetainedLineShader=n.default.RendererGL.prototype._getImmediateLineShader,n.default.RendererGL.prototype._getLightShader=function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new n.default.Shader(this,r.phongVert,r.phongFrag):this._defaultLightShader=new n.default.Shader(this,r.lightVert,r.lightTextureFrag)),this._defaultLightShader},n.default.RendererGL.prototype._getImmediateModeShader=function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new n.default.Shader(this,r.immediateVert,r.vertexColorFrag)),this._defaultImmediateModeShader},n.default.RendererGL.prototype._getNormalShader=function(){return this._defaultNormalShader||(this._defaultNormalShader=new n.default.Shader(this,r.normalVert,r.normalFrag)),this._defaultNormalShader},n.default.RendererGL.prototype._getColorShader=function(){return this._defaultColorShader||(this._defaultColorShader=new n.default.Shader(this,r.normalVert,r.basicFrag)),this._defaultColorShader},n.default.RendererGL.prototype._getPointShader=function(){return this._defaultPointShader||(this._defaultPointShader=new n.default.Shader(this,r.pointVert,r.pointFrag)),this._defaultPointShader},n.default.RendererGL.prototype._getLineShader=function(){return this._defaultLineShader||(this._defaultLineShader=new n.default.Shader(this,r.lineVert,r.lineFrag)),this._defaultLineShader},n.default.RendererGL.prototype._getFontShader=function(){return this._defaultFontShader||(this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new n.default.Shader(this,r.fontVert,r.fontFrag)),this._defaultFontShader},n.default.RendererGL.prototype._getEmptyTexture=function(){if(!this._emptyTexture){var i=new n.default.Image(1,1);i.set(0,0,255),this._emptyTexture=new n.default.Texture(this,i)}return this._emptyTexture},n.default.RendererGL.prototype.getTexture=function(i){var d=this.textures,g=!0,v=!1,x=void 0;try{for(var S,E=d[Symbol.iterator]();!(g=(S=E.next()).done);g=!0){var M=S.value;if(M.src===i)return M}}catch(I){v=!0,x=I}finally{try{g||E.return==null||E.return()}finally{if(v)throw x}}var D=new n.default.Texture(this,i);return d.push(D),D},n.default.RendererGL.prototype._setStrokeUniforms=function(i){i.bindShader(),i.setUniform("uMaterialColor",this.curStrokeColor),i.setUniform("uStrokeWeight",this.curStrokeWeight)},n.default.RendererGL.prototype._setFillUniforms=function(i){i.bindShader(),i.setUniform("uMaterialColor",this.curFillColor),i.setUniform("isTexture",!!this._tex),this._tex&&i.setUniform("uSampler",this._tex),i.setUniform("uTint",this._tint),i.setUniform("uSpecular",this._useSpecularMaterial),i.setUniform("uEmissive",this._useEmissiveMaterial),i.setUniform("uShininess",this._useShininess),i.setUniform("uUseLighting",this._enableLighting);var d=this.pointLightDiffuseColors.length/3;i.setUniform("uPointLightCount",d),i.setUniform("uPointLightLocation",this.pointLightPositions),i.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),i.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors);var g=this.directionalLightDiffuseColors.length/3;i.setUniform("uDirectionalLightCount",g),i.setUniform("uLightingDirection",this.directionalLightDirections),i.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),i.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors);var v=this.ambientLightColors.length/3;i.setUniform("uAmbientLightCount",v),i.setUniform("uAmbientColor",this.ambientLightColors);var x=this.spotLightDiffuseColors.length/3;i.setUniform("uSpotLightCount",x),i.setUniform("uSpotLightAngle",this.spotLightAngle),i.setUniform("uSpotLightConc",this.spotLightConc),i.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),i.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),i.setUniform("uSpotLightLocation",this.spotLightPositions),i.setUniform("uSpotLightDirection",this.spotLightDirections),i.setUniform("uConstantAttenuation",this.constantAttenuation),i.setUniform("uLinearAttenuation",this.linearAttenuation),i.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),i.bindTextures()},n.default.RendererGL.prototype._setPointUniforms=function(i){i.bindShader(),i.setUniform("uMaterialColor",this.curStrokeColor),i.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)},n.default.RendererGL.prototype._bindBuffer=function(i,d,g,v,x){if(d=d||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(d,i),g!==void 0){var S=new(v||Float32Array)(g);this.GL.bufferData(d,S,x||this.GL.STATIC_DRAW)}},n.default.RendererGL.prototype._arraysEqual=function(i,d){var g=i.length;if(g!==d.length)return!1;for(var v=0;v<g;v++)if(i[v]!==d[v])return!1;return!0},n.default.RendererGL.prototype._isTypedArray=function(i){return i instanceof Uint32Array},n.default.RendererGL.prototype._flatten=function(i){if(i.length===0)return[];if(2e4<i.length){var d,g=Object.prototype.toString,v=[],x=i.slice();for(d=x.pop();g.call(d)==="[object Array]"?x.push.apply(x,o(d)):v.push(d),x.length&&(d=x.pop())!==void 0;);return v.reverse(),v}var S;return(S=[]).concat.apply(S,o(i))},n.default.RendererGL.prototype._vToNArray=function(i){var d=[],g=!0,v=!1,x=void 0;try{for(var S,E=i[Symbol.iterator]();!(g=(S=E.next()).done);g=!0){var M=S.value;d.push(M.x,M.y,M.z)}}catch(D){v=!0,x=D}finally{try{g||E.return==null||E.return()}finally{if(v)throw x}}return d},n.default.prototype._assert3d=function(i){if(!this._renderer.isP3D)throw new Error("".concat(i,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},n.default.RendererGL.prototype._initTessy=function(){var i=new a.default.GluTesselator;return i.gluTessCallback(a.default.gluEnum.GLU_TESS_VERTEX_DATA,function(d,g){g[g.length]=d[0],g[g.length]=d[1],g[g.length]=d[2]}),i.gluTessCallback(a.default.gluEnum.GLU_TESS_BEGIN,function(d){d!==a.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(d))}),i.gluTessCallback(a.default.gluEnum.GLU_TESS_ERROR,function(d){console.log("error callback"),console.log("error number: ".concat(d))}),i.gluTessCallback(a.default.gluEnum.GLU_TESS_COMBINE,function(d,g,v){return[d[0],d[1],d[2]]}),i.gluTessCallback(a.default.gluEnum.GLU_TESS_EDGE_FLAG,function(d){}),i},n.default.RendererGL.prototype._triangulate=function(i){this._tessy.gluTessNormal(0,0,1);var d=[];this._tessy.gluTessBeginPolygon(d);for(var g=0;g<i.length;g++){this._tessy.gluTessBeginContour();for(var v=i[g],x=0;x<v.length;x+=3){var S=[v[x],v[x+1],v[x+2]];this._tessy.gluTessVertex(S,S)}this._tessy.gluTessEndContour()}return this._tessy.gluTessEndPolygon(),d},n.default.RendererGL.prototype._bezierCoefficients=function(i){var d=i*i,g=1-i,v=g*g;return[v*g,3*v*i,3*g*d,d*i]},n.default.RendererGL.prototype._quadraticCoefficients=function(i){var d=1-i;return[d*d,2*d*i,i*i]},n.default.RendererGL.prototype._bezierToCatmull=function(i){return[i[1],i[1]+(i[2]-i[0])/this._curveTightness,i[2]-(i[3]-i[1])/this._curveTightness,i[2]]};var s=n.default.RendererGL;y.default=s},{"../core/constants":253,"../core/main":264,"../core/p5.Renderer":267,"./p5.Camera":312,"./p5.Matrix":314,"./p5.Shader":319,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.float64-array":204,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int16-array":208,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":229,libtess:237,path:240}],319:[function(e,b,y){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var p,n=(p=e("../core/main"))&&p.__esModule?p:{default:p};n.default.Shader=function(a,f,l){this._renderer=a,this._vertSrc=f,this._fragSrc=l,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]},n.default.Shader.prototype.init=function(){if(this._glProgram===0){var a=this._renderer.GL;if(this._vertShader=a.createShader(a.VERTEX_SHADER),a.shaderSource(this._vertShader,this._vertSrc),a.compileShader(this._vertShader),!a.getShaderParameter(this._vertShader,a.COMPILE_STATUS))return console.error("Yikes! An error occurred compiling the vertex shader:".concat(a.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=a.createShader(a.FRAGMENT_SHADER),a.shaderSource(this._fragShader,this._fragSrc),a.compileShader(this._fragShader),!a.getShaderParameter(this._fragShader,a.COMPILE_STATUS))return console.error("Darn! An error occurred compiling the fragment shader:".concat(a.getShaderInfoLog(this._fragShader))),null;this._glProgram=a.createProgram(),a.attachShader(this._glProgram,this._vertShader),a.attachShader(this._glProgram,this._fragShader),a.linkProgram(this._glProgram),a.getProgramParameter(this._glProgram,a.LINK_STATUS)||console.error("Snap! Error linking shader program: ".concat(a.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this},n.default.Shader.prototype._loadAttributes=function(){if(!this._loadedAttributes){this.attributes={};for(var a=this._renderer.GL,f=a.getProgramParameter(this._glProgram,a.ACTIVE_ATTRIBUTES),l=0;l<f;++l){var o=a.getActiveAttrib(this._glProgram,l),t=o.name,r=a.getAttribLocation(this._glProgram,t),s={};s.name=t,s.location=r,s.index=l,s.type=o.type,s.size=o.size,this.attributes[t]=s}this._loadedAttributes=!0}},n.default.Shader.prototype._loadUniforms=function(){if(!this._loadedUniforms){for(var a=this._renderer.GL,f=a.getProgramParameter(this._glProgram,a.ACTIVE_UNIFORMS),l=0,o=0;o<f;++o){var t=a.getActiveUniform(this._glProgram,o),r={};r.location=a.getUniformLocation(this._glProgram,t.name),r.size=t.size;var s=t.name;1<t.size&&(s=s.substring(0,s.indexOf("[0]"))),r.name=s,r.type=t.type,r._cachedData=void 0,r.type===a.SAMPLER_2D&&(r.samplerIndex=l,l++,this.samplers.push(r)),r.isArray=1<t.size||r.type===a.FLOAT_MAT3||r.type===a.FLOAT_MAT4||r.type===a.FLOAT_VEC2||r.type===a.FLOAT_VEC3||r.type===a.FLOAT_VEC4||r.type===a.INT_VEC2||r.type===a.INT_VEC4||r.type===a.INT_VEC3,this.uniforms[s]=r}this._loadedUniforms=!0}},n.default.Shader.prototype.compile=function(){},n.default.Shader.prototype.bindShader=function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))},n.default.Shader.prototype.unbindShader=function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this},n.default.Shader.prototype.bindTextures=function(){var a=this._renderer.GL,f=!0,l=!1,o=void 0;try{for(var t,r=this.samplers[Symbol.iterator]();!(f=(t=r.next()).done);f=!0){var s=t.value,i=s.texture;i===void 0&&(i=this._renderer._getEmptyTexture()),a.activeTexture(a.TEXTURE0+s.samplerIndex),i.bindTexture(),i.update(),a.uniform1i(s.location,s.samplerIndex)}}catch(d){l=!0,o=d}finally{try{f||r.return==null||r.return()}finally{if(l)throw o}}},n.default.Shader.prototype.updateTextures=function(){var a=!0,f=!1,l=void 0;try{for(var o,t=this.samplers[Symbol.iterator]();!(a=(o=t.next()).done);a=!0){var r=o.value.texture;r&&r.update()}}catch(s){f=!0,l=s}finally{try{a||t.return==null||t.return()}finally{if(f)throw l}}},n.default.Shader.prototype.unbindTextures=function(){},n.default.Shader.prototype._setMatrixUniforms=function(){var a=this._renderer._curCamera.cameraMatrix,f=this._renderer.uPMatrix,l=this._renderer.uMVMatrix,o=l.copy();o.mult(f),this.isStrokeShader()&&(this._renderer._curCamera.cameraType==="default"?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",a.mat4),this.setUniform("uProjectionMatrix",f.mat4),this.setUniform("uModelViewMatrix",l.mat4),this.setUniform("uModelViewProjectionMatrix",o.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))},n.default.Shader.prototype.useProgram=function(){var a=this._renderer.GL;return this._renderer._curShader!==this&&(a.useProgram(this._glProgram),this._renderer._curShader=this),this},n.default.Shader.prototype.setUniform=function(a,f){var l=this.uniforms[a];if(l){var o=this._renderer.GL;if(l.isArray){if(l._cachedData&&this._renderer._arraysEqual(l._cachedData,f))return;l._cachedData=f.slice(0)}else{if(l._cachedData&&l._cachedData===f)return;Array.isArray(f)?l._cachedData=f.slice(0):l._cachedData=f}var t=l.location;switch(this.useProgram(),l.type){case o.BOOL:f===!0?o.uniform1i(t,1):o.uniform1i(t,0);break;case o.INT:1<l.size?f.length&&o.uniform1iv(t,f):o.uniform1i(t,f);break;case o.FLOAT:1<l.size?f.length&&o.uniform1fv(t,f):o.uniform1f(t,f);break;case o.FLOAT_MAT3:o.uniformMatrix3fv(t,!1,f);break;case o.FLOAT_MAT4:o.uniformMatrix4fv(t,!1,f);break;case o.FLOAT_VEC2:1<l.size?f.length&&o.uniform2fv(t,f):o.uniform2f(t,f[0],f[1]);break;case o.FLOAT_VEC3:1<l.size?f.length&&o.uniform3fv(t,f):o.uniform3f(t,f[0],f[1],f[2]);break;case o.FLOAT_VEC4:1<l.size?f.length&&o.uniform4fv(t,f):o.uniform4f(t,f[0],f[1],f[2],f[3]);break;case o.INT_VEC2:1<l.size?f.length&&o.uniform2iv(t,f):o.uniform2i(t,f[0],f[1]);break;case o.INT_VEC3:1<l.size?f.length&&o.uniform3iv(t,f):o.uniform3i(t,f[0],f[1],f[2]);break;case o.INT_VEC4:1<l.size?f.length&&o.uniform4iv(t,f):o.uniform4i(t,f[0],f[1],f[2],f[3]);break;case o.SAMPLER_2D:o.activeTexture(o.TEXTURE0+l.samplerIndex),l.texture=f instanceof n.default.Texture?f:this._renderer.getTexture(f),o.uniform1i(t,l.samplerIndex)}return this}},n.default.Shader.prototype.isLightShader=function(){return this.attributes.aNormal!==void 0||this.uniforms.uUseLighting!==void 0||this.uniforms.uAmbientLightCount!==void 0||this.uniforms.uDirectionalLightCount!==void 0||this.uniforms.uPointLightCount!==void 0||this.uniforms.uAmbientColor!==void 0||this.uniforms.uDirectionalDiffuseColors!==void 0||this.uniforms.uDirectionalSpecularColors!==void 0||this.uniforms.uPointLightLocation!==void 0||this.uniforms.uPointLightDiffuseColors!==void 0||this.uniforms.uPointLightSpecularColors!==void 0||this.uniforms.uLightingDirection!==void 0||this.uniforms.uSpecular!==void 0},n.default.Shader.prototype.isNormalShader=function(){return this.attributes.aNormal!==void 0},n.default.Shader.prototype.isTextureShader=function(){return 0<this.samplers.length},n.default.Shader.prototype.isColorShader=function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0},n.default.Shader.prototype.isTexLightShader=function(){return this.isLightShader()&&this.isTextureShader()},n.default.Shader.prototype.isStrokeShader=function(){return this.uniforms.uStrokeWeight!==void 0},n.default.Shader.prototype.enableAttrib=function(a,f,l,o,t,r){if(a){var s=a.location;if(s!==-1){var i=this._renderer.GL;a.enabled||(i.enableVertexAttribArray(s),a.enabled=!0),this._renderer.GL.vertexAttribPointer(s,f,l||i.FLOAT,o||!1,t||0,r||0)}}return this};var h=n.default.Shader;y.default=h},{"../core/main":264,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":166,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],320:[function(e,b,y){function p(o){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(o)}e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var n,h=(n=e("../core/main"))&&n.__esModule?n:{default:n},a=function(o){if(o&&o.__esModule)return o;if(o===null||p(o)!=="object"&&typeof o!="function")return{default:o};var t=f();if(t&&t.has(o))return t.get(o);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in o)if(Object.prototype.hasOwnProperty.call(o,i)){var d=s?Object.getOwnPropertyDescriptor(o,i):null;d&&(d.get||d.set)?Object.defineProperty(r,i,d):r[i]=o[i]}return r.default=o,t&&t.set(o,r),r}(e("../core/constants"));function f(){if(typeof WeakMap!="function")return null;var o=new WeakMap;return f=function(){return o},o}h.default.Texture=function(o,t,r){this._renderer=o;var s=this._renderer.GL;(r=r||{}).dataType===s.FLOAT&&(s.getExtension("OES_texture_float")||console.log("Oh no, your device doesn't support floating point textures!"),s.getExtension("OES_texture_float_linear")||console.log("Ack! Your device doesn't support linear filtering for floating point textures")),this.src=t,this.glTex=void 0,this.glTarget=s.TEXTURE_2D,this.glFormat=r.format||s.RGBA,this.mipmaps=!1,this.glMinFilter=r.minFilter||s.LINEAR,this.glMagFilter=r.magFilter||s.LINEAR,this.glWrapS=r.wrapS||s.CLAMP_TO_EDGE,this.glWrapT=r.wrapT||s.CLAMP_TO_EDGE,this.glDataType=r.dataType||s.UNSIGNED_BYTE,this.isSrcMediaElement=h.default.MediaElement!==void 0&&t instanceof h.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=h.default.Element!==void 0&&t instanceof h.default.Element&&!(t instanceof h.default.Graphics),this.isSrcP5Image=t instanceof h.default.Image,this.isSrcP5Graphics=t instanceof h.default.Graphics,this.isImageData=typeof ImageData<"u"&&t instanceof ImageData;var i=this._getTextureDataFromSource();return this.width=i.width,this.height=i.height,this.init(i),this},h.default.Texture.prototype._getTextureDataFromSource=function(){var o;return this.isSrcP5Image?o=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcHTMLElement?o=this.src.elt:this.isImageData&&(o=this.src),o},h.default.Texture.prototype.init=function(o){var t=this._renderer.GL;if(this.glTex=t.createTexture(),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,this.glMagFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this.glMinFilter),this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata){var r=new Uint8Array([1,1,1,1]);t.texImage2D(this.glTarget,0,t.RGBA,1,1,0,this.glFormat,this.glDataType,r)}else t.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,o)},h.default.Texture.prototype.update=function(){var o=this.src;if(o.width===0||o.height===0)return!1;var t=this._getTextureDataFromSource(),r=!1,s=this._renderer.GL;return t.width!==this.width||t.height!==this.height?(r=!0,this.width=t.width,this.height=t.height,this.isSrcP5Image?o.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&o.setModified(!0)):this.isSrcP5Image?o.isModified()&&(r=!0,o.setModified(!1)):this.isSrcMediaElement?o.isModified()?(r=!0,o.setModified(!1)):o.loadedmetadata&&this._videoPrevUpdateTime!==o.time()&&(this._videoPrevUpdateTime=o.time(),r=!0):this.isImageData?o._dirty&&(r=!(o._dirty=!1)):r=!0,r&&(this.bindTexture(),s.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,t)),r},h.default.Texture.prototype.bindTexture=function(){return this._renderer.GL.bindTexture(this.glTarget,this.glTex),this},h.default.Texture.prototype.unbindTexture=function(){this._renderer.GL.bindTexture(this.glTarget,null)},h.default.Texture.prototype.setInterpolation=function(o,t){var r=this._renderer.GL;o===a.NEAREST?this.glMinFilter=r.NEAREST:this.glMinFilter=r.LINEAR,t===a.NEAREST?this.glMagFilter=r.NEAREST:this.glMagFilter=r.LINEAR,this.bindTexture(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,this.glMinFilter),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()},h.default.Texture.prototype.setWrapMode=function(o,t){function r(g){return(g&g-1)==0}var s=this._renderer.GL,i=r(this.width),d=r(this.height);o===a.REPEAT?i&&d?this.glWrapS=s.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=s.CLAMP_TO_EDGE):o===a.MIRROR?i&&d?this.glWrapS=s.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=s.CLAMP_TO_EDGE):this.glWrapS=s.CLAMP_TO_EDGE,t===a.REPEAT?i&&d?this.glWrapT=s.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=s.CLAMP_TO_EDGE):t===a.MIRROR?i&&d?this.glWrapT=s.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=s.CLAMP_TO_EDGE):this.glWrapT=s.CLAMP_TO_EDGE,this.bindTexture(),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,this.glWrapS),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()};var l=h.default.Texture;y.default=l},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226}],321:[function(e,b,y){function p(s){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(s)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.sub"),e("core-js/modules/web.dom-collections.iterator");var n,h=(n=e("../core/main"))&&n.__esModule?n:{default:n},a=function(s){if(s&&s.__esModule)return s;if(s===null||p(s)!=="object"&&typeof s!="function")return{default:s};var i=f();if(i&&i.has(s))return i.get(s);var d={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in s)if(Object.prototype.hasOwnProperty.call(s,v)){var x=g?Object.getOwnPropertyDescriptor(s,v):null;x&&(x.get||x.set)?Object.defineProperty(d,v,x):d[v]=s[v]}return d.default=s,i&&i.set(s,d),d}(e("../core/constants"));function f(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return f=function(){return s},s}e("./p5.Shader"),e("./p5.RendererGL.Retained"),h.default.RendererGL.prototype._applyTextProperties=function(){},h.default.RendererGL.prototype.textWidth=function(s){return this._isOpenType()?this._textFont._textWidth(s,this._textSize):0};function l(s,i){this.width=s,this.height=i,this.infos=[],this.findImage=function(d){var g,v,x=this.width*this.height;if(x<d)throw new Error("font is too complex to render in 3D");for(var S=this.infos.length-1;0<=S;--S){var E=this.infos[S];if(E.index+d<x){v=(g=E).imageData;break}}if(!g){try{v=new ImageData(this.width,this.height)}catch{var M=document.getElementsByTagName("canvas")[0],D=!M;M||((M=document.createElement("canvas")).style.display="none",document.body.appendChild(M));var I=M.getContext("2d");I&&(v=I.createImageData(this.width,this.height)),D&&document.body.removeChild(M)}g={index:0,imageData:v},this.infos.push(g)}var R=g.index;return g.index+=d,v._dirty=!0,{imageData:v,index:R}}}function o(s,i,d,g,v){var x=s.imageData.data,S=4*s.index++;x[S++]=i,x[S++]=d,x[S++]=g,x[S++]=v}function t(s){this.font=s,this.strokeImageInfos=new l(64,64),this.colDimImageInfos=new l(64,64),this.rowDimImageInfos=new l(64,64),this.colCellImageInfos=new l(64,64),this.rowCellImageInfos=new l(64,64),this.glyphInfos={},this.getGlyphInfo=function(i){var d=this.glyphInfos[i.index];if(d)return d;var g,v=i.getBoundingBox(),x=v.x1,S=v.y1,E=v.x2-x,M=v.y2-S,D=i.path.commands;if(E==0||M==0||!D.length)return this.glyphInfos[i.index]={};var I,R,L,U,O=[],G=[],V=[];for(g=8;0<=g;--g)V.push([]);for(g=8;0<=g;--g)G.push([]);function te(Te,Ge,Ze){var Ye=O.length;function Fe(q,W,X){for(var ie=q.length;0<ie--;){var we=q[ie];we<W&&(W=we),X<we&&(X=we)}return{min:W,max:X}}O.push(Ze);for(var dt=Fe(Te,1,0),Le=Math.max(Math.floor(9*dt.min),0),Oe=Math.min(Math.ceil(9*dt.max),9),ze=Le;ze<Oe;++ze)V[ze].push(Ye);for(var Xe=Fe(Ge,1,0),pe=Math.max(Math.floor(9*Xe.min),0),et=Math.min(Math.ceil(9*Xe.max),9),F=pe;F<et;++F)G[F].push(Ye)}function ne(Te){return(Ge=(Ye=255)*Te)<(Ze=0)?Ze:Ye<Ge?Ye:Ge;var Ge,Ze,Ye}function $(Te,Ge,Ze,Ye){this.p0=Te,this.c0=Ge,this.c1=Ze,this.p1=Ye,this.toQuadratic=function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}},this.quadError=function(){return h.default.Vector.sub(h.default.Vector.sub(this.p1,this.p0),h.default.Vector.mult(h.default.Vector.sub(this.c1,this.c0),3)).mag()/2},this.split=function(Fe){var dt=h.default.Vector.lerp(this.p0,this.c0,Fe),Le=h.default.Vector.lerp(this.c0,this.c1,Fe),Oe=h.default.Vector.lerp(dt,Le,Fe);this.c1=h.default.Vector.lerp(this.c1,this.p1,Fe),this.c0=h.default.Vector.lerp(Le,this.c1,Fe);var ze=h.default.Vector.lerp(Oe,this.c0,Fe),Xe=new $(this.p0,dt,Oe,ze);return this.p0=ze,Xe},this.splitInflections=function(){var Fe=h.default.Vector.sub(this.c0,this.p0),dt=h.default.Vector.sub(h.default.Vector.sub(this.c1,this.c0),Fe),Le=h.default.Vector.sub(h.default.Vector.sub(h.default.Vector.sub(this.p1,this.c1),Fe),h.default.Vector.mult(dt,2)),Oe=[],ze=dt.x*Le.y-dt.y*Le.x;if(ze!==0){var Xe=Fe.x*Le.y-Fe.y*Le.x,pe=Fe.x*dt.y-Fe.y*dt.x,et=Xe*Xe-4*ze*pe;if(0<=et){ze<0&&(ze=-ze,Xe=-Xe,pe=-pe);var F=Math.sqrt(et),q=(-Xe-F)/(2*ze),W=(-Xe+F)/(2*ze);0<q&&q<1&&(Oe.push(this.split(q)),W=1-(1-W)/(1-q)),0<W&&W<1&&Oe.push(this.split(W))}}return Oe.push(this),Oe}}function se(Te,Ge,Ze,Ye,Fe,dt,Le,Oe){var ze=new $(new h.default.Vector(Te,Ge),new h.default.Vector(Ze,Ye),new h.default.Vector(Fe,dt),new h.default.Vector(Le,Oe)).splitInflections(),Xe=[],pe=30/r,et=!0,F=!1,q=void 0;try{for(var W,X=ze[Symbol.iterator]();!(et=(W=X.next()).done);et=!0){for(var ie=W.value,we=[],Me=void 0;!(.125<=(Me=pe/ie.quadError()));){var Be=Math.pow(Me,.3333333333333333),de=ie.split(Be),We=ie.split(1-Be/(1-Be));Xe.push(de),we.push(ie),ie=We}Me<1&&Xe.push(ie.split(.5)),Xe.push(ie),Array.prototype.push.apply(Xe,we.reverse())}}catch(rt){F=!0,q=rt}finally{try{et||X.return==null||X.return()}finally{if(F)throw q}}return Xe}function J(Te,Ge,Ze,Ye){te([Te,Ze],[Ge,Ye],{x:Te,y:Ge,cx:(Te+Ze)/2,cy:(Ge+Ye)/2})}function ue(Te,Ge,Ze,Ye){return Math.abs(Ze-Te)<1e-5&&Math.abs(Ye-Ge)<1e-5}var me=!0,_e=!1,he=void 0;try{for(var Re,ve=D[Symbol.iterator]();!(me=(Re=ve.next()).done);me=!0){var ye=Re.value,P=(ye.x-x)/E,N=(ye.y-S)/M;if(!ue(I,R,P,N)){switch(ye.type){case"M":L=P,U=N;break;case"L":J(I,R,P,N);break;case"Q":var z=(ye.x1-x)/E,Q=(ye.y1-S)/M;te([I,P,z],[R,N,Q],{x:I,y:R,cx:z,cy:Q});break;case"Z":ue(I,R,L,U)?O.push({x:I,y:R}):(J(I,R,L,U),O.push({x:L,y:U}));break;case"C":for(var oe=se(I,R,(ye.x1-x)/E,(ye.y1-S)/M,(ye.x2-x)/E,(ye.y2-S)/M,P,N),K=0;K<oe.length;K++){var xe=oe[K].toQuadratic();te([xe.x,xe.x1,xe.cx],[xe.y,xe.y1,xe.cy],xe)}break;default:throw new Error("unknown command type: ".concat(ye.type))}I=P,R=N}}}catch(Te){_e=!0,he=Te}finally{try{me||ve.return==null||ve.return()}finally{if(_e)throw he}}for(var ee=O.length,ge=this.strokeImageInfos.findImage(ee),fe=ge.index,le=0;le<ee;++le){var Ee=O[le];o(ge,ne(Ee.x),ne(Ee.y),ne(Ee.cx),ne(Ee.cy))}function Ae(Te,Ge,Ze){for(var Ye=Te.length,Fe=Ge.findImage(Ye),dt=Fe.index,Le=0,Oe=0;Oe<Ye;++Oe)Le+=Te[Oe].length;for(var ze=Ze.findImage(Le),Xe=0;Xe<Ye;++Xe){var pe=Te[Xe],et=pe.length,F=ze.index;o(Fe,F>>7,127&F,et>>7,127&et);for(var q=0;q<et;++q){var W=pe[q]+fe;o(ze,W>>7,127&W,0,0)}}return{cellImageInfo:ze,dimOffset:dt,dimImageInfo:Fe}}return(d=this.glyphInfos[i.index]={glyph:i,uGlyphRect:[v.x1,-v.y1,v.x2,-v.y2],strokeImageInfo:ge,strokes:O,colInfo:Ae(V,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Ae(G,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[d.colInfo.dimOffset,d.rowInfo.dimOffset],d}}var r=Math.sqrt(3);h.default.RendererGL.prototype._renderText=function(s,i,d,g,v){if(this._textFont&&typeof this._textFont!="string"){if(!(v<=g)&&this._doFill){if(!this._isOpenType())return console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported"),s;s.push();var x=this._doStroke,S=this.drawMode;this._doStroke=!1,this.drawMode=a.TEXTURE;var E=this._textFont.font,M=this._textFont._fontInfo;M=M||(this._textFont._fontInfo=new t(E));var D=this._textFont._handleAlignment(this,i,d,g),I=this._textSize/E.unitsPerEm;this.translate(D.x,D.y,0),this.scale(I,I,1);var R=this.GL,L=!this._defaultFontShader,U=this._getFontShader();U.init(),U.bindShader(),L&&(U.setUniform("uGridImageSize",[64,64]),U.setUniform("uCellsImageSize",[64,64]),U.setUniform("uStrokeImageSize",[64,64]),U.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor);var O=this.retainedMode.geometry.glyph;if(!O){var G=this._textGeom=new h.default.Geometry(1,1,function(){for(var oe=0;oe<=1;oe++)for(var K=0;K<=1;K++)this.vertices.push(new h.default.Vector(K,oe,0)),this.uvs.push(K,oe)});G.computeFaces().computeNormals(),O=this.createBuffers("glyph",G)}var V=!0,te=!1,ne=void 0;try{for(var $,se=this.retainedMode.buffers.text[Symbol.iterator]();!(V=($=se.next()).done);V=!0)$.value._prepareBuffer(O,U)}catch(oe){te=!0,ne=oe}finally{try{V||se.return==null||se.return()}finally{if(te)throw ne}}this._bindBuffer(O.indexBuffer,R.ELEMENT_ARRAY_BUFFER),U.setUniform("uMaterialColor",this.curFillColor);try{var J=0,ue=null,me=E.stringToGlyphs(i),_e=!0,he=!1,Re=void 0;try{for(var ve,ye=me[Symbol.iterator]();!(_e=(ve=ye.next()).done);_e=!0){var P=ve.value;ue&&(J+=E.getKerningValue(ue,P));var N=M.getGlyphInfo(P);if(N.uGlyphRect){var z=N.rowInfo,Q=N.colInfo;U.setUniform("uSamplerStrokes",N.strokeImageInfo.imageData),U.setUniform("uSamplerRowStrokes",z.cellImageInfo.imageData),U.setUniform("uSamplerRows",z.dimImageInfo.imageData),U.setUniform("uSamplerColStrokes",Q.cellImageInfo.imageData),U.setUniform("uSamplerCols",Q.dimImageInfo.imageData),U.setUniform("uGridOffset",N.uGridOffset),U.setUniform("uGlyphRect",N.uGlyphRect),U.setUniform("uGlyphOffset",J),U.bindTextures(),R.drawElements(R.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)}J+=P.advanceWidth,ue=P}}catch(oe){he=!0,Re=oe}finally{try{_e||ye.return==null||ye.return()}finally{if(he)throw Re}}}finally{U.unbindShader(),this._doStroke=x,this.drawMode=S,s.pop()}return s}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":253,"../core/main":264,"./p5.RendererGL.Retained":317,"./p5.Shader":319,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.string.sub":192,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}]},{},[248])(248)})})(Gs);const ct=ua(Gs.exports),j=new ct(A=>{}),Nt=(A,c)=>(A.x-c.x)*(A.x-c.x)+(A.y-c.y)*(A.y-c.y),_s=(A,c,T)=>j.min(T,j.max(c,A)),ca=(A,c,T=255)=>j.color(j.random(A[0],c[0]),j.random(A[1],c[1]),j.random(A[2],c[2]),T),Vs=(A,c,T,e=255)=>{const b=1-T;return j.color(A[0]*T+c[0]*b,A[1]*T+c[1]*b,A[2]*T+c[2]*b,e)},tn=A=>j.color(j.red(A),j.green(A),j.blue(A),j.alpha(A)),Vr=(A,c,T)=>(c.x-A.x)*(T.y-A.y)-(T.x-A.x)*(c.y-A.y),da=(A,c,T,e=!1)=>{const b=T/2,y=T*(2/3);j.push(),j.fill(Rs),j.circle(A,c,T*2),j.fill(Zn),e&&(j.fill(hr),j.strokeWeight(3)),j.triangle(A-b,c-y,A-b,c+y,A+y,c),j.pop()},ha=(A,c,T,e=!1)=>{const b=T/2,y=T/3,p=T/5;j.push(),j.fill(Ps),j.circle(A,c,T*2),j.fill(Zn),e&&(j.fill(hr),j.strokeWeight(3)),j.triangle(A-y-p,c-b,A-y-p,c+b,A+b-p,c),j.triangle(A-y+p,c-b,A-y+p,c+b,A+b+p,c),j.pop()},fa=1,pa=(A,c,T,e,b=fa)=>{const y=T*.9,p=ct.Vector.fromAngle(1.75*j.PI).setMag(y);j.push(),j.strokeWeight(b),j.fill(na),j.circle(A,c,T*2),j.fill(Zn),j.textSize(y*2),j.text("A",A-p.x,c-p.y),e||(j.strokeWeight(5*b),j.line(A-p.x,c-p.y,A+p.x,c+p.y)),j.pop()},Ws=10,ma=50,Hs=j.height-ma,zs=20,ya=10,vo=2.5,ga=3,va=(A=Ws,c=Hs,T=zs,e=1,b=!1)=>{let y=A+T;const p=c+T;pa(y,p,T,b),y+=T*vo,da(y,p,T,e===1),y+=T*vo,ha(y,p,T,e>1)},ba=(A,c=Ws,T=Hs,e=zs,b=!1,y=ya)=>{const p=j.createVector(j.mouseX,j.mouseY),n=2;for(let h=0;h<ga;h++){const a=j.createVector(c+vo*e*h+e,T+e);if(Nt(a,p)<e*e){if(h===0)return[A,!b];if(h===1)return[1,b];if(h===2)return A*2<=y&&A!==0?[A*2,b]:[n,b]}}return[A,b]},wa=(A,c,T,e)=>{const b=T/2,y=T*(3/8);j.strokeWeight(e),j.beginShape(),j.vertex(A-b,c-y),j.quadraticVertex(A-b,c-b,A-y,c-b),j.vertex(A+y,c-b),j.quadraticVertex(A+b,c-b,A+b,c-y),j.vertex(A+b,c+y),j.quadraticVertex(A+b,c+b,A+y,c+b),j.vertex(A-y,c+b),j.quadraticVertex(A-b,c+b,A-b,c+y),j.endShape(j.CLOSE),j.strokeWeight(e*3),j.line(A-y,c-y,A+y,c+y),j.line(A+y,c-y,A-y,c+y)},vn=(A,c,T)=>{const e=T/2,b=T/8;j.push(),j.circle(A,c,T*2),j.noFill(),j.beginShape(),j.vertex(A-e,c-e),j.vertex(A+e,c-e),j.vertex(A-e,c+e),j.vertex(A+e,c+e),j.endShape(),j.line(A-b,c-(e+b),A-b,c-e),j.line(A+b,c-(e+b),A+b,c-e),j.line(A-b,c+(e+b),A-b,c+e),j.line(A+b,c+(e+b),A+b,c+e),j.pop()},xa=(A,c,T)=>{const e=T/2,b=T*(3/8),y={x:A,y:c-e},p={x:A,y:c+e},n={x:A+b,y:c-b},h={x:A-b,y:c-b};j.noFill(),j.curve(y.x,y.y-e,y.x,y.y,n.x,n.y,n.x+b,n.y-b),j.curve(n.x,n.y-e,n.x,n.y,p.x,p.y,p.x-T*3,p.y),j.curve(p.x+T*3,p.y,p.x,p.y,h.x,h.y,h.x,h.y-e),j.curve(h.x-b,h.y-b,h.x,h.y,y.x,y.y,y.x,y.y-e)},qe=j.windowWidth/80,Kt=qe*(2/3),qt=qe/24,_a=13,Sa=3/8,ja=1/2,Ta=1,qs=3600,mn=9999999999,Xt=(A,c,T,e=!1,b=j)=>{const y=e?0:30;b.beginShape();for(let p=0;p<6;p++){const n=b.PI/180*(y+p*60),h=A+b.cos(n)*T,a=c+b.sin(n)*T;b.vertex(h,a)}b.endShape(b.CLOSE)},Ea=(A,c,T,e,b,y=!1,p=j)=>{let n=y?-p.TWO_PI/3:-p.PI/2,h=A+p.cos(n)*T,a=c+p.sin(n)*T;p.beginShape();for(let o=0;o<=e;o++)h=A+p.cos(n)*T,a=c+p.sin(n)*T,p.vertex(h,a),n+=p.PI/3;p.endShape();const f=A+p.cos(n)*T,l=c+p.sin(n)*T;p.line(h,a,j.lerp(h,f,b),j.lerp(a,l,b))};var pt=(A=>(A[A.EMPTY=0]="EMPTY",A[A.HILL=1]="HILL",A[A.UNSTABLE=2]="UNSTABLE",A[A.WALL=3]="WALL",A[A.WATER=4]="WATER",A[A.LAVA=5]="LAVA",A[A.SPAWN=6]="SPAWN",A[A.BASE=7]="BASE",A[A.TELEPORTER_ONE=8]="TELEPORTER_ONE",A[A.TELEPORTER_TWO=9]="TELEPORTER_TWO",A))(pt||{});const Ca={name:"Empty",description:"An empty tile",hotkey:"e",keycode:69,canTower:!0,canWaterTower:!1,canLavaTower:!1,canUnit:!0,canWaterUnit:!0,isBase:!1,isSpawn:!1,buildInOuterRing:!1,isTeleporter:!1,teleporterType:0,rgb:zn},Ma={name:"Hill",description:"A slightly elevated tile",hotkey:"h",keycode:72,canTower:!0,canWaterTower:!1,canLavaTower:!1,canUnit:!1,canWaterUnit:!1,isBase:!1,isSpawn:!1,buildInOuterRing:!1,isTeleporter:!1,teleporterType:0,rgb:Qn},Aa={name:"Unstable",description:"An unstable tile",hotkey:"u",keycode:85,canTower:!1,canWaterTower:!1,canLavaTower:!1,canUnit:!0,canWaterUnit:!0,isBase:!1,isSpawn:!1,buildInOuterRing:!1,isTeleporter:!1,teleporterType:0,rgb:Ns},Ra={name:"Wall",description:"A wall tile",hotkey:"w",keycode:87,canTower:!1,canWaterTower:!1,canLavaTower:!1,canUnit:!1,canWaterUnit:!1,isBase:!1,isSpawn:!1,buildInOuterRing:!0,isTeleporter:!1,teleporterType:0,rgb:Ds},ka={name:"Water",description:"A water tile",hotkey:"a",keycode:65,canTower:!1,canWaterTower:!0,canLavaTower:!1,canUnit:!1,canWaterUnit:!0,isBase:!1,isSpawn:!1,buildInOuterRing:!1,isTeleporter:!1,teleporterType:0,rgb:Co},Pa={name:"Lava",description:"A lava tile",hotkey:"l",keycode:76,canTower:!1,canWaterTower:!1,canLavaTower:!0,canUnit:!1,canWaterUnit:!1,isBase:!1,isSpawn:!1,buildInOuterRing:!1,isTeleporter:!1,teleporterType:0,rgb:pn},Oa={name:"Spawn",description:"An enemy spawn point",hotkey:"s",keycode:83,canTower:!1,canWaterTower:!1,canLavaTower:!1,canUnit:!0,canWaterUnit:!0,isBase:!1,isSpawn:!0,buildInOuterRing:!0,isTeleporter:!1,teleporterType:0,rgb:rr},La={name:"Base",description:"A Maou base to be protected",hotkey:"b",keycode:66,canTower:!1,canWaterTower:!1,canLavaTower:!1,canUnit:!0,canWaterUnit:!0,isBase:!0,isSpawn:!1,buildInOuterRing:!0,isTeleporter:!1,teleporterType:0,rgb:$n},Da={name:"Teleporter Type One",description:"A teleporter connected to all other teleporters of the same type",hotkey:"t",keycode:84,canTower:!1,canWaterTower:!1,canLavaTower:!1,canUnit:!0,canWaterUnit:!0,isBase:!1,isSpawn:!1,buildInOuterRing:!1,isTeleporter:!0,teleporterType:1,rgb:qi},Ia={name:"Teleporter Type One",description:"A teleporter connected to all other teleporters of the same type",hotkey:"y",keycode:89,canTower:!1,canWaterTower:!1,canLavaTower:!1,canUnit:!0,canWaterUnit:!0,isBase:!1,isSpawn:!1,buildInOuterRing:!1,isTeleporter:!0,teleporterType:2,rgb:Yi},Wr={[0]:Ca,[1]:Ma,[2]:Aa,[3]:Ra,[4]:ka,[5]:Pa,[6]:Oa,[7]:La,[8]:Da,[9]:Ia},Ba=3,hn=(A,c,T=Ba)=>{j.push();const e=A.x+c.x,b=A.y+c.y,y=c.heading(),p=c.mag(),n=ct.Vector.fromAngle(y-j.PI/4),h=ct.Vector.fromAngle(y+j.PI/4);n.mult(-(p/3)),h.mult(-(p/3)),j.strokeWeight(T),j.line(A.x,A.y,e,b),j.line(e,b,e+n.x,b+n.y),j.line(e,b,e+h.x,b+h.y),j.pop()};var En=(A=>(A[A.EMPTY=0]="EMPTY",A[A.HILL=1]="HILL",A[A.UNSTABLE=2]="UNSTABLE",A[A.WALL=3]="WALL",A[A.WATER=4]="WATER",A[A.LAVA=5]="LAVA",A[A.SPAWN=6]="SPAWN",A[A.BASE=7]="BASE",A))(En||{});class kn{constructor(c,T,e,b,y,p={}){var n,h,a,f,l,o,t,r,s,i,d,g;this.pos=j.createVector(c,T),this.r=e,this.q=b,this.size=y,this.collisionRadius=y*(2+j.sqrt(3))/4,this.vertices=[],this.color=p.color?j.color(p.color.levels):j.color(zn),this.wall=(n=p.wall)!=null?n:!1,this.canTower=(h=p.canTower)!=null?h:!0,this.canWaterTower=(a=p.canWaterTower)!=null?a:!1,this.canLavaTower=(f=p.canLavaTower)!=null?f:!1,this.canUnit=(l=p.canUnit)!=null?l:!0,this.canWaterUnit=(o=p.canWaterUnit)!=null?o:!0,this.isSpawn=(t=p.isSpawn)!=null?t:!1,this.isTower=(r=p.isTower)!=null?r:!1,this.isTeleporter=(s=p.isTeleporter)!=null?s:!1,this.teleporterType=(i=p.teleporterType)!=null?i:0,this.type=(d=p.type)!=null?d:0,this.buffs=[],this.timedBuffs=[],this.appliedEffects={},this.data=(g=p.data)!=null?g:{}}show(c=this.pos){j.push(),j.fill(this.color),j.stroke(10),j.strokeWeight(1),Xt(c.x,c.y,this.size),j.pop()}showDebug(){if(j.push(),j.strokeWeight(3),this.data.floodPathVector&&(j.stroke(0,0,255),hn(this.pos,this.data.floodPathVector.copy().mult(.3))),this.data.floodNext&&(j.stroke(255,0,255),j.line(this.pos.x,this.pos.y,this.data.floodNext.pos.x,this.data.floodNext.pos.y),hn(this.pos,this.data.floodPathVector.copy().mult(.4))),this.data["scout-1-vector"]&&(j.stroke(0,255,255),hn(this.pos,this.data["scout-1-vector"].copy().mult(.3))),this.data["scout-1-prev"]){const c=ct.Vector.sub(j.createVector(this.data["scout-1-prev"].pos.x,this.data["scout-1-prev"].pos.y),j.createVector(this.pos.x,this.pos.y));j.stroke(255,0,0),hn(this.pos,c.copy().mult(.3))}j.pop()}preCalculateVertices(c=!1){const T=c?0:30;for(let e=0;e<6;e++){const b=j.PI/180*(T+e*60),y=this.pos.x+j.cos(b)*this.size,p=this.pos.y+j.sin(b)*this.size;this.vertices.push(j.createVector(y,p))}}applyBuff(c){this.buffs.push(c)}}class Ua{constructor(c,T,e,b,y={}){var p,n;this.tileTypeColors={[0]:j.color(zn),[1]:j.color(Qn),[2]:j.color(Ns),[3]:j.color(Ds),[4]:j.color(Co),[5]:j.color(pn),[6]:j.color(rr),[7]:j.color($n)},this.neighborVectorsRQ=[j.createVector(-1,1),j.createVector(0,1),j.createVector(1,0),j.createVector(1,-1),j.createVector(0,-1),j.createVector(-1,0)],this.teleporters={},this.midPos=j.createVector(c,T),this.rings=e,this.maxR=e*2,this.maxQ=e*2,this.midR=e,this.midQ=e,this.minR=0,this.minQ=0,this.hexSize=b,this.xDiff=j.sqrt(3)*b,this.yDiff=1.5*b,this.grid=[],this.wallRing=(p=y.wallRing)!=null?p:1,this.constructGrid((n=y.wallRing)!=null?n:1)}constructGrid(c=this.wallRing){for(let T=this.minR;T<=this.maxR;T++){this.grid.push([]);for(let e=this.minQ;e<=this.maxQ;e++){const b=this.getDiffVectorFromRQ(this.midR,this.midQ,T,e);if(b.add(this.midPos),this.grid[T].push(new kn(b.x,b.y,T,e,this.hexSize,{type:0,color:this.tileTypeColors[0]})),T+e<this.rings||T+e>this.rings*3)continue;const y=c;T>=this.minR+y&&T<=this.maxR-y&&e>=this.minQ+y&&e<=this.maxQ-y&&T+e>=this.rings+y&&T+e<=this.rings*3-y||this.setBuilderTileType(this.grid[T][e],pt.WALL)}}}getDiffVectorFromRQ(c,T,e,b){const y=e-c,p=b-T;return j.createVector(this.xDiff*p+this.xDiff/2*y,this.yDiff*y)}getHexVectorFromXY(c,T){const e=c-this.midPos.x,b=T-this.midPos.y,y=j.createVector(b/this.yDiff,(j.sqrt(3)/3*e-1/3*b)/this.hexSize),p=this.axialRound(y);return p.x+=this.midR,p.y+=this.midQ,p}rqVectorIsOnGrid(c,T=0){const e=c.x,b=c.y,y=T;return e>=this.minR+y&&e<=this.maxR-y&&b>=this.minQ+y&&b<=this.maxQ-y&&e+b>=this.rings+y&&e+b<=this.rings*3-y}axialRound(c){let T=j.round(c.x),e=j.round(c.y);const b=j.round(-c.x-c.y),y=j.abs(c.x-T),p=j.abs(c.y-e),n=j.abs(-c.x-c.y-b);return y>p&&y>n?T=-e-b:p>n&&(e=-T-b),j.createVector(T,e)}show(){for(let c=0;c<=this.maxR;c++)for(let T=0;T<=this.maxQ;T++)c+T<this.rings||c+T>this.rings*3||this.grid[c][T].show()}showDebug(){for(let c=0;c<=this.maxR;c++)for(let T=0;T<=this.maxQ;T++)c+T<this.rings||c+T>this.rings*3||this.grid[c][T].showDebug()}getNeighbors(c,T,e=!1){const b=e?this.getTeleporterNeighbors(c,T):[];for(let y of this.neighborVectorsRQ){const p=c+y.x,n=T+y.y;p<this.minR||p>this.maxR||n<this.minQ||n>this.maxQ||p+n<this.rings||p+n>this.rings*3||b.push(this.grid[p][n])}return b}getNeighborsArea(c,T,e){const b=[];for(let y=0;y<6;y++)for(let p=1;p<=e;p++){const n=c+this.neighborVectorsRQ[y].x*p,h=T+this.neighborVectorsRQ[y].y*p;for(let a=1;a<p;a++){const f=(y+2)%6,l=n+this.neighborVectorsRQ[f].x*a,o=h+this.neighborVectorsRQ[f].y*a;this.rqVectorIsOnGrid(j.createVector(l,o),this.wallRing)&&b.push(this.grid[l][o])}this.rqVectorIsOnGrid(j.createVector(n,h),this.wallRing)&&b.push(this.grid[n][h])}return b}getGrandNeighbors(c,T,e=0){const b=[];for(let y=0;y<6;y++){const p=c+this.neighborVectorsRQ[y].x,n=T+this.neighborVectorsRQ[y].y;for(let h=y;h<y+2;h++){const a=p+this.neighborVectorsRQ[h%6].x,f=n+this.neighborVectorsRQ[h%6].y;this.rqVectorIsOnGrid(j.createVector(a,f),e)&&b.push(this.grid[a][f])}}return b}getTeleporterNeighbors(c,T){const e=this.grid[c][T],b=[];if(!e.isTeleporter)return b;for(const y of this.teleporters[e.teleporterType])y.r===c&&y.q===T||b.push(y);return b}getAllTiles(c=!0){const T=[];for(let e=this.minR;e<=this.maxR;e++)for(let b=this.minQ;b<=this.maxQ;b++)e+b<this.rings||e+b>this.rings*3||(c||!this.grid[e][b].wall)&&T.push(this.grid[e][b]);return T}hexInArray(c,T){for(const e of T)if(e.r===c.r&&e.q===c.q)return!0;return!1}addRandomWalls(c=50,T=pt.HILL,e=1){for(let b=0;b<=this.maxR;b++)for(let y=0;y<=this.maxQ;y++)b+y<this.rings||b+y>this.rings*3||j.random(100)<c&&this.rqVectorIsOnGrid(j.createVector(b,y),e)&&this.setBuilderTileType(this.grid[b][y],T)}breakWallsInArray(c,T=pt.EMPTY){for(const e of c)this.setBuilderTileType(e,T)}aStar(c,T,e,b){const y=this.grid[c][T],p=this.getDiffVectorFromRQ(c,T,e,b);y.data={...y.data,g:0,h:p.mag(),f:p.mag(),prev:void 0};const n=this.grid[e][b],h=this.xDiff,a=h*(this.rings*2)**2;let f;const l=[y],o=[];for(;l.length>0;){f=l[0];let t=0;for(let s=1;s<l.length;s++)l[s].data.f<f.data.f&&(f=l[s],t=s);const r=this.getNeighbors(f.r,f.q);for(const s of r){if(this.hexInArray(s,o))continue;if(this.hexInArray(s,[n])){const d=[s,f];for(;f.data.prev;)d.push(f.data.prev),f=f.data.prev;return d}let i=h;if(s.canUnit||(i=a),this.hexInArray(s,l)){if(s.data.g<=f.data.g+i)continue}else s.data.h=this.getDiffVectorFromRQ(s.r,s.q,e,b).mag(),l.push(s);s.data.g=f.data.g+i,s.data.f=s.data.g+s.data.h,s.data.prev=f}l.splice(t,1),o.push(f)}return[]}resetColors(c=!0,T=j.color(zn)){for(let e=0;e<=this.maxR;e++)for(let b=0;b<=this.maxQ;b++)e+b<this.rings||e+b>this.rings*3||(c?this.grid[e][b].color=this.tileTypeColors[this.grid[e][b].type]:this.grid[e][b].color=T)}resetData(c={}){for(let T=0;T<=this.maxR;T++)for(let e=0;e<=this.maxQ;e++)T+e<this.rings||T+e>this.rings*3||(this.grid[T][e].data={...c})}resetSpecificData(c){for(let T=0;T<=this.maxR;T++)for(let e=0;e<=this.maxQ;e++)T+e<this.rings||T+e>this.rings*3||(this.grid[T][e].data[c]=null)}generateAllPathsThroughFloodFill(c,T,e=!1,b="flood",y=1e6,p=1e6){const n=`${b}Steps`,h=`${b}Next`,a=`${b}PathVector`;this.resetSpecificData("testFloodSteps"),e||(this.resetSpecificData(n),this.resetSpecificData(h),this.resetSpecificData(a));for(const f of T){const l=f;e?l.data={...l.data,testFloodSteps:0}:l.data={...l.data,testFloodSteps:0,[n]:0,[h]:l,[a]:j.createVector(0,0)};let o;const t=[l],r=[];for(;t.length>0;){o=t[0];let s=0;for(let d=1;d<t.length;d++)t[d].data.testFloodSteps<o.data.testFloodSteps&&(o=t[d],s=d);if(o.data.testFloodSteps>p)break;const i=this.getNeighbors(o.r,o.q,!0);for(const d of i){if(this.hexInArray(d,[...r,...t])||!(d.canUnit||d.canWaterUnit)||d.isTower||d.wall)continue;t.push(d);const g=ct.Vector.sub(j.createVector(o.pos.x,o.pos.y),j.createVector(d.pos.x,d.pos.y)),v=d.canUnit?1:y;(!d.data.testFloodSteps||d.data.testFloodSteps>o.data.testFloodSteps)&&(d.data.testFloodSteps=o.data.testFloodSteps+v,e||(d.data[n]=o.data[n]+v,d.data[h]=o,d.data[a]=g))}t.splice(s,1),r.push(o)}}for(const f of c)if(e){if(!f.data.testFloodSteps||f.data.testFloodSteps>y)return!1}else if(!f.data[n]||f.data[n]>y)return!1;return!0}setTileType(c,T){const e=Wr[T];c.type=T,c.color=this.tileTypeColors[T],c.wall=T===1||T===3,c.canTower=e.canTower,c.canWaterTower=e.canWaterTower,c.canLavaTower=e.canLavaTower,c.canUnit=e.canUnit,c.canWaterUnit=e.canWaterUnit}setBuilderTileType(c,T){const e=Wr[T];c.type=T,c.color=j.color(e.rgb),c.wall=T===pt.HILL||T===pt.WALL||T===pt.LAVA,c.canTower=e.canTower,c.canWaterTower=e.canWaterTower,c.canLavaTower=e.canLavaTower,c.canUnit=e.canUnit,c.canWaterUnit=e.canWaterUnit,c.isSpawn=e.isSpawn,c.isTeleporter=e.isTeleporter,c.teleporterType=e.teleporterType}addSpawnerToGrid(c){this.grid[c.r][c.q]=c}addMaouBaseToGrid(c){this.grid[c.r][c.q]=c}addTowerToGrid(c){this.grid[c.r][c.q]=c}removeTowerFromGrid(c){const T=new kn(c.pos.x,c.pos.y,c.r,c.q,c.size,{isTower:!1,data:c.data});this.setTileType(T,c.type),this.grid[c.r][c.q]=T}generateJsonableMap(){const c=[];for(const T of this.grid){const e=[];for(const b of T)e.push(b.type);c.push(e)}return c}buildMapFromJson(c,T,e){this.resetData();for(let b=0;b<this.grid.length;b++)for(let y=0;y<this.grid[b].length;y++){if(c[b][y]===pt.SPAWN&&(e.addSpawn(this.grid[b][y].pos.x,this.grid[b][y].pos.y,qe,{gridR:b,gridQ:y}),e.waveReader.setActiveSpawners(e.spawners),this.addSpawnerToGrid(e.spawners[e.spawners.length-1])),c[b][y]===pt.BASE){const p=new Po(this.grid[b][y].pos.x,this.grid[b][y].pos.y,b,y,qe,100);T.addBaseToMaou(p),this.addMaouBaseToGrid(p)}c[b][y],pt.TELEPORTER_ONE,this.setBuilderTileType(this.grid[b][y],c[b][y])}this.addAllTeleports()}addTeleporterToGrid(c){this.grid[c.r][c.q]=c}addAllTeleports(){for(let c=this.minR;c<=this.maxR;c++)for(let T=this.minQ;T<=this.maxQ;T++){if(c+T<this.rings||c+T>this.rings*3)continue;const e=this.grid[c][T];e.isTeleporter&&(e.teleporterType in this.teleporters||(this.teleporters[e.teleporterType]=[]),this.teleporters[e.teleporterType].push(e))}}}class Xs{constructor(c,T){this.pos=c,this.data=T}}class en{constructor(c,T,e,b,y=2,p=10){this.pos=j.createVector(c,T),this.width=e,this.height=b,this.capacity=y,this.maxDepth=p,this.split=!1,this.list=[],this.northEast=void 0,this.southEast=void 0,this.southWest=void 0,this.northWest=void 0}getDir(){return[this.northEast,this.southEast,this.southWest,this.northWest]}show(){if(this.split)for(const c of this.getDir())c.show();j.push(),j.strokeWeight(1),j.stroke(rr),j.noFill(),j.rect(this.pos.x,this.pos.y,this.width,this.height),j.pop()}insert(c){this.maxDepth<=0?this.list.push(c):this.split?(this.northEast.contains(c.pos)&&this.northEast.insert(c),this.southEast.contains(c.pos)&&this.southEast.insert(c),this.southWest.contains(c.pos)&&this.southWest.insert(c),this.northWest.contains(c.pos)&&this.northWest.insert(c)):(this.list.push(c),this.list.length>this.capacity&&this.subDivide())}subDivide(){const c=this.width/2,T=this.height/2;this.northEast=new en(this.pos.x+c,this.pos.y,c,T,this.capacity,this.maxDepth-1),this.southEast=new en(this.pos.x+c,this.pos.y+T,c,T,this.capacity,this.maxDepth-1),this.southWest=new en(this.pos.x,this.pos.y+T,c,T,this.capacity,this.maxDepth-1),this.northWest=new en(this.pos.x,this.pos.y,c,T,this.capacity,this.maxDepth-1),this.split=!0;for(let e=this.list.length-1;e>=0;e--)this.insert(this.list[e]),this.list.splice(e,1)}contains(c){return c.x>=this.pos.x&&c.x<this.pos.x+this.width&&c.y>=this.pos.y&&c.y<this.pos.y+this.height}inRangeCircle(c,T){const e=T**2;if(!this.intersectsCirlce(c,e))return[];const b=[];if(this.split)for(const y of this.getDir())b.push(...y.inRangeCircle(c,T));else for(const y of this.list)Nt(y.pos,c)>e||b.push(y.data);return b}inRangeCirclePart(c,T,e,b){const y=T**2;if(!this.intersectsCirlce(c,y))return[];const p=[];if(this.split)for(const n of this.getDir())p.push(...n.inRangeCirclePart(c,T,e,b));else for(const n of this.list){if(Nt(n.pos,c)>y)continue;const h=(ct.Vector.sub(n.pos,c).heading()+j.TWO_PI)%j.TWO_PI,a=e-h;a>-b&&a<b&&p.push(n.data)}return p}inRangePath(c,T,e){const b=[],y=[],p=ct.Vector.sub(T,c),n=ct.Vector.fromAngle(p.heading()+j.PI/2);n.setMag(e),y.push(ct.Vector.add(n,c)),n.mult(-1),y.push(ct.Vector.add(n,c)),y.push(ct.Vector.add(n,T)),n.mult(-1),y.push(ct.Vector.add(n,T));const h=(p.heading()+j.TWO_PI)%j.TWO_PI;b.push(...this.inRangeCirclePart(T,e,h,j.PI/2));const a=(p.heading()+j.PI*3)%j.TWO_PI;return b.push(...this.inRangeCirclePart(c,e,a,j.PI/2)),b.push(...this.inRangeRotatedRect(y)),b}inRangeRect(c,T,e){if(!this.intersectsRect(c,T,e))return[];const b=[];if(this.split)for(const y of this.getDir())b.push(...y.inRangeRect(c,T,e));else for(const y of this.list)y.pos.x>c.x+T||y.pos.x<c.x||y.pos.y>c.y+e||y.pos.y<c.y||b.push(y.data);return b}inRangeRotatedRect(c){const T=[];if(this.split)for(const e of this.getDir())T.push(...e.inRangeRotatedRect(c));else for(const e of this.list)Vr(c[0],c[1],e.pos)>0&&Vr(c[1],c[2],e.pos)>0&&Vr(c[2],c[3],e.pos)>0&&Vr(c[3],c[0],e.pos)>0&&T.push(e.data);return T}intersectsCirlce(c,T){const e=j.createVector(_s(c.x,this.pos.x,this.pos.x+this.width),_s(c.y,this.pos.y,this.pos.y+this.height));return Nt(e,c)<=T}intersectsRect(c,T,e){return!(c.x>this.pos.x+this.width||c.x+T<this.pos.x||c.y>this.pos.y+this.height||c.y+e<this.pos.y)}emptyQuadTree(){this.split=!1,this.list=[],this.northEast=void 0,this.southEast=void 0,this.southWest=void 0,this.northWest=void 0}}const Wt=new en(0,0,j.windowWidth,j.windowHeight,3,7);class Ar{constructor(c,T,e,b,y,p,n={}){var h,a,f,l,o,t,r,s;this.origin=c,this.pos=T.copy(),this.prevPos=T.copy(),this.vel=e.copy(),this.size=b,this.radius=b/2,this.damage=y,this.pierce=(h=n.pierce)!=null?h:1,this.critChance=(a=n.critChance)!=null?a:0,this.critMultiplier=(f=n.critMultiplier)!=null?f:2,this.statuses=(l=n.statuses)!=null?l:[],this.lifeSpan=p,this.color=(o=n.color)!=null?o:j.color(Ls),this.alreadyHitEnemyIds=[],this.extraDamageCalc=(t=n.extraDamageCalc)!=null?t:()=>0,this.extraActionOnHit=(r=n.extraActionOnHit)!=null?r:()=>{},this.extraActionOnMove=(s=n.extraActionOnMove)!=null?s:()=>{}}show(){j.push();const c=this.vel.copy();c.setMag(this.size);const T=ct.Vector.add(this.pos,c.copy().mult(-.5));j.stroke(this.color),hn(T,c,2),j.pop()}showDebug(){j.stroke(this.color),j.strokeWeight(5),j.point(this.pos.x,this.pos.y)}update(){this.prevPos=this.pos.copy(),this.pos.add(this.vel);const c=Wt.inRangePath(this.prevPos,this.pos,this.size);for(const T of c)this.hit(T);return this.lifeSpan--,this.lifeSpan<=0||this.pierce<=0}hit(c){if(this.pierce<=0||this.alreadyHitEnemyIds.includes(c.id))return;this.alreadyHitEnemyIds.push(c.id);const T=this.damage*(j.random()<this.critChance?this.critMultiplier:1)+this.extraDamageCalc(c);this.updateOriginUsageDataSingle(c,T),c.takeDamage(T);for(let e=0;e<this.statuses.length;e++)c.applyStatus(this.statuses[e]);this.extraActionOnHit({pos:this.pos,vel:this.vel,target:c}),this.pierce--}updateOriginUsageData(c,T){this.origin.usageData.totalDamageDone+=T,this.origin.usageData.unitsHit++,this.origin.usageData.highestDamageHit<T&&(this.origin.usageData.highestDamageHit=T),T>=c.hp&&(this.origin.usageData.unitsKilled++,this.origin.usageData.overkillDamageDone+=T-c.hp)}updateOriginUsageDataSingle(c,T){this.origin.usageData.totalHits++,this.updateOriginUsageData(c,T)}updateOriginUsageDataAoe(c,T){this.origin.usageData.totalHits++;for(const e of c)this.updateOriginUsageData(e,T)}}const Na=A=>({totalDamageDone:0,totalHits:0,highestDamageHit:0,overkillDamageDone:0,unitsKilled:0,unitsHit:0,framesExists:0,totalCost:A,killsPerCost:0,damagePerCost:0,killsPerFrame:0,damagePerFrame:0,killsPerCostPerFrame:0,damagePerCoastPerFrame:0}),Fa=A=>{A.killsPerCost=j.round(A.unitsKilled/A.totalCost,2),A.damagePerCost=j.round(A.totalDamageDone/A.totalCost,2),A.killsPerFrame=j.round(A.unitsKilled/A.framesExists,2),A.damagePerFrame=j.round(A.totalDamageDone/A.framesExists,2),A.killsPerCostPerFrame=j.round(A.unitsKilled/A.totalCost/A.framesExists,2),A.damagePerCoastPerFrame=j.round(A.totalDamageDone/A.totalCost/A.framesExists,2)};var Cr=(A=>(A[A.CLOSEST=0]="CLOSEST",A[A.FURTHEST=1]="FURTHEST",A[A.FIRST=2]="FIRST",A[A.LAST=3]="LAST",A[A.STRONGEST=4]="STRONGEST",A[A.WEAKEST=5]="WEAKEST",A))(Cr||{});const Ga={name:"Closest",description:"Target the enemy closest to the tower.",function:(A,c)=>{let T=0,e=99999;for(let b=0;b<c.length;b++){const y=Nt(c[b].pos,A);y<e&&(e=y,T=b)}return c[T]}},Va={name:"Furthest",description:"Target the enemy furthest from the tower.",function:(A,c)=>{let T=0,e=0;for(let b=0;b<c.length;b++){const y=Nt(c[b].pos,A);y>e&&(e=y,T=b)}return c[T]}},Wa={name:"First",description:"Target the enemy closest to reaching the base.",function:(A,c)=>{let T=0,e=99999;for(let b=0;b<c.length;b++){const y=c[b].getCurrentTile();y.data.floodSteps<e&&(e=y.data.floodSteps,T=b)}return c[T]}},Ha={name:"Last",description:"Target the enemy closest to the spawn.",function:(A,c)=>{let T=0,e=0;for(let b=0;b<c.length;b++){const y=c[b].getCurrentTile();y.data.floodSteps>e&&(e=y.data.floodSteps,T=b)}return c[T]}},za={name:"Strongest",description:"Target the strongest enemy.",function:(A,c)=>{let T=0,e=0;for(let b=0;b<c.length;b++){const y=c[b].hp;e<y&&(e=y,T=b)}return c[T]}},qa={name:"Weakest",description:"Target the weakest enemy.",function:(A,c)=>{let T=0,e=99999999;for(let b=0;b<c.length;b++){const y=c[b].hp;e>y&&(e=y,T=b)}return c[T]}},Ys={[0]:Ga,[1]:Va,[2]:Wa,[3]:Ha,[4]:za,[5]:qa};class wr extends kn{constructor(c,T,e,b,y,p,n,h,a,f,l,o){var t,r,s,i,d;super(c,T,e,b,y,{color:j.color(ks),...o}),this.name=p,this.range=n,this.baseRange=n,this.rangeBuffsAdditive=[],this.cooldown=f,this.baseCooldown=f,this.cooldownBuffsAdditive=[],this.currentCooldown=f,this.cost=l,this.spendValue=l,this.damage=h,this.projectileSpeed=a,this.critChance=(t=o.critChance)!=null?t:0,this.critMultiplier=(r=o.critMultiplier)!=null?r:2,this.projectilePierce=(s=o.projectilePierce)!=null?s:1,this.projectileColor=(i=o.projectileColor)!=null?i:j.color(Ls),this.projectileSize=(d=o.projectileSize)!=null?d:qe*(2/3),this.projectileNumber=1,this.lastShotAngle=0,this.targetingType=Cr.CLOSEST,this.availableTargetingTypes=[Cr.CLOSEST,Cr.FURTHEST,Cr.FIRST,Cr.LAST,Cr.STRONGEST,Cr.WEAKEST],this.upgradesPurchased=0,this.ultimate=()=>{},this.ultCooldown=0,this.ultCurrentCooldown=0,this.purchasedUpgrades=[],this.upgrades=o.upgrades,this.extraActionsOnHit=[],this.extraActionsOnMove=[],this.buffsThisApplied=[],this.usageData=Na(l)}show(c=this.pos){j.push(),j.stroke(0),j.strokeWeight(2),j.fill(this.color),Xt(c.x,c.y,this.size),this.upgradesPurchased>3&&(j.strokeWeight(1),Xt(c.x,c.y,this.size-3),this.upgradesPurchased>7&&(j.stroke(0),Xt(c.x,c.y,this.size-6))),this.showSymbol(c),this.shouldShowUltCooldown(),j.pop()}showSymbol(c=this.pos){}shouldShowUltCooldown(){}showUltCooldown(){if(this.ultCurrentCooldown<=0){let b=this.ultCurrentCooldown*-1%100;b>50&&(b=100-b),b/=50,j.push(),j.noFill(),j.strokeWeight(2),j.stroke(Vs(go,hr,b)),Xt(this.pos.x,this.pos.y,this.size-1),j.pop();return}const c=(this.ultCooldown-this.ultCurrentCooldown)/this.ultCooldown*6,T=j.floor(c),e=c%1;j.push(),j.noFill(),j.strokeWeight(2),j.stroke(go),Ea(this.pos.x,this.pos.y,this.size-1,T,e),j.pop()}applyBuff(c){c.onApply(this),this.buffs.push(c)}applyAllMyBuffs(){for(const c of this.buffs)c.onApply(this)}recalcCooldownBuffs(){this.cooldown=this.baseCooldown;for(const c of this.cooldownBuffsAdditive)this.cooldown+=c}recalcRangeBuffs(){this.range=this.baseRange;for(const c of this.rangeBuffsAdditive)this.range+=c}showRange(){if(this.range>0){const c=tn(this.color);c.setAlpha(100),j.fill(c),j.circle(this.pos.x,this.pos.y,this.range*2)}}update(){this.currentCooldown--,this.currentCooldown<=0&&this.shoot()&&(this.currentCooldown=this.cooldown),this.ultCurrentCooldown--;for(let c=this.timedBuffs.length-1;c>=0;c--){const T=this.timedBuffs[c];T.duration--,T.duration<=0&&(T.onRemove(this),this.timedBuffs.splice(c,1))}return this.usageData.framesExists++,!0}castUlt(){this.ultCurrentCooldown>0||(this.ultCurrentCooldown=this.ultCooldown,this.ultimate())}getDamage(){return this.damage}baseShoot(){const c=Wt.inRangeCircle(this.pos,this.range);if(c.length<1)return;const T=Ys[this.targetingType].function(this.pos,c),e=this.range/this.projectileSpeed,b=T.pos.copy();for(let n=1;n<=e&&(b.add(T.vel),!(Nt(b,this.pos)<(this.projectileSpeed*n)**2));n++);const y=ct.Vector.sub(b,this.pos);return y.setMag(this.projectileSpeed),new Ar(this,this.pos.copy(),y,10,this.getDamage(),e,{color:this.projectileColor,pierce:this.projectilePierce,critChance:this.critChance,critMultiplier:this.critMultiplier})}shoot(){const c=this.baseShoot();return c===void 0?!1:(this.lastShotAngle=c.vel.heading(),ot.addProjectile(c),!0)}purchaseUpgrade(c){c.onPurchase(this),c.purchased=!0,this.purchasedUpgrades.push(c.id);for(const T in this.upgrades){const e=this.upgrades[T];e.available=e.isAvailable(this.purchasedUpgrades)}this.spendValue+=c.cost,this.usageData.totalCost+=c.cost,this.upgradesPurchased++}changeRange(c){this.range+=c,this.onRangeChange()}onRangeChange(){}onSell(){}}class Ce{constructor(c,T,e,b,y,p=!1){this.id=c,this.name=T,this.cost=e,this.description=b,this.onPurchase=y,this.available=p,this.purchased=!1}isAvailable(c){if(this.purchased||c.length>7)return!1;switch(this.id){case"A":case"B":case"C":return!0;case"A+":return c.includes("A");case"B+":return c.includes("B");case"C+":return c.includes("C");case"AB":return c.includes("A")&&c.includes("B");case"BC":return c.includes("B")&&c.includes("C");case"CA":return c.includes("C")&&c.includes("A");case"AB+":return c.includes("AB")||c.includes("A+")&&c.includes("B+");case"BC+":return c.includes("BC")||c.includes("B+")&&c.includes("C+");case"CA+":return c.includes("CA")||c.includes("C+")&&c.includes("A+");case"AB++":return c.includes("AB+");case"BC++":return c.includes("BC+");case"CA++":return c.includes("CA+");default:return!1}}}const Qs=(A,c,T,e=j)=>{const b=[];for(let y=0;y<8;y++){const p=e.PI/4*y;b.push(e.createVector(e.cos(p)*T,e.sin(p)*T))}e.noFill(),e.strokeWeight(1);for(let y=1;y<4;y++){e.beginShape();for(const p of b)y===1&&e.line(A,c,A+p.x,c+p.y),p.setMag(T*.3*y),e.vertex(A+p.x,c+p.y);e.endShape(e.CLOSE)}},Xa=(A,c,T,e,b=j)=>{const y=ct.Vector.fromAngle(T);y.setMag(c/2);const p=ct.Vector.fromAngle(T);p.setMag(c),b.push(),b.beginShape(),b.vertex(A.x,A.y);const n=ct.Vector.add(A,y);b.vertex(n.x,n.y),p.rotate(e),n.add(p),b.vertex(n.x,n.y),p.rotate(e).mult(.5),n.add(p),b.vertex(n.x,n.y),p.rotate(b.PI*1.02),n.add(p),b.vertex(n.x,n.y),p.rotate(-e).mult(2),n.add(p),b.vertex(n.x,n.y),p.rotate(-e).mult(.5),n.add(p),b.vertex(n.x,n.y),b.endShape(b.CLOSE),b.pop()},Kn=(A,c,T,e=!0,b=j,y=rr,p=0,n=8)=>{const h=T*.4,a=T/10,f=T*(3/5),l=h*2;b.push(),b.translate(A,c),b.rotate(p),b.noStroke();for(let o=0;o<2;o++)for(let t=-4;t<7;t+=3){if(n<=0)continue;const r=o*(j.PI-2*t*j.PI*.05)+t*j.PI*.05,s=b.createVector(b.cos(r)*h,b.sin(r)*h);let i=-b.PI/5;t>0&&(i*=-1),o>0&&(i*=-1),Xa(s,l,r,i,b),n--}b.circle(0,-f,f),b.circle(0,0,T),b.fill(y),b.circle(-a,-l,a),b.circle(a,-l,a),e&&(b.stroke(hr),b.strokeWeight(1),Qs(0,0,h,b)),b.pop()};class Ya extends Ar{constructor(c,T,e,b,y,p,n,h,a,f={}){var l,o;super(c,T,e,b,y,p,f),this.pierce=n,this.hexes=h,this.frictionSlow=a,this.color=(l=f.color)!=null?l:j.color(hr),this.corrosion=(o=f.corrosion)!=null?o:0}show(){j.push(),j.stroke(this.color);for(const c of this.hexes)Qs(c.pos.x,c.pos.y,c.size);j.pop()}update(){const c=[];for(const T of this.hexes){const e=Wt.inRangeCircle(T.pos,T.size);c.push(...e)}c.length>0&&this.origin.usageData.totalHits++;for(const T of c){if(this.pierce<1)break;for(const e of this.statuses)T.applyStatus(e,!0);this.updateOriginUsageData(T,this.damage),T.takeDamage(this.damage),T.friction(this.frictionSlow),this.pierce--}return this.pierce-=this.corrosion,this.pierce<1}}const Se=new Ua(j.windowWidth*Sa,j.windowHeight*ja,_a,qe,{wallRing:Ta}),Ss=(A,c,T,e=1)=>{const b=T*2/9;j.push(),j.translate(A.x,A.y),j.rotate(c.heading()),j.triangle(2*b,-b,2*b,b,3*b,0),j.fill(hr),j.circle(0,0,T),j.pop(),j.push(),j.noStroke(),j.circle(A.x,A.y,T*e),j.pop()},Xn=new en(0,0,j.windowWidth,j.windowHeight,3,7);class fr{constructor(c,T,e,b={}){var y,p,n,h,a,f,l,o,t,r,s,i,d,g,v;this.pos=j.createVector(c,T),this.hexPos=j.createVector(0,0),this.prevPos=j.createVector(c,T),this.vel=j.createVector(0,0),this.acc=j.createVector(0,0),this.accumulatedFrictionMag=0,this.futurePos=j.createVector(0,0),this.desiredSpeed=(y=b.desiredSpeed)!=null?y:2,this.baseForce=(p=b.maxForce)!=null?p:.1,this.maxForce=this.baseForce,this.size=e,this.radius=e/2,this.mass=(n=b.mass)!=null?n:1,this.maxHp=(h=b.hp)!=null?h:50,this.hp=this.maxHp,this.damage=(a=b.damage)!=null?a:10,this.goldValue=(f=b.goldValue)!=null?f:50,this.dead=!1,this.color=(l=b.color)!=null?l:j.color(As),this.pathGoal=void 0,this.id=(o=b.id)!=null?o:j.random(),this.statuses={NORMAL:[],ON_DEATH:[],PASSIVE:[],ON_TAKE_DAMAGE:[]},this.level=(t=b.level)!=null?t:1,this.visionRadius=(r=b.visionRadius)!=null?r:qe*3,this.attackRadius=(s=b.attackRadius)!=null?s:this.radius,this.attackCooldown=(i=b.attackCooldown)!=null?i:50,this.attackCurrentCooldown=this.attackCooldown,this.currentFlowField=(d=b.flowField)!=null?d:"floodNext",this.originalFlowField=(g=b.flowField)!=null?g:"floodNext",this.canSwim=(v=b.canSwim)!=null?v:!1,this.framesAlive=0,this.rage=0,this.rageTimer=5e3,this.rageTimerOnRefresh=500,this.rageForceIncreasePercent=.1,this.abilityCounters=[]}show(){j.push(),j.strokeWeight(2),j.stroke(0),j.fill(this.color),Ss(this.pos,this.vel,this.size,j.max(this.hp/this.maxHp,0)),this.showStatusEffects(),j.pop()}showDot(){j.strokeWeight(5),j.point(this.pos.x,this.pos.y)}showDebug(){j.push(),j.strokeWeight(5),j.stroke(0,255,0),j.fill(this.color),Ss(this.pos,this.vel,this.size,j.max(this.hp/this.maxHp,0)),j.pop()}update(){const c=this.getTarget();this.hexPos=Se.getHexVectorFromXY(this.pos.x,this.pos.y),c!==void 0?this.followPathAndSeekTarget(c,Se.grid[this.hexPos.x][this.hexPos.y],this.currentFlowField):this.followPathField(Se.grid[this.hexPos.x][this.hexPos.y],this.currentFlowField),this.checkAndApplyRage(),this.applyAccumulatedFriction(),this.vel.add(this.acc),this.prevPos=this.pos.copy(),this.applyStatusEffects("NORMAL"),this.pos.add(this.vel),this.futurePos=this.vel.copy().mult(10),this.futurePos.add(this.pos),this.acc.mult(0),this.accumulatedFrictionMag=0,this.detectCollisions(),this.detectDrowning(),this.outOfBoundsCheckAndCorrection(),this.tryAttack(c),this.hp<=0&&this.die(),this.decreaseStatusTimers(),this.framesAlive++}applyStatusEffects(c,T={}){for(let e=this.statuses[c].length-1;e>=0;e--)this.statuses[c][e].effectUnit(this,this.statuses[c][e],T)}showStatusEffects(){const c=[];for(const y in this.statuses)c.push(...this.statuses[y]);const T=this.size/3,e=this.pos.x+(c.length/2+.5)*-T,b=j.createVector(e,this.pos.y-this.size);for(let y=c.length-1;y>=0;y--)b.x+=T,c[y].show(this,b)}decreaseStatusTimers(){for(const c in this.statuses){const T=this.statuses[c];for(let e=T.length-1;e>=0;e--){const b=T[e];b.duration--,b.duration<=0&&(this.statuses[c].splice(e,1),b.onRemoval(this))}}}applyStatus(c,T=!1){for(let b=this.statuses[c.timing].length-1;b>=0;b--)if(this.statuses[c.timing][b].name===c.name)return T?(this.statuses[c.timing][b].duration=c.duration,!0):!1;const e=c.copy();return this.statuses[c.timing].push(e),e.onApply(this),!0}edges(c=0){this.pos.x>j.width-c&&(this.pos.x-=j.width-2*c),this.pos.x<c&&(this.pos.x+=j.width-2*c),this.pos.y>j.height-c&&(this.pos.y-=j.height-2*c),this.pos.y<c&&(this.pos.y+=j.height-2*c)}bouncyEdges(c=0){this.pos.x>j.width-c&&this.vel.x>0&&(this.pos.x=j.width-c,this.vel.mult([-1,1])),this.pos.x<c&&this.vel.x<0&&(this.pos.x=c,this.vel.mult([-1,1])),this.pos.y>j.height-c&&this.vel.y>0&&(this.pos.y=j.height-c,this.vel.mult([1,-1])),this.pos.y<c&&this.vel.y<0&&(this.pos.y=c,this.vel.mult([1,-1]))}findPositionThroughEdges(c,T=0){const e=ct.Vector.sub(c,this.pos);return e.x>j.width/2-T&&(e.x-=j.width-2*T),e.x<-j.width/2+T&&(e.x+=j.width-2*T),e.y>j.height/2-T&&(e.y-=j.height-2*T),e.y<-j.height/2+T&&(e.y+=j.height-2*T),e.add(this.pos)}applyForce(c){const T=c.copy().div(this.mass);this.acc.add(T)}friction(c=.1){let T=j.min(c,1);T*=this.vel.mag()-this.accumulatedFrictionMag,this.accumulatedFrictionMag+=T}applyAccumulatedFriction(){const c=this.vel.copy();c.normalize(),c.mult(-1),c.setMag(this.accumulatedFrictionMag*this.mass),this.applyForce(c)}drag(c=1){const T=this.vel.copy();T.normalize(),T.mult(-1);const e=this.vel.mag(),b=.1;T.setMag(c*b*e*e),this.applyForce(T)}getDesire(c){const T=ct.Vector.sub(c,this.pos);return T.setMag(this.desiredSpeed),T}seek(c){const T=this.getDesire(c);return T.sub(this.vel),T.limit(this.maxForce),T}arrive(c){const T=this.getDesire(c),e=j.dist(this.pos.x,this.pos.y,c.x,c.y);return e<200&&T.setMag(j.map(e,0,200,0,this.desiredSpeed)),T.sub(this.vel),T.limit(this.maxForce),T}flee(c){const T=this.getDesire(c).mult(-1);return T.sub(this.vel),T.limit(this.maxForce),T}pursue(c){return Nt(this.pos,c.pos)>c.futurePos.mag()**2?this.seek(this.findPositionThroughEdges(c.futurePos,100)):this.seek(this.findPositionThroughEdges(c.pos,100))}evade(c){return Nt(this.pos,c.pos)>c.futurePos.mag()**2?this.flee(this.findPositionThroughEdges(c.futurePos,100)):this.flee(this.findPositionThroughEdges(c.pos,100))}catch(c){this.size/2+c.size/2>j.dist(c.pos.x,c.pos.y,this.pos.x,this.pos.y)&&(this.hp=j.min(this.maxHp,this.hp+80),c.hp-=80,c.pos.x=j.random(j.width),c.pos.y=j.random(j.height),c.die())}takeDamage(c){this.applyStatusEffects("ON_TAKE_DAMAGE",{damage:c}),this.hp-=c,this.hp<=0&&this.die()}getHeal(c){this.hp=j.min(this.maxHp,this.hp+c)}die(){this.dead||(this.dead=!0,this.applyStatusEffects("ON_DEATH"))}reachedMaou(){}getCurrentTile(){const c=Se.getHexVectorFromXY(this.pos.x,this.pos.y);return Se.rqVectorIsOnGrid(c)?Se.grid[c.x][c.y]:(this.outOfBoundsCheckAndCorrection(),this.getCurrentTile())}detectCollisions(){const c=this.getCurrentTile();if(c===void 0)return;const T=Se.getNeighbors(c.r,c.q);c.isSpawn;for(const e of[...T,c])if((e.wall||e.isSpawn)&&Nt(this.pos,e.pos)<(this.radius+e.collisionRadius)**2){const b=ct.Vector.sub(this.pos,e.pos),y=b.angleBetween(this.vel),p=ct.Vector.fromAngle(b.heading()+(j.PI-y));p.setMag(this.vel.mag()*1),this.vel.set(p),b.setMag(this.radius+e.collisionRadius),b.add(e.pos),this.pos.set(b)}}detectDrowning(){const c=this.getCurrentTile();c===void 0||!c.canWaterTower||this.drown()}drown(){this.takeDamage(this.maxHp/200),this.friction(.15)}outOfBoundsCheckAndCorrection(){const c=Se.getHexVectorFromXY(this.pos.x,this.pos.y);Se.rqVectorIsOnGrid(c)||(this.pos=this.prevPos.copy(),this.vel=j.createVector(0,0))}readPathField(c,T=this.currentFlowField){return c.data[T]?(Nt(this.pos,c.pos)<(c.collisionRadius-this.radius)**2&&(this.pathGoal=c.data[T]),this.pathGoal||(this.pathGoal=c.data[T]),this.pathGoal.pos):c.pos}followPathField(c,T=this.currentFlowField){if(this.tryTeleport(c,T))return;const b=this.readPathField(c,T),y=this.seek(b);this.applyForce(y)}tryTeleport(c,T=this.currentFlowField){if(!c.isTeleporter||!c.data[T]||!c.data[T].isTeleporter)return!1;const e=ct.Vector.sub(this.pos,c.pos),b=ct.Vector.add(c.data[T].pos,e);return this.pos=b,this.pathGoal=c.data[T].data[T],!0}getTarget(c=Xn){const T=c.inRangeCircle(this.pos,this.visionRadius);if(T.length<1)return;let e=0,b=99999;for(let y=0;y<T.length;y++){const p=Nt(T[y].pos,this.pos);p<b&&(b=p,e=y)}return T[e]}seekTargetWithoutApplyForce(c){const T=this.getCurrentTile(),e=c.getCurrentTile();let b=this.seek(c.pos);if(T!==e){const y=Se.aStar(T.r,T.q,e.r,e.q);b=this.seek(y[y.length-2].pos)}return b}seekTarget(c){this.applyForce(this.seekTargetWithoutApplyForce(c))}followPathAndSeekTarget(c,T,e=this.currentFlowField){const b=this.readPathField(T,e),y=this.seek(b),p=this.seekTargetWithoutApplyForce(c),n=ct.Vector.add(y,p);n.limit(this.maxForce),this.applyForce(n)}tryAttack(c){this.attackCurrentCooldown--,c!==void 0&&(this.attackCurrentCooldown>0||Nt(this.pos,c.pos)>(Kt/2+this.attackRadius)**2||(this.attack(c),this.attackCurrentCooldown=this.attackCooldown))}attack(c){c.takeDamage(this.damage)}checkAndApplyRage(){this.rageTimer--,this.rageTimer<1&&(this.rageTimer=this.rageTimerOnRefresh,this.rage++,this.maxForce=this.baseForce+this.baseForce*this.rage*this.rageForceIncreasePercent)}}class Qa extends fr{constructor(c,T,e,b={}){var y;super(c,T,e,b),this.hpLossPerFrame=(y=b.hpLossPerFrame)!=null?y:.1}update(){this.hp-=this.hpLossPerFrame;const c=this.getTarget(Wt);return c!==void 0?this.seekTarget(c):this.friction(.01),this.applyAccumulatedFriction(),this.vel.add(this.acc),this.prevPos=this.pos.copy(),this.pos.add(this.vel),this.futurePos=this.vel.copy().mult(10),this.futurePos.add(this.pos),this.acc.mult(0),this.accumulatedFrictionMag=0,this.detectCollisions(),this.outOfBoundsCheckAndCorrection(),this.tryAttack(c),this.hp<=0&&this.die(),this.hp<=0}show(){j.push(),j.fill(this.color),j.circle(this.pos.x,this.pos.y,this.size),j.pop()}}class Za extends Qa{constructor(c,T,e,b={}){super(c,T,e,b)}show(){const c=this.vel.heading()+j.PI/2;j.push(),j.fill(this.color),Kn(this.pos.x,this.pos.y,this.size,!1,j,rr,c,j.ceil(this.hp/this.maxHp*10)),j.pop()}}const Zs=(A,c={})=>{var T,e,b,y,p,n,h;return new Za(A.x,A.y,Kt*.4,{desiredSpeed:qt*2,maxForce:qt*.2,hp:(T=c.hp)!=null?T:100,hpLossPerFrame:(e=c.hpLoss)!=null?e:.1,damage:(b=c.damage)!=null?b:10,mass:1,goldValue:0,color:j.color((y=c.color)!=null?y:Gt),visionRadius:(p=c.vision)!=null?p:qe*5,attackRadius:(n=c.attackRadius)!=null?n:Kt/2,attackCooldown:(h=c.attackCooldown)!=null?h:20})};class Rr{constructor(c,T,e,b,y,p,n){this.name=c,this.duration=T,this.timing=e,this.effect=b,this.show=y,this.onApply=p!=null?p:()=>{},this.onRemoval=n!=null?n:()=>{}}effectUnit(c,T,e){this.effect(c,T,e)}copy(){return new Rr(this.name,this.duration,this.timing,this.effect,this.show,this.onApply,this.onRemoval)}}const $a=(A=.25,c={},T="spider food")=>new Rr(T,2,"ON_DEATH",e=>{j.random()<A&&ot.addMinion(Zs(e.pos,c))},(e,b)=>{j.fill(Gt),Kn(b.x,b.y,e.size/3)},e=>{},e=>{}),zt=Object.freeze({name:"Arachne",description:"Arachne",hotkey:"w",keycode:87,range:1,cooldown:450,cost:1e3,damage:0,projectileSpeed:0,towerType:"NORMAL",rgb:hr,webDurability:1e3,webSlow:.25,spiderlingCooldown:250,spiderlingOnDeathChance:.2,spiderlingHp:100,spiderlingDamage:10,spiderlingHpDecay:.1,rareSpiderlingChance:0,rareSpiderlingHp:5e3,rareSpiderlingDamage:100,rareSpiderlingHpDecay:0,showSymbol:(A,c,T={})=>{j.push(),j.fill(Gt),Kn(A.x,A.y,c*.7,!1),j.pop()}});class Ka extends wr{constructor(c,T,e,b,y,p,n,h,a,f,l,o,t){super(c,T,e,b,y,zt.name,p,n,h,a,f,t),this.getWebProjectile=(r,s=this.corrosion)=>{const i=this.getStatuses();return new Ya(this,this.pos,j.createVector(0,0),this.size,this.damage,this.webDurability,this.webDurability,r,this.webSlow,{color:this.projectileColor,corrosion:s,statuses:i})},this.webDurability=l,this.webSlow=o,this.activeWeb=null,this.corrosion=0,this.spiderlingCooldown=zt.spiderlingCooldown,this.currentSpiderlingCooldown=zt.spiderlingCooldown,this.spiderlingOnDeathChance=zt.spiderlingOnDeathChance,this.spiderlingHp=zt.spiderlingHp,this.spiderlingDamage=zt.spiderlingDamage,this.spiderlingHpDecay=zt.spiderlingHpDecay,this.rareSpiderlingChance=zt.rareSpiderlingChance,this.rareSpiderlingHp=zt.rareSpiderlingHp,this.rareSpiderlingDamage=zt.rareSpiderlingDamage,this.rareSpiderlingHpDecay=zt.rareSpiderlingHpDecay}showSymbol(c=this.pos){j.push(),j.fill(Gt),Kn(c.x,c.y,this.size*.7,!1),j.pop()}showRange(){const c=tn(this.color);c.setAlpha(100),j.fill(c),j.circle(this.pos.x,this.pos.y,this.range*4*this.size)}update(){return this.activeWeb===null?(this.currentCooldown--,this.currentCooldown<=0&&(this.shoot(),this.currentCooldown=this.cooldown)):this.activeWeb.pierce<=0&&(this.activeWeb=null),this.ultCurrentCooldown--,this.spiderling(),this.usageData.framesExists++,!0}spiderling(){}spawnSpiderling(){const c=[];for(const b of Se.getNeighborsArea(this.r,this.q,this.range))b.canUnit&&c.push(b);const T=j.random(c),e=Zs(T.pos,this.getSpiderlingOptions());ot.addMinion(e)}getSpiderlingOptions(){const c=j.random()<this.rareSpiderlingChance;return{damage:c?this.rareSpiderlingDamage:this.spiderlingDamage,hp:c?this.rareSpiderlingHp:this.spiderlingHp,hpLoss:c?this.rareSpiderlingHpDecay:this.spiderlingHpDecay,color:c?rr:Gt}}shoot(){const c=Se.getNeighborsArea(this.r,this.q,this.range);for(let e=c.length-1;e>=0;e--)c[e].wall&&c.splice(e,1);const T=this.getWebProjectile(c);return this.activeWeb=T,ot.addProjectile(T),!0}getStatuses(){return[]}getSpiderFood(){return $a(this.spiderlingOnDeathChance,this.getSpiderlingOptions())}}const Ja=A=>new Ka(A.pos.x,A.pos.y,A.r,A.q,A.size,zt.range,zt.damage,zt.projectileSpeed,zt.cooldown,zt.cost,zt.webDurability,zt.webSlow,{color:j.color(zt.rgb),projectileColor:j.color(hr),wall:!0,isTower:!0,type:A.type,data:A.data,upgrades:{A:new Ce("A","Stickier webs",600,"Stickier webs slow enemies down even more.",c=>{c.webSlow+=.1},!0),B:new Ce("B","Steel thread",400,"Makes your web more durable.",c=>{c.webDurability+=900},!0),C:new Ce("C","Spinning talent",800,"Spin new webs faster.",c=>{c.cooldown-=150},!0),"A+":new Ce("A+","Nether glue",1400,"Magic infused glue makes webs unnaturally sticky.",c=>{c.webSlow+=.15}),"B+":new Ce("B+","Titanium thread",1500,"Makes your web way more durable.",c=>{c.webDurability+=1500}),"C+":new Ce("C+","Spinning prodigy",1700,"Spin new webs at top speed.",c=>{c.cooldown-=150}),AB:new Ce("AB","Spiky silk",1300,"How can silk be spiky?",c=>{c.damage+=1}),BC:new Ce("BC","Great web",1e3,"Make your web even larger.",c=>{c.range+=1}),CA:new Ce("CA","Spiderlings",1200,"The Arachne gives birth to spiderlings who damage and distract heroes.",c=>{c.spiderling=()=>{c.currentSpiderlingCooldown--,c.currentSpiderlingCooldown<=0&&(c.currentSpiderlingCooldown=c.spiderlingCooldown,c.spawnSpiderling())}}),"AB+":new Ce("AB+","Suffocating silk",2200,"Hope you don't have claustrophobia, or arachnophobia... Increases damage",c=>{c.damage+=3}),"BC+":new Ce("BC+","Greatest web",1500,"Spin your web between mountains.",c=>{c.range+=1}),"CA+":new Ce("CA+","Brood Parasite",2e3,"Nope nope nope nope nope nope nope nope nope nope nope. (Has a chance to birth a spiderling when a hero dies in the arachnes web)",c=>{c.getStatuses=()=>[c.getSpiderFood()]}),"AB++":new Ce("AB++","Corrosive silk",6600,"Silk corrodes away enemies and the web alike.",c=>{c.damage+=16,c.projectileColor=j.color(Qi),c.corrosion=5}),"BC++":new Ce("BC++","World wide web (Ability)",7500,"The entire world is my domain.",c=>{c.ultCooldown=qs,c.ultCurrentCooldown=c.ultCooldown,c.ultimate=()=>{const T=Se.getAllTiles(!1);for(let e=T.length-1;e>=0;e--){const b=c.getWebProjectile([T[e]],c.corrosion+5);ot.addProjectile(b)}},c.shouldShowUltCooldown=()=>{c.showUltCooldown()}}),"CA++":new Ce("CA++","One Big Happy Family",6660,"These spiderlings were all raised with love and care, and only a minimal amount of cannibalism. Spawn more and stronger spiderlings, as well as rare super spiderlings every now and then. Motherhood is so fulfilling.",c=>{c.spiderlingCooldown-=100,c.spiderlingOnDeathChance+=.25,c.spiderlingHp+=150,c.spiderlingDamage+=15,c.rareSpiderlingChance+=.02})}}),el=0,tl=1,$s=(A,c,T,e=el,b=tl)=>{j.push(),j.translate(A,c),j.rotate(e);const y=T/2,p={x:0,y:-y},n={x:0,y},h=j.createVector(-T/4,0),a=j.createVector(T*(5/6),0);j.strokeWeight(b),j.noFill(),j.line(p.x,p.y,n.x,n.y),hn(h,a,b*1.5),j.strokeWeight(b*2),j.curve(p.x-2.5*T,p.y,p.x,p.y,n.x,n.y,n.x-2.5*T,n.y),j.pop()},Nr={name:"Archer",description:"",hotkey:"a",keycode:65,range:qe*6,cooldown:150,cost:200,damage:20,projectileSpeed:10,towerType:"NORMAL",rgb:oa,showSymbol:(A,c,T={angle:0})=>{$s(A.x,A.y,c,T.angle,1)}};class rl extends wr{constructor(c,T,e,b,y,p,n,h,a,f,l){super(c,T,e,b,y,Nr.name,p,n,h,a,f,l),this.arrowNumber=1}showSymbol(c=this.pos){$s(c.x,c.y,this.size,this.lastShotAngle,1)}shoot(){const c=this.baseShoot();if(c===void 0)return!1;const T=j.floor(this.arrowNumber/2)*-1;this.lastShotAngle=c.vel.heading();const e=j.PI/9;for(let b=T;b<T+this.arrowNumber;b++){const y=this.lastShotAngle+b*e,p=ct.Vector.fromAngle(y);p.setMag(c.vel.mag());const n=[];for(let a=0;a<c.statuses.length;a++)n.push(c.statuses[a].copy());const h=new Ar(this,this.pos.copy(),p,c.size,c.damage,c.lifeSpan,{color:this.projectileColor,pierce:c.pierce,critChance:c.critChance,critMultiplier:c.critMultiplier,statuses:n});ot.addProjectile(h)}return!0}}const nl=A=>new rl(A.pos.x,A.pos.y,A.r,A.q,A.size,Nr.range,Nr.damage,Nr.projectileSpeed,Nr.cooldown,Nr.cost,{color:j.color(Nr.rgb),wall:!0,isTower:!0,type:A.type,data:A.data,upgrades:{A:new Ce("A","Sharper Arrows",100,"Even sharper arrows deal more damage.",c=>{c.damage+=10},!0),B:new Ce("B","Sunglasses",300,"You'd think the protection from the sun gives this archer a range increase, but it's really the confidence boost.",c=>{c.range+=qe},!0),C:new Ce("C","Faster firing",450,"Shorter cooldown between arrows.",c=>{c.cooldown-=40},!0),"A+":new Ce("A+","Dark Arrows",750,"Arrows made from metal mined deep in the underworld. They deal alot more damage",c=>{c.damage+=45,c.projectileColor=j.color(aa)}),"B+":new Ce("B+","Scope",500,"How do you put a scope on a bow? Doesn't matter, more range.",c=>{c.range+=qe*2}),"C+":new Ce("C+","Faster firing festival",800,"Gotta go fast.",c=>{c.cooldown-=30}),AB:new Ce("AB","Aimed shot",200,"Until now, aiming was more of a suggestion... Faster projectiles",c=>{c.projectileSpeed+=10}),BC:new Ce("BC","Triple shot",900,"Trying to emulate some cool moves you saw eh.",c=>{c.arrowNumber+=2}),CA:new Ce("CA","Line em up",250,"Three birds one arrow.",c=>{c.projectilePierce+=2}),"AB+":new Ce("AB+","Great shot",2e3,"Faster, further, friendlier, if by that you mean deadlier.",c=>{c.projectileSpeed+=10,c.damage+=25,c.range+=qe}),"BC+":new Ce("BC+","More arrows",1e3,"More arrows more better.",c=>{c.arrowNumber+=2}),"CA+":new Ce("CA+","Spot Weakspot",500,"Hit them in their weakspot for critical damage.",c=>{c.critChance+=.2,c.critMultiplier+=1}),"AB++":new Ce("AB++","Charged shot",3500,"Even more powerful shot, deal bonus damage based on the time since the last shot.",c=>{c.damage+=50,c.getDamage=()=>{const T=-c.currentCooldown+c.cooldown;return c.damage+T}}),"BC++":new Ce("BC++","Blot out the sun",5e3,"Let them fight in the shadow.",c=>{c.arrowNumber+=13}),"CA++":new Ce("CA++","Luck is also a skill",1200,"Rely entirely on luck for those nice and big numbers.",c=>{c.critChance+=.2,c.critMultiplier+=2,c.projectilePierce+=1})}}),Ur={name:"Barricade",description:"",hotkey:"b",keycode:66,range:0,cooldown:0,cost:50,damage:0,projectileSpeed:0,towerType:"NORMAL",rgb:ra,showSymbol:(A,c)=>{}},js=A=>new wr(A.pos.x,A.pos.y,A.r,A.q,A.size,Ur.name,Ur.range,Ur.damage,Ur.projectileSpeed,Ur.cooldown,Ur.cost,{color:j.color(Ur.rgb),wall:!0,isTower:!0,type:A.type,data:A.data,upgrades:{A:new Ce("A","Nothing",0,"Still just a barrier.",c=>{},!0),B:new Ce("B","Nothing",0,"Still just a barrier.",c=>{},!0),C:new Ce("C","Nothing",0,"Still just a barrier.",c=>{},!0),"A+":new Ce("A+","Nothing",0,"Still just a barrier.",c=>{}),"B+":new Ce("B+","Nothing",0,"Still just a barrier.",c=>{}),"C+":new Ce("C+","Nothing",0,"Still just a barrier.",c=>{}),AB:new Ce("AB","Nothing",0,"Still just a barrier.",c=>{}),BC:new Ce("BC","Nothing",0,"Still just a barrier.",c=>{}),CA:new Ce("CA","Nothing",0,"Still just a barrier.",c=>{}),"AB+":new Ce("AB+","Nothing",0,"Still just a barrier.",c=>{}),"BC+":new Ce("BC+","Nothing",0,"Still just a barrier.",c=>{}),"CA+":new Ce("CA+","Nothing",0,"Still just a barrier.",c=>{}),"AB++":new Ce("AB++","Nothing",0,"Still just a barrier.",c=>{}),"BC++":new Ce("BC++","Nothing",0,"Still just a barrier.",c=>{}),"CA++":new Ce("CA++","Nothing",0,"Still just a barrier.",c=>{})}}),Ks=(A,c,T,e=0,b=j)=>{const y=T/2,p=T/3,n=84,h=b.TWO_PI/n,a=6;let f=p,l=e,o=!0;b.push(),b.stroke(Gt),b.strokeWeight(1),b.beginShape();for(let t=0;t<n;t++){o?f=y:f=p;const r=A+b.cos(l)*f,s=c+b.sin(l)*f;b.vertex(r,s),t%a===0&&(o=!o),l+=h}b.endShape(b.CLOSE),b.pop()},ir={name:"Gravi-tech Tower",description:"",hotkey:"g",keycode:71,range:qe*4,cooldown:1e3,cost:1200,damage:0,projectileSpeed:6,towerType:"NORMAL",rgb:yn,attractionForce:.1,capacity:5,showSymbol:(A,c,T={angle:0})=>{j.fill(Is),Ks(A.x,A.y,c,T.angle)}};class ol extends wr{constructor(c,T,e,b,y,p,n,h,a,f,l,o,t){super(c,T,e,b,y,ir.name,p,n,h,a,f,t),this.attractionForce=l,this.capacity=o,this.active=!0}showSymbol(c=this.pos){j.push(),j.fill(Is),Ks(c.x,c.y,this.size,this.lastShotAngle),j.pop()}update(){return this.active?(this.lastShotAngle+=.03,this.shoot()):(this.currentCooldown--,this.currentCooldown<=0&&(this.currentCooldown=this.cooldown,this.active=!0)),this.ultCooldown--,!0}baseShoot(){const c=Wt.inRangeCircle(this.pos,this.range);if(!(c.length<1)){for(let T=0;T<c.length;T++){const e=ct.Vector.sub(this.pos,c[T].pos).setMag(this.attractionForce*c[T].mass);c[T].applyForce(e)}c.length>this.capacity&&(this.active=!1)}}shoot(){return this.baseShoot(),!0}}const sl=A=>new ol(A.pos.x,A.pos.y,A.r,A.q,A.size,ir.range,ir.damage,ir.projectileSpeed,ir.cooldown,ir.cost,ir.attractionForce,ir.capacity,{color:j.color(ir.rgb),projectileColor:j.color(ir.rgb),projectilePierce:100,wall:!0,isTower:!0,type:A.type,data:A.data,upgrades:{A:new Ce("A","Field stabilizer",1300,"Stabilize the gravitational field to increase it's capacity to hold units.",c=>{c.capacity+=5},!0),B:new Ce("B","Reserve cell",500,"By keeping a center gravity cell in reserve the tower can be restarted after failure twice as fast.",c=>{c.cooldown-=500},!0),C:new Ce("C","Greater field",1e3,"Affect a slightly bigger area.",c=>{c.range+=qe/2},!0),"A+":new Ce("A+","Micromanage flow",4e3,"Strengthen the field in places with a lot of units by weakening parts that aren't being used, increasing capacity beyond it's limits.",c=>{c.capacity+=10}),"B+":new Ce("B+","Placeholder",0,"Gotta think of somehing.",c=>{}),"C+":new Ce("C+","Grand field",2e3,"Spread the field as far as possible without letting it collapse.",c=>{c.range+=qe}),AB:new Ce("AB","Repulsion wave",0,"Gotta.",c=>{}),BC:new Ce("BC","Placeholder",0,"Gotta think of somehing.",c=>{}),CA:new Ce("CA","Placeholder",0,"Gotta think of somehing.",c=>{}),"AB+":new Ce("AB+","Placeholder",0,"Gotta think of somehing.",c=>{}),"BC+":new Ce("BC+","Placeholder",0,"Gotta think of somehing.",c=>{}),"CA+":new Ce("CA+","Placeholder",0,"Gotta think of somehing.",c=>{}),"AB++":new Ce("AB++","Placeholder",0,"Gotta think of somehing.",c=>{}),"BC++":new Ce("BC++","Placeholder",0,"Gotta think of somehing.",c=>{}),"CA++":new Ce("CA++","Placeholder",0,"Gotta think of somehing.",c=>{})}}),il=(A,c,T)=>{const e=T/2,b=T/4;j.push(),j.rectMode(j.CENTER),j.rect(A,c,e,e),j.rect(A,c+b,T,T/15),j.pop()},Js=(A,c,T,e=j.color(hr))=>{const b=T/2,y=T*(1/4),p=T*(1/12),n=T*(3/4),h=T/3,a=T*(2/3),f=j.createVector(A+p,c+p),l=j.PI,o=j.createVector(f.x+j.cos(l)*p*2,f.y+j.sin(l)*p*2),t=j.createVector(f.x+j.cos(l)*p*6,f.y+j.sin(l)*p*6),r=j.PI*(3/5),s=j.createVector(f.x+j.cos(r)*y,f.y+j.sin(r)*y),i=j.PI*(11/12),d=j.createVector(f.x+j.cos(i)*p*6,f.y+j.sin(i)*p*6),g=j.PI*(5/6),v=j.createVector(f.x+j.cos(g)*a,f.y+j.sin(g)*a),x=j.PI*-4/5,S=j.createVector(f.x+j.cos(x)*p,f.y+j.sin(x)*p);j.strokeWeight(1),j.circle(f.x,f.y,b),j.beginShape(),j.vertex(o.x,o.y),j.quadraticVertex(t.x,t.y,v.x,v.y),j.quadraticVertex(d.x,d.y,s.x,s.y),j.endShape(),j.fill(Zn),j.stroke(0),il(f.x,f.y-h,n),j.fill(e),j.circle(S.x,S.y,p)},al=-.5*j.PI,ll=j.color(ks),Ts=(A,c,T)=>{const e=T/2,b=T/10,y=e-b;j.beginShape(),j.vertex(A+e,c-b),j.vertex(A-y,c-b),j.quadraticVertex(A-e,c-b,A-e,c),j.quadraticVertex(A-e,c+b,A-y,c+b),j.vertex(A+e,c+b),j.endShape(j.CLOSE)},ul=(A,c,T,e=ll,b=al)=>{const y=T/20,p=T*(9/11),n=T/2,h=T/4;j.push(),j.translate(A,c),j.rotate(b),j.rectMode(j.CENTER),j.fill(hr),Ts(0,0,T),j.rect(n,0,y,h),j.fill(e),Ts(-y,0,p),j.pop()},fo=(A,c,T)=>{const e=T/2,b=e-T/4,y=e-T/6,p=j.PI/40,n=j.PI/10;let h=0,a=0,f=!0;const l=[];for(;h<j.TWO_PI;){f?a=j.random(b,y):a=j.random(y,e);const o=A+j.cos(h)*a,t=c+j.sin(h)*a;l.push(j.createVector(o,t)),h+=j.random(p,n),f=!f}return l},po=(A,c=j)=>{c.push(),c.noStroke(),c.beginShape();for(const T of A)c.vertex(T.x,T.y);c.endShape(c.CLOSE),c.pop()};class Nn{constructor(c,T,e,b,y,p,n,h){var a;this.pos=c.copy(),this.vel=(a=h==null?void 0:h.copy())!=null?a:j.createVector(0,0),this.size=T,this.duration=e,this.color=b,this.vertices=y,this.show=p,this.onExpire=n}update(){return this.duration--,this.show(this),this.pos.add(this.vel),this.duration<=0}}const Mo=(A,c,T=5,e=j.color(nn))=>{const b=fo(A.x,A.y,c);return new Nn(A,c,T,e,b,()=>{j.fill(e),po(b)},()=>{const p=fo(A.x,A.y,c*.6666666666666666);return new Nn(A,c*(2/3),T,e,p,()=>{j.fill(e),po(p)},()=>{const n=fo(A.x,A.y,c/2);return new Nn(A,c/2,T,e,n,()=>{j.fill(e),po(n)},()=>{})})})};class Es extends Ar{constructor(c,T,e,b,y,p,n,h,a,f,l={}){super(c,T,e,n,a,f,l),this.zPos=b,this.zVel=y,this.zAcc=p,this.showAngle=-j.PI/2,this.changeAngle=j.random(-j.PI/4,j.PI/4),this.explosionRadius=h}show(){j.push(),ul(this.pos.x,this.pos.y,this.size+this.zPos/(qe*.1),this.color,this.showAngle),j.pop()}update(){return this.prevPos=this.pos.copy(),this.pos.add(this.vel),this.zVel+=this.zAcc,this.zPos+=this.zVel,this.zPos<=0?(this.hit(),!0):(this.showAngle+=this.changeAngle,!1)}hit(){ot.addVisual(Mo(this.pos,this.explosionRadius*2,2,j.color(this.color)));const c=Wt.inRangeCircle(this.pos,this.explosionRadius);for(const T of c){if(this.pierce<=0)break;const e=this.damage*(j.random()<this.critChance?this.critMultiplier:1);T.takeDamage(e);for(let b=0;b<this.statuses.length;b++)T.applyStatus(this.statuses[b]);this.pierce--}}}const cl=(A,c,T,e=j)=>{const b=T/2,y=T/3,p=T/4,n=T*(3/10);e.push(),e.translate(A,c),e.stroke(Gt),e.strokeWeight(1),e.beginShape(),e.vertex(0,-b),e.quadraticVertex(y/2*1.1,-b/2*1.1,p,0),e.quadraticVertex(n,n,0,y),e.quadraticVertex(-n,n,-p,0),e.quadraticVertex(-y/2*1.1,-b/2*1.1,0,-b),e.endShape(),e.pop()},bo=(A,c,T="poison")=>new Rr(T,c,"NORMAL",b=>{b.takeDamage(A)},(b,y)=>{j.fill(Zi),cl(y.x,y.y,b.size/2)}),dl=(A,c,T,e=0,b=j)=>{const y=T/2,p=T/20,n=T/12,h=n*2;b.push(),b.translate(A,c),b.rotate(e),b.stroke(Gt),b.strokeWeight(1),b.beginShape(),b.vertex(h,-y),b.vertex(p,-n),b.vertex(h,-n),b.vertex(-h,y),b.vertex(-p,n),b.vertex(-h,n),b.endShape(b.CLOSE),b.pop()},hl=5,ei=(A,c,T,e=hl,b=j)=>{e%2==0&&(e+=1);let y=-b.PI/2;b.beginShape();for(let p=0;p<e;p++){y+=b.TWO_PI*(b.ceil(e/2)/e);const n=A+b.cos(y)*T,h=c+b.sin(y)*T;b.vertex(n,h)}b.endShape(b.CLOSE)},ti=(A,c,T="PASSIVE")=>new Rr(c,A,T,b=>{},(b,y)=>{j.push(),j.fill(hr),j.noStroke(),ei(y.x,y.y,b.size*.3333333333333333,8),j.pop()},b=>{},b=>{}),fl=(A,c="paralysis")=>new Rr(c,A,"NORMAL",e=>{e.acc.setMag(0),e.vel.setMag(0)},(e,b)=>{j.fill(Us),dl(b.x,b.y,e.size*.6666666666666666)},e=>{},e=>{e.applyStatus(ti(A/2,c,"NORMAL"))}),ar={name:"Plague Slinger",description:"",hotkey:"p",keycode:80,range:qe*4,cooldown:120,cost:800,damage:10,poisonDuration:500,poisonDamage:.2,projectileSpeed:6,towerType:"NORMAL",explosionRadius:qe,rgb:Eo,showSymbol:(A,c,T={})=>{j.fill(Gt),Js(A.x,A.y,c*1.5)}};class pl extends wr{constructor(c,T,e,b,y,p,n,h,a,f,l,o,t,r){super(c,T,e,b,y,ar.name,p,n,f,l,o,r),this.vialNumber=1,this.poisonName="Slinger",this.poisonDamage=h,this.poisonDuration=a,this.paralysisDuration=0,this.explosionRadius=t}showSymbol(c=this.pos){j.push(),j.fill(Gt),Js(c.x,c.y,this.size*1.5),j.pop()}getStatuses(){return[this.getPoison()]}getPoison(){return bo(this.poisonDamage,this.poisonDuration,this.poisonName)}getParalysis(){return fl(this.paralysisDuration)}baseShoot(){const c=Wt.inRangeCircle(this.pos,this.range);if(c.length<1)return;let T=0,e=this.range**2;for(let o=0;o<c.length;o++){const t=Nt(c[o].pos,this.pos);t<e&&(e=t,T=o)}const b=c[T],y=this.getStatuses(),p=this.range/this.projectileSpeed,n=b.pos.copy();for(let o=1;o<=p;o++){n.add(b.vel);const t=Nt(n,this.pos);if(t<(this.projectileSpeed*o)**2||t>this.range*this.range)break}const h=ct.Vector.sub(n,this.pos),a=j.floor(h.mag()/this.projectileSpeed);h.setMag(this.projectileSpeed);const f=-1*(2*qe/a);return new Es(this,this.pos.copy(),h,0,qe,f,20,this.explosionRadius,this.getDamage(),p,{color:this.projectileColor,pierce:this.projectilePierce,critChance:this.critChance,critMultiplier:this.critMultiplier,statuses:y})}shoot(){const c=this.baseShoot();if(c===void 0)return!1;ot.addProjectile(c);const T=this.vialNumber-1;this.lastShotAngle=c.vel.heading();const e=j.PI/4,b=.5;for(let y=0;y<T;y++){const p=this.lastShotAngle+j.random(-e,e),n=ct.Vector.fromAngle(p);n.setMag(c.vel.mag());const h=c.zAcc*1+j.random(-b,b),a=[];for(let l=0;l<c.statuses.length;l++)a.push(c.statuses[l].copy());const f=new Es(this,this.pos.copy(),n,c.zPos,c.zVel,h,c.size,c.explosionRadius,c.damage,c.lifeSpan,{color:this.projectileColor,pierce:c.pierce,critChance:c.critChance,critMultiplier:c.critMultiplier,statuses:a});ot.addProjectile(f)}return!0}}const ml=A=>new pl(A.pos.x,A.pos.y,A.r,A.q,A.size,ar.range,ar.damage,ar.poisonDamage,ar.poisonDuration,ar.projectileSpeed,ar.cooldown,ar.cost,ar.explosionRadius,{color:j.color(ar.rgb),projectileColor:j.color(Eo),projectilePierce:100,wall:!0,isTower:!0,type:A.type,data:A.data,upgrades:{A:new Ce("A","Extra vial",300,"Poison is all in the dose, so let's dubble that shall we.",c=>{c.vialNumber+=1},!0),B:new Ce("B","Vile pitcher",600,"This slinger just got promoted to pitcher in the Mad Scientist Inc. office team.",c=>{c.range+=qe,c.projectileSpeed+=1},!0),C:new Ce("C","Paralysis coating",200,"Coats the vials with a paralizing agent.",c=>{c.paralysisDuration+=16,c.getStatuses=()=>[c.getPoison(),c.getParalysis()]},!0),"A+":new Ce("A+","Handful of vials",2400,"Don't worry about the costs, Mad Scientist Inc. buys all its glasswork wholesale.",c=>{c.vialNumber+=3}),"B+":new Ce("B+","Mecha arm",3100,"Mechanical arms allow for even further and faster throwing.",c=>{c.explosionRadius+=qe/5,c.range+=qe,c.projectileSpeed+=2}),"C+":new Ce("C+","Coma inducer",2e3,"Many vipers were harmed in the production of this stronger coating.",c=>{c.paralysisDuration+=24}),AB:new Ce("AB","Unstable concoction",1e3,"The unstable contends of the vials react violently with the air, increasing explosion damage and radius.",c=>{c.explosionRadius+=qe/3,c.damage+=15}),BC:new Ce("BC","Mad prodigy",1700,"Works faster and deadlier than a normal prodigy.",c=>{c.cooldown-=20,c.poisonDamage+=.25}),CA:new Ce("CA","Antibody killer",750,"The poison aggresively attacks antibodies, increasing its duration and damage.",c=>{c.poisonDuration+=300,c.poisonDamage+=.1}),"AB+":new Ce("AB+","Killer combustion",1200,"Make them vials go BOOM.",c=>{c.explosionRadius+=qe/3,c.damage+=15}),"BC+":new Ce("BC+","Patented pathogen",1800,"This patented formula isn't available to any other plague slinger, and obviously better than anything those amateurs could have produced.",c=>{c.poisonDamage+=.3,c.poisonName=`Slinger-P${String(j.random())}`}),"CA+":new Ce("CA+","Mutating virus",1200,"The virus keeps mutating, making recovery incredibly slow.",c=>{c.poisonDuration+=1200}),"AB++":new Ce("AB++","BOOOOM!",4900,"Just go boom, who cares about poison.",c=>{c.projectileColor=j.color(nn),c.explosionRadius+=qe/3,c.damage+=30,c.vialNumber+=1,c.poisonDamage=0,c.poisonDuration=0,c.getPoison=()=>bo(0,0,"Nope")}),"BC++":new Ce("BC++","Unique strain",7e3,"Every vial is filled with it's own unique strain of the virus, each having it's own deadly effect on the victim. No one else could have done this, Muhahaha... ehem",c=>{c.poisonDamage+=.2,c.getPoison=()=>bo(c.poisonDamage,c.poisonDuration,`Slinger-P-Unique-${String(j.random())}`)}),"CA++":new Ce("CA++","Eternal suffering",6e3,"The virus hijacks part of it's victems DNA to become a part of them, never to be cured.",c=>{c.poisonDuration+=998e3})}}),yl=-.5*j.PI,gl=j.color(Qn),ri=(A,c=!1)=>{const T=A/2,e=T-A/4,b=T-A/6,y=j.PI/20,p=j.PI/5;let n=0,h=0,a=!0;const f=[];for(;n<j.TWO_PI;){a&&c?h=j.random(e,b):h=j.random(b,T);const l=j.cos(n)*h,o=j.sin(n)*h;f.push(j.createVector(l,o)),n+=j.random(y,p),a=!a}return f},Ao=(A,c,T,e=yl,b=gl)=>{j.push(),j.translate(A,c),j.rotate(e),j.strokeWeight(1),j.stroke(Gt),j.fill(b),j.beginShape();for(const y of T)j.vertex(y.x,y.y);j.endShape(j.CLOSE),j.pop()};class ni extends Ar{constructor(c,T,e,b,y,p,n={}){var h;super(c,T,e,b,y,p,n),this.rockVertices=ri(b,(h=n.spikyRocks)!=null?h:!1)}show(){Ao(this.pos.x,this.pos.y,this.rockVertices)}}class wo extends ni{constructor(c,T,e,b,y,p,n={}){var h,a,f;super(c,T,e,b,y,p,n),this.explosionRadius=(h=n.explosionRadius)!=null?h:qe/2,this.explosionVisualDuration=(a=n.explosionVisualDuration)!=null?a:3,this.explosionColor=(f=n.explosionColor)!=null?f:nn}hit(c){if(this.pierce<=0)return;ot.addVisual(Mo(this.pos,this.explosionRadius*2,this.explosionVisualDuration,j.color(this.explosionColor)));const T=Wt.inRangeCircle(this.pos,this.explosionRadius);for(const e of T){const b=this.damage*(j.random()<this.critChance?this.critMultiplier:1)+this.extraDamageCalc(e);e.takeDamage(b);for(let y=0;y<this.statuses.length;y++)e.applyStatus(this.statuses[y])}this.extraActionOnHit&&this.extraActionOnHit({pos:this.pos,radius:this.explosionRadius}),this.pierce--}}const oi=(A,c,T,e=0,b=Qn,y=j)=>{const p=T/3,n=y.TWO_PI/5;let h=e;y.push(),y.stroke(Gt),y.strokeWeight(1),y.circle(A,c,T*1.1);for(let a=0;a<5;a++){const f=A+y.cos(h)*p,l=c+y.sin(h)*p;y.fill(b),y.circle(f,l,p),h+=n}y.pop()};class Ro{constructor(c,T,e,b,y){this.name=c,this.id=y!=null?y:j.random(),this.duration=b!=null?b:99999,this.onApply=T,this.onRemove=e}copy(c){return new Ro(this.name,this.onApply,this.onRemove,c!=null?c:this.id)}}const vl=(A="KoboldTeamwork")=>new Ro(A,T=>{T.name===$t.name&&(T.cooldownBuffsAdditive.push(-5),T.lowestCooldownBuffsAdditive.push(-1),T.rangeBuffsAdditive.push(qe),T.maxSpoolHeatBuffsAdditive.push(500),T.recalcCooldownBuffs(),T.recalcRangeBuffs(),T.recalcHeatBuffs())},T=>{}),$t=Object.freeze({name:"Kobold",description:"The Kobold supports your defense with its own invention, a spool driven catapult! Every shot fires faster than the last, until the spool overheats or no target can be found.",hotkey:"k",keycode:75,range:qe*3.5,cooldown:70,lowestCooldown:20,maxSpoolHeat:400,cost:300,damage:10,projectileSpeed:5,towerType:"NORMAL",rgb:$i,showSymbol:(A,c,T={angle:0,heat:0})=>{j.fill(Bs),oi(A.x,A.y,c,T.angle)}});class bl extends wr{constructor(c,T,e,b,y,p,n,h,a,f,l){super(c,T,e,b,y,$t.name,p,n,h,a,f,l),this.extraDamageCalc=o=>0,this.currentMaxCooldown=a,this.lowestCooldown=$t.lowestCooldown,this.baseLowestCooldown=$t.lowestCooldown,this.lowestCooldownBuffsAdditive=[],this.spoolHeat=0,this.maxSpoolHeat=$t.maxSpoolHeat,this.baseMaxSpoolHeat=$t.maxSpoolHeat,this.maxSpoolHeatBuffsAdditive=[],this.heatGenerationSpeed=1,this.heatPerDamage=30,this.explosionRadius=qe/2,this.spikyRocks=!1}showSymbol(c=this.pos){j.push(),j.fill(Vs(rr,Bs,this.spoolHeat/1e3)),oi(c.x,c.y,this.size,this.lastShotAngle),j.pop()}update(){return this.currentCooldown--,this.currentCooldown<=0&&(this.shoot()?(this.currentCooldown=this.currentMaxCooldown,this.spoolHeat+=(this.cooldown-this.currentMaxCooldown)*this.heatGenerationSpeed,this.currentMaxCooldown=j.max(this.currentMaxCooldown-5,this.lowestCooldown),this.spoolHeat>this.maxSpoolHeat&&this.resetSpool()):this.resetSpool(),this.updateRange()),this.lastShotAngle-=.002*($t.cooldown-this.currentMaxCooldown+10),this.ultCurrentCooldown--,!0}updateRange(){this.recalcRangeBuffs()}resetSpool(){this.currentMaxCooldown=this.cooldown,this.spoolHeat=0}getProjectile(c,T){return new ni(this,this.pos.copy(),c,this.projectileSize,this.getDamage(),T,{color:this.projectileColor,pierce:this.projectilePierce,critChance:this.critChance,critMultiplier:this.critMultiplier,spikyRocks:this.spikyRocks,extraDamageCalc:this.extraDamageCalc})}baseShoot(){const c=Wt.inRangeCircle(this.pos,this.range);if(c.length<1)return;let T=0,e=this.range**2;for(let a=0;a<c.length;a++){const f=Nt(c[a].pos,this.pos);f<e&&(e=f,T=a)}const b=c[T],y=this.range/this.projectileSpeed,p=b.pos.copy();for(let a=1;a<=y&&(p.add(b.vel),!(Nt(p,this.pos)<(this.projectileSpeed*a)**2));a++);const n=ct.Vector.sub(p,this.pos);return n.setMag(this.projectileSpeed),this.getProjectile(n,y)}shoot(){const c=this.baseShoot();if(c===void 0)return!1;ot.addProjectile(c);const T=this.projectileNumber-1,e=j.PI;for(let b=0;b<T;b++){const y=j.random(-e,e),p=ct.Vector.fromAngle(y);p.setMag(c.vel.mag());const n=[];for(let a=0;a<c.statuses.length;a++)n.push(c.statuses[a].copy());const h=this.getProjectile(p,c.lifeSpan);ot.addProjectile(h)}return!0}recalcCooldownBuffs(){super.recalcCooldownBuffs(),this.lowestCooldown=this.baseLowestCooldown;for(const c of this.lowestCooldownBuffsAdditive)this.lowestCooldown+=c}recalcHeatBuffs(){this.maxSpoolHeat=this.baseMaxSpoolHeat;for(const c of this.maxSpoolHeatBuffsAdditive)this.maxSpoolHeat+=c}}const wl=A=>new bl(A.pos.x,A.pos.y,A.r,A.q,A.size,$t.range,$t.damage,$t.projectileSpeed,$t.cooldown,$t.cost,{color:j.color($t.rgb),wall:!0,isTower:!0,type:A.type,data:A.data,upgrades:{A:new Ce("A","Bigger Rocks",200,"Bigger rock deal more damage, and hit slightly easier. Not really rocket science is it.",c=>{c.damage+=10,c.projectileSize+=qe/3},!0),B:new Ce("B","Fans",300,"The type that cools you off, not the type that brings the heat.",c=>{c.maxSpoolHeat+=200},!0),C:new Ce("C","Balanced Speed",350,"Longest cooldown is faster, because control is king.",c=>{c.cooldown-=10},!0),"A+":new Ce("A+","Spiky Rocks",550,"Hand selected spiky rocks, spikier than normal rocks, the spikiest really!",c=>{c.damage+=30,c.spikyRocks=!0}),"B+":new Ce("B+","Heat Sink",1200,"A giant heat sink, allowing the kobold to fire at maximum speed for a long time.",c=>{c.maxSpoolHeat+=1400}),"C+":new Ce("C+","Min Maxing",750,"Optimize your spool, increase both the minimum and maximum speed.",c=>{c.cooldown-=10,c.lowestCooldown-=10}),AB:new Ce("AB","Packing Heat",650,"Packs the rocks with explosive powder, dealing damage in a small area around the impact.",c=>{c.explosionRadius+=qe/2,c.getProjectile=(T,e)=>new wo(c,c.pos.copy(),T,c.projectileSize,c.getDamage(),e,{color:c.projectileColor,pierce:c.projectilePierce,critChance:c.critChance,critMultiplier:c.critMultiplier,explosionRadius:c.explosionRadius,spikyRocks:c.spikyRocks,extraDamageCalc:c.extraDamageCalc})}),BC:new Ce("BC","Harness the Heat",1500,"As the spool heats up the rocks get hotter and fire faster, dealing increased damage.",c=>{c.heatPerDamage-=5,c.getDamage=()=>c.damage+c.spoolHeat/c.heatPerDamage}),CA:new Ce("CA","Bully",600,"Deal extra damage based on missing health of your target. Like the big man you are.",c=>{c.extraDamageCalc=T=>{const e=1-T.hp/T.maxHp;return c.getDamage()*e}}),"AB+":new Ce("AB+","Agent of chaos",666,"Bigger explosions, extra rocks, and juicy crits, let chaos reign!",c=>{c.critChance+=.25,c.explosionRadius+=qe/2,c.projectileNumber+=1,c.getProjectile=(T,e)=>new wo(c,c.pos.copy(),T,c.projectileSize,c.getDamage(),e,{color:c.projectileColor,pierce:c.projectilePierce,critChance:c.critChance,critMultiplier:c.critMultiplier,explosionRadius:c.explosionRadius,spikyRocks:c.spikyRocks,extraDamageCalc:c.extraDamageCalc})}),"BC+":new Ce("BC+","It's a Feature",2e3,"The Kobold incorporates heat generation in all aspects of the catapults desgin, increasing heat generation, but also damage and range at higher heat.",c=>{c.heatGenerationSpeed+=1,c.heatPerDamage-=5,c.getDamage=()=>c.damage+c.spoolHeat/c.heatPerDamage,c.updateRange=()=>{c.recalcRangeBuffs(),c.range+=c.spoolHeat/500*qe}}),"CA+":new Ce("CA+","Team-up",1e3,"Helps out all adjecent Kobolds, Let's work together to stomp those pesky heroes!",c=>{const T=Se.getNeighbors(c.r,c.q);for(const e of T){const b=vl();e.applyBuff(b),c.buffsThisApplied.push(b)}c.onSell=()=>{for(const e of c.buffsThisApplied);}}),"AB++":new Ce("AB++","Chaos Incarnate",2500,"More chaos! MOAR!.",c=>{c.critChance+=.1,c.critMultiplier+=1,c.explosionRadius+=qe/2,c.projectileNumber+=2}),"BC++":new Ce("BC++","Miniature Sun",7800,"The Kobold builds a giant heat sink, resembling a miniature sun, building power to an overwhelming degree, until it fails... And then you do it all over again.",c=>{c.maxSpoolHeat+=5500}),"CA++":new Ce("CA++","",0,"Nothing atm.",c=>{})}}),rn=(A,c,T,e=0,b=1,y=j)=>{const p=T/2,n=T/3,h=T/4,a=T*(3/10);y.push(),y.translate(A,c),y.rotate(e),y.stroke(Gt),y.strokeWeight(b),y.beginShape(),y.vertex(0,-p),y.quadraticVertex(n/2*1.1,-p/2*1.1,h,0),y.quadraticVertex(a,a,0,n),y.quadraticVertex(-a,a,-h,0),y.quadraticVertex(-n/2*1.1,-p/2*1.1,0,-p),y.endShape(),y.pop()},xl=(A,c,T,e=25,b=j.color(Rn))=>new Nn(A,T,e,b,[],p=>{j.push();const n=tn(b);n.setAlpha(p.duration*10),j.stroke(n),j.strokeWeight(p.size),j.point(p.pos),j.pop()},()=>{},c);class _l extends wo{constructor(c,T,e,b,y,p,n={}){var h;super(c,T,e,b,y,p,n),this.explosionRadius=(h=n.explosionRadius)!=null?h:qe*2}show(){j.push(),Ao(this.pos.x,this.pos.y,this.rockVertices),j.fill(this.color),rn(this.pos.x,this.pos.y-this.size/2,this.size),j.pop()}update(){return this.prevPos=this.pos.copy(),this.pos.add(this.vel),this.lifeSpan--,this.lifeSpan===0&&this.hit(this.lifeSpan),this.lifeSpan<=0||this.pierce<=0}}class Sl extends kn{constructor(c,T,e,b={}){var y,p,n,h,a;super(c,T,(y=b.gridR)!=null?y:0,(p=b.gridQ)!=null?p:0,e,{color:j.color(rr),...b}),this.flat=(n=b.flat)!=null?n:!1,this.exitDir=((h=b.exitDir)!=null?h:this.flat)?-j.PI/6:0,this.unitSize=(a=b.unitSize)!=null?a:20}spawnUnit(c={}){var e;const T=new fr(this.pos.x,this.pos.y,this.unitSize,{color:(e=c.color)!=null?e:tn(c.color),...c});return T.vel=ct.Vector.fromAngle(this.exitDir,0),T}spawnUnitViaWaveReader(c){return c.vel=ct.Vector.fromAngle(this.exitDir,0),c}show(){j.stroke(0),j.strokeWeight(2),j.fill(this.color),Xt(this.pos.x,this.pos.y,this.size,this.flat),j.ellipse(this.pos.x,this.pos.y,this.size*1.6)}update(){return!0}}const ur=Object.freeze({name:"Berserker",discription:"The Berserker gets stronger and faster the more damage she has sustained.",hp:300,hpScaling:40,damage:40,speed:qt*1.5,force:qt*.12,attackCooldown:50,mass:1,gold:100,baseLevel:13,rgb:ta});class jl extends fr{constructor(c,T,e,b={}){super(c,T,e,b)}update(){const c=j.min(this.maxHp/j.max(this.hp,1),4);this.desiredSpeed=ur.speed*c,this.maxForce=ur.force*(c*1.5),this.attackCooldown=ur.attackCooldown/c,super.update()}}const Tl=(A,c)=>new jl(A.x,A.y,Kt,{desiredSpeed:ur.speed,maxForce:ur.force,hp:ur.hp+(c-ur.baseLevel)*ur.hpScaling,damage:ur.damage,goldValue:ur.gold,color:j.color(ur.rgb)}),Er={name:"Bomber",discription:"Bombers run quickly, and deal high damage, but are a danger to their friends on death.",hp:50,hpScaling:5,damage:75,speed:qt*2,force:qt*.2,mass:1,gold:10,baseLevel:8,rgb:qn,explosionRadius:qe};class El extends fr{constructor(c,T,e,b={}){super(c,T,e,b),this.explosionRadius=Er.explosionRadius}die(){if(this.dead)return;super.die();const c=Wt.inRangeCircle(this.pos,this.explosionRadius),T=Xn.inRangeCircle(this.pos,this.explosionRadius),e=[...c,...T];for(const b of e){const y=this.maxHp/2;b.takeDamage(y)}ot.addVisual(Mo(this.pos,this.explosionRadius*2,4))}}const Cl=(A,c)=>new El(A.x,A.y,Kt,{desiredSpeed:Er.speed,maxForce:Er.force,hp:Er.hp+(c-Er.baseLevel)*Er.hpScaling,damage:Er.damage,goldValue:Er.gold,color:j.color(Er.rgb)}),Ir={name:"Farmer",discription:"A simple farmer, recruited to get rid of a low level threat.",hp:40,hpScaling:5,damage:10,speed:qt*1,force:qt*.1,mass:1,gold:50,baseLevel:1,rgb:sa};class Ml extends fr{constructor(c,T,e,b={}){super(c,T,e,b)}}const Cs=(A,c)=>new Ml(A.x,A.y,Kt,{desiredSpeed:Ir.speed,maxForce:Ir.force,hp:Ir.hp+(c-Ir.baseLevel)*Ir.hpScaling,damage:Ir.damage,goldValue:Ir.gold,color:j.color(Ir.rgb)}),Br={name:"Swordsman",discription:"A simple swordsman, slightly trained, unlike the farmers.",hp:100,hpScaling:10,damage:20,speed:qt*1.5,force:qt*.12,mass:1,gold:80,baseLevel:3,rgb:Hi};class Al extends fr{constructor(c,T,e,b={}){super(c,T,e,b)}}const Rl=(A,c)=>new Al(A.x,A.y,Kt,{desiredSpeed:Br.speed,maxForce:Br.force,hp:Br.hp+(c-Br.baseLevel)*Br.hpScaling,damage:Br.damage,goldValue:Br.gold,color:j.color(Br.rgb)}),jr={name:"Heavy Weight",discription:"A heavy unit, moves slowly, but with great bulk comes great health.",hp:500,hpScaling:80,damage:25,speed:qt*.8,force:qt*.05,mass:2,gold:150,baseLevel:6,rgb:Ji};class kl extends fr{constructor(c,T,e,b={}){super(c,T,e,b)}}const Pl=(A,c)=>new kl(A.x,A.y,Kt,{desiredSpeed:jr.speed,maxForce:jr.force,hp:jr.hp+(c-jr.baseLevel)*jr.hpScaling,damage:jr.damage,mass:jr.mass,goldValue:jr.gold,color:j.color(jr.rgb)}),er={name:"Paladin",discription:"A heavyly armored holy warrior, heals himself by the blessing of the divine.",hp:2500,hpScaling:200,damage:250,speed:qt*.6,force:qt*.25,mass:2.5,gold:1e3,baseLevel:10,healBy:10,healCooldown:10,rgb:ea};class Ol extends fr{constructor(c,T,e,b={}){super(c,T,e,b),this.currentHealCooldown=er.healCooldown,this.healCooldown=er.healCooldown,this.healBy=er.healBy,this.abilityCounters=["currentHealCooldown"]}update(){super.update(),this.currentHealCooldown--,this.currentHealCooldown<=0&&(this.currentHealCooldown=this.healCooldown,this.healSelf())}healSelf(){this.getHeal(this.healBy)}}const Ll=(A,c)=>new Ol(A.x,A.y,Kt,{desiredSpeed:er.speed,maxForce:er.force,hp:er.hp+(c-er.baseLevel)*er.hpScaling,damage:er.damage,mass:er.mass,goldValue:er.gold,color:j.color(er.rgb)}),Tr={name:"Rusher",discription:"Rushers sprint right through your defenses.",hp:700,hpScaling:50,damage:30,speed:qt*3.2,force:qt*.4,mass:.75,gold:50,baseLevel:16,rgb:Us};class Dl extends fr{constructor(c,T,e,b={}){super(c,T,e,b)}}const si=(A,c,T=!1)=>new Dl(A.x,A.y,Kt,{desiredSpeed:Tr.speed,maxForce:Tr.force,hp:Tr.hp+(c-Tr.baseLevel)*Tr.hpScaling,damage:Tr.damage,mass:Tr.mass,goldValue:T?0:Tr.gold,color:j.color(Tr.rgb)}),Qt={name:"Healer",discription:"The Healer heals everyone in around them.",hp:500,hpScaling:30,damage:10,speed:qt*1.3,force:qt*.1,mass:1,gold:50,baseLevel:17,healAmount:50,healScaling:5,healCooldown:100,healRange:qe*4,rgb:Ki};class Il extends fr{constructor(c,T,e,b={}){super(c,T,e,b),this.currentHealCooldown=Qt.healCooldown,this.healCooldown=Qt.healCooldown,this.healAmount=b.healAmount,this.healRange=Qt.healRange,this.abilityCounters=["currentHealCooldown"]}update(){super.update(),this.currentHealCooldown--,this.currentHealCooldown<=0&&(this.currentHealCooldown=this.healCooldown,this.heal())}heal(){const c=Wt.inRangeCircle(this.pos,this.healRange);for(const T of c)T.getHeal(this.healAmount)}}const Bl=(A,c)=>new Il(A.x,A.y,Kt,{desiredSpeed:Qt.speed,maxForce:Qt.force,hp:Qt.hp+(c-Qt.baseLevel)*Qt.hpScaling,damage:Qt.damage,goldValue:Qt.gold,color:j.color(Qt.rgb),healAmount:Qt.healAmount+(c-Qt.baseLevel)*Qt.healScaling}),lr={name:"Summoner",discription:"Slow moving unit that summons rushers as long as she lives.",hp:8e3,hpScaling:100,damage:100,speed:qt*.5,force:qt*.3,mass:2,gold:1e3,baseLevel:20,summonCooldown:100,rgb:ia};class Ul extends fr{constructor(c,T,e,b={}){super(c,T,e,b),this.currentSummonCooldown=lr.summonCooldown,this.summonCooldown=lr.summonCooldown,this.abilityCounters=["currentSummonCooldown"]}update(){super.update(),this.currentSummonCooldown--,this.currentSummonCooldown<=0&&(this.currentSummonCooldown=this.summonCooldown,this.summonRusher())}summonRusher(){Ot.units.push(si(this.pos.copy(),this.level,!0))}}const Nl=(A,c)=>new Ul(A.x,A.y,Kt,{desiredSpeed:lr.speed,maxForce:lr.force,hp:lr.hp+(c-lr.baseLevel)*lr.hpScaling,damage:lr.damage,mass:lr.mass,goldValue:lr.gold,color:j.color(lr.rgb),level:c});var at=(A=>(A[A.FARMER=0]="FARMER",A[A.SWORDSMAN=1]="SWORDSMAN",A[A.HEAVYWEIGHT=2]="HEAVYWEIGHT",A[A.BOMBER=3]="BOMBER",A[A.PALADIN=4]="PALADIN",A[A.BERSERKER=5]="BERSERKER",A[A.RUSHER=6]="RUSHER",A[A.HEALER=7]="HEALER",A[A.SUMMONER=8]="SUMMONER",A))(at||{});class Fl{constructor(){}static getUnit(c,T,e){switch(c){case at.FARMER:return Cs(T,e);case at.SWORDSMAN:return Rl(T,e);case at.HEAVYWEIGHT:return Pl(T,e);case at.BOMBER:return Cl(T,e);case at.PALADIN:return Ll(T,e);case at.BERSERKER:return Tl(T,e);case at.RUSHER:return si(T,e);case at.HEALER:return Bl(T,e);case at.SUMMONER:return Nl(T,e);default:console.log("Wrong input");break}return Cs(T,e)}}const ii={wave:[],message:"First come just some lowly Farmers, should be no issue."};for(let A=0;A<10;A++)ii.wave.push({unit:at.FARMER,cooldown:100});const ai={wave:[],message:"More of the same thing, just slightly closer together."};for(let A=0;A<12;A++)ai.wave.push({unit:at.FARMER,cooldown:60});const li={wave:[],message:"Swordsmen are slightly stronger than farmers, still though, no self respecting overlord should be having issues at this point."};for(let A=0;A<10;A++)li.wave.push({unit:at.SWORDSMAN,cooldown:90});const xo={wave:[],message:"This time they're both coming at you."};for(let A=0;A<6;A++){for(let c=0;c<2;c++)xo.wave.push({unit:at.FARMER,cooldown:25});xo.wave.push({unit:at.SWORDSMAN,cooldown:100})}const _o={wave:[],message:"Those cowardly Farmers think they're safer in groups. Let's show them how wrong they are."};for(let A=0;A<6;A++){for(let c=0;c<5;c++)_o.wave.push({unit:at.FARMER,cooldown:5});_o.wave.push({unit:at.FARMER,cooldown:140})}const Fr={wave:[],message:"The first Heavyweights are about to show up, they can take a hit, but are vulnerable to slow and push effects."};for(let A=0;A<2;A++)Fr.wave.push({unit:at.HEAVYWEIGHT,cooldown:120}),Fr.wave.push({unit:at.HEAVYWEIGHT,cooldown:140}),Fr.wave.push({unit:at.SWORDSMAN,cooldown:20}),Fr.wave.push({unit:at.SWORDSMAN,cooldown:20}),Fr.wave.push({unit:at.SWORDSMAN,cooldown:120});Fr.wave.push({unit:at.HEAVYWEIGHT,cooldown:120});Fr.wave.push({unit:at.HEAVYWEIGHT,cooldown:120});const ui={wave:[],message:"So many Swordsmen almost make an army. Good thing overlords make a business out of squasing those."};for(let A=0;A<25;A++)ui.wave.push({unit:at.SWORDSMAN,cooldown:25});const Fn={wave:[],message:"Those Bombers carry explosives to blow up our base, but if you blow them up they'll damage their own allies."};for(let A=0;A<20;A++)Fn.wave.push({unit:at.FARMER,cooldown:6}),Fn.wave.push({unit:at.BOMBER,cooldown:12}),Fn.wave.push({unit:at.BOMBER,cooldown:6});const Gn={wave:[],message:"Next is a nice mix of lots of weaklings and a few strong ones."};for(let A=0;A<7;A++){Gn.wave.push({unit:at.HEAVYWEIGHT,cooldown:7});for(let c=0;c<9;c++)Gn.wave.push({unit:at.FARMER,cooldown:14});Gn.wave.push({unit:at.FARMER,cooldown:7})}const ci={wave:[],message:"A bonefide Paladin has heard of the 'evil' you've been up to, and has decided that should end. Look out for his divine blessing which slowly regenerates his health."};ci.wave.push({unit:at.PALADIN,cooldown:10});const di={wave:[],message:"That's a lot of Swordsmen. They never learn do they."};for(let A=0;A<75;A++)di.wave.push({unit:at.SWORDSMAN,cooldown:6});const Vn={wave:[],message:"Groups of heavies are a pain, but I bet you could use those bombers to your advantage."};for(let A=0;A<5;A++){for(let c=0;c<4;c++)Vn.wave.push({unit:at.HEAVYWEIGHT,cooldown:4});Vn.wave.push({unit:at.HEAVYWEIGHT,cooldown:140});for(let c=0;c<10;c++)Vn.wave.push({unit:at.BOMBER,cooldown:20})}const So={wave:[],message:"Berserkers turn pain into pleasure, uhh, I mean, into a rage they use to rush right through your defenses."};for(let A=0;A<15;A++)So.wave.push({unit:at.BERSERKER,cooldown:10}),So.wave.push({unit:at.BERSERKER,cooldown:70});const jo={wave:[],message:"Next wave benefits from those sweet big hits me thinks."};for(let A=0;A<25;A++)jo.wave.push({unit:at.BERSERKER,cooldown:12}),jo.wave.push({unit:at.HEAVYWEIGHT,cooldown:12});const To={wave:[],message:"Slow and high health, this wave takes a while."};for(let A=0;A<3;A++){To.wave.push({unit:at.PALADIN,cooldown:150});for(let c=0;c<8;c++)To.wave.push({unit:at.HEAVYWEIGHT,cooldown:80})}const hi={wave:[],message:"The first Rushers are about to show, they are a bit hard to deal with, but a few good hits should do the trick."};for(let A=0;A<20;A++)hi.wave.push({unit:at.RUSHER,cooldown:50});const Wn={wave:[],message:"Those Swordsmen mobs are still not giving up. This time they brought some Healers along."};for(let A=0;A<4;A++){Wn.wave.push({unit:at.HEALER,cooldown:25});for(let c=0;c<9;c++)Wn.wave.push({unit:at.SWORDSMAN,cooldown:15});Wn.wave.push({unit:at.SWORDSMAN,cooldown:120})}const Hn={wave:[],message:"Don't let those Healers do their thing!"};for(let A=0;A<8;A++)Hn.wave.push({unit:at.HEALER,cooldown:10}),Hn.wave.push({unit:at.HEAVYWEIGHT,cooldown:10}),Hn.wave.push({unit:at.HEALER,cooldown:60});const Cn={wave:[],message:"Rushers and Berserkers, it's a hectic round."};for(let A=0;A<7;A++)Cn.wave.push({unit:at.BERSERKER,cooldown:15}),Cn.wave.push({unit:at.RUSHER,cooldown:30}),Cn.wave.push({unit:at.RUSHER,cooldown:30}),Cn.wave.push({unit:at.RUSHER,cooldown:15});const fi={wave:[],message:"Best kill this Summoner quickly if you don't want to be overrun."};fi.wave.push({unit:at.SUMMONER,cooldown:10});const Ms={1:ii,2:ai,3:li,4:xo,5:_o,6:Fr,7:ui,8:Fn,9:Gn,10:ci,11:di,12:Vn,13:So,14:jo,15:To,16:hi,17:Wn,18:Hn,19:Cn,20:fi},Gl=A=>A in Ms?Ms[A]:-1,pi="waveDone",mi="waveUpdated";class Vl{constructor(){this.currentCooldown=10,this.spawns=[],this.currentSpawn=0,this.currentWaveNumber=0,this.nextWaveSpawnIndex=0,this.baseWaveReward=250,this.flatWaveReward=1e3,this.currentWave=[],this.currentMessage="",this.startNextWave()}update(){const c=this.currentWave[this.nextWaveSpawnIndex];if(c===void 0)return pi;if(this.currentCooldown--,this.currentCooldown>0)return mi;const T=Fl.getUnit(c.unit,this.spawns[this.currentSpawn].pos,this.currentWaveNumber);return this.nextWaveSpawnIndex++,this.currentCooldown=c.cooldown,this.currentSpawn=(this.currentSpawn+1)%this.spawns.length,T}setActiveSpawners(c){this.spawns=c,this.currentSpawn=0}startNextWave(){this.currentWaveNumber++;const c=Gl(this.currentWaveNumber);c===-1?(this.currentWave=this.generateRandomWave(),this.currentMessage="Random waves from now on. How far can you get?"):(this.currentWave=c.wave,this.currentMessage=c.message)}generateRandomWave(){const c=Object.keys(at).length/2,T=120,e=[];let b=this.currentWaveNumber**2*100;for(;b>0;){const y={unit:Math.floor(Math.random()*c),cooldown:j.max(Math.ceil(Math.random()*T-e.length),2)},p=y.unit**2*10+(T-y.cooldown);e.push(y),b-=p}return e}endWave(){return this.nextWaveSpawnIndex=0,this.currentCooldown=10,this.flatWaveReward}getMessage(){return this.currentMessage}}class Wl{constructor(c={}){var T,e,b,y;this.units=[],this.spawners=[],this.spawnSize=(T=c.spawnSize)!=null?T:32,this.spawnFlat=(e=c.spawnFlat)!=null?e:!1,this.unitSize=(b=c.unitSize)!=null?b:20,this.color=(y=c.color)!=null?y:j.color(yn),this.nextId=0,this.waveReader=new Vl}addSpawn(c,T,e=this.spawnSize,b={}){this.spawners.push(new Sl(c,T,e,{unitSize:this.unitSize,flat:this.spawnFlat,color:this.color,...b}))}addUnit(c={}){var e;const T=(e=c.fromSpawn)!=null?e:j.floor(j.random(this.spawners.length));this.spawners[T]!==void 0&&(this.units.push(this.spawners[T].spawnUnit({color:c.color,id:this.nextId,...c})),this.nextId++)}addUnitViaWaveReader(c,T={}){var b;const e=(b=T.fromSpawn)!=null?b:j.floor(j.random(this.spawners.length));this.spawners[e]!==void 0&&(this.units.push(this.spawners[e].spawnUnitViaWaveReader(c)),this.nextId++)}update(){this.updateWaveReader(),this.updateSpawns(),this.updateUnits()}updateSpawns(){for(let c=this.spawners.length-1;c>=0;c--)this.spawners[c].update()}updateUnits(){for(let c=this.units.length-1;c>=0;c--)this.units[c].update()}show(){this.showSpawns(),this.showUnits()}showSpawns(){for(let c=this.spawners.length-1;c>=0;c--)this.spawners[c].show()}showUnits(){for(let c=this.units.length-1;c>=0;c--)this.units[c].show()}updateAndShow(){const c=this.updateWaveReader();return this.updateAndShowSpawns(),this.updateAndShowUnits(),c}updateAndShowSpawns(){for(let c=this.spawners.length-1;c>=0;c--)this.spawners[c].update(),this.spawners[c].show()}updateAndShowUnits(){for(let c=this.units.length-1;c>=0;c--)this.units[c].update(),this.units[c].show();Wt.emptyQuadTree();for(let c=this.units.length-1;c>=0;c--){const T=this.units[c];ot.unitReachedBase(T,Se)?this.units.splice(c,1):T.dead?(ot.unitDied(T),this.units.splice(c,1)):Wt.insert(new Xs(T.pos,T))}}updateWaveReader(){const c=this.waveReader.update();if(c===pi){if(this.units.length===0){const T=this.waveReader.endWave();return this.waveReader.startNextWave(),ot.gold+=T,!0}}else c!==mi&&this.addUnitViaWaveReader(c);return!1}}const Ot=new Wl({color:j.color(rr),spawnSize:qe,unitSize:Kt});class Hl extends Ar{constructor(c,T,e,b,y,p,n={}){var h;super(c,T,e,b,y,p,n),this.width=(h=n.width)!=null?h:3,this.corners=[],this.setCorners()}setCorners(){const c=this.vel.heading(),T=this.vel.copy();T.setMag(-this.size/2);const e=ct.Vector.fromAngle(c+j.PI/2);e.setMag(this.width*this.size/2),this.corners.push(ct.Vector.add(e,T)),e.mult(-1),this.corners.push(ct.Vector.add(e,T)),T.mult(-1),this.corners.push(ct.Vector.add(e,T)),e.mult(-1),this.corners.push(ct.Vector.add(e,T))}show(){const c=this.vel.heading(),T=ct.Vector.fromAngle(c+j.PI/2),e=c-j.PI/2;j.push(),j.strokeWeight(1),j.fill(this.color);for(let b=this.width-1;b>=0;b--)for(let y=0;y<2;y++){T.setMag(this.size/2*-b);const p=this.pos.x+T.x+j.random(-this.size/16,this.size/16),n=this.pos.y+T.y+j.random(-this.size/16,this.size/16);rn(p,n,this.size,e)}j.pop()}update(){this.prevPos=this.pos.copy(),this.pos.add(this.vel);const c=[];for(const e of this.corners)c.push(j.createVector(e.x+this.pos.x,e.y+this.pos.y));const T=Wt.inRangeRotatedRect(c);for(const e of T)this.hit(e);return this.extraActionOnMove({pos:this.pos,corners:c}),this.lifeSpan--,this.lifeSpan<=0||this.pierce<=0}}const zl=(A,c,T,e="burn")=>new Rr(e,c,"NORMAL",y=>{y.takeDamage(A);const p=ct.Vector.random2D().setMag(j.min(y.maxForce,y.desiredSpeed)*T);y.vel.add(p)},(y,p)=>{j.fill(Rn),rn(p.x,p.y,y.size/2)},y=>{},y=>{});class ql extends Ar{constructor(c,T,e,b,y,p,n={}){var h;super(c,T,e,b,y,p,n),this.color=(h=n.color)!=null?h:j.color(Rn)}show(){j.push(),j.noStroke(),j.fill(this.color);let c=j.PI/2;for(let T=0;T<6;T++){c+=j.PI/3;const e=this.pos.x+j.cos(c)*this.size*2/3,b=this.pos.y+j.sin(c)*this.size*2/3;rn(e,b,this.size/2,0,0)}rn(this.pos.x,this.pos.y,this.size/2,0,0),j.pop()}update(){const c=Wt.inRangeCircle(this.pos,this.size);for(const T of c){if(this.lifeSpan<1)break;T.takeDamage(this.damage);for(const e of this.statuses)T.applyStatus(e);this.lifeSpan--}if(this.lifeSpan-=10,this.lifeSpan<1){const T=Se.getHexVectorFromXY(this.pos.x,this.pos.y),e=Se.grid[T.x][T.y];delete e.appliedEffects.burningLand}return this.lifeSpan<1}}const Rt=Object.freeze({name:"Pyromaniac",description:"The Pyromaniac lets loose various fire attacks to burn your enemies to a crisp.",hotkey:"f",keycode:70,range:qe*2.5,wallRange:qe*5,cometRange:qe*6,flameThrowerAngle:j.PI/6,cooldown:1,cometCooldown:300,wallCooldown:120,cost:1600,damage:1,wallDamage:30,cometDamage:400,cometExplosionRadius:qe*2,baseWallSize:qe*.6,wallWidthMultiplier:3,wallPierce:8,pushForce:2,projectileSpeed:2,towerType:"NORMAL",burnDamage:1,burnDuration:20,burnPanicSpeedIncrease:2,burningLandLifespan:1500,rgb:rr,flameRgb:Rn,showSymbol:(A,c,T={angle:0})=>{j.push(),j.fill(Rn),rn(A.x,A.y,c),j.pop()}});class Xl extends wr{constructor(c,T,e,b,y,p,n,h,a,f,l){super(c,T,e,b,y,Rt.name,p,n,h,a,f,l),this.extraDamageCalc=o=>0,this.extraActionOnHit=o=>{for(let t of this.extraActionsOnHit)t(o)},this.extraActionOnMove=o=>{for(let t of this.extraActionsOnMove)t(o)},this.cometCooldown=Rt.cometCooldown,this.currentCometCooldown=Rt.cometCooldown,this.wallCooldown=Rt.wallCooldown,this.currentWallCooldown=Rt.wallCooldown,this.flameThrowerAngle=Rt.flameThrowerAngle,this.fireColor=Rt.rgb,this.flameColor=Rt.flameRgb,this.wallRange=Rt.wallRange,this.cometRange=Rt.cometRange,this.wallDamage=Rt.wallDamage,this.cometDamage=Rt.cometDamage,this.cometExplosionRadius=Rt.cometExplosionRadius,this.baseWallSize=Rt.baseWallSize,this.wallWidthMultiplier=Rt.wallWidthMultiplier,this.wallPierce=Rt.wallPierce,this.burnDamage=Rt.burnDamage,this.burnDuration=Rt.burnDuration,this.burnPanicSpeedIncrease=Rt.burnPanicSpeedIncrease,this.pushForce=Rt.pushForce,this.ultInProgress=0}showSymbol(c=this.pos){j.push(),j.fill(this.flameColor),rn(c.x,c.y,this.size),j.pop()}showRange(){j.push();let c=85;c=this.showCometRange(c),c=this.showWallRange(c);const T=tn(this.color);T.setAlpha(c),j.fill(T),j.circle(this.pos.x,this.pos.y,this.range*2),j.pop()}showWallRange(c){return c}showCometRange(c){return c}update(){return this.currentCooldown--,this.currentWallCooldown--,this.currentCometCooldown--,this.currentCooldown<=0&&this.shoot()&&(this.currentCooldown=this.cooldown),this.currentWallCooldown<=0&&this.baseWall()&&(this.currentWallCooldown=this.wallCooldown),this.currentCometCooldown<=0&&this.baseComet()&&(this.currentCometCooldown=this.cometCooldown),this.progressUlt(),this.ultCurrentCooldown--,!0}baseShoot(){const c=Wt.inRangeCircle(this.pos,this.range);if(c.length<1)return;let T=0,e=this.range**2;for(let n=0;n<c.length;n++){const h=Nt(c[n].pos,this.pos);h<e&&(e=h,T=n)}const b=c[T],y=(ct.Vector.sub(b.pos,this.pos).heading()+j.TWO_PI)%j.TWO_PI;this.addFlameThrowerParticlesToMaou(y,8);const p=this.getStatuses();for(let n=0;n<c.length;n++){const h=(ct.Vector.sub(c[n].pos,this.pos).heading()+j.TWO_PI)%j.TWO_PI,a=y-h;if(a>-this.flameThrowerAngle&&a<this.flameThrowerAngle){c[n].takeDamage(this.getFlameThrowerDamage());for(let f=0;f<p.length;f++)c[n].applyStatus(p[f]);this.flameThrowerPush(c[n])}}this.burningLand(b,y)}shoot(){return this.baseShoot(),!0}burningLand(c,T){}applyBurningLand(c,T){const e=Se.getHexVectorFromXY(c.pos.x,c.pos.y),b=Se.grid[e.x][e.y],y=[...Se.getNeighborsArea(b.r,b.q,2),b];for(let p=0;p<y.length;p++){const n=(ct.Vector.sub(y[p].pos,this.pos).heading()+j.TWO_PI)%j.TWO_PI,h=T-n;Nt(this.pos,y[p].pos)<this.range**2&&h>-this.flameThrowerAngle&&h<this.flameThrowerAngle&&this.applyBurningLandToTile(y[p])}}applyBurningLandToTile(c){if(!c.canUnit||c.isTower||c.appliedEffects.burningLand)return;const T=this.getBurningTileProjectile(c.pos,Rt.burningLandLifespan);ot.addProjectile(T),c.appliedEffects.burningLand=T}flameThrowerPush(c){}applyFlameThrowerPush(c){const T=ct.Vector.sub(c.pos,this.pos).setMag(.02*this.pushForce);c.applyForce(T)}baseComet(){return!0}shootComet(){const c=Wt.inRangeCircle(this.pos,this.cometRange);if(c.length<1)return!1;let T=0,e=0;for(let y=0;y<c.length;y++){const p=c[y].hp;e<p&&(e=p,T=y)}const b=c[T];return this.shootCometAtTarget(b),!0}shootCometAtTarget(c){const T=c.pos.copy(),e=30;T.add(ct.Vector.mult(c.vel,e));const b=j.createVector(j.windowHeight/4,-j.windowWidth).add(T),y=ct.Vector.sub(T,b);y.mult(1/e);const p=this.getCometProjectile(y,b,e);ot.addProjectile(p)}progressUlt(){}baseWall(){return!0}shootWall(){const c=Wt.inRangeCircle(this.pos,this.wallRange);if(c.length<1)return!1;let T=0,e=this.range**2;for(let a=0;a<c.length;a++){const f=Nt(c[a].pos,this.pos);f<e&&(e=f,T=a)}const b=c[T],y=this.wallRange*1.5/this.projectileSpeed,p=b.pos.copy();for(let a=1;a<=y&&(p.add(b.vel),!(Nt(p,this.pos)<(this.projectileSpeed*a)**2));a++);const n=ct.Vector.sub(p,this.pos);n.setMag(this.projectileSpeed);const h=this.getWallProjectile(n,this.pos,y);return ot.addProjectile(h),!0}addFlameThrowerParticlesToMaou(c,T){for(let e=0;e<T;e++){const b=ct.Vector.fromAngle(c+j.random(-this.flameThrowerAngle,this.flameThrowerAngle),this.range/j.random(5,15));ot.addVisual(xl(this.pos,b,5,j.random(8,15),ca(this.fireColor,this.flameColor)))}}getCometProjectile(c,T,e){return new _l(this,T,c,this.projectileSize*2,this.getCometDamage(),e,{color:this.projectileColor,pierce:this.projectilePierce,critChance:this.critChance,critMultiplier:this.critMultiplier,extraDamageCalc:this.extraDamageCalc,extraActionOnHit:this.extraActionOnHit,explosionRadius:this.cometExplosionRadius,explosionColor:this.flameColor,explosionVisualDuration:4,statuses:this.getStatuses()})}getWallProjectile(c,T,e){return new Hl(this,T,c,this.baseWallSize,this.getWallDamage(),e,{color:this.projectileColor,pierce:this.wallPierce,critChance:this.critChance,critMultiplier:this.critMultiplier,extraDamageCalc:this.extraDamageCalc,extraActionOnMove:this.extraActionOnMove,extraActionOnHit:this.extraActionOnHit,width:this.wallWidthMultiplier,statuses:this.getStatuses()})}getBurningTileProjectile(c,T){const e=[...this.flameColor,80];return new ql(this,c,j.createVector(0,0),qe,this.getDamage(),T,{color:j.color(e),statuses:this.getStatuses()})}getFlameThrowerDamage(){return this.damage}getCometDamage(){return this.cometDamage}getWallDamage(){return this.wallDamage}getStatuses(){return[]}getBurn(){return zl(this.burnDamage,this.burnDuration,this.burnPanicSpeedIncrease)}}const Yl=A=>new Xl(A.pos.x,A.pos.y,A.r,A.q,A.size,Rt.range,Rt.damage,Rt.projectileSpeed,Rt.cooldown,Rt.cost,{color:j.color(Rt.rgb),projectileColor:Rt.flameRgb,wall:!0,isTower:!0,type:A.type,data:A.data,upgrades:{A:new Ce("A","Hotter Fire",800,"They die quicker, so it's a mercy really.",c=>{c.damage+=1,c.wallDamage+=30},!0),B:new Ce("B","Wide Flame",600,"Increase the area of effect radius of the Pyromaniac.",c=>{c.flameThrowerAngle+=j.PI/12},!0),C:new Ce("C","Burning Vision",500,"Slightly increases range. I have a vision, of a world where no hero goes unburned.",c=>{c.range+=qe*.25,c.cometRange+=qe},!0),"A+":new Ce("A+","Blue Flame",3e3,"Blue flames are both hotter and cooler.",c=>{c.damage+=2,c.cometDamage+=400,c.wallDamage+=50,c.projectileColor=j.color(xs),c.fireColor=Ps,c.flameColor=xs}),"B+":new Ce("B+","Inferno Grande",2200,"Increases the size of the Pyromaniacs flames even further. There is no escaping the infero!",c=>{c.flameThrowerAngle+=j.PI/12,c.cometExplosionRadius+=qe,c.wallWidthMultiplier+=2}),"C+":new Ce("C+","See The World",1750,"increase Pyromaniac range even more.",c=>{c.range+=qe*.25,c.wallRange+=qe*1.5,c.cometRange+=qe*1.5}),AB:new Ce("AB","Comet",900,"Shoots a mighty comet from the sky, dealing devastating damage in a large area.",c=>{c.baseComet=()=>c.shootComet(),c.showCometRange=T=>{const e=tn(c.color);return e.setAlpha(T),j.fill(e),j.circle(c.pos.x,c.pos.y,c.cometRange*2),T-40}}),BC:new Ce("BC","Flame Wall",1300,"Shoots out a wall of flames that moves slowly towards its target.",c=>{c.baseWall=()=>c.shootWall(),c.showWallRange=T=>{const e=tn(c.color);return e.setAlpha(T),j.fill(e),j.circle(c.pos.x,c.pos.y,c.wallRange*2),T-40}}),CA:new Ce("CA","Feel The Burn",2100,"Inflicts every enemy hit with a burning status effect.",c=>{c.burnDuration+=30,c.burnDamage+=1,c.getStatuses=()=>[c.getBurn()]}),"AB+":new Ce("AB+","Inner Fire",2300,"The Pyromaniac builds their inner fire, increasing damage dealt based on attack cooldown.",c=>{c.damage+=c.cooldown,c.wallDamage+=c.wallCooldown,c.cometDamage+=c.cometCooldown}),"BC+":new Ce("BC+","Expulsion",1e3,"Fire hits enemies with such force they are thrown backwards.",c=>{c.flameThrowerPush=T=>{c.applyFlameThrowerPush(T)},c.extraActionsOnHit.push(T=>{if("target"in T){const b=T.vel.copy().setMag(c.pushForce);T.target.applyForce(b);return}const e=Wt.inRangeCircle(T.pos,T.radius);for(const b of e){const y=ct.Vector.sub(b.pos,T.pos).setMag(c.pushForce);b.applyForce(y)}})}),"CA+":new Ce("CA+","Hell Fire",2200,"The flames of hell burn brighter, longer, and cause more panic than beofer.",c=>{c.burnDuration+=50,c.burnDamage+=1,c.burnPanicSpeedIncrease+=1,c.getStatuses=()=>[c.getBurn()]}),"AB++":new Ce("AB++","Apocalypse (Ability)",5e3,"Pyromaniac rains down countless comets, cleansing the world in the fires of apocalypse.",c=>{c.ultCooldown=qs,c.ultCurrentCooldown=c.ultCooldown,c.ultimate=()=>{c.progressUlt=()=>{if(c.ultInProgress<=0&&(c.progressUlt=()=>{}),Ot.units.length<1)return;const T=j.random(Ot.units);c.shootCometAtTarget(T),c.ultInProgress--},c.ultInProgress=50},c.shouldShowUltCooldown=()=>{c.showUltCooldown()}}),"BC++":new Ce("BC++","Isolationism",3500,"Don't allow anything near, flames hit harder and with more force. Also increases wall pierce and comet explosion radius a bit.",c=>{c.damage+=1,c.wallDamage+=30,c.cometDamage+=200,c.cometExplosionRaidus+=qe/2,c.pushForce+=2,c.wallPierce+=7}),"CA++":new Ce("CA++","Burning Earth",9500,"All Pyromaniacs attacks leave burning earth behind, dealing damage and inflicting burn.",c=>{c.burningLand=(T,e)=>{c.applyBurningLand(T,e)},c.extraActionsOnHit.push(T=>{if(!("radius"in T))return;const e=Se.getHexVectorFromXY(T.pos.x,T.pos.y);if(!Se.rqVectorIsOnGrid(e))return;const b=Se.grid[e.x][e.y],y=[...Se.getNeighborsArea(b.r,b.q,2),b];for(let p=0;p<y.length;p++)Nt(T.pos,y[p].pos)<T.radius**2&&c.applyBurningLandToTile(y[p])}),c.extraActionsOnMove.push(T=>{const e=Se.getHexVectorFromXY(T.pos.x,T.pos.y);if(!Se.rqVectorIsOnGrid(e))return;const b=Se.grid[e.x][e.y],y=[...Se.getNeighborsArea(b.r,b.q,2),b];for(const p of y)Vr(T.corners[0],T.corners[1],p.pos)>0&&Vr(T.corners[1],T.corners[2],p.pos)>0&&Vr(T.corners[2],T.corners[3],p.pos)>0&&Vr(T.corners[3],T.corners[0],p.pos)>0&&c.applyBurningLandToTile(p)})})}}),tr=Object.freeze({name:"Dragon Hoard",description:"A Dragons hoard seems to imbued with a special magic, growing over time without outside interference, truly misterious.",hotkey:"d",keycode:68,range:0,cooldown:0,cost:2500,damage:0,hoardCapacity:1e3,hoardFillPerRound:200,hoardInterest:0,projectileSpeed:0,towerType:"NORMAL",rgb:go,showSymbol:(A,c)=>{j.push(),j.fill(gn),j.strokeWeight(2);const T=c*.1;vn(A.x-T,A.y+T,c*.5),vn(A.x+T,A.y-T,c*.5),j.pop()}});class Ql extends wr{constructor(c,T,e,b,y,p,n,h,a,f,l){super(c,T,e,b,y,tr.name,p,n,h,a,f,l),this.goldInHoard=0,this.hoardCapacity=tr.hoardCapacity,this.hoardFillPerRound=tr.hoardFillPerRound,this.hoardInterest=tr.hoardInterest,this.hoardFilledThisRound=0,this.shouldFillHoardThisRound=tr.hoardFillPerRound,this.timeOverFullFill=1e3}showSymbol(c=this.pos){j.push(),j.fill(gn),j.strokeWeight(2);const T=this.size*.1;vn(c.x-T,c.y+T,this.size*.5),vn(c.x+T,c.y-T,this.size*.5),j.pop()}update(){if(super.update(),this.shouldFillHoardThisRound>this.hoardFilledThisRound){const c=this.hoardFillPerRound/this.timeOverFullFill;this.goldInHoard=j.min(this.goldInHoard+c,this.hoardCapacity),this.hoardFilledThisRound+=c}return!0}}const Zl=A=>new Ql(A.pos.x,A.pos.y,A.r,A.q,A.size,tr.range,tr.damage,tr.projectileSpeed,tr.cooldown,tr.cost,{color:j.color(tr.rgb),wall:!0,isTower:!0,type:A.type,data:A.data,upgrades:{A:new Ce("A","Nothing",0,"Still just a barrier.",c=>{},!0),B:new Ce("B","Nothing",0,"Still just a barrier.",c=>{},!0),C:new Ce("C","Bigger Basement",250,"Just dump all that extra gold in the basement. More capacity.",c=>{c.hoardCapacity+=1e3},!0),"A+":new Ce("A+","Nothing",0,"Still just a barrier.",c=>{}),"B+":new Ce("B+","Nothing",0,"Still just a barrier.",c=>{}),"C+":new Ce("C+","Nothing",0,"Still just a barrier.",c=>{}),AB:new Ce("AB","Nothing",0,"Still just a barrier.",c=>{}),BC:new Ce("BC","Nothing",0,"Still just a barrier.",c=>{}),CA:new Ce("CA","Nothing",0,"Still just a barrier.",c=>{}),"AB+":new Ce("AB+","Nothing",0,"Still just a barrier.",c=>{}),"BC+":new Ce("BC+","Nothing",0,"Still just a barrier.",c=>{}),"CA+":new Ce("CA+","Nothing",0,"Still just a barrier.",c=>{}),"AB++":new Ce("AB++","Nothing",0,"Still just a barrier.",c=>{}),"BC++":new Ce("BC++","Nothing",0,"Still just a barrier.",c=>{}),"CA++":new Ce("CA++","Nothing",0,"Still just a barrier.",c=>{})}}),Jn=(A,c,T,e=0,b=j)=>{const y=T/2,p=T/3,n=T/6;b.push(),b.translate(A,c),b.rotate(e),b.stroke(Gt),b.strokeWeight(2),b.beginShape(),b.vertex(0,-y),b.vertex(y,-n),b.vertex(y,n),b.vertex(0,-p),b.vertex(0,y),b.endShape(b.CLOSE),b.ellipse(-p*.8,y*.8,y,p),b.pop()};class ko extends Ar{constructor(c,T,e,b,y,p,n={}){var h;super(c,T,e,b,y,p,n),this.splitOnHit=(h=n.splitOnHit)!=null?h:!1}show(){j.push(),j.fill(this.color),Jn(this.pos.x,this.pos.y,this.size),j.pop()}showDebug(){j.stroke(this.color),j.strokeWeight(5),j.point(this.pos.x,this.pos.y)}update(){this.prevPos=this.pos.copy(),this.pos.add(this.vel);const c=this.alreadyHitEnemyIds.length,T=Wt.inRangePath(this.prevPos,this.pos,this.size);for(const e of T)this.hit(e);if(this.lifeSpan--,this.lifeSpan<=0||this.pierce<=0)return!0;if(this.splitOnHit&&this.alreadyHitEnemyIds.length>c)for(let e=0;e<this.alreadyHitEnemyIds.length-c;e++)for(let b=0;b<3;b++){const y=this.copy();y.vel=ct.Vector.random2D().setMag(y.vel.mag()),ot.addProjectile(y)}return!1}copy(){const c=[];for(const e of this.statuses)c.push(e.copy());const T=new ko(this.origin,this.pos.copy(),this.vel.copy(),this.size,this.damage,this.lifeSpan-1,{color:this.color,pierce:this.pierce-1,critChance:this.critChance,critMultiplier:this.critMultiplier,statuses:c,extraDamageCalc:this.extraDamageCalc,extraActionOnHit:this.extraActionOnHit,extraActionOnMove:this.extraActionOnMove,splitOnHit:this.splitOnHit});return T.alreadyHitEnemyIds=this.alreadyHitEnemyIds,T}}const yi=(A,c,T=1,e="trance",b=250)=>new Rr(e,A,"ON_TAKE_DAMAGE",(y,p,n={damage:0})=>{const h=n.damage/y.maxHp;j.random()<T*h&&p&&(p.duration=0)},(y,p)=>{j.fill(Os),Jn(p.x,p.y,y.size/2)},y=>{y.currentFlowField=c},y=>{y.currentFlowField=y.originalFlowField,y.applyStatus(ti(b,e,"ON_TAKE_DAMAGE"))}),$l=(A,c,T,e=rr,b=0,y=j)=>{const p=T/2,n=T/3;y.push(),y.translate(A,c),y.rotate(b),y.stroke(Gt),y.strokeWeight(2),y.line(0,-p,0,p),y.ellipse(-n*.8,p*.8,p,n),y.strokeWeight(1),y.stroke(e),y.line(-p,-p,p,p),y.line(p,-p,-p,p),y.pop()},Kl=(A,c="silence")=>new Rr(c,A,"NORMAL",(T,e,b={damage:0})=>{for(const y of T.abilityCounters)T[y]++},(T,e)=>{j.fill(Gt),$l(e.x,e.y,T.size/2)},T=>{},T=>{}),Zt=Object.freeze({name:"Siren",description:"The Siren entrances heroes with her song, leading them to wander mindlessely to her.",hotkey:"z",keycode:90,range:qe*7,cooldown:110,cost:900,damage:10,projectileSpeed:3,tranceDuration:150,breakoutChance:5,extraProjectileAngle:j.PI/8,towerType:"WATER",rgb:Co,noteColor:Os,showSymbol:(A,c,T={angle:0})=>{j.push(),j.fill(Zt.noteColor),Jn(A.x,A.y,c),j.pop()}});class Jl extends wr{constructor(c,T,e,b,y,p,n,h,a,f,l){super(c,T,e,b,y,Zt.name,p,n,h,a,f,l),this.noteColor=Zt.noteColor,this.extraProjectileLifespan=1,this.extraProjectileAngle=Zt.extraProjectileAngle,this.tranceDuration=Zt.tranceDuration,this.breakoutChance=Zt.breakoutChance,this.pathName=`Siren${j.random()}`,this.pathNameNext=`${this.pathName}Next`,ot.pathsToGenerate.push({origin:[this],name:this.pathName,waterCost:1,stopAfter:10}),this.targetingType=Cr.FIRST,this.splitOnHit=!1}showSymbol(c=this.pos){j.push(),j.fill(this.noteColor),Jn(c.x,c.y,this.size),j.pop()}shoot(){const c=this.baseShoot();if(c===void 0)return!1;const T=j.floor(this.projectileNumber/2)*-1;this.lastShotAngle=c.vel.heading();for(let e=T;e<T+this.projectileNumber;e++){const b=this.lastShotAngle+e*this.extraProjectileAngle,y=ct.Vector.fromAngle(b);y.setMag(c.vel.mag());const p=this.getProjectile(y,c.lifeSpan);ot.addProjectile(p)}return!0}baseShoot(){const c=Wt.inRangeCircle(this.pos,this.range);if(c.length<1)return;const T=Ys[this.targetingType].function(this.pos,c),e=this.range/this.projectileSpeed*this.extraProjectileLifespan,b=T.pos.copy();for(let n=1;n<=e&&(b.add(T.vel),!(Nt(b,this.pos)<(this.projectileSpeed*n)**2));n++);const y=ct.Vector.sub(b,this.pos);return y.setMag(this.projectileSpeed),this.getProjectile(y,e)}getProjectile(c,T){return new ko(this,this.pos.copy(),c,this.projectileSize,this.getDamage(),T,{color:j.color(this.noteColor),pierce:this.projectilePierce,critChance:this.critChance,critMultiplier:this.critMultiplier,statuses:this.getStatuses(),splitOnHit:this.splitOnHit})}getStatuses(){return[this.getTrance()]}getTrance(){return yi(this.tranceDuration,this.pathNameNext,this.breakoutChance,"trance",250)}getSilence(){return Kl(this.tranceDuration,"silence")}onSell(){for(let c=0;c<ot.pathsToGenerate.length;c++)if(ot.pathsToGenerate[c].name===this.pathName){ot.pathsToGenerate.splice(c,1);return}}}const eu=A=>new Jl(A.pos.x,A.pos.y,A.r,A.q,A.size,Zt.range,Zt.damage,Zt.projectileSpeed,Zt.cooldown,Zt.cost,{color:j.color(Zt.rgb),wall:!0,isTower:!0,type:A.type,data:A.data,projectileColor:Zt.noteColor,upgrades:{A:new Ce("A","Piercing Voice",300,"Song pierces through its target to the next.",c=>{c.projectilePierce+=1,c.extraProjectileLifespan+=.2},!0),B:new Ce("B","Tireless",550,"If you don't keep singing till you drop you'll never make it in showbizz. Lower cooldown",c=>{c.cooldown-=20},!0),C:new Ce("C","Entancing Song",400,"Increases the duration of the trance, and slightly decreases the chance heroes break out of the spell when damaged.",c=>{c.tranceDuraton+=100,c.breakoutChance-=1},!0),"A+":new Ce("A+","Optimize Acoustics",2100,"Siren magically changes the properties of the space around her to optimize its acoustics. It is honestly kind of a waste to use magic capable of changing physics on something like this, but at least it increases the amount of people who hear her song...",c=>{c.projectilePierce+=2,c.extraProjectileLifespan+=.3,c.range+=qe/2}),"B+":new Ce("B+","Endless Encores",1700,"Song after song, you'll never escape this concert. Even lower cooldown",c=>{c.cooldown-=20}),"C+":new Ce("C+","Unbreakable Obsession",2900,"A song so beautifull it takes ages to break free of its spell. That or a very hard blow to the head.",c=>{c.tranceDutaion+=150,c.breakoutChance-=1}),AB:new Ce("AB","Rock Song",666,"Not all Sirens are into that classical shit. Increases damage",c=>{c.damage+=10}),BC:new Ce("BC","Authority",2500,"My authority, you will respect it. Siren magically controls the entire area around her, increasing trance duration, lowering breakout chance, and making sure her song always reacher her target.",c=>{c.tranceDutaion+=100,c.breakoutChance-=.5}),CA:new Ce("CA","Crowd Pleaser",3600,"They want to hear, Siren wants to sing more songs, everyone gets what they want.",c=>{c.projectileNumber+=3}),"AB+":new Ce("AB+","Hard Rock",5200,"More rock. More range. More bleeding ears.",c=>{c.damage+=30,c.range+=qe,c.noteColor=As}),"BC+":new Ce("BC+","Placeholder",0,"Placeholder.",c=>{}),"CA+":new Ce("CA+","Sound Wave",6900,"Every song is like a sound wave. More projectiles, closer together, reaching further.",c=>{c.projectileNumber+=3,c.extraProjectileLifespan+=.2,c.extraProjectileAngle=j.PI/15}),"AB++":new Ce("AB++","Rock The World",6e3,"Siren rocks so hard her song reaches more people then ever. The song is so loud it ruptures eardrums all over, dealing more damage, but sadly breaking the trance, and deaf ears can't be charmed by other Sirens either.",c=>{c.projectilePierce+=1,c.projectileSize+=qe/3,c.extraProjectileLifespan+=.3,c.range+=qe/2,c.damage+=50,c.projectileNumber+=2,c.getTrance=()=>yi(0,c.pathNameNext,c.breakoutChance,"trance",500)}),"BC++":new Ce("BC++","Chorus",0,"Placeholder.",c=>{c.color=j.color(Xi)}),"CA++":new Ce("CA++","Echo Chamber",7750,"Songs echo around whenever they hit a hero. Look it's a magical song, its echos could work this way.",c=>{c.projectilePierce+=3,c.splitOnHit=!0})}}),gi=(A,c,T,e=0,b=j)=>{let y=T*.8,p=0;const n=T/50,h=(y-n)/100,f=(13/20*T-n)/100;b.push(),b.translate(A,c),b.rotate(e),b.stroke(Gt),b.strokeWeight(1),b.beginShape();for(let l=0;l<100;l++){const o=b.cos(p)*y,t=b.sin(p)*y;b.vertex(o,t),p+=b.PI/20,y-=h}for(let l=0;l<100;l++){const o=b.cos(p)*y,t=b.sin(p)*y;b.vertex(o,t),p-=b.PI/20,y+=f}b.endShape(),b.triangle(T*6/10,T/10,T*8/10,T/10,T*7/10,T*-1/5),b.pop()};class tu extends wr{constructor(c,T,e,b,y,p,n,h,a,f,l,o,t){super(c,T,e,b,y,p,n,h,a,f,l,t),this.burnUpTimer=o,this.lastWaveCheck=Ot.waveReader.currentWaveNumber}show(c=this.pos){j.push(),j.stroke(0),j.strokeWeight(2),j.fill(this.color),Xt(c.x,c.y,this.size),this.upgradesPurchased>3&&(j.strokeWeight(1),Xt(c.x,c.y,this.size-3),this.upgradesPurchased>7&&(j.stroke(0),Xt(c.x,c.y,this.size-6))),j.stroke(Gt),j.fill(qn),j.strokeWeight(1);let T=-j.PI/2;for(let e=0;e<j.min(this.burnUpTimer,10);e++){const b=this.pos.x+j.cos(T)*this.size*.7,y=this.pos.y+j.sin(T)*this.size*.7;ei(b,y,qe/10,5),T+=j.TWO_PI/10}this.showSymbol(c),this.shouldShowUltCooldown(),j.pop()}update(){return super.update(),this.lastWaveCheck!==Ot.waveReader.currentWaveNumber&&(this.lastWaveCheck=Ot.waveReader.currentWaveNumber,this.burnUpTimer--),this.burnUpTimer>0}onSell(){this.spendValue=0,Se.setBuilderTileType(this,pt.UNSTABLE)}}class ru extends Ar{constructor(c,T,e,b,y,p,n={}){var h;super(c,T,e,b,y,p,n),this.rockVertices=ri(b),this.pushForce=(h=n.pushForce)!=null?h:0,this.angle=0}show(){Ao(this.pos.x,this.pos.y,this.rockVertices,this.angle,this.color)}update(){return this.angle+=.01,super.update()}hit(c){if(this.pierce<=0||this.alreadyHitEnemyIds.includes(c.id))return;this.alreadyHitEnemyIds.push(c.id);const T=this.damage*(j.random()<this.critChance?this.critMultiplier:1)+this.extraDamageCalc(c);this.updateOriginUsageDataSingle(c,T),c.takeDamage(T),c.applyForce(this.vel.copy().setMag(this.pushForce));for(let e=0;e<this.statuses.length;e++)c.applyStatus(this.statuses[e]);this.extraActionOnHit({pos:this.pos,vel:this.vel,target:c}),this.pierce--}}const cr=Object.freeze({name:"Magma Wyrm",description:"The Magma Wyrm lives a turbulent life surrounded by lava. It dies soon after its birth when its enviroment can no longer sustain it and crumbles.",hotkey:"m",keycode:77,range:qe*5,cooldown:15,cost:100,damage:15,projectileSpeed:3,towerType:"LAVA",baseBurnUpDuration:2,rgb:pn,flameRgb:qn,showSymbol:(A,c,T={angle:0})=>{j.push(),j.fill(qn),gi(A.x,A.y,c),j.pop()}});class nu extends tu{constructor(c,T,e,b,y,p,n,h,a,f,l){super(c,T,e,b,y,cr.name,p,n,h,a,f,cr.baseBurnUpDuration,l),this.flameColor=cr.flameRgb,this.pushForce=0}showSymbol(c=this.pos){j.push(),j.fill(this.flameColor),gi(c.x,c.y,this.size,this.lastShotAngle),j.pop()}update(){return this.lastShotAngle-=.017,super.update()}baseShoot(c=0){const T=ct.Vector.fromAngle(c);T.setMag(this.projectileSpeed);const e=this.range/this.projectileSpeed,b=this.getMagmaBlobProjectile(T,e);ot.addProjectile(b)}shoot(){for(let c=0;c<this.projectileNumber;c++){const T=this.lastShotAngle+j.TWO_PI*(c/this.projectileNumber);this.baseShoot(T)}return!0}getMagmaBlobProjectile(c,T){return new ru(this,this.pos,c,this.projectileSize,this.getDamage(),T,{color:this.projectileColor,pierce:this.projectilePierce,critChance:this.critChance,critMultiplier:this.critMultiplier,statuses:this.getStatuses(),pushForce:this.pushForce})}getDamage(){return this.damage}getStatuses(){return[]}}const ou=A=>new nu(A.pos.x,A.pos.y,A.r,A.q,A.size,cr.range,cr.damage,cr.projectileSpeed,cr.cooldown,cr.cost,{color:j.color(cr.rgb),projectileColor:cr.flameRgb,wall:!0,isTower:!0,type:A.type,data:A.data,upgrades:{A:new Ce("A","Short Fuse",200,"The Wyrms anger about its unfair position in life heat up its shots, increasing damage.",c=>{c.burnUpTimer+=1,c.damage+=15},!0),B:new Ce("B","Stability",150,"The Wyrm embraces a stable lifestyle, decent job, happy family, little wyrm on the way. Pushes away the inevitable demise a bit.",c=>{c.burnUpTimer+=3},!0),C:new Ce("C","Vision",250,"Wyrm has a vision for the future, and whishes to share it with as many heroes as possible while it is still able.",c=>{c.burnUpTimer+=1,c.range+=qe},!0),"A+":new Ce("A+","Burning Hatred",500,"Wyrms hatred burns brighter than a thousand suns.",c=>{c.burnUpTimer+=1,c.damage+=20}),"B+":new Ce("B+","Controlled Entropy",800,"The wyrm masters entropic decay to delay the inevitable even longer.",c=>{c.burnUpTimer+=6}),"C+":new Ce("C+","Longing Gaze",400,"Wyrm wants to see as much of the world as possible before the end.",c=>{c.burnUpTimer+=1,c.range+=qe}),AB:new Ce("AB","Loniliness",450,"Wyrm pushes everyone away, unable to accept company in the face of its approaching doom.",c=>{c.pushForce+=2}),BC:new Ce("BC","The Other End",950,"More projectiles is better, just don't ask where they are coming from, seriously, don't.",c=>{c.burnUpTimer+=1,c.projectileNumber+=1}),CA:new Ce("CA","Placeholder",0,"Placeholder.",c=>{}),"AB+":new Ce("AB+","Placeholder",0,"Placeholder.",c=>{}),"BC+":new Ce("BC+","Dubble Or Nothing",1450,"Dubbles the amount of magma blobs fired.",c=>{c.burnUpTimer+=1,c.projectileNumber+=2}),"CA+":new Ce("CA+","Placeholder",0,"Placeholder.",c=>{}),"AB++":new Ce("AB++","Placeholder",0,"Placeholder.",c=>{}),"BC++":new Ce("BC++","Isolation",1800,"Keeps all away, awaiting the end in fiery solitude.",c=>{c.burnUpTimer+=1,c.projectileNumber+=6,c.projectilePierce+=2}),"CA++":new Ce("CA++","Placeholder",0,"Placeholder.",c=>{})}});var sr=(A=>(A[A.BARRIER=0]="BARRIER",A[A.ARCHER=1]="ARCHER",A[A.ARACHNE=2]="ARACHNE",A[A.PLAGUE=3]="PLAGUE",A[A.GRAVI=4]="GRAVI",A[A.KOBOLD=5]="KOBOLD",A[A.PYRO=6]="PYRO",A[A.DRAGON_HOARD=7]="DRAGON_HOARD",A[A.SIREN=8]="SIREN",A[A.MAGMA_WYRM=9]="MAGMA_WYRM",A))(sr||{});const Mr={[0]:Ur,[1]:Nr,[2]:zt,[3]:ar,[4]:ir,[5]:$t,[6]:Rt,[7]:tr,[8]:Zt,[9]:cr};class su{constructor(){}static getTower(c,T){switch(typeof c=="string"?parseInt(c):c){case sr.BARRIER:return js(T);case sr.ARCHER:return nl(T);case sr.ARACHNE:return Ja(T);case sr.PLAGUE:return ml(T);case sr.GRAVI:return sl(T);case sr.KOBOLD:return wl(T);case sr.PYRO:return Yl(T);case sr.DRAGON_HOARD:return Zl(T);case sr.SIREN:return eu(T);case sr.MAGMA_WYRM:return ou(T);default:console.log("Wrong input");break}return js(T)}}class Po extends kn{constructor(c,T,e,b,y,p,n={}){super(c,T,e,b,y,{color:j.color($n),...n}),this.maxHp=p,this.hp=p}show(){j.push(),j.stroke(10),j.strokeWeight(2),j.fill(this.color),Xt(this.pos.x,this.pos.y,this.size),Xt(this.pos.x,this.pos.y,this.size-5),Xt(this.pos.x,this.pos.y,this.size-10),j.pop()}update(){return!0}}class iu{constructor(c,T={}){var e,b,y;this.maxHp=c,this.hp=c,this.gold=1500,this.color=(e=T.color)!=null?e:j.color($n),this.menuColor=(b=T.menuColor)!=null?b:j.color(la),this.hexSize=(y=T.hexSize)!=null?y:qe,this.bases=[],this.towers=[],this.selectedTower=null,this.selectedUpgrade=null,this.projectiles=[],this.visualEffects=[],this.minions=[],this.returnOnSale=.9,this.pathsToGenerate=[],this.currentSeed="",this.accumulatedXp=0}show(){const c=j.width*.75,T=j.width-c,e=T/100,b=j.height/100,y=b*15;if(j.height-y,j.strokeWeight(this.hexSize/12),j.fill(this.menuColor),j.stroke(Gt),j.rect(c,0,T,j.height),j.line(c,y,j.width,y),j.textSize(this.hexSize*1.5),j.fill(0),j.text(`${this.gold}`,c+e*10,b*8),j.text(`${this.hp}`,c+e*60,b*8),j.fill(gn),vn(c+e*40,b*8-this.hexSize*.5,this.hexSize*.8),xa(c+e*90,b*8-this.hexSize*.5,this.hexSize*1.4),this.selectedTower)this.showSelectedTower();else{j.textSize(this.hexSize*1.2);for(const p in Mr){const n=parseInt(p),h=Mr[n],a=j.createVector(c+e*15,y+b*(8+8*n));j.strokeWeight(1),j.fill(h.rgb),Xt(a.x,a.y,this.hexSize*1.2),j.fill(0),j.strokeWeight(0),j.text(`${h.name}: ${h.cost} (${h.hotkey})`,a.x+e*10,a.y+this.hexSize/3),h.showSymbol(j.createVector(a.x,a.y),this.hexSize*1.2,{})}}}showSelectedTower(){if(!this.selectedTower)return;const c=j.width*(3/4),T=j.width-c,e=T/100,b=j.height/100,y=b*15,p=j.height-y;j.push(),this.selectedTower.showRange();const n=j.createVector(j.width-this.hexSize*2,y+this.hexSize*2),h=this.hexSize,a=j.createVector(c+T/2,y+p/4),f=y+p/2;j.fill(rr),wa(n.x+h/2,n.y-h/2,h,1),this.selectedTower.show(a),j.textSize(this.hexSize*.6),j.textAlign(j.CENTER,j.CENTER),j.strokeWeight(1);let l=0,o=0,t=this.hexSize*2;for(const r in this.selectedTower.upgrades){const s=this.selectedTower.upgrades[r],i=j.createVector(a.x+j.cos(o)*t,a.y+j.sin(o)*t);s.purchased?j.fill(Rs):s.available?j.fill(zi):j.fill(Wi),j.strokeWeight(1),this.selectedUpgrade===s&&j.strokeWeight(3),Xt(i.x,i.y,this.hexSize),j.fill(Gt),j.strokeWeight(1),j.text(r,i.x,i.y),o+=j.TWO_PI/3,l++,l%3===0&&(t+=this.hexSize*2,l===6&&(t-=this.hexSize*4,o+=j.PI/3))}if(j.strokeWeight(2),j.line(c,f,j.width,f),this.selectedUpgrade){const r=c+e*50;j.strokeWeight(1),j.textSize(this.hexSize*.8),j.text(`${this.selectedUpgrade.name}`,r,f+b*6),j.text(`Cost: ${this.selectedUpgrade.cost}`,r,f+b*12),j.rectMode(j.CENTER),j.text(`${this.selectedUpgrade.description}`,r,f+b*25,e*80,b*25)}j.pop()}update(){return!0}generateAllNeccesaryPaths(){Se.generateAllPathsThroughFloodFill(Ot.spawners,this.bases);for(const c of this.pathsToGenerate)Se.generateAllPathsThroughFloodFill(Ot.spawners,c.origin,!1,c.name,c.waterCost,c.stopAfter)}placeTower(c,T,e){const b=Mr[c];let y="canTower";if(b.towerType==="WATER"&&(y="canWaterTower"),b.towerType==="LAVA"&&(y="canLavaTower"),T.isTower||!T[y])return!1;this.addXpToCurrentTowers(e);const p=su.getTower(c,T);return this.towers.push(p),Se.addTowerToGrid(p),this.gold-=b.cost,this.generateAllNeccesaryPaths(),!0}sellTower(c,T){if(!c.isTower)return!1;this.addXpToCurrentTowers(T);for(let e=this.towers.length-1;e>=0;e--)this.towers[e].r===c.r&&this.towers[e].q===c.q&&(this.towers[e].onSell(),this.gold+=this.towers[e].spendValue*this.returnOnSale,this.towers.splice(e,1));return Se.removeTowerFromGrid(c),!0}selectTower(c){this.selectedUpgrade=null,this.selectedTower=c}deSelectTower(){this.selectedTower=null,this.selectedUpgrade=null}clickUpgrade(c=!1){if(!this.selectedTower)return;const T=j.width*(3/4),e=j.width-T,y=j.height/100*15,p=j.height-y,n=j.createVector(T+e/2,y+p/4);let h=0,a=0,f=this.hexSize*2;for(const l in this.selectedTower.upgrades){const o=this.selectedTower.upgrades[l],t=j.createVector(n.x+j.cos(a)*f,n.y+j.sin(a)*f);Nt(j.createVector(j.mouseX,j.mouseY),t)<this.hexSize*this.hexSize&&(this.selectedUpgrade=o,c&&this.gold>=o.cost&&!o.purchased&&o.available&&(this.selectedTower.purchaseUpgrade(o),this.gold-=o.cost)),a+=j.TWO_PI/3,h++,h%3===0&&(f+=this.hexSize*2,h===6&&(f-=this.hexSize*4,a+=j.PI/3))}}updateTowers(c){for(const T of this.towers)T.update()||this.sellTower(Se.grid[T.r][T.q],c)}addProjectile(c){this.projectiles.push(c)}updateProjectiles(){for(let c=this.projectiles.length-1;c>=0;c--)this.projectiles[c].update()&&this.projectiles.splice(c,1)}showProjectiles(){for(let c=this.projectiles.length-1;c>=0;c--)this.projectiles[c].show()}addMinion(c){this.minions.push(c)}updateMinions(){for(let c=this.minions.length-1;c>=0;c--)this.minions[c].update()&&this.minions.splice(c,1);Xn.emptyQuadTree();for(let c=this.minions.length-1;c>=0;c--)Xn.insert(new Xs(this.minions[c].pos,this.minions[c]))}showMinions(){for(let c=this.minions.length-1;c>=0;c--)this.minions[c].show()}addVisual(c){this.visualEffects.push(c)}updateAndShowVisuals(){for(let c=this.visualEffects.length-1;c>=0;c--)if(this.visualEffects[c].update()){const e=this.visualEffects[c].onExpire();this.visualEffects.splice(c,1),e&&this.addVisual(e)}}onlyShowVisuals(){for(let c=this.visualEffects.length-1;c>=0;c--)this.visualEffects[c].show(this.visualEffects[c])}addBaseToMaou(c){this.bases.push(c)}unitReachedBase(c,T){const e=T.getHexVectorFromXY(c.pos.x,c.pos.y);return T.hexInArray(T.grid[e.x][e.y],this.bases)?(this.hp-=c.damage,!0):!1}unitDied(c){this.gold+=c.goldValue,this.accumulatedXp+=c.maxHp}addXpToCurrentTowers(c){c.addXp(this.accumulatedXp,this.towers),this.accumulatedXp=0}}const ot=new iu(500);class br{constructor(c,T,e,b,y,p=qe,n=j.color(nn),h=j.color(Gt),a=j.CENTER){this.pos=c,this.width=T,this.height=e,this.text=b,this.onClick=y,this.textSize=p,this.buttonColor=n,this.textColor=h,this.mode=a}show(c=j){c.push(),c.strokeWeight(1),c.fill(this.buttonColor),c.rectMode(this.mode),c.rect(this.pos.x,this.pos.y,this.width,this.height),c.strokeWeight(0),c.textSize(this.textSize),c.textAlign(j.CENTER,j.CENTER),c.fill(this.textColor),c.text(`${this.text}`,this.pos.x,this.pos.y,this.width,this.height),c.pop()}clicked(){return j.mouseX>this.pos.x-this.width/2&&j.mouseX<this.pos.x+this.width/2&&j.mouseY>this.pos.y-this.height/2&&j.mouseY<this.pos.y+this.height/2}}let Oo=[];const au=()=>{Oo.push(new br(j.createVector(j.width*(1/11),j.height*(16/17)),j.width*(1/6),j.height*(1/10),"Save map",()=>{const A=fu();if(A!==!0){alert(A);return}const c=prompt("What should this map be called?","Nameless here forever more"),T={name:c,map:Se.generateJsonableMap()};j.saveJSON(T,`${c}.json`,!0)},qe*2,j.color(yn))),j.draw=()=>lu(),j.mousePressed=()=>uu(),j.doubleClicked=()=>cu(),j.keyPressed=A=>du()},lu=()=>{j.background(nn),j.strokeWeight(1),Se.show(),Se.showDebug(),hu();for(const c of Oo)c.show();const A=Se.getHexVectorFromXY(j.mouseX,j.mouseY);for(const c in Wr){const T=Wr[c],e=T.isBase||T.isSpawn?0:1;if(j.keyIsDown(T.keycode)&&Se.rqVectorIsOnGrid(A,e)){const b=Se.grid[A.x][A.y];j.push(),j.fill([...T.rgb,100]),j.strokeWeight(2),Xt(b.pos.x,b.pos.y,Se.hexSize),j.pop()}}},uu=()=>{for(const c of Oo)c.clicked()&&c.onClick();const A=Se.getHexVectorFromXY(j.mouseX,j.mouseY);for(const c in Wr){const T=Wr[c],e=T.buildInOuterRing?0:1;if(j.keyIsDown(T.keycode)&&Se.rqVectorIsOnGrid(A,e)){const b=Se.grid[A.x][A.y];Se.setBuilderTileType(b,parseInt(c));return}}},cu=()=>{},du=A=>{},hu=()=>{const A=j.width*.8,c=j.width-A,T=c/100,e=j.height/100,b=e*5;j.strokeWeight(qe/12),j.fill(Fs),j.stroke(Gt),j.rect(A,0,c,j.height),j.textSize(qe*1.2);for(const y in Wr){const p=parseInt(y),n=Wr[p],h=j.createVector(A+T*25,b+e*(8+10*p));j.strokeWeight(1),j.fill(n.rgb),Xt(h.x,h.y,qe*1.2),j.fill(0),j.strokeWeight(0),j.text(`${n.name}: ${n.hotkey}`,h.x+T*10,h.y+qe/3)}},fu=()=>{const A=[],c=[];for(const e of Se.grid)for(const b of e)b.type===pt.SPAWN&&c.push(b),b.type===pt.BASE&&A.push(b);return A.length<1||c.length<1?"You need at least one base and one spawn":A.length>6||c.length>6?"Too many bases or spawns":pu(c,A)?!0:"Not all spawns can reach a base"},pu=(A,c)=>{Se.resetData(),Se.addAllTeleports();for(const T of A){let e=!1,b;const y=[T],p=[];for(;y.length>0;){if(b=y[0],Se.hexInArray(b,c)||b.data.flooded){e=!0;break}const n=Se.getNeighbors(b.r,b.q,!0);for(const h of n)Se.hexInArray(h,[...p,...y])||!h.canUnit||y.push(h);y.splice(0,1),p.push(b),b.data.flooded=!0}if(!e)return!1}return!0},mu={name:"Lake Base",map:[[0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[0,0,0,0,0,0,0,0,0,3,0,0,0,4,4,4,4,4,4,4,4,4,4,0,0,0,3],[0,0,0,0,0,0,0,0,3,0,0,0,4,4,4,4,4,4,4,4,4,4,4,0,0,0,3],[0,0,0,0,0,0,0,3,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,3],[0,0,0,0,0,0,3,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,3],[0,0,0,0,0,3,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,3],[0,0,0,0,3,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,3],[0,0,0,3,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,3],[0,0,3,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,1,0,0,0,3],[0,3,0,0,0,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,1,0,0,0,0,3],[6,0,0,0,4,4,4,4,4,4,4,4,4,7,0,0,0,0,0,0,0,1,0,0,0,0,3],[3,0,0,0,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,1,0,0,0,0,3,0],[3,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,1,0,0,0,3,0,0],[3,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,3,0,0,0],[3,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,3,0,0,0,0],[3,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,3,0,0,0,0,0],[3,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,3,0,0,0,0,0,0],[3,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,3,0,0,0,0,0,0,0],[3,0,0,0,4,4,4,4,4,4,4,4,4,4,4,0,0,0,3,0,0,0,0,0,0,0,0],[3,0,0,0,4,4,4,4,4,4,4,4,4,4,0,0,0,3,0,0,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0]]},yu={name:"Lakes Race",map:[[0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,1,1,1,0,0,0,0,0,3],[0,0,0,0,0,0,0,0,0,0,0,3,0,4,0,0,0,0,1,1,0,0,0,0,4,0,3],[0,0,0,0,0,0,0,0,0,0,3,0,4,4,0,0,1,0,1,0,1,0,0,4,4,0,3],[0,0,0,0,0,0,0,0,0,3,0,4,4,4,0,1,0,0,0,0,1,0,4,4,4,0,3],[0,0,0,0,0,0,0,0,3,0,0,4,4,0,1,0,0,0,0,0,1,0,4,4,0,0,3],[0,0,0,0,0,0,0,3,0,0,0,4,0,1,0,4,4,4,4,0,1,0,4,0,0,0,3],[0,0,0,0,0,0,3,0,1,0,0,0,1,0,4,4,4,4,4,0,1,0,0,0,1,0,3],[0,0,0,0,0,3,0,0,1,0,0,1,0,4,4,4,4,4,4,0,1,0,0,1,0,0,3],[0,0,0,0,3,0,0,0,1,0,1,0,0,4,4,4,4,4,0,0,1,0,1,0,0,0,3],[0,0,0,3,0,0,0,0,1,0,0,0,0,4,4,4,4,0,0,0,0,1,0,0,0,0,3],[0,0,3,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,3],[0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7],[3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3],[6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,0],[3,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,3,0,0],[3,0,0,0,0,1,0,0,0,0,4,4,4,4,0,0,0,0,1,0,0,0,0,3,0,0,0],[3,0,0,0,1,0,1,0,0,4,4,4,4,4,0,0,1,0,1,0,0,0,3,0,0,0,0],[3,0,0,1,0,0,1,0,4,4,4,4,4,4,0,1,0,0,1,0,0,3,0,0,0,0,0],[3,0,1,0,0,0,1,0,4,4,4,4,4,0,1,0,0,0,1,0,3,0,0,0,0,0,0],[3,0,0,0,4,0,1,0,4,4,4,4,0,1,0,4,0,0,0,3,0,0,0,0,0,0,0],[3,0,0,4,4,0,1,0,0,0,0,0,1,0,4,4,0,0,3,0,0,0,0,0,0,0,0],[3,0,4,4,4,0,1,0,0,0,0,1,0,4,4,4,0,3,0,0,0,0,0,0,0,0,0],[3,0,4,4,0,0,1,0,1,0,1,0,0,4,4,0,3,0,0,0,0,0,0,0,0,0,0],[3,0,4,0,0,0,0,1,1,0,0,0,0,4,0,3,0,0,0,0,0,0,0,0,0,0,0],[3,0,0,0,0,0,1,1,1,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0]]},gu={name:"The Wheel",map:[[0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[0,0,0,0,0,0,0,0,0,0,0,3,0,1,0,1,1,1,1,1,1,1,1,0,1,0,3],[0,0,0,0,0,0,0,0,0,0,3,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,3],[0,0,0,0,0,0,0,0,0,3,0,1,0,1,0,0,0,0,0,0,0,0,1,0,1,0,3],[0,0,0,0,0,0,0,0,3,0,1,0,0,1,0,0,4,4,4,0,0,1,0,0,1,0,3],[0,0,0,0,0,0,0,3,0,1,0,0,0,1,0,0,4,4,0,0,1,0,0,0,1,0,3],[0,0,0,0,0,0,3,0,1,0,0,0,0,1,0,0,4,0,0,1,0,0,0,0,1,0,3],[0,0,0,0,0,3,0,1,0,0,4,0,0,1,0,0,0,0,1,0,0,4,0,0,1,0,3],[0,0,0,0,3,0,1,0,0,4,4,0,0,1,0,0,0,1,0,0,4,4,0,0,1,0,3],[0,0,0,3,0,1,0,0,4,4,4,0,0,1,0,0,1,0,0,4,4,4,0,0,1,0,3],[0,0,3,0,1,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,1,0,3],[0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[6,0,1,1,1,1,1,1,1,1,1,1,0,7,0,1,1,1,1,1,1,1,1,1,1,0,3],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0],[3,0,1,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,1,0,3,0,0],[3,0,1,0,0,4,4,4,0,0,1,0,0,1,0,0,4,4,4,0,0,1,0,3,0,0,0],[3,0,1,0,0,4,4,0,0,1,0,0,0,1,0,0,4,4,0,0,1,0,3,0,0,0,0],[3,0,1,0,0,4,0,0,1,0,0,0,0,1,0,0,4,0,0,1,0,3,0,0,0,0,0],[3,0,1,0,0,0,0,1,0,0,4,0,0,1,0,0,0,0,1,0,3,0,0,0,0,0,0],[3,0,1,0,0,0,1,0,0,4,4,0,0,1,0,0,0,1,0,3,0,0,0,0,0,0,0],[3,0,1,0,0,1,0,0,4,4,4,0,0,1,0,0,1,0,3,0,0,0,0,0,0,0,0],[3,0,1,0,1,0,0,0,0,0,0,0,0,1,0,1,0,3,0,0,0,0,0,0,0,0,0],[3,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,3,0,0,0,0,0,0,0,0,0,0],[3,0,1,0,1,1,1,1,1,1,1,1,0,1,0,3,0,0,0,0,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0]]},vu={name:"Time Moves Ever Onward",map:[[0,0,0,0,0,0,0,0,0,0,0,0,0,6,3,3,3,3,3,3,3,3,3,3,3,3,6],[0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,1,0,0,0,0,0,0,3],[0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3],[0,0,0,0,0,0,0,0,0,0,3,4,3,0,0,0,0,0,1,0,0,0,0,0,3,4,3],[0,0,0,0,0,0,0,0,0,3,4,4,3,0,0,0,0,0,0,0,0,0,0,3,4,4,3],[0,0,0,0,0,0,0,0,3,4,4,4,3,0,0,0,0,1,0,0,0,0,3,4,4,4,3],[0,0,0,0,0,0,0,3,4,4,4,4,3,0,0,0,0,0,0,0,0,3,4,4,4,4,3],[0,0,0,0,0,0,3,4,4,4,4,4,3,0,0,0,1,0,0,0,3,4,4,4,4,4,3],[0,0,0,0,0,3,4,4,4,4,4,4,3,0,0,0,0,0,0,3,4,4,4,4,4,4,3],[0,0,0,0,3,4,4,4,4,4,4,4,3,0,0,1,0,0,3,4,4,4,4,4,4,4,3],[0,0,0,3,4,4,4,4,4,4,4,4,3,0,0,0,0,3,4,4,4,4,4,4,4,4,3],[0,0,3,4,1,1,1,4,1,1,1,4,3,0,1,0,3,4,1,1,1,4,1,1,1,4,3],[0,3,4,1,4,4,4,1,4,4,1,4,3,0,0,3,4,1,4,4,1,4,4,4,1,4,3],[3,4,1,4,4,4,1,4,4,4,1,4,3,2,3,4,1,4,4,4,1,4,4,4,1,4,3],[3,4,1,4,4,1,4,4,4,1,4,3,0,0,3,4,1,4,4,4,1,4,4,1,4,3,0],[3,4,1,1,1,4,1,1,1,4,3,0,1,0,3,4,1,1,1,4,1,1,1,4,3,0,0],[3,4,4,4,4,4,4,4,4,3,0,0,0,0,3,4,4,4,4,4,4,4,4,3,0,0,0],[3,4,4,4,4,4,4,4,3,0,0,1,0,0,3,4,4,4,4,4,4,4,3,0,0,0,0],[3,4,4,4,4,4,4,3,0,0,0,0,0,0,3,4,4,4,4,4,4,3,0,0,0,0,0],[3,4,4,4,4,4,3,0,0,0,1,0,0,0,3,4,4,4,4,4,3,0,0,0,0,0,0],[3,4,4,4,4,3,0,0,0,0,0,0,0,0,3,4,4,4,4,3,0,0,0,0,0,0,0],[3,4,4,4,3,0,0,0,0,1,0,0,0,0,3,4,4,4,3,0,0,0,0,0,0,0,0],[3,4,4,3,0,0,0,0,0,0,0,0,0,0,3,4,4,3,0,0,0,0,0,0,0,0,0],[3,4,3,0,0,0,0,0,1,0,0,0,0,0,3,4,3,0,0,0,0,0,0,0,0,0,0],[3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,7,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0]]},bu={name:"Hillside Flowers",map:[[0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[0,0,0,0,0,0,0,0,0,0,0,0,3,2,0,0,0,0,0,0,0,0,0,0,0,2,3],[0,0,0,0,0,0,0,0,0,0,0,3,0,2,2,0,0,0,0,0,0,0,0,2,2,0,3],[0,0,0,0,0,0,0,0,0,0,3,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,3],[0,0,0,0,0,0,0,0,0,3,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,3],[0,0,0,0,0,0,0,0,3,0,0,0,2,0,0,0,0,0,0,0,0,0,2,0,1,0,3],[0,0,0,0,0,0,0,3,0,0,0,0,2,5,5,0,0,0,0,5,5,2,0,1,0,0,3],[0,0,0,0,0,0,3,0,0,0,0,0,5,7,5,0,0,0,5,7,5,0,1,0,0,0,3],[0,0,0,0,0,3,0,0,0,0,0,0,5,5,0,0,0,0,5,5,0,1,0,0,0,0,3],[0,0,0,0,3,0,0,0,0,0,1,0,1,0,1,1,1,1,0,0,1,0,0,0,0,0,3],[0,0,0,3,0,0,0,0,0,1,0,1,0,1,0,0,0,1,0,1,0,0,0,0,0,0,3],[0,0,3,0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0,0,0,0,0,0,0,3],[0,3,0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,5,5,0,0,0,2,2,0,3],[6,0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,5,7,2,0,0,2,0,2,2,3],[3,0,0,0,0,0,1,0,1,0,1,0,1,0,0,1,0,5,5,2,0,2,0,0,0,3,0],[3,0,0,0,0,0,1,0,1,0,1,0,1,1,1,0,0,0,0,2,2,0,0,0,3,0,0],[3,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0],[3,0,0,0,0,0,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,3,0,0,0,0],[3,0,0,0,0,0,0,5,5,0,0,0,0,5,5,0,0,0,0,0,0,3,0,0,0,0,0],[3,0,0,0,0,0,5,7,5,0,0,0,5,7,5,0,0,0,0,0,3,0,0,0,0,0,0],[3,0,0,0,0,2,5,5,0,0,0,0,5,5,2,0,0,0,0,3,0,0,0,0,0,0,0],[3,0,0,0,2,0,0,0,0,0,0,0,0,0,2,0,0,0,3,0,0,0,0,0,0,0,0],[3,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,3,0,0,0,0,0,0,0,0,0],[3,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,3,0,0,0,0,0,0,0,0,0,0],[3,0,2,2,0,0,0,0,0,0,0,0,2,2,0,3,0,0,0,0,0,0,0,0,0,0,0],[3,2,0,0,0,0,0,0,0,0,0,0,0,2,3,0,0,0,0,0,0,0,0,0,0,0,0],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0]]},wu={name:"Big Nope",map:[[0,0,0,0,0,0,0,0,0,0,0,0,0,6,3,3,3,3,3,3,3,3,3,3,3,3,6],[0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[0,0,0,0,0,0,0,0,0,3,0,0,0,1,1,1,0,0,0,0,1,1,1,0,0,0,3],[0,0,0,0,0,0,0,0,3,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,3],[0,0,0,0,0,0,0,3,0,0,0,1,0,7,2,0,0,0,0,2,7,0,1,0,0,0,3],[0,0,0,0,0,0,3,0,0,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,0,0,3],[0,0,0,0,0,3,0,0,0,0,0,0,0,5,5,5,5,5,5,0,0,0,0,0,0,0,3],[0,0,0,0,3,0,0,0,0,0,0,0,5,0,0,0,0,0,5,0,0,0,0,0,0,0,3],[0,0,0,3,0,0,0,0,0,0,0,5,0,4,4,4,4,0,5,0,0,0,0,0,0,0,3],[0,0,3,0,0,0,1,0,0,0,5,0,4,4,4,4,4,0,5,0,0,0,1,0,0,0,3],[0,3,0,0,0,1,0,2,0,5,0,4,4,0,0,4,4,0,5,0,2,0,1,0,0,0,3],[6,0,0,0,1,0,7,0,5,0,4,4,0,1,0,4,4,0,5,0,7,0,1,0,0,0,6],[3,0,0,0,1,0,2,0,5,0,4,4,0,0,4,4,0,5,0,2,0,1,0,0,0,3,0],[3,0,0,0,1,0,0,0,5,0,4,4,4,4,4,0,5,0,0,0,1,0,0,0,3,0,0],[3,0,0,0,0,0,0,0,5,0,4,4,4,4,0,5,0,0,0,0,0,0,0,3,0,0,0],[3,0,0,0,0,0,0,0,5,0,0,0,0,0,5,0,0,0,0,0,0,0,3,0,0,0,0],[3,0,0,0,0,0,0,0,5,5,5,5,5,5,0,0,0,0,0,0,0,3,0,0,0,0,0],[3,0,0,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,0,0,3,0,0,0,0,0,0],[3,0,0,0,1,0,7,2,0,0,0,0,2,7,0,1,0,0,0,3,0,0,0,0,0,0,0],[3,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,3,0,0,0,0,0,0,0,0],[3,0,0,0,1,1,1,0,0,0,0,1,1,1,0,0,0,3,0,0,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0],[6,3,3,3,3,3,3,3,3,3,3,3,3,6,0,0,0,0,0,0,0,0,0,0,0,0,0]]},xu={name:"Cross Over",map:[[0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,6,3,3],[0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[0,0,0,0,0,0,0,0,0,0,0,3,0,0,4,4,4,4,4,4,4,0,0,0,0,0,3],[0,0,0,0,0,0,0,0,0,0,3,1,0,0,4,4,4,4,4,4,0,0,0,0,0,1,3],[0,0,0,0,0,0,0,0,0,3,0,1,0,0,4,4,4,4,4,0,1,0,0,0,1,0,3],[0,0,0,0,0,0,0,0,3,0,0,1,0,0,4,4,4,4,0,1,0,1,0,1,0,0,3],[0,0,0,0,0,0,0,3,0,1,0,1,0,0,4,4,4,0,1,0,1,0,1,0,0,0,3],[0,0,0,0,0,0,3,0,0,0,0,1,0,0,4,4,0,0,0,1,0,1,0,4,4,0,3],[0,0,0,0,0,3,0,1,0,1,0,1,0,0,4,0,0,0,0,0,1,0,4,0,4,0,3],[0,0,0,0,3,0,0,0,0,0,0,1,0,0,0,0,1,0,0,1,0,4,0,0,4,0,3],[0,0,0,3,0,1,0,1,0,1,0,1,0,0,0,1,0,0,1,0,4,0,4,0,4,0,3],[0,0,3,0,0,0,0,0,0,0,0,1,0,0,1,0,0,1,0,4,0,4,4,0,4,0,3],[0,3,0,1,0,1,0,1,0,1,0,1,0,0,0,0,1,0,4,0,4,0,4,0,4,0,3],[6,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,4,0,0,4,0,0,0,7],[3,1,0,1,0,1,0,1,0,1,0,1,0,0,1,0,0,4,4,0,0,0,4,4,0,3,0],[3,0,0,0,0,0,0,0,0,0,0,1,8,1,0,0,0,0,0,0,0,0,0,0,3,0,0],[3,1,0,1,0,1,0,1,0,0,0,1,1,0,4,0,0,4,4,0,0,0,0,3,0,0,0],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,4,0,4,0,0,0,3,0,0,0,0],[3,1,0,1,0,1,0,0,0,0,1,1,0,0,4,4,0,0,4,0,0,3,0,0,0,0,0],[3,0,0,0,0,0,0,0,0,1,8,1,0,0,0,0,0,0,4,0,3,0,0,0,0,0,0],[3,1,0,1,0,0,0,0,1,0,0,1,0,4,4,4,0,4,0,3,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,4,0,3,0,0,0,0,0,0,0,0],[3,1,0,0,0,0,1,0,0,0,0,1,0,0,0,4,0,3,0,0,0,0,0,0,0,0,0],[3,0,5,5,0,1,0,0,0,0,0,1,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0],[3,5,5,5,1,0,0,0,0,0,0,1,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0],[3,5,5,1,0,0,0,0,0,0,0,1,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0],[3,3,3,3,3,7,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0]]},_u={name:"Island Temple",map:[[0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[0,0,0,0,0,0,0,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,0,4,4,3],[0,0,0,0,0,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,4,4,0,4,4,3],[0,0,0,0,3,4,0,0,0,0,0,0,0,0,0,0,0,0,0,4,3,4,4,0,4,4,3],[0,0,0,3,4,0,0,0,1,0,1,1,1,1,0,1,0,0,0,4,3,4,4,0,4,4,3],[0,0,3,4,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,4,3,4,4,0,4,4,3],[0,3,4,5,5,5,5,1,0,0,0,0,0,0,1,0,0,0,0,4,3,4,4,8,4,4,3],[3,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,4,3,4,4,5,4,4,3],[3,4,5,5,5,5,1,0,0,0,0,0,0,1,0,0,0,0,4,3,4,4,8,4,4,3,0],[3,4,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,4,3,4,4,0,4,4,3,0,0],[3,4,0,0,0,1,0,1,1,1,1,0,1,0,0,0,4,3,4,4,0,4,4,3,0,0,0],[3,4,0,0,0,0,0,0,0,0,0,0,0,0,0,4,3,4,4,0,4,4,3,0,0,0,0],[3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,4,4,0,4,4,3,0,0,0,0,0],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,0,4,4,3,0,0,0,0,0,0],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0],[6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0]]},Su={name:"Whirlpool",map:[[0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3],[0,0,0,0,0,0,0,0,0,0,0,3,0,1,1,1,1,1,1,1,1,1,1,1,1,0,3],[0,0,0,0,0,0,0,0,0,0,3,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,3],[0,0,0,0,0,0,0,0,0,3,0,1,0,4,4,4,4,4,4,4,4,4,4,0,1,0,3],[0,0,0,0,0,0,0,0,3,0,1,0,4,0,0,0,0,0,0,0,0,0,4,0,1,0,3],[0,0,0,0,0,0,0,3,0,1,0,4,0,1,1,1,1,1,1,1,1,0,4,0,1,0,3],[0,0,0,0,0,0,3,0,1,0,4,0,1,0,0,0,0,0,0,0,1,0,4,0,1,0,3],[0,0,0,0,0,3,0,1,0,4,0,1,0,4,4,4,4,4,4,0,1,0,4,0,1,0,3],[0,0,0,0,3,0,1,0,4,0,1,0,4,0,0,0,0,0,4,0,1,0,4,0,1,0,3],[0,0,0,3,0,1,0,4,0,1,0,4,0,1,1,1,1,0,4,0,1,0,4,0,1,0,3],[0,0,3,0,1,0,4,0,1,0,4,0,1,5,0,0,1,0,4,0,1,0,4,0,1,0,3],[0,3,4,0,1,0,4,0,1,0,4,0,1,0,4,0,1,0,4,0,1,0,4,0,1,0,3],[7,0,4,0,1,0,4,0,1,0,4,0,1,0,4,0,1,0,4,0,1,0,4,0,1,0,6],[3,0,4,0,1,0,4,0,1,0,4,0,1,0,4,0,1,0,4,0,1,0,4,0,1,3,0],[3,0,4,0,1,0,4,0,1,0,4,0,0,5,4,0,1,0,4,0,1,0,4,0,3,0,0],[3,0,4,0,1,0,4,0,1,0,4,4,4,4,0,1,0,4,0,1,0,4,0,3,0,0,0],[3,0,4,0,1,0,4,0,1,0,0,0,0,0,1,0,4,0,1,0,4,0,3,0,0,0,0],[3,0,4,0,1,0,4,0,1,1,1,1,1,1,0,4,0,1,0,4,0,3,0,0,0,0,0],[3,0,4,0,1,0,4,0,0,0,0,0,0,0,4,0,1,0,4,0,3,0,0,0,0,0,0],[3,0,4,0,1,0,4,4,4,4,4,4,4,4,0,1,0,4,0,3,0,0,0,0,0,0,0],[3,0,4,0,1,0,0,0,0,0,0,0,0,0,1,0,4,0,3,0,0,0,0,0,0,0,0],[3,0,4,0,1,1,1,1,1,1,1,1,1,1,0,4,0,3,0,0,0,0,0,0,0,0,0],[3,0,4,0,0,0,0,0,0,0,0,0,0,0,4,0,3,0,0,0,0,0,0,0,0,0,0],[3,0,4,4,4,4,4,4,4,4,4,4,4,4,0,3,0,0,0,0,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0]]},ju={name:"Tri Hard",map:[[0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[0,0,0,0,0,0,0,0,0,0,0,0,3,3,4,0,0,0,0,6,0,0,0,0,0,3,3],[0,0,0,0,0,0,0,0,0,0,0,3,9,3,4,0,0,0,0,0,0,0,0,0,3,8,3],[0,0,0,0,0,0,0,0,0,0,3,0,3,4,4,4,4,0,0,0,0,0,0,0,3,0,3],[0,0,0,0,0,0,0,0,0,3,0,0,3,4,4,4,4,0,0,0,0,0,0,3,0,0,3],[0,0,0,0,0,0,0,0,3,0,0,3,0,4,4,4,0,0,0,5,0,0,0,3,0,0,3],[0,0,0,0,0,0,0,3,0,0,0,3,0,4,4,0,0,0,5,5,5,0,3,0,0,0,3],[0,0,0,0,0,0,3,0,0,0,3,0,0,0,0,0,0,0,5,5,5,0,3,0,0,0,3],[0,0,0,0,0,3,0,0,0,0,3,0,0,0,0,0,0,5,5,5,0,3,0,0,0,0,3],[0,0,0,0,3,0,0,5,5,3,0,1,1,1,1,1,0,0,0,0,0,3,4,4,0,0,3],[0,0,0,3,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,3],[0,0,3,5,5,5,0,0,3,0,0,0,1,1,0,0,1,1,0,0,3,0,0,4,4,4,3],[0,3,0,0,0,0,0,0,3,0,0,1,4,1,0,1,4,1,0,3,0,0,0,0,0,0,3],[3,0,0,5,5,5,5,3,0,0,0,1,1,0,0,1,1,0,0,3,4,4,4,4,0,0,3],[3,0,0,0,0,0,0,3,0,0,0,0,0,5,0,0,0,0,3,0,0,0,0,0,0,3,0],[3,5,5,5,0,0,3,0,0,0,0,0,0,5,0,0,0,0,3,0,0,4,4,4,3,0,0],[3,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,3,0,0,0],[3,0,0,5,5,3,0,0,0,0,1,0,1,0,0,0,0,3,4,4,0,0,3,0,0,0,0],[3,0,0,0,0,3,0,0,2,2,0,0,2,2,0,0,3,0,0,0,0,3,0,0,0,0,0],[3,0,0,0,3,0,0,0,1,2,7,2,1,0,0,0,3,0,0,0,3,0,0,0,0,0,0],[3,0,0,0,3,0,0,0,0,2,2,0,0,0,0,3,0,0,0,3,0,0,0,0,0,0,0],[3,0,0,3,0,0,0,0,1,0,1,0,0,0,0,3,0,0,3,0,0,0,0,0,0,0,0],[3,0,0,3,0,0,0,0,0,0,0,0,0,0,3,0,0,3,0,0,0,0,0,0,0,0,0],[3,0,3,0,0,0,0,0,0,0,0,0,0,0,3,0,3,0,0,0,0,0,0,0,0,0,0],[3,6,3,0,0,0,0,0,0,0,0,0,0,3,6,3,0,0,0,0,0,0,0,0,0,0,0],[3,3,9,0,0,0,0,0,0,0,0,0,8,3,3,0,0,0,0,0,0,0,0,0,0,0,0],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0]]},Tu=[mu,yu,gu,vu,bu,wu,xu,_u,Su,ju],vi=(A,c,T,e,b=j.random(mn),y=Se.wallRing,p=pt.HILL)=>{Lo(b,"A"),Se.resetData(),Se.addRandomWalls(100,p);const n=Se.grid[A][c];n.data={...n.data,prev:void 0,visited:!0},Se.setTileType(n,En.EMPTY);const h=Se.grid[T][e];Se.setTileType(h,En.EMPTY);let a=n;for(;a!==void 0;){const f=Se.getNeighbors(a.r,a.q);for(const t of f)t.data.visited=!0;const l=Se.getGrandNeighbors(a.r,a.q,y);for(let t=l.length-1;t>=0;t--)l[t].data.visited&&l.splice(t,1);const o=j.random(l);if(o===void 0){if(a=a.data.prev,a===void 0)return Se.resetData(),!0}else{o.data.visited=!0,Se.setTileType(o,En.EMPTY),o.data.prev=a;const t=j.createVector(a.r,a.q),r=o.r-a.r,s=o.q-a.q;if(j.abs(r)%2===0?t.x+=r/2:j.random()>.5&&(t.x+=r),j.abs(s)%2===0)t.y+=s/2;else{let d=0;j.random()>.5&&(d=s),t.y+=d,(a.r===t.x&&a.q===t.y||o.r===t.x&&o.q===t.y)&&(d===0?t.y+=s:t.y+=s*-1)}const i=Se.grid[t.x][t.y];Se.setTileType(i,En.EMPTY),a=o}}return!1},bi=(A,c,T,e,b=j.random(mn),y=pt.HILL,p=pt.EMPTY)=>{Lo(b,"B"),Se.addRandomWalls(5,pt.LAVA),Se.addRandomWalls(30,y),Se.addRandomWalls(20,pt.WATER);const n=Se.aStar(A,c,T,e);Se.breakWallsInArray(n,p),Se.resetData()},wi=(A=j.random(mn),c=void 0,T=pt.HILL)=>{Lo(A,"C"),Se.resetData(),Se.addRandomWalls(100,T);const e=Se.grid[Se.midR][Se.midQ];e.data={...e.data,prev:void 0,visited:!0};const b=new Po(Se.grid[e.r][e.q].pos.x,Se.grid[e.r][e.q].pos.y,e.r,e.q,qe,100);ot.addBaseToMaou(b),Se.addMaouBaseToGrid(b),Se.setBuilderTileType(e,pt.BASE);let y=e;const p=Se.getNeighborsArea(y.r,y.q,2);for(const t of p)Se.setBuilderTileType(t,pt.EMPTY);c===void 0&&(c=j.ceil(j.random(19,30)));let n=0,h=2,a=0,f=0;for(;y!==void 0&&n<c;){const t=j.random(Se.neighborVectorsRQ),r=j.round(j.random(4,10));let s=pt.EMPTY;j.random()<.3&&(s=j.random()<.2?pt.UNSTABLE:pt.WATER);let i=!1;for(let v=0;v<r;v++){const x=y.r+t.x,S=y.q+t.y;if(!Se.rqVectorIsOnGrid(j.createVector(x,S),Se.wallRing)||x===e.r&&S===e.q){i=!0,y=e;break}y=Se.grid[x][S],!(v<h)&&Se.setBuilderTileType(y,s)}if(i)continue;h=j.random()<.15?2:1;let d=pt.EMPTY;j.random()<.3?(d=j.random()<.3?pt.LAVA:pt.WATER,Se.setBuilderTileType(y,d)):j.random()<.2?j.random()<.5?Se.setBuilderTileType(y,pt.TELEPORTER_ONE):Se.setBuilderTileType(y,pt.TELEPORTER_TWO):Se.setBuilderTileType(y,d);const g=Se.getNeighborsArea(y.r,y.q,h);if(Se.hexInArray(e,g)){y=e;continue}for(const v of g)Se.setBuilderTileType(v,d);if(n++,n===c){const v=Se.getAllTiles();let x=0,S=0;for(const E of v)E.type===pt.EMPTY&&S++,E.type===pt.HILL&&x++;x>S&&n--}}const l=Se.getAllTiles();for(const t of l)t.type===pt.TELEPORTER_ONE&&a++,t.type===pt.TELEPORTER_TWO&&f++;if(a===1)for(;;){const t=j.random(l);if(!(t.type===pt.WALL||t.type===pt.BASE||t.isTeleporter)){Se.setBuilderTileType(t,pt.TELEPORTER_ONE);break}}if(f===1)for(;;){const t=j.random(l);if(!(t.type===pt.WALL||t.type===pt.BASE||t.isTeleporter)){Se.setBuilderTileType(t,pt.TELEPORTER_TWO);break}}Se.addAllTeleports();let o=!1;for(;!o;)for(let t=0;t<3;t++){const r=j.random(l),s=Se.aStar(r.r,r.q,e.r,e.q);if(s.length<8)continue;let i=!0;for(const d of s)if(!d.canUnit){i=!1;break}!i||(Ot.addSpawn(Se.grid[r.r][r.q].pos.x,Se.grid[r.r][r.q].pos.y,qe,{gridR:r.r,gridQ:r.q}),Ot.waveReader.setActiveSpawners(Ot.spawners),Se.addSpawnerToGrid(Ot.spawners[Ot.spawners.length-1]),Se.setBuilderTileType(r,pt.SPAWN),o=!0)}return!0},Lo=(A,c)=>{const T=j.floor(A);j.randomSeed(T),ot.currentSeed=`${c}${T}`,console.log(`${c}${T}`)};class Eu{constructor(c,T,e){this.username=c,this.password=T,this.email=e,this.level=1,this.levelUpExponent=2.1,this.levelUpScalar=1e3,this.xp=0,this.xpRequired=Math.pow(this.level,this.levelUpExponent)*this.levelUpScalar,this.towersData={};for(const b in Mr)this.towersData[Mr[b].name]={unlocked:!1,xp:0,upgradesUnlocked:[],mods:{1:null,2:null,3:null}}}addXp(c,T){this.xp+=c,this.xp>this.xpRequired&&this.levelUp();const e=c/T.length;for(const b of T)this.towersData[b.name].xp+=e}levelUp(){this.xp-=this.xpRequired,this.level++,this.xpRequired=Math.pow(this.level,this.levelUpExponent)*this.levelUpScalar,this.levelUpExponent+=.1}getXp(){return j.floor(this.xp)}getRequiredXp(){return j.ceil(this.xpRequired)}}const Cu=(A="Nameless",c="guest",T="tester@hotmail.com")=>(localStorage.getItem("user")&&console.log(JSON.parse(localStorage.getItem("user"))),new Eu(A,c,T)),Mu=A=>{localStorage.setItem("user",JSON.stringify(A))};let mo,fn=0,Yn=!1,Au=0,eo=[],yo=!0,Mn,xi=!0,dr;const _i=()=>{j.createCanvas(j.windowWidth,j.windowHeight),j.background(nn),dr=Cu(),console.log(dr),eo.push(new br(j.createVector(j.width/2,j.height*(2/16)),j.width/2,j.height*(1/10),"What map type would you like to play?",()=>{},qe*2,j.color(yn)),new br(j.createVector(j.width/2,j.height*(5/16)),j.width/2,j.height*(1/10),"Open",()=>{An(),Gr()},qe*2,j.color(Eo)),new br(j.createVector(j.width/2,j.height*(8/16)),j.width/2,j.height*(1/10),"Random maze: Pathways",()=>{vi(Se.rings,1,Se.rings,Se.rings*2-1,j.random(mn),1),An(),Gr()},qe*2,j.color(gn)),new br(j.createVector(j.width/2,j.height*(11/16)),j.width/2,j.height*(1/10),"Random maze: Caverns",()=>{bi(Se.rings,1,Se.rings,Se.rings*2-1,j.random(mn),pt.HILL),An(),Gr()},qe*2,j.color(Fs)),new br(j.createVector(j.width/2,j.height*(14/16)),j.width/2,j.height*(1/10),"Random maze: Chambers",()=>{wi(j.random(mn)),Gr()},qe*2,j.color(pn)),new br(j.createVector(j.width*(1/10),j.height*(2/14)),j.width*(2/15),j.height*(1/6),"Map Builder",()=>{au()},qe*2,j.color(pn)),new br(j.createVector(j.width*(9/10),j.height*(2/14)),j.width*(2/15),j.height*(1/6),"Map Loader",()=>{Se.buildMapFromJson(j.random(Tu).map,ot,Ot),Gr()},qe*2,j.color(pn)))},An=()=>{mo=new Po(Se.grid[Se.midR][Se.maxQ].pos.x,Se.grid[Se.midR][Se.maxQ].pos.y,Se.midR,Se.maxQ,qe,100),Se.addMaouBaseToGrid(mo),ot.addBaseToMaou(mo),Se.setBuilderTileType(Se.grid[Se.midR][Se.maxQ],pt.BASE),Ot.addSpawn(Se.grid[Se.midR][Se.minQ].pos.x,Se.grid[Se.midR][Se.minQ].pos.y,qe,{gridR:Se.midR,gridQ:Se.minQ}),Ot.waveReader.setActiveSpawners(Ot.spawners),Se.addSpawnerToGrid(Ot.spawners[Ot.spawners.length-1]),Se.setBuilderTileType(Se.grid[Se.midR][Se.minQ],pt.SPAWN)},Gr=()=>{eo=[],xi=!1,ot.gold=2e3,Se.generateAllPathsThroughFloodFill(Ot.spawners,ot.bases),j.draw=()=>ku()},Ru=()=>{for(const A of eo)A.show()},ku=()=>{j.background(nn),j.strokeWeight(1),va(10,j.height-50,20,fn,Yn),Se.show(),ot.show();for(let c=0;c<fn;c++){const T=Ot.updateAndShow();ot.updateTowers(dr),ot.updateProjectiles(),ot.showProjectiles(),ot.updateMinions(),ot.showMinions(),ot.updateAndShowVisuals(),T&&(ot.addXpToCurrentTowers(dr),Yn||(fn=0,yo=!0),Mu(dr))}if(fn===0&&(Ot.showUnits(),ot.showProjectiles(),ot.showMinions(),ot.onlyShowVisuals(),yo)){const c=Ot.waveReader.getMessage(),T=j.height*((c.length*qe*.5>j.width*(11/16)?2:1)/24);Mn=new br(j.createVector(j.width*(3/8),j.height*(7/8)),j.min(c.length*qe*.5,j.width*(11/16)),T,c,()=>{yo=!1},qe,j.color([...yn,200])),Mn.show()}Au+=j.frameRate(),j.fill(0),j.textSize(32),j.strokeWeight(qe/16),j.text(`Wave: ${Ot.waveReader.currentWaveNumber}`,50,50),j.textSize(16),j.strokeWeight(1),j.text(`Level: ${dr.level}`,30,75),j.text(`Xp: ${dr.getXp()}`,30,100),j.text(`Xp Required: ${dr.getRequiredXp()}`,30,125),j.text("Hold s to sell",j.width*(3/4)-130,20),j.text("Hold u to update",j.width*(3/4)-130,40),j.text(`Seed: ${ot.currentSeed}`,j.width*(3/4)-160,j.height-10),ot.hp<=0&&_i();const A=Se.getHexVectorFromXY(j.mouseX,j.mouseY);for(const c in Mr){const T=Mr[c];if(j.keyIsDown(T.keycode)&&ot.gold>=T.cost&&Se.rqVectorIsOnGrid(A,Se.wallRing)){const e=Se.grid[A.x][A.y];j.push(),j.fill([...T.rgb,100]),j.strokeWeight(3),Xt(e.pos.x,e.pos.y,Se.hexSize),T.range>0&&(T.range<10?j.circle(e.pos.x,e.pos.y,T.range*4*qe):j.circle(e.pos.x,e.pos.y,T.range*2)),j.pop()}}if(j.keyIsDown(83)&&Se.rqVectorIsOnGrid(A,Se.wallRing)&&Se.grid[A.x][A.y].isTower){const c=Se.grid[A.x][A.y];j.push(),j.fill([...gn,50]),j.strokeWeight(1),Xt(c.pos.x,c.pos.y,Se.hexSize),j.fill(gn),j.strokeWeight(2),vn(c.pos.x,c.pos.y,Se.hexSize*.6),j.pop()}if(j.keyIsDown(85)&&Se.rqVectorIsOnGrid(A,Se.wallRing)&&Se.grid[A.x][A.y].isTower){const c=Se.grid[A.x][A.y];Fa(c.usageData);let T=`
`;for(const p in c.usageData)T+=`${p}: ${c.usageData[p]}
`;const e=qe*16,b=qe*19;j.push(),new br(j.createVector(j.mouseX+e/2,j.mouseY+b/2),e,b,T,()=>{},qe,j.color([...yn,200])).show(),j.pop()}},Pu=()=>{for(const c of eo)c.clicked()&&c.onClick();Mn&&Mn.clicked()&&Mn.onClick();const A=Se.getHexVectorFromXY(j.mouseX,j.mouseY);for(const c in Mr){const T=Mr[c];if(j.keyIsDown(T.keycode)&&ot.gold>=T.cost&&Se.rqVectorIsOnGrid(A,Se.wallRing)){const e=Se.grid[A.x][A.y],b=e.wall;e.wall=!0;const y=e.canUnit;e.canUnit=!1;const p=e.canWaterUnit;e.canWaterUnit=!1,Se.generateAllPathsThroughFloodFill(Ot.spawners,ot.bases,!0)&&!e.isTower&&ot.placeTower(parseInt(c),e,dr)||(e.wall=b,e.canUnit=y,e.canWaterUnit=p);return}}if(j.keyIsDown(83)&&Se.rqVectorIsOnGrid(A,1)&&Se.grid[A.x][A.y].isTower){const c=Se.grid[A.x][A.y];ot.sellTower(c,dr),Se.generateAllPathsThroughFloodFill(Ot.spawners,ot.bases);return}if(Se.rqVectorIsOnGrid(A,Se.wallRing)&&Se.grid[A.x][A.y].isTower){ot.selectTower(Se.grid[A.x][A.y]);return}ot.clickUpgrade(j.keyIsDown(85)),[fn,Yn]=ba(fn,10,j.height-50,20,Yn),j.mouseX<j.width*(3/4)&&ot.deSelectTower()},Ou=()=>{console.log(dr);const A=Se.getHexVectorFromXY(j.mouseX,j.mouseY);if(Se.rqVectorIsOnGrid(A,Se.wallRing)&&Se.grid[A.x][A.y].isTower){Se.grid[A.x][A.y].castUlt();return}},Lu=A=>{if(!A.ctrlKey||!j.keyIsDown(67))return;if(xi){const T=prompt("Play a random map from a seed?","");if(!T)return;const e=parseInt(T.substring(1)),b=T.substring(0,1);b==="A"?(vi(Se.rings,1,Se.rings,Se.rings*2-1,e,1),An(),Gr()):b==="B"?(bi(Se.rings,1,Se.rings,Se.rings*2-1,e,pt.HILL),An(),Gr()):b==="C"&&(wi(e),Gr());return}const c=prompt("What cheat would you like to use? (money, lives, ult, wave:<number> aka wave:5)","");if(c==="money"&&(ot.gold+=1e5),c==="lives"&&(ot.hp+=1e5),c==="ult")for(const T of ot.towers)T.ultCurrentCooldown=0;if((c==null?void 0:c.substring(0,4))==="wave"){const T=parseInt(c.substring(5));!Number.isNaN(T)&&T<1e3&&(Ot.waveReader.currentWaveNumber=T)}};j.setup=()=>_i();j.draw=()=>Ru();j.mousePressed=()=>Pu();j.doubleClicked=()=>Ou();j.keyPressed=A=>Lu(A);
